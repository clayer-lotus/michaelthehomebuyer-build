(self.webpackChunkappName=self.webpackChunkappName||[]).push([[179],{306:(_i,gn,ut)=>{"use strict";var t=ut(256);let en=null;function Pt(){return en}class ge{}const Ee=new t.InjectionToken("DocumentToken");let Le=(()=>{class l{historyGo(n){throw new Error("Not implemented")}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return function Ge(){return(0,t.\u0275\u0275inject)(ot)}()},providedIn:"platform"}),l})();const Je=new t.InjectionToken("Location Initialized");let ot=(()=>{class l extends Le{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pt().getBaseHref(this._doc)}onPopState(n){const d=Pt().getGlobalEventTarget(this._doc,"window");return d.addEventListener("popstate",n,!1),()=>d.removeEventListener("popstate",n)}onHashChange(n){const d=Pt().getGlobalEventTarget(this._doc,"window");return d.addEventListener("hashchange",n,!1),()=>d.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,d,_){et()?this._history.pushState(n,d,_):this._location.hash=_}replaceState(n,d,_){et()?this._history.replaceState(n,d,_):this._location.hash=_}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return function Oe(){return new ot((0,t.\u0275\u0275inject)(Ee))}()},providedIn:"platform"}),l})();function et(){return!!window.history.pushState}function De(l,a){if(0==l.length)return a;if(0==a.length)return l;let n=0;return l.endsWith("/")&&n++,a.startsWith("/")&&n++,2==n?l+a.substring(1):1==n?l+a:l+"/"+a}function ye(l){const a=l.match(/#|\?|$/),n=a&&a.index||l.length;return l.slice(0,n-("/"===l[n-1]?1:0))+l.slice(n)}function pe(l){return l&&"?"!==l[0]?"?"+l:l}let te=(()=>{class l{historyGo(n){throw new Error("Not implemented")}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return(0,t.inject)(ue)},providedIn:"root"}),l})();const W=new t.InjectionToken("appBaseHref");let ue=(()=>{class l extends te{constructor(n,d){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=d??this._platformLocation.getBaseHrefFromDOM()??(0,t.inject)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return De(this._baseHref,n)}path(n=!1){const d=this._platformLocation.pathname+pe(this._platformLocation.search),_=this._platformLocation.hash;return _&&n?`${d}${_}`:d}pushState(n,d,_,T){const P=this.prepareExternalUrl(_+pe(T));this._platformLocation.pushState(n,d,P)}replaceState(n,d,_,T){const P=this.prepareExternalUrl(_+pe(T));this._platformLocation.replaceState(n,d,P)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Le),t.\u0275\u0275inject(W,8))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),ne=(()=>{class l extends te{constructor(n,d){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=d&&(this._baseHref=d)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let d=this._platformLocation.hash;return null==d&&(d="#"),d.length>0?d.substring(1):d}prepareExternalUrl(n){const d=De(this._baseHref,n);return d.length>0?"#"+d:d}pushState(n,d,_,T){let P=this.prepareExternalUrl(_+pe(T));0==P.length&&(P=this._platformLocation.pathname),this._platformLocation.pushState(n,d,P)}replaceState(n,d,_,T){let P=this.prepareExternalUrl(_+pe(T));0==P.length&&(P=this._platformLocation.pathname),this._platformLocation.replaceState(n,d,P)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Le),t.\u0275\u0275inject(W,8))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})(),G=(()=>{class l{constructor(n){this._subject=new t.EventEmitter,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const d=this._locationStrategy.getBaseHref();this._basePath=function Me(l){if(new RegExp("^(https?:)?//").test(l)){const[,n]=l.split(/\/\/[^\/]+/);return n}return l}(ye(le(d))),this._locationStrategy.onPopState(_=>{this._subject.emit({url:this.path(!0),pop:!0,state:_.state,type:_.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,d=""){return this.path()==this.normalize(n+pe(d))}normalize(n){return l.stripTrailingSlash(function Y(l,a){if(!l||!a.startsWith(l))return a;const n=a.substring(l.length);return""===n||["/",";","?","#"].includes(n[0])?n:a}(this._basePath,le(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,d="",_=null){this._locationStrategy.pushState(_,"",n,d),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pe(d)),_)}replaceState(n,d="",_=null){this._locationStrategy.replaceState(_,"",n,d),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pe(d)),_)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(d=>{this._notifyUrlChangeListeners(d.url,d.state)})),()=>{const d=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(d,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",d){this._urlChangeListeners.forEach(_=>_(n,d))}subscribe(n,d,_){return this._subject.subscribe({next:n,error:d,complete:_})}}return l.normalizeQueryParams=pe,l.joinWithSlash=De,l.stripTrailingSlash=ye,l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(te))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return function J(){return new G((0,t.\u0275\u0275inject)(te))}()},providedIn:"root"}),l})();function le(l){return l.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Decimal=0]="Decimal",ce[ce.Percent=1]="Percent",ce[ce.Currency=2]="Currency",ce[ce.Scientific=3]="Scientific",ce))(),Ze=(()=>((Ze=Ze||{})[Ze.Decimal=0]="Decimal",Ze[Ze.Group=1]="Group",Ze[Ze.List=2]="List",Ze[Ze.PercentSign=3]="PercentSign",Ze[Ze.PlusSign=4]="PlusSign",Ze[Ze.MinusSign=5]="MinusSign",Ze[Ze.Exponential=6]="Exponential",Ze[Ze.SuperscriptingExponent=7]="SuperscriptingExponent",Ze[Ze.PerMille=8]="PerMille",Ze[Ze.Infinity=9]="Infinity",Ze[Ze.NaN=10]="NaN",Ze[Ze.TimeSeparator=11]="TimeSeparator",Ze[Ze.CurrencyDecimal=12]="CurrencyDecimal",Ze[Ze.CurrencyGroup=13]="CurrencyGroup",Ze))();function Wt(l,a){const n=(0,t.\u0275findLocaleData)(l),d=n[t.\u0275LocaleDataIndex.NumberSymbols][a];if(typeof d>"u"){if(a===Ze.CurrencyDecimal)return n[t.\u0275LocaleDataIndex.NumberSymbols][Ze.Decimal];if(a===Ze.CurrencyGroup)return n[t.\u0275LocaleDataIndex.NumberSymbols][Ze.Group]}return d}const dr=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Cr=22,Ji=".",Ii="0",qr=";",rr=",",Jn="#";function Eu(l){const a=parseInt(l);if(isNaN(a))throw new Error("Invalid integer literal when parsing "+l);return a}function Tt(l,a){a=encodeURIComponent(a);for(const n of l.split(";")){const d=n.indexOf("="),[_,T]=-1==d?[n,""]:[n.slice(0,d),n.slice(d+1)];if(_.trim()===a)return decodeURIComponent(T)}return null}const ui=/\s+/,xi=[];let ki=(()=>{class l{constructor(n,d,_,T){this._iterableDiffers=n,this._keyValueDiffers=d,this._ngEl=_,this._renderer=T,this.initialClasses=xi,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(ui):xi}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(ui):n}ngDoCheck(){for(const d of this.initialClasses)this._updateState(d,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const d of n)this._updateState(d,!0);else if(null!=n)for(const d of Object.keys(n))this._updateState(d,Boolean(n[d]));this._applyStateDiff()}_updateState(n,d){const _=this.stateMap.get(n);void 0!==_?(_.enabled!==d&&(_.changed=!0,_.enabled=d),_.touched=!0):this.stateMap.set(n,{enabled:d,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const d=n[0],_=n[1];_.changed?(this._toggleClass(d,_.enabled),_.changed=!1):_.touched||(_.enabled&&this._toggleClass(d,!1),this.stateMap.delete(d)),_.touched=!1}}_toggleClass(n,d){(n=n.trim()).length>0&&n.split(ui).forEach(_=>{d?this._renderer.addClass(this._ngEl.nativeElement,_):this._renderer.removeClass(this._ngEl.nativeElement,_)})}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.IterableDiffers),t.\u0275\u0275directiveInject(t.KeyValueDiffers),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),l})();class pp{constructor(a,n,d,_){this.$implicit=a,this.ngForOf=n,this.index=d,this.count=_}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bo=(()=>{class l{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,d,_){this._viewContainer=n,this._template=d,this._differs=_,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const d=this._viewContainer;n.forEachOperation((_,T,P)=>{if(null==_.previousIndex)d.createEmbeddedView(this._template,new pp(_.item,this._ngForOf,-1,-1),null===P?void 0:P);else if(null==P)d.remove(null===T?void 0:T);else if(null!==T){const B=d.get(T);d.move(B,P),on(B,_)}});for(let _=0,T=d.length;_<T;_++){const B=d.get(_).context;B.index=_,B.count=T,B.ngForOf=this._ngForOf}n.forEachIdentityChange(_=>{on(d.get(_.currentIndex),_)})}static ngTemplateContextGuard(n,d){return!0}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(t.TemplateRef),t.\u0275\u0275directiveInject(t.IterableDiffers))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),l})();function on(l,a){l.context.$implicit=a.item}let cn=(()=>{class l{constructor(n,d){this._viewContainer=n,this._context=new Ai,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=d}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Sr("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Sr("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,d){return!0}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(t.TemplateRef))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),l})();class Ai{constructor(){this.$implicit=null,this.ngIf=null}}function Sr(l,a){if(a&&!a.createEmbeddedView)throw new Error(`${l} must be a TemplateRef, but received '${(0,t.\u0275stringify)(a)}'.`)}let as=(()=>{class l{constructor(n,d,_){this._ngEl=n,this._differs=d,this._renderer=_,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,d){const[_,T]=n.split("."),P=-1===_.indexOf("-")?void 0:t.RendererStyleFlags2.DashCase;null!=d?this._renderer.setStyle(this._ngEl.nativeElement,_,T?`${d}${T}`:d,P):this._renderer.removeStyle(this._ngEl.nativeElement,_,P)}_applyChanges(n){n.forEachRemovedItem(d=>this._setStyle(d.key,null)),n.forEachAddedItem(d=>this._setStyle(d.key,d.currentValue)),n.forEachChangedItem(d=>this._setStyle(d.key,d.currentValue))}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.KeyValueDiffers),t.\u0275\u0275directiveInject(t.Renderer2))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),l})();let zr=(()=>{class l{constructor(n){this._locale=n}transform(n,d,_){if(!function mp(l){return!(null==l||""===l||l!=l)}(n))return null;_=_||this._locale;try{return function Ls(l,a,n){return function Dl(l,a,n,d,_,T,P=!1){let B="",ie=!1;if(isFinite(l)){let Se=function ws(l){let d,_,T,P,B,a=Math.abs(l)+"",n=0;for((_=a.indexOf(Ji))>-1&&(a=a.replace(Ji,"")),(T=a.search(/e/i))>0?(_<0&&(_=T),_+=+a.slice(T+1),a=a.substring(0,T)):_<0&&(_=a.length),T=0;a.charAt(T)===Ii;T++);if(T===(B=a.length))d=[0],_=1;else{for(B--;a.charAt(B)===Ii;)B--;for(_-=T,d=[],P=0;T<=B;T++,P++)d[P]=Number(a.charAt(T))}return _>Cr&&(d=d.splice(0,Cr-1),n=_-1,_=1),{digits:d,exponent:n,integerLen:_}}(l);P&&(Se=function wu(l){if(0===l.digits[0])return l;const a=l.digits.length-l.integerLen;return l.exponent?l.exponent+=2:(0===a?l.digits.push(0,0):1===a&&l.digits.push(0),l.integerLen+=2),l}(Se));let tt=a.minInt,vt=a.minFrac,rn=a.maxFrac;if(T){const Ri=T.match(dr);if(null===Ri)throw new Error(`${T} is not a valid digit info`);const wr=Ri[1],Er=Ri[3],Qa=Ri[5];null!=wr&&(tt=Eu(wr)),null!=Er&&(vt=Eu(Er)),null!=Qa?rn=Eu(Qa):null!=Er&&vt>rn&&(rn=vt)}!function ya(l,a,n){if(a>n)throw new Error(`The minimum number of digits after fraction (${a}) is higher than the maximum (${n}).`);let d=l.digits,_=d.length-l.integerLen;const T=Math.min(Math.max(a,_),n);let P=T+l.integerLen,B=d[P];if(P>0){d.splice(Math.max(l.integerLen,P));for(let vt=P;vt<d.length;vt++)d[vt]=0}else{_=Math.max(0,_),l.integerLen=1,d.length=Math.max(1,P=T+1),d[0]=0;for(let vt=1;vt<P;vt++)d[vt]=0}if(B>=5)if(P-1<0){for(let vt=0;vt>P;vt--)d.unshift(0),l.integerLen++;d.unshift(1),l.integerLen++}else d[P-1]++;for(;_<Math.max(0,T);_++)d.push(0);let ie=0!==T;const Se=a+l.integerLen,tt=d.reduceRight(function(vt,rn,Kt,Jt){return Jt[Kt]=(rn+=vt)<10?rn:rn-10,ie&&(0===Jt[Kt]&&Kt>=Se?Jt.pop():ie=!1),rn>=10?1:0},0);tt&&(d.unshift(tt),l.integerLen++)}(Se,vt,rn);let Kt=Se.digits,Jt=Se.integerLen;const xn=Se.exponent;let Nn=[];for(ie=Kt.every(Ri=>!Ri);Jt<tt;Jt++)Kt.unshift(0);for(;Jt<0;Jt++)Kt.unshift(0);Jt>0?Nn=Kt.splice(Jt,Kt.length):(Nn=Kt,Kt=[0]);const Zn=[];for(Kt.length>=a.lgSize&&Zn.unshift(Kt.splice(-a.lgSize,Kt.length).join(""));Kt.length>a.gSize;)Zn.unshift(Kt.splice(-a.gSize,Kt.length).join(""));Kt.length&&Zn.unshift(Kt.join("")),B=Zn.join(Wt(n,d)),Nn.length&&(B+=Wt(n,_)+Nn.join("")),xn&&(B+=Wt(n,Ze.Exponential)+"+"+xn)}else B=Wt(n,Ze.Infinity);return B=l<0&&!ie?a.negPre+B+a.negSuf:a.posPre+B+a.posSuf,B}(l,function xu(l,a="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},d=l.split(qr),_=d[0],T=d[1],P=-1!==_.indexOf(Ji)?_.split(Ji):[_.substring(0,_.lastIndexOf(Ii)+1),_.substring(_.lastIndexOf(Ii)+1)],B=P[0],ie=P[1]||"";n.posPre=B.substring(0,B.indexOf(Jn));for(let tt=0;tt<ie.length;tt++){const vt=ie.charAt(tt);vt===Ii?n.minFrac=n.maxFrac=tt+1:vt===Jn?n.maxFrac=tt+1:n.posSuf+=vt}const Se=B.split(rr);if(n.gSize=Se[1]?Se[1].length:0,n.lgSize=Se[2]||Se[1]?(Se[2]||Se[1]).length:0,T){const tt=_.length-n.posPre.length-n.posSuf.length,vt=T.indexOf(Jn);n.negPre=T.substring(0,vt).replace(/'/g,""),n.negSuf=T.slice(vt+tt).replace(/'/g,"")}else n.negPre=a+n.posPre,n.negSuf=n.posSuf;return n}(function ct(l,a){return(0,t.\u0275findLocaleData)(l)[t.\u0275LocaleDataIndex.NumberFormats][a]}(a,ce.Decimal),Wt(a,Ze.MinusSign)),a,Ze.Group,Ze.Decimal,n)}(function Du(l){if("string"==typeof l&&!isNaN(Number(l)-parseFloat(l)))return Number(l);if("number"!=typeof l)throw new Error(`${l} is not a number`);return l}(n),_,d)}catch(T){throw function Zr(l,a){return new t.\u0275RuntimeError(2100,!1)}()}}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.LOCALE_ID,16))},l.\u0275pipe=t.\u0275\u0275definePipe({name:"number",type:l,pure:!0,standalone:!0}),l})();let ku=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({}),l})();let Od=(()=>{class l{}return l.\u0275prov=(0,t.\u0275\u0275defineInjectable)({token:l,providedIn:"root",factory:()=>new Rd((0,t.\u0275\u0275inject)(Ee),window)}),l})();class Rd{constructor(a,n){this.document=a,this.window=n,this.offset=()=>[0,0]}setOffset(a){this.offset=Array.isArray(a)?()=>a:a}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(a){this.supportsScrolling()&&this.window.scrollTo(a[0],a[1])}scrollToAnchor(a){if(!this.supportsScrolling())return;const n=function Li(l,a){const n=l.getElementById(a)||l.getElementsByName(a)[0];if(n)return n;if("function"==typeof l.createTreeWalker&&l.body&&(l.body.createShadowRoot||l.body.attachShadow)){const d=l.createTreeWalker(l.body,NodeFilter.SHOW_ELEMENT);let _=d.currentNode;for(;_;){const T=_.shadowRoot;if(T){const P=T.getElementById(a)||T.querySelector(`[name="${a}"]`);if(P)return P}_=d.nextNode()}}return null}(this.document,a);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(a){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=a)}}scrollToElement(a){const n=a.getBoundingClientRect(),d=n.left+this.window.pageXOffset,_=n.top+this.window.pageYOffset,T=this.offset();this.window.scrollTo(d-T[0],_-T[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const a=wc(this.window.history)||wc(Object.getPrototypeOf(this.window.history));return!(!a||!a.writable&&!a.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function wc(l){return Object.getOwnPropertyDescriptor(l,"scrollRestoration")}class Vs{}class Nu extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ul extends Nu{static makeCurrent(){!function p(l){en||(en=l)}(new Ul)}onAndCancel(a,n,d){return a.addEventListener(n,d,!1),()=>{a.removeEventListener(n,d,!1)}}dispatchEvent(a,n){a.dispatchEvent(n)}remove(a){a.parentNode&&a.parentNode.removeChild(a)}createElement(a,n){return(n=n||this.getDefaultDocument()).createElement(a)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}isShadowRoot(a){return a instanceof DocumentFragment}getGlobalEventTarget(a,n){return"window"===n?window:"document"===n?a:"body"===n?a.body:null}getBaseHref(a){const n=function Bu(){return di=di||document.querySelector("base"),di?di.getAttribute("href"):null}();return null==n?null:function Hl(l){zu=zu||document.createElement("a"),zu.setAttribute("href",l);const a=zu.pathname;return"/"===a.charAt(0)?a:`/${a}`}(n)}resetBaseElement(){di=null}getUserAgent(){return window.navigator.userAgent}getCookie(a){return Tt(document.cookie,a)}}let zu,di=null;const Ws=new t.InjectionToken("TRANSITION_ID"),Mc=[{provide:t.APP_INITIALIZER,useFactory:function ju(l,a,n){return()=>{n.get(t.ApplicationInitStatus).donePromise.then(()=>{const d=Pt(),_=a.querySelectorAll(`style[ng-transition="${l}"]`);for(let T=0;T<_.length;T++)d.remove(_[T])})}},deps:[Ws,Ee,t.Injector],multi:!0}];let qf=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const us=new t.InjectionToken("EventManagerPlugins");let Xo=(()=>{class l{constructor(n,d){this._zone=d,this._eventNameToPlugin=new Map,n.forEach(_=>{_.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,d,_){return this._findPluginFor(d).addEventListener(n,d,_)}addGlobalEventListener(n,d,_){return this._findPluginFor(d).addGlobalEventListener(n,d,_)}getZone(){return this._zone}_findPluginFor(n){const d=this._eventNameToPlugin.get(n);if(d)return d;const _=this._plugins;for(let T=0;T<_.length;T++){const P=_[T];if(P.supports(n))return this._eventNameToPlugin.set(n,P),P}throw new Error(`No event manager plugin found for event ${n}`)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(us),t.\u0275\u0275inject(t.NgZone))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();class $l{constructor(a){this._doc=a}addGlobalEventListener(a,n,d){const _=Pt().getGlobalEventTarget(this._doc,a);if(!_)throw new Error(`Unsupported event target ${_} for event ${n}`);return this.addEventListener(_,n,d)}}let Cp=(()=>{class l{constructor(){this.usageCount=new Map}addStyles(n){for(const d of n)1===this.changeUsageCount(d,1)&&this.onStyleAdded(d)}removeStyles(n){for(const d of n)0===this.changeUsageCount(d,-1)&&this.onStyleRemoved(d)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,d){const _=this.usageCount;let T=_.get(n)??0;return T+=d,T>0?_.set(n,T):_.delete(n),T}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})(),Ss=(()=>{class l extends Cp{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const d of this.hostNodes)this.addStyleToHost(d,n)}onStyleRemoved(n){const d=this.styleRef;d.get(n)?.forEach(T=>T.remove()),d.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const d of this.getAllStyles())this.addStyleToHost(n,d)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,d){const _=this.doc.createElement("style");_.textContent=d,n.appendChild(_);const T=this.styleRef.get(d);T?T.push(_):this.styleRef.set(d,[_])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const Ic={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Dc=/%COMP%/g,Gl=new t.InjectionToken("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Pc(l,a){return a.flat(100).map(n=>n.replace(Dc,l))}function Wl(l){return a=>{if("__ngUnwrap__"===a)return l;!1===l(a)&&(a.preventDefault(),a.returnValue=!1)}}let ql=(()=>{class l{constructor(n,d,_,T){this.eventManager=n,this.sharedStylesHost=d,this.appId=_,this.removeStylesOnCompDestory=T,this.rendererByCompId=new Map,this.defaultRenderer=new Zl(n)}createRenderer(n,d){if(!n||!d)return this.defaultRenderer;const _=this.getOrCreateRenderer(n,d);return _ instanceof Yl?_.applyToHost(n):_ instanceof Uu&&_.applyStyles(),_}getOrCreateRenderer(n,d){const _=this.rendererByCompId;let T=_.get(d.id);if(!T){const P=this.eventManager,B=this.sharedStylesHost,ie=this.removeStylesOnCompDestory;switch(d.encapsulation){case t.ViewEncapsulation.Emulated:T=new Yl(P,B,d,this.appId,ie);break;case t.ViewEncapsulation.ShadowDom:return new Zf(P,B,n,d);default:T=new Uu(P,B,d,ie)}T.onDestroy=()=>_.delete(d.id),_.set(d.id,T)}return T}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Xo),t.\u0275\u0275inject(Ss),t.\u0275\u0275inject(t.APP_ID),t.\u0275\u0275inject(Gl))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();class Zl{constructor(a){this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(a,n){return n?document.createElementNS(Ic[n]||n,a):document.createElement(a)}createComment(a){return document.createComment(a)}createText(a){return document.createTextNode(a)}appendChild(a,n){(Sp(a)?a.content:a).appendChild(n)}insertBefore(a,n,d){a&&(Sp(a)?a.content:a).insertBefore(n,d)}removeChild(a,n){a&&a.removeChild(n)}selectRootElement(a,n){let d="string"==typeof a?document.querySelector(a):a;if(!d)throw new Error(`The selector "${a}" did not match any elements`);return n||(d.textContent=""),d}parentNode(a){return a.parentNode}nextSibling(a){return a.nextSibling}setAttribute(a,n,d,_){if(_){n=_+":"+n;const T=Ic[_];T?a.setAttributeNS(T,n,d):a.setAttribute(n,d)}else a.setAttribute(n,d)}removeAttribute(a,n,d){if(d){const _=Ic[d];_?a.removeAttributeNS(_,n):a.removeAttribute(`${d}:${n}`)}else a.removeAttribute(n)}addClass(a,n){a.classList.add(n)}removeClass(a,n){a.classList.remove(n)}setStyle(a,n,d,_){_&(t.RendererStyleFlags2.DashCase|t.RendererStyleFlags2.Important)?a.style.setProperty(n,d,_&t.RendererStyleFlags2.Important?"important":""):a.style[n]=d}removeStyle(a,n,d){d&t.RendererStyleFlags2.DashCase?a.style.removeProperty(n):a.style[n]=""}setProperty(a,n,d){a[n]=d}setValue(a,n){a.nodeValue=n}listen(a,n,d){return"string"==typeof a?this.eventManager.addGlobalEventListener(a,n,Wl(d)):this.eventManager.addEventListener(a,n,Wl(d))}}function Sp(l){return"TEMPLATE"===l.tagName&&void 0!==l.content}class Zf extends Zl{constructor(a,n,d,_){super(a),this.sharedStylesHost=n,this.hostEl=d,this.shadowRoot=d.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const T=Pc(_.id,_.styles);for(const P of T){const B=document.createElement("style");B.textContent=P,this.shadowRoot.appendChild(B)}}nodeOrShadowRoot(a){return a===this.hostEl?this.shadowRoot:a}appendChild(a,n){return super.appendChild(this.nodeOrShadowRoot(a),n)}insertBefore(a,n,d){return super.insertBefore(this.nodeOrShadowRoot(a),n,d)}removeChild(a,n){return super.removeChild(this.nodeOrShadowRoot(a),n)}parentNode(a){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(a)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Uu extends Zl{constructor(a,n,d,_,T=d.id){super(a),this.sharedStylesHost=n,this.removeStylesOnCompDestory=_,this.rendererUsageCount=0,this.styles=Pc(T,d.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Yl extends Uu{constructor(a,n,d,_,T){const P=_+"-"+d.id;super(a,n,d,T,P),this.contentAttr=function Tr(l){return"_ngcontent-%COMP%".replace(Dc,l)}(P),this.hostAttr=function Ac(l){return"_nghost-%COMP%".replace(Dc,l)}(P)}applyToHost(a){this.applyStyles(),this.setAttribute(a,this.hostAttr,"")}createElement(a,n){const d=super.createElement(a,n);return super.setAttribute(d,this.contentAttr,""),d}}let ds=(()=>{class l extends $l{constructor(n){super(n)}supports(n){return!0}addEventListener(n,d,_){return n.addEventListener(d,_,!1),()=>this.removeEventListener(n,d,_)}removeEventListener(n,d,_){return n.removeEventListener(d,_)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const Gd=["alt","control","meta","shift"],Rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lc={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let Fc=(()=>{class l extends $l{constructor(n){super(n)}supports(n){return null!=l.parseEventName(n)}addEventListener(n,d,_){const T=l.parseEventName(d),P=l.eventCallback(T.fullKey,_,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pt().onAndCancel(n,T.domEventName,P))}static parseEventName(n){const d=n.toLowerCase().split("."),_=d.shift();if(0===d.length||"keydown"!==_&&"keyup"!==_)return null;const T=l._normalizeKey(d.pop());let P="",B=d.indexOf("code");if(B>-1&&(d.splice(B,1),P="code."),Gd.forEach(Se=>{const tt=d.indexOf(Se);tt>-1&&(d.splice(tt,1),P+=Se+".")}),P+=T,0!=d.length||0===T.length)return null;const ie={};return ie.domEventName=_,ie.fullKey=P,ie}static matchEventFullKeyCode(n,d){let _=Rc[n.key]||n.key,T="";return d.indexOf("code.")>-1&&(_=n.code,T="code."),!(null==_||!_)&&(_=_.toLowerCase()," "===_?_="space":"."===_&&(_="dot"),Gd.forEach(P=>{P!==_&&(0,Lc[P])(n)&&(T+=P+".")}),T+=_,T===d)}static eventCallback(n,d,_){return T=>{l.matchEventFullKeyCode(T,n)&&_.runGuarded(()=>d(T))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const ol=(0,t.createPlatformFactory)(t.platformCore,"browser",[{provide:t.PLATFORM_ID,useValue:"browser"},{provide:t.PLATFORM_INITIALIZER,useValue:function Ea(){Ul.makeCurrent()},multi:!0},{provide:Ee,useFactory:function Xf(){return(0,t.\u0275setDocument)(document),document},deps:[]}]),qd=new t.InjectionToken(""),Zd=[{provide:t.\u0275TESTABILITY_GETTER,useClass:class qs{addToWindow(a){t.\u0275global.getAngularTestability=(d,_=!0)=>{const T=a.findTestabilityInTree(d,_);if(null==T)throw new Error("Could not find testability for element.");return T},t.\u0275global.getAllAngularTestabilities=()=>a.getAllTestabilities(),t.\u0275global.getAllAngularRootElements=()=>a.getAllRootElements(),t.\u0275global.frameworkStabilizers||(t.\u0275global.frameworkStabilizers=[]),t.\u0275global.frameworkStabilizers.push(d=>{const _=t.\u0275global.getAllAngularTestabilities();let T=_.length,P=!1;const B=function(ie){P=P||ie,T--,0==T&&d(P)};_.forEach(function(ie){ie.whenStable(B)})})}findTestabilityInTree(a,n,d){return null==n?null:a.getTestability(n)??(d?Pt().isShadowRoot(n)?this.findTestabilityInTree(a,n.host,!0):this.findTestabilityInTree(a,n.parentElement,!0):null)}},deps:[]},{provide:t.\u0275TESTABILITY,useClass:t.Testability,deps:[t.NgZone,t.TestabilityRegistry,t.\u0275TESTABILITY_GETTER]},{provide:t.Testability,useClass:t.Testability,deps:[t.NgZone,t.TestabilityRegistry,t.\u0275TESTABILITY_GETTER]}],Yd=[{provide:t.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:t.ErrorHandler,useFactory:function Tp(){return new t.ErrorHandler},deps:[]},{provide:us,useClass:ds,multi:!0,deps:[Ee,t.NgZone,t.PLATFORM_ID]},{provide:us,useClass:Fc,multi:!0,deps:[Ee]},{provide:ql,useClass:ql,deps:[Xo,Ss,t.APP_ID,Gl]},{provide:t.RendererFactory2,useExisting:ql},{provide:Cp,useExisting:Ss},{provide:Ss,useClass:Ss,deps:[Ee]},{provide:Xo,useClass:Xo,deps:[us,t.NgZone]},{provide:Vs,useClass:qf,deps:[]},[]];let Mr=(()=>{class l{constructor(n){}static withServerTransition(n){return{ngModule:l,providers:[{provide:t.APP_ID,useValue:n.appId},{provide:Ws,useExisting:t.APP_ID},Mc]}}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(qd,12))},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({providers:[...Yd,...Zd],imports:[ku,t.ApplicationModule]}),l})(),Fo=(()=>{class l{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(n){let d=null;return d=n?new n:function bg(){return new Fo((0,t.\u0275\u0275inject)(Ee))}(),d},providedIn:"root"}),l})();typeof window<"u"&&window;let sl=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(n){let d=null;return d=n?new(n||l):t.\u0275\u0275inject(g),d},providedIn:"root"}),l})(),g=(()=>{class l extends sl{constructor(n){super(),this._doc=n}sanitize(n,d){if(null==d)return null;switch(n){case t.SecurityContext.NONE:return d;case t.SecurityContext.HTML:return(0,t.\u0275allowSanitizationBypassAndThrow)(d,"HTML")?(0,t.\u0275unwrapSafeValue)(d):(0,t.\u0275_sanitizeHtml)(this._doc,String(d)).toString();case t.SecurityContext.STYLE:return(0,t.\u0275allowSanitizationBypassAndThrow)(d,"Style")?(0,t.\u0275unwrapSafeValue)(d):d;case t.SecurityContext.SCRIPT:if((0,t.\u0275allowSanitizationBypassAndThrow)(d,"Script"))return(0,t.\u0275unwrapSafeValue)(d);throw new Error("unsafe value used in a script context");case t.SecurityContext.URL:return(0,t.\u0275allowSanitizationBypassAndThrow)(d,"URL")?(0,t.\u0275unwrapSafeValue)(d):(0,t.\u0275_sanitizeUrl)(String(d));case t.SecurityContext.RESOURCE_URL:if((0,t.\u0275allowSanitizationBypassAndThrow)(d,"ResourceURL"))return(0,t.\u0275unwrapSafeValue)(d);throw new Error(`unsafe value used in a resource URL context (see ${t.\u0275XSS_SECURITY_URL})`);default:throw new Error(`Unexpected SecurityContext ${n} (see ${t.\u0275XSS_SECURITY_URL})`)}}bypassSecurityTrustHtml(n){return(0,t.\u0275bypassSanitizationTrustHtml)(n)}bypassSecurityTrustStyle(n){return(0,t.\u0275bypassSanitizationTrustStyle)(n)}bypassSecurityTrustScript(n){return(0,t.\u0275bypassSanitizationTrustScript)(n)}bypassSecurityTrustUrl(n){return(0,t.\u0275bypassSanitizationTrustUrl)(n)}bypassSecurityTrustResourceUrl(n){return(0,t.\u0275bypassSanitizationTrustResourceUrl)(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(n){let d=null;return d=n?new n:function zc(l){return new g(l.get(Ee))}(t.\u0275\u0275inject(t.Injector)),d},providedIn:"root"}),l})();class f{}class b{}const E="*";function S(l,a){return{type:7,name:l,definitions:a,options:{}}}function k(l,a=null){return{type:4,styles:a,timings:l}}function F(l,a=null){return{type:2,steps:l,options:a}}function V(l){return{type:6,styles:l,offset:null}}function U(l,a,n){return{type:0,name:l,styles:a,options:n}}function oe(l,a,n=null){return{type:1,expr:l,animation:a,options:n}}function de(l){Promise.resolve().then(l)}class we{constructor(a=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=a+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){de(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(a){this._position=this.totalTime?a*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(a){const n="start"==a?this._onStartFns:this._onDoneFns;n.forEach(d=>d()),n.length=0}}class Ce{constructor(a){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=a;let n=0,d=0,_=0;const T=this.players.length;0==T?de(()=>this._onFinish()):this.players.forEach(P=>{P.onDone(()=>{++n==T&&this._onFinish()}),P.onDestroy(()=>{++d==T&&this._onDestroy()}),P.onStart(()=>{++_==T&&this._onStart()})}),this.totalTime=this.players.reduce((P,B)=>Math.max(P,B.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this.players.forEach(a=>a.init())}onStart(a){this._onStartFns.push(a)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(a=>a()),this._onStartFns=[])}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(a=>a.play())}pause(){this.players.forEach(a=>a.pause())}restart(){this.players.forEach(a=>a.restart())}finish(){this._onFinish(),this.players.forEach(a=>a.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(a=>a.destroy()),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this.players.forEach(a=>a.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(a){const n=a*this.totalTime;this.players.forEach(d=>{const _=d.totalTime?Math.min(1,n/d.totalTime):1;d.setPosition(_)})}getPosition(){const a=this.players.reduce((n,d)=>null===n||d.totalTime>n.totalTime?d:n,null);return null!=a?a.getPosition():0}beforeDestroy(){this.players.forEach(a=>{a.beforeDestroy&&a.beforeDestroy()})}triggerCallback(a){const n="start"==a?this._onStartFns:this._onDoneFns;n.forEach(d=>d()),n.length=0}}const He="!";function $e(l){return new t.\u0275RuntimeError(3e3,!1)}function jc(){return typeof window<"u"&&typeof window.document<"u"}function Kl(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ro(l){switch(l.length){case 0:return new we;case 1:return l[0];default:return new Ce(l)}}function Ms(l,a,n,d,_=new Map,T=new Map){const P=[],B=[];let ie=-1,Se=null;if(d.forEach(tt=>{const vt=tt.get("offset"),rn=vt==ie,Kt=rn&&Se||new Map;tt.forEach((Jt,xn)=>{let Nn=xn,Zn=Jt;if("offset"!==xn)switch(Nn=a.normalizePropertyName(Nn,P),Zn){case He:Zn=_.get(xn);break;case E:Zn=T.get(xn);break;default:Zn=a.normalizeStyleValue(xn,Nn,Zn,P)}Kt.set(Nn,Zn)}),rn||B.push(Kt),Se=Kt,ie=vt}),P.length)throw function Yi(l){return new t.\u0275RuntimeError(3502,!1)}();return B}function Xs(l,a,n,d){switch(a){case"start":l.onStart(()=>d(n&&Ql(n,"start",l)));break;case"done":l.onDone(()=>d(n&&Ql(n,"done",l)));break;case"destroy":l.onDestroy(()=>d(n&&Ql(n,"destroy",l)))}}function Ql(l,a,n){const T=al(l.element,l.triggerName,l.fromState,l.toState,a||l.phaseName,n.totalTime??l.totalTime,!!n.disabled),P=l._data;return null!=P&&(T._data=P),T}function al(l,a,n,d,_="",T=0,P){return{element:l,triggerName:a,fromState:n,toState:d,phaseName:_,totalTime:T,disabled:!!P}}function gr(l,a,n){let d=l.get(a);return d||l.set(a,d=n),d}function Eg(l){const a=l.indexOf(":");return[l.substring(1,a),l.slice(a+1)]}let Qf=(l,a)=>!1,Qy=(l,a,n)=>[],Ap=null;function Vc(l){const a=l.parentNode||l.host;return a===Ap?null:a}(Kl()||typeof Element<"u")&&(jc()?(Ap=(()=>document.documentElement)(),Qf=(l,a)=>{for(;a;){if(a===l)return!0;a=Vc(a)}return!1}):Qf=(l,a)=>l.contains(a),Qy=(l,a,n)=>{if(n)return Array.from(l.querySelectorAll(a));const d=l.querySelector(a);return d?[d]:[]});let ll=null,Sa=!1;const em=Qf,Sg=Qy;let oo=(()=>{class l{validateStyleProperty(n){return function Jf(l){ll||(ll=function Bo(){return typeof document<"u"?document.body:null}()||{},Sa=!!ll.style&&"WebkitAppearance"in ll.style);let a=!0;return ll.style&&!function Cg(l){return"ebkit"==l.substring(1,6)}(l)&&(a=l in ll.style,!a&&Sa&&(a="Webkit"+l.charAt(0).toUpperCase()+l.slice(1)in ll.style)),a}(n)}matchesElement(n,d){return!1}containsElement(n,d){return em(n,d)}getParentElement(n){return Vc(n)}query(n,d,_){return Sg(n,d,_)}computeStyle(n,d,_){return _||""}animate(n,d,_,T,P,B=[],ie){return new we(_,T)}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})(),Ta=(()=>{class l{}return l.NOOP=new oo,l})();const qu=1e3,Da="ng-enter",ka="ng-leave",Aa="ng-trigger",tm=".ng-trigger",Tg="ng-animating",Mg=".ng-animating";function Jl(l){if("number"==typeof l)return l;const a=l.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:Xd(parseFloat(a[1]),a[2])}function Xd(l,a){return"s"===a?l*qu:l}function Zu(l,a,n){return l.hasOwnProperty("duration")?l:function Pa(l,a,n){let _,T=0,P="";if("string"==typeof l){const B=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===B)return a.push($e()),{duration:0,delay:0,easing:""};_=Xd(parseFloat(B[1]),B[2]);const ie=B[3];null!=ie&&(T=Xd(parseFloat(ie),B[4]));const Se=B[5];Se&&(P=Se)}else _=l;if(!n){let B=!1,ie=a.length;_<0&&(a.push(function st(){return new t.\u0275RuntimeError(3100,!1)}()),B=!0),T<0&&(a.push(function nt(){return new t.\u0275RuntimeError(3101,!1)}()),B=!0),B&&a.splice(ie,0,$e())}return{duration:_,delay:T,easing:P}}(l,a,n)}function ec(l,a={}){return Object.keys(l).forEach(n=>{a[n]=l[n]}),a}function t_(l){const a=new Map;return Object.keys(l).forEach(n=>{a.set(n,l[n])}),a}function Do(l,a=new Map,n){if(n)for(let[d,_]of n)a.set(d,_);for(let[d,_]of l)a.set(d,_);return a}function Kd(l,a,n){return n?a+":"+n+";":""}function Kr(l){let a="";for(let n=0;n<l.style.length;n++){const d=l.style.item(n);a+=Kd(0,d,l.style.getPropertyValue(d))}for(const n in l.style)l.style.hasOwnProperty(n)&&!n.startsWith("_")&&(a+=Kd(0,Ig(n),l.style[n]));l.setAttribute("style",a)}function Is(l,a,n){l.style&&(a.forEach((d,_)=>{const T=im(_);n&&!n.has(_)&&n.set(_,l.style[T]),l.style[T]=d}),Kl()&&Kr(l))}function tc(l,a){l.style&&(a.forEach((n,d)=>{const _=im(d);l.style[_]=""}),Kl()&&Kr(l))}function es(l){return Array.isArray(l)?1==l.length?l[0]:F(l):l}const nc=new RegExp("{{\\s*(.+?)\\s*}}","g");function Qd(l){let a=[];if("string"==typeof l){let n;for(;n=nc.exec(l);)a.push(n[1]);nc.lastIndex=0}return a}function Oa(l,a,n){const d=l.toString(),_=d.replace(nc,(T,P)=>{let B=a[P];return null==B&&(n.push(function Ut(l){return new t.\u0275RuntimeError(3003,!1)}()),B=""),B.toString()});return _==d?l:_}function Jd(l){const a=[];let n=l.next();for(;!n.done;)a.push(n.value),n=l.next();return a}const nm=/-+([a-z0-9])/g;function im(l){return l.replace(nm,(...a)=>a[1].toUpperCase())}function Ig(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zo(l,a,n){switch(a.type){case 7:return l.visitTrigger(a,n);case 0:return l.visitState(a,n);case 1:return l.visitTransition(a,n);case 2:return l.visitSequence(a,n);case 3:return l.visitGroup(a,n);case 4:return l.visitAnimate(a,n);case 5:return l.visitKeyframes(a,n);case 6:return l.visitStyle(a,n);case 8:return l.visitReference(a,n);case 9:return l.visitAnimateChild(a,n);case 10:return l.visitAnimateRef(a,n);case 11:return l.visitQuery(a,n);case 12:return l.visitStagger(a,n);default:throw function ht(l){return new t.\u0275RuntimeError(3004,!1)}()}}function eh(l,a){return window.getComputedStyle(l)[a]}const Yu="*";function so(l,a){const n=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(d=>function Qs(l,a,n){if(":"==l[0]){const ie=function sm(l,a){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,d)=>parseFloat(d)>parseFloat(n);case":decrement":return(n,d)=>parseFloat(d)<parseFloat(n);default:return a.push(function bn(l){return new t.\u0275RuntimeError(3016,!1)}()),"* => *"}}(l,n);if("function"==typeof ie)return void a.push(ie);l=ie}const d=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==d||d.length<4)return n.push(function ii(l){return new t.\u0275RuntimeError(3015,!1)}()),a;const _=d[1],T=d[2],P=d[3];a.push(Hc(_,P));"<"==T[0]&&!(_==Yu&&P==Yu)&&a.push(Hc(P,_))}(d,n,a)):n.push(l),n}const sr=new Set(["true","1"]),nh=new Set(["false","0"]);function Hc(l,a){const n=sr.has(l)||nh.has(l),d=sr.has(a)||nh.has(a);return(_,T)=>{let P=l==Yu||l==_,B=a==Yu||a==T;return!P&&n&&"boolean"==typeof _&&(P=_?sr.has(l):nh.has(l)),!B&&d&&"boolean"==typeof T&&(B=T?sr.has(a):nh.has(a)),P&&B}}const am=new RegExp("s*:selfs*,?","g");function ih(l,a,n,d){return new cm(l).build(a,n,d)}class cm{constructor(a){this._driver=a}build(a,n,d){const _=new rh(n);return this._resetContextStyleTimingState(_),zo(this,es(a),_)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles=new Map,a.collectedStyles.set("",new Map),a.currentTime=0}visitTrigger(a,n){let d=n.queryCount=0,_=n.depCount=0;const T=[],P=[];return"@"==a.name.charAt(0)&&n.errors.push(function wt(){return new t.\u0275RuntimeError(3006,!1)}()),a.definitions.forEach(B=>{if(this._resetContextStyleTimingState(n),0==B.type){const ie=B,Se=ie.name;Se.toString().split(/\s*,\s*/).forEach(tt=>{ie.name=tt,T.push(this.visitState(ie,n))}),ie.name=Se}else if(1==B.type){const ie=this.visitTransition(B,n);d+=ie.queryCount,_+=ie.depCount,P.push(ie)}else n.errors.push(function zt(){return new t.\u0275RuntimeError(3007,!1)}())}),{type:7,name:a.name,states:T,transitions:P,queryCount:d,depCount:_,options:null}}visitState(a,n){const d=this.visitStyle(a.styles,n),_=a.options&&a.options.params||null;if(d.containsDynamicStyles){const T=new Set,P=_||{};d.styles.forEach(B=>{B instanceof Map&&B.forEach(ie=>{Qd(ie).forEach(Se=>{P.hasOwnProperty(Se)||T.add(Se)})})}),T.size&&(Jd(T.values()),n.errors.push(function mt(l,a){return new t.\u0275RuntimeError(3008,!1)}()))}return{type:0,name:a.name,style:d,options:_?{params:_}:null}}visitTransition(a,n){n.queryCount=0,n.depCount=0;const d=zo(this,es(a.animation),n);return{type:1,matchers:so(a.expr,n.errors),animation:d,queryCount:n.queryCount,depCount:n.depCount,options:Xu(a.options)}}visitSequence(a,n){return{type:2,steps:a.steps.map(d=>zo(this,d,n)),options:Xu(a.options)}}visitGroup(a,n){const d=n.currentTime;let _=0;const T=a.steps.map(P=>{n.currentTime=d;const B=zo(this,P,n);return _=Math.max(_,n.currentTime),B});return n.currentTime=_,{type:3,steps:T,options:Xu(a.options)}}visitAnimate(a,n){const d=function kg(l,a){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return Ag(Zu(l,a).duration,0,"");const n=l;if(n.split(/\s+/).some(T=>"{"==T.charAt(0)&&"{"==T.charAt(1))){const T=Ag(0,0,"");return T.dynamic=!0,T.strValue=n,T}const _=Zu(n,a);return Ag(_.duration,_.delay,_.easing)}(a.timings,n.errors);n.currentAnimateTimings=d;let _,T=a.styles?a.styles:V({});if(5==T.type)_=this.visitKeyframes(T,n);else{let P=a.styles,B=!1;if(!P){B=!0;const Se={};d.easing&&(Se.easing=d.easing),P=V(Se)}n.currentTime+=d.duration+d.delay;const ie=this.visitStyle(P,n);ie.isEmptyStep=B,_=ie}return n.currentAnimateTimings=null,{type:4,timings:d,style:_,options:null}}visitStyle(a,n){const d=this._makeStyleAst(a,n);return this._validateStyleAst(d,n),d}_makeStyleAst(a,n){const d=[],_=Array.isArray(a.styles)?a.styles:[a.styles];for(let B of _)"string"==typeof B?B===E?d.push(B):n.errors.push(new t.\u0275RuntimeError(3002,!1)):d.push(t_(B));let T=!1,P=null;return d.forEach(B=>{if(B instanceof Map&&(B.has("easing")&&(P=B.get("easing"),B.delete("easing")),!T))for(let ie of B.values())if(ie.toString().indexOf("{{")>=0){T=!0;break}}),{type:6,styles:d,easing:P,offset:a.offset,containsDynamicStyles:T,options:null}}_validateStyleAst(a,n){const d=n.currentAnimateTimings;let _=n.currentTime,T=n.currentTime;d&&T>0&&(T-=d.duration+d.delay),a.styles.forEach(P=>{"string"!=typeof P&&P.forEach((B,ie)=>{const Se=n.collectedStyles.get(n.currentQuerySelector),tt=Se.get(ie);let vt=!0;tt&&(T!=_&&T>=tt.startTime&&_<=tt.endTime&&(n.errors.push(function Lt(l,a,n,d,_){return new t.\u0275RuntimeError(3010,!1)}()),vt=!1),T=tt.startTime),vt&&Se.set(ie,{startTime:T,endTime:_}),n.options&&function Pp(l,a,n){const d=a.params||{},_=Qd(l);_.length&&_.forEach(T=>{d.hasOwnProperty(T)||n.push(function gt(l){return new t.\u0275RuntimeError(3001,!1)}())})}(B,n.options,n.errors)})})}visitKeyframes(a,n){const d={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function Yt(){return new t.\u0275RuntimeError(3011,!1)}()),d;let T=0;const P=[];let B=!1,ie=!1,Se=0;const tt=a.steps.map(Zn=>{const Ri=this._makeStyleAst(Zn,n);let wr=null!=Ri.offset?Ri.offset:function n_(l){if("string"==typeof l)return null;let a=null;if(Array.isArray(l))l.forEach(n=>{if(n instanceof Map&&n.has("offset")){const d=n;a=parseFloat(d.get("offset")),d.delete("offset")}});else if(l instanceof Map&&l.has("offset")){const n=l;a=parseFloat(n.get("offset")),n.delete("offset")}return a}(Ri.styles),Er=0;return null!=wr&&(T++,Er=Ri.offset=wr),ie=ie||Er<0||Er>1,B=B||Er<Se,Se=Er,P.push(Er),Ri});ie&&n.errors.push(function En(){return new t.\u0275RuntimeError(3012,!1)}()),B&&n.errors.push(function Fn(){return new t.\u0275RuntimeError(3200,!1)}());const vt=a.steps.length;let rn=0;T>0&&T<vt?n.errors.push(function yn(){return new t.\u0275RuntimeError(3202,!1)}()):0==T&&(rn=1/(vt-1));const Kt=vt-1,Jt=n.currentTime,xn=n.currentAnimateTimings,Nn=xn.duration;return tt.forEach((Zn,Ri)=>{const wr=rn>0?Ri==Kt?1:rn*Ri:P[Ri],Er=wr*Nn;n.currentTime=Jt+xn.delay+Er,xn.duration=Er,this._validateStyleAst(Zn,n),Zn.offset=wr,d.styles.push(Zn)}),d}visitReference(a,n){return{type:8,animation:zo(this,es(a.animation),n),options:Xu(a.options)}}visitAnimateChild(a,n){return n.depCount++,{type:9,options:Xu(a.options)}}visitAnimateRef(a,n){return{type:10,animation:this.visitReference(a.animation,n),options:Xu(a.options)}}visitQuery(a,n){const d=n.currentQuerySelector,_=a.options||{};n.queryCount++,n.currentQuery=a;const[T,P]=function rc(l){const a=!!l.split(/\s*,\s*/).find(n=>":self"==n);return a&&(l=l.replace(am,"")),l=l.replace(/@\*/g,tm).replace(/@\w+/g,n=>tm+"-"+n.slice(1)).replace(/:animating/g,Mg),[l,a]}(a.selector);n.currentQuerySelector=d.length?d+" "+T:T,gr(n.collectedStyles,n.currentQuerySelector,new Map);const B=zo(this,es(a.animation),n);return n.currentQuery=null,n.currentQuerySelector=d,{type:11,selector:T,limit:_.limit||0,optional:!!_.optional,includeSelf:P,animation:B,originalSelector:a.selector,options:Xu(a.options)}}visitStagger(a,n){n.currentQuery||n.errors.push(function Dn(){return new t.\u0275RuntimeError(3013,!1)}());const d="full"===a.timings?{duration:0,delay:0,easing:"full"}:Zu(a.timings,n.errors,!0);return{type:12,animation:zo(this,es(a.animation),n),timings:d,options:null}}}class rh{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Xu(l){return l?(l=ec(l)).params&&(l.params=function um(l){return l?ec(l):null}(l.params)):l={},l}function Ag(l,a,n){return{duration:l,delay:a,easing:n}}function dm(l,a,n,d,_,T,P=null,B=!1){return{type:1,element:l,keyframes:a,preStyleProps:n,postStyleProps:d,duration:_,delay:T,totalTime:_+T,easing:P,subTimeline:B}}class oh{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,n){let d=this._map.get(a);d||this._map.set(a,d=[]),d.push(...n)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const Rp=new RegExp(":enter","g"),jo=new RegExp(":leave","g");function Lp(l,a,n,d,_,T=new Map,P=new Map,B,ie,Se=[]){return(new Mv).buildKeyframes(l,a,n,d,_,T,P,B,ie,Se)}class Mv{buildKeyframes(a,n,d,_,T,P,B,ie,Se,tt=[]){Se=Se||new oh;const vt=new Fp(a,n,Se,_,T,tt,[]);vt.options=ie;const rn=ie.delay?Jl(ie.delay):0;vt.currentTimeline.delayNextStep(rn),vt.currentTimeline.setStyles([P],null,vt.errors,ie),zo(this,d,vt);const Kt=vt.timelines.filter(Jt=>Jt.containsAnimation());if(Kt.length&&B.size){let Jt;for(let xn=Kt.length-1;xn>=0;xn--){const Nn=Kt[xn];if(Nn.element===n){Jt=Nn;break}}Jt&&!Jt.allowOnlyTimelineStyles()&&Jt.setStyles([B],null,vt.errors,ie)}return Kt.length?Kt.map(Jt=>Jt.buildKeyframes()):[dm(n,[],[],[],0,rn,"",!1)]}visitTrigger(a,n){}visitState(a,n){}visitTransition(a,n){}visitAnimateChild(a,n){const d=n.subInstructions.get(n.element);if(d){const _=n.createSubContext(a.options),T=n.currentTimeline.currentTime,P=this._visitSubInstructions(d,_,_.options);T!=P&&n.transformIntoNewTimeline(P)}n.previousNode=a}visitAnimateRef(a,n){const d=n.createSubContext(a.options);d.transformIntoNewTimeline(),this._applyAnimationRefDelays([a.options,a.animation.options],n,d),this.visitReference(a.animation,d),n.transformIntoNewTimeline(d.currentTimeline.currentTime),n.previousNode=a}_applyAnimationRefDelays(a,n,d){for(const _ of a){const T=_?.delay;if(T){const P="number"==typeof T?T:Jl(Oa(T,_?.params??{},n.errors));d.delayNextStep(P)}}}_visitSubInstructions(a,n,d){let T=n.currentTimeline.currentTime;const P=null!=d.duration?Jl(d.duration):null,B=null!=d.delay?Jl(d.delay):null;return 0!==P&&a.forEach(ie=>{const Se=n.appendInstructionToTimeline(ie,P,B);T=Math.max(T,Se.duration+Se.delay)}),T}visitReference(a,n){n.updateOptions(a.options,!0),zo(this,a.animation,n),n.previousNode=a}visitSequence(a,n){const d=n.subContextCount;let _=n;const T=a.options;if(T&&(T.params||T.delay)&&(_=n.createSubContext(T),_.transformIntoNewTimeline(),null!=T.delay)){6==_.previousNode.type&&(_.currentTimeline.snapshotCurrentStyles(),_.previousNode=hs);const P=Jl(T.delay);_.delayNextStep(P)}a.steps.length&&(a.steps.forEach(P=>zo(this,P,_)),_.currentTimeline.applyStylesToKeyframe(),_.subContextCount>d&&_.transformIntoNewTimeline()),n.previousNode=a}visitGroup(a,n){const d=[];let _=n.currentTimeline.currentTime;const T=a.options&&a.options.delay?Jl(a.options.delay):0;a.steps.forEach(P=>{const B=n.createSubContext(a.options);T&&B.delayNextStep(T),zo(this,P,B),_=Math.max(_,B.currentTimeline.currentTime),d.push(B.currentTimeline)}),d.forEach(P=>n.currentTimeline.mergeTimelineCollectedStyles(P)),n.transformIntoNewTimeline(_),n.previousNode=a}_visitTiming(a,n){if(a.dynamic){const d=a.strValue;return Zu(n.params?Oa(d,n.params,n.errors):d,n.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,n){const d=n.currentAnimateTimings=this._visitTiming(a.timings,n),_=n.currentTimeline;d.delay&&(n.incrementTime(d.delay),_.snapshotCurrentStyles());const T=a.style;5==T.type?this.visitKeyframes(T,n):(n.incrementTime(d.duration),this.visitStyle(T,n),_.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=a}visitStyle(a,n){const d=n.currentTimeline,_=n.currentAnimateTimings;!_&&d.hasCurrentStyleProperties()&&d.forwardFrame();const T=_&&_.easing||a.easing;a.isEmptyStep?d.applyEmptyStep(T):d.setStyles(a.styles,T,n.errors,n.options),n.previousNode=a}visitKeyframes(a,n){const d=n.currentAnimateTimings,_=n.currentTimeline.duration,T=d.duration,B=n.createSubContext().currentTimeline;B.easing=d.easing,a.styles.forEach(ie=>{B.forwardTime((ie.offset||0)*T),B.setStyles(ie.styles,ie.easing,n.errors,n.options),B.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(B),n.transformIntoNewTimeline(_+T),n.previousNode=a}visitQuery(a,n){const d=n.currentTimeline.currentTime,_=a.options||{},T=_.delay?Jl(_.delay):0;T&&(6===n.previousNode.type||0==d&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=hs);let P=d;const B=n.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!_.optional,n.errors);n.currentQueryTotal=B.length;let ie=null;B.forEach((Se,tt)=>{n.currentQueryIndex=tt;const vt=n.createSubContext(a.options,Se);T&&vt.delayNextStep(T),Se===n.element&&(ie=vt.currentTimeline),zo(this,a.animation,vt),vt.currentTimeline.applyStylesToKeyframe(),P=Math.max(P,vt.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(P),ie&&(n.currentTimeline.mergeTimelineCollectedStyles(ie),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=a}visitStagger(a,n){const d=n.parentContext,_=n.currentTimeline,T=a.timings,P=Math.abs(T.duration),B=P*(n.currentQueryTotal-1);let ie=P*n.currentQueryIndex;switch(T.duration<0?"reverse":T.easing){case"reverse":ie=B-ie;break;case"full":ie=d.currentStaggerTime}const tt=n.currentTimeline;ie&&tt.delayNextStep(ie);const vt=tt.currentTime;zo(this,a.animation,n),n.previousNode=a,d.currentStaggerTime=_.currentTime-vt+(_.startTime-d.currentTimeline.startTime)}}const hs={};class Fp{constructor(a,n,d,_,T,P,B,ie){this._driver=a,this.element=n,this.subInstructions=d,this._enterClassName=_,this._leaveClassName=T,this.errors=P,this.timelines=B,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ie||new cl(this._driver,n,0),B.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,n){if(!a)return;const d=a;let _=this.options;null!=d.duration&&(_.duration=Jl(d.duration)),null!=d.delay&&(_.delay=Jl(d.delay));const T=d.params;if(T){let P=_.params;P||(P=this.options.params={}),Object.keys(T).forEach(B=>{(!n||!P.hasOwnProperty(B))&&(P[B]=Oa(T[B],P,this.errors))})}}_copyOptions(){const a={};if(this.options){const n=this.options.params;if(n){const d=a.params={};Object.keys(n).forEach(_=>{d[_]=n[_]})}}return a}createSubContext(a=null,n,d){const _=n||this.element,T=new Fp(this._driver,_,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(_,d||0));return T.previousNode=this.previousNode,T.currentAnimateTimings=this.currentAnimateTimings,T.options=this._copyOptions(),T.updateOptions(a),T.currentQueryIndex=this.currentQueryIndex,T.currentQueryTotal=this.currentQueryTotal,T.parentContext=this,this.subContextCount++,T}transformIntoNewTimeline(a){return this.previousNode=hs,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,n,d){const _={duration:n??a.duration,delay:this.currentTimeline.currentTime+(d??0)+a.delay,easing:""},T=new lh(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,_,a.stretchStartingKeyframe);return this.timelines.push(T),_}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,n,d,_,T,P){let B=[];if(_&&B.push(this.element),a.length>0){a=(a=a.replace(Rp,"."+this._enterClassName)).replace(jo,"."+this._leaveClassName);let Se=this._driver.query(this.element,a,1!=d);0!==d&&(Se=d<0?Se.slice(Se.length+d,Se.length):Se.slice(0,d)),B.push(...Se)}return!T&&0==B.length&&P.push(function oi(l){return new t.\u0275RuntimeError(3014,!1)}()),B}}class cl{constructor(a,n,d,_){this._driver=a,this.element=n,this.startTime=d,this._elementTimelineStylesLookup=_,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+a),n&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,n){return this.applyStylesToKeyframe(),new cl(this._driver,a,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,n){this._localTimelineStyles.set(a,n),this._globalTimelineStyles.set(a,n),this._styleSummary.set(a,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&this._previousKeyframe.set("easing",a);for(let[n,d]of this._globalTimelineStyles)this._backFill.set(n,d||E),this._currentKeyframe.set(n,E);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,n,d,_){n&&this._previousKeyframe.set("easing",n);const T=_&&_.params||{},P=function ps(l,a){const n=new Map;let d;return l.forEach(_=>{if("*"===_){d=d||a.keys();for(let T of d)n.set(T,E)}else Do(_,n)}),n}(a,this._globalTimelineStyles);for(let[B,ie]of P){const Se=Oa(ie,T,d);this._pendingStyles.set(B,Se),this._localTimelineStyles.has(B)||this._backFill.set(B,this._globalTimelineStyles.get(B)??E),this._updateStyle(B,Se)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((a,n)=>{this._currentKeyframe.set(n,a)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((a,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,a)}))}snapshotCurrentStyles(){for(let[a,n]of this._localTimelineStyles)this._pendingStyles.set(a,n),this._updateStyle(a,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let n in this._currentKeyframe)a.push(n);return a}mergeTimelineCollectedStyles(a){a._styleSummary.forEach((n,d)=>{const _=this._styleSummary.get(d);(!_||n.time>_.time)&&this._updateStyle(d,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,n=new Set,d=1===this._keyframes.size&&0===this.duration;let _=[];this._keyframes.forEach((B,ie)=>{const Se=Do(B,new Map,this._backFill);Se.forEach((tt,vt)=>{tt===He?a.add(vt):tt===E&&n.add(vt)}),d||Se.set("offset",ie/this.duration),_.push(Se)});const T=a.size?Jd(a.values()):[],P=n.size?Jd(n.values()):[];if(d){const B=_[0],ie=new Map(B);B.set("offset",0),ie.set("offset",1),_=[B,ie]}return dm(this.element,_,T,P,this.duration,this.startTime,this.easing,!1)}}class lh extends cl{constructor(a,n,d,_,T,P,B=!1){super(a,n,P.delay),this.keyframes=d,this.preStyleProps=_,this.postStyleProps=T,this._stretchStartingKeyframe=B,this.timings={duration:P.duration,delay:P.delay,easing:P.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:n,duration:d,easing:_}=this.timings;if(this._stretchStartingKeyframe&&n){const T=[],P=d+n,B=n/P,ie=Do(a[0]);ie.set("offset",0),T.push(ie);const Se=Do(a[0]);Se.set("offset",Vo(B)),T.push(Se);const tt=a.length-1;for(let vt=1;vt<=tt;vt++){let rn=Do(a[vt]);const Kt=rn.get("offset");rn.set("offset",Vo((n+Kt*d)/P)),T.push(rn)}d=P,n=0,_="",a=T}return dm(this.element,a,this.preStyleProps,this.postStyleProps,d,n,_,!0)}}function Vo(l,a=3){const n=Math.pow(10,a-1);return Math.round(l*n)/n}class Ku{}const Qu=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Pg extends Ku{normalizePropertyName(a,n){return im(a)}normalizeStyleValue(a,n,d,_){let T="";const P=d.toString().trim();if(Qu.has(n)&&0!==d&&"0"!==d)if("number"==typeof d)T="px";else{const B=d.match(/^[+-]?[\d\.]+([a-z]*)$/);B&&0==B[1].length&&_.push(function Dt(l,a){return new t.\u0275RuntimeError(3005,!1)}())}return P+T}}function Ra(l,a,n,d,_,T,P,B,ie,Se,tt,vt,rn){return{type:0,element:l,triggerName:a,isRemovalTransition:_,fromState:n,fromStyles:T,toState:d,toStyles:P,timelines:B,queriedElements:ie,preStyleProps:Se,postStyleProps:tt,totalTime:vt,errors:rn}}const oc={};class Og{constructor(a,n,d){this._triggerName=a,this.ast=n,this._stateStyles=d}match(a,n,d,_){return function sc(l,a,n,d,_){return l.some(T=>T(a,n,d,_))}(this.ast.matchers,a,n,d,_)}buildStyles(a,n,d){let _=this._stateStyles.get("*");return void 0!==a&&(_=this._stateStyles.get(a?.toString())||_),_?_.buildStyles(n,d):new Map}build(a,n,d,_,T,P,B,ie,Se,tt){const vt=[],rn=this.ast.options&&this.ast.options.params||oc,Jt=this.buildStyles(d,B&&B.params||oc,vt),xn=ie&&ie.params||oc,Nn=this.buildStyles(_,xn,vt),Zn=new Set,Ri=new Map,wr=new Map,Er="void"===_,Qa={params:ac(xn,rn),delay:this.ast.options?.delay},bu=tt?[]:Lp(a,n,this.ast.animation,T,P,Jt,Nn,Qa,Se,vt);let Rs=0;if(bu.forEach(Md=>{Rs=Math.max(Md.duration+Md.delay,Rs)}),vt.length)return Ra(n,this._triggerName,d,_,Er,Jt,Nn,[],[],Ri,wr,Rs,vt);bu.forEach(Md=>{const Id=Md.element,Ib=gr(Ri,Id,new Set);Md.preStyleProps.forEach(Of=>Ib.add(Of));const Zy=gr(wr,Id,new Set);Md.postStyleProps.forEach(Of=>Zy.add(Of)),Id!==n&&Zn.add(Id)});const Td=Jd(Zn.values());return Ra(n,this._triggerName,d,_,Er,Jt,Nn,bu,Td,Ri,wr,Rs)}}function ac(l,a){const n=ec(a);for(const d in l)l.hasOwnProperty(d)&&null!=l[d]&&(n[d]=l[d]);return n}class hm{constructor(a,n,d){this.styles=a,this.defaultParams=n,this.normalizer=d}buildStyles(a,n){const d=new Map,_=ec(this.defaultParams);return Object.keys(a).forEach(T=>{const P=a[T];null!==P&&(_[T]=P)}),this.styles.styles.forEach(T=>{"string"!=typeof T&&T.forEach((P,B)=>{P&&(P=Oa(P,_,n));const ie=this.normalizer.normalizePropertyName(B,n);P=this.normalizer.normalizeStyleValue(B,ie,P,n),d.set(B,P)})}),d}}class uh{constructor(a,n,d){this.name=a,this.ast=n,this._normalizer=d,this.transitionFactories=[],this.states=new Map,n.states.forEach(_=>{this.states.set(_.name,new hm(_.style,_.options&&_.options.params||{},d))}),Bp(this.states,"true","1"),Bp(this.states,"false","0"),n.transitions.forEach(_=>{this.transitionFactories.push(new Og(a,_,this.states))}),this.fallbackTransition=function Np(l,a,n){return new Og(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(P,B)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,n,d,_){return this.transitionFactories.find(P=>P.match(a,n,d,_))||null}matchStyles(a,n,d){return this.fallbackTransition.buildStyles(a,n,d)}}function Bp(l,a,n){l.has(a)?l.has(n)||l.set(n,l.get(a)):l.has(n)&&l.set(a,l.get(n))}const r_=new oh;class dh{constructor(a,n,d){this.bodyNode=a,this._driver=n,this._normalizer=d,this._animations=new Map,this._playersById=new Map,this.players=[]}register(a,n){const d=[],_=[],T=ih(this._driver,n,d,_);if(d.length)throw function io(l){return new t.\u0275RuntimeError(3503,!1)}();this._animations.set(a,T)}_buildPlayer(a,n,d){const _=a.element,T=Ms(0,this._normalizer,0,a.keyframes,n,d);return this._driver.animate(_,T,a.duration,a.delay,a.easing,[],!0)}create(a,n,d={}){const _=[],T=this._animations.get(a);let P;const B=new Map;if(T?(P=Lp(this._driver,n,T,Da,ka,new Map,new Map,d,r_,_),P.forEach(tt=>{const vt=gr(B,tt.element,new Map);tt.postStyleProps.forEach(rn=>vt.set(rn,null))})):(_.push(function Xr(){return new t.\u0275RuntimeError(3300,!1)}()),P=[]),_.length)throw function Qo(l){return new t.\u0275RuntimeError(3504,!1)}();B.forEach((tt,vt)=>{tt.forEach((rn,Kt)=>{tt.set(Kt,this._driver.computeStyle(vt,Kt,E))})});const Se=ro(P.map(tt=>{const vt=B.get(tt.element);return this._buildPlayer(tt,new Map,vt)}));return this._playersById.set(a,Se),Se.onDestroy(()=>this.destroy(a)),this.players.push(Se),Se}destroy(a){const n=this._getPlayer(a);n.destroy(),this._playersById.delete(a);const d=this.players.indexOf(n);d>=0&&this.players.splice(d,1)}_getPlayer(a){const n=this._playersById.get(a);if(!n)throw function Ts(l){return new t.\u0275RuntimeError(3301,!1)}();return n}listen(a,n,d,_){const T=al(n,"","","");return Xs(this._getPlayer(a),d,T,_),()=>{}}command(a,n,d,_){if("register"==d)return void this.register(a,_[0]);if("create"==d)return void this.create(a,n,_[0]||{});const T=this._getPlayer(a);switch(d){case"play":T.play();break;case"pause":T.pause();break;case"reset":T.reset();break;case"restart":T.restart();break;case"finish":T.finish();break;case"init":T.init();break;case"setPosition":T.setPosition(parseFloat(_[0]));break;case"destroy":this.destroy(a)}}}const pm="ng-animate-queued",Gc="ng-animate-disabled",zp=[],Rg={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ph={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fs="__ng_removed";class lc{get params(){return this.options.params}constructor(a,n=""){this.namespaceId=n;const d=a&&a.hasOwnProperty("value");if(this.value=function ao(l){return l??null}(d?a.value:a),d){const T=ec(a);delete T.value,this.options=T}else this.options={};this.options.params||(this.options.params={})}absorbOptions(a){const n=a.params;if(n){const d=this.options.params;Object.keys(n).forEach(_=>{null==d[_]&&(d[_]=n[_])})}}}const Fi="void",fm=new lc(Fi);class Js{constructor(a,n,d){this.id=a,this.hostElement=n,this._engine=d,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,Uo(n,this._hostClassName)}listen(a,n,d,_){if(!this._triggers.has(n))throw function tr(l,a){return new t.\u0275RuntimeError(3302,!1)}();if(null==d||0==d.length)throw function Zi(l){return new t.\u0275RuntimeError(3303,!1)}();if(!function fo(l){return"start"==l||"done"==l}(d))throw function Di(l,a){return new t.\u0275RuntimeError(3400,!1)}();const T=gr(this._elementListeners,a,[]),P={name:n,phase:d,callback:_};T.push(P);const B=gr(this._engine.statesByElement,a,new Map);return B.has(n)||(Uo(a,Aa),Uo(a,Aa+"-"+n),B.set(n,fm)),()=>{this._engine.afterFlush(()=>{const ie=T.indexOf(P);ie>=0&&T.splice(ie,1),this._triggers.has(n)||B.delete(n)})}}register(a,n){return!this._triggers.has(a)&&(this._triggers.set(a,n),!0)}_getTrigger(a){const n=this._triggers.get(a);if(!n)throw function br(l){return new t.\u0275RuntimeError(3401,!1)}();return n}trigger(a,n,d,_=!0){const T=this._getTrigger(n),P=new ta(this.id,n,a);let B=this._engine.statesByElement.get(a);B||(Uo(a,Aa),Uo(a,Aa+"-"+n),this._engine.statesByElement.set(a,B=new Map));let ie=B.get(n);const Se=new lc(d,this.id);if(!(d&&d.hasOwnProperty("value"))&&ie&&Se.absorbOptions(ie.options),B.set(n,Se),ie||(ie=fm),Se.value!==Fi&&ie.value===Se.value){if(!function a_(l,a){const n=Object.keys(l),d=Object.keys(a);if(n.length!=d.length)return!1;for(let _=0;_<n.length;_++){const T=n[_];if(!a.hasOwnProperty(T)||l[T]!==a[T])return!1}return!0}(ie.params,Se.params)){const xn=[],Nn=T.matchStyles(ie.value,ie.params,xn),Zn=T.matchStyles(Se.value,Se.params,xn);xn.length?this._engine.reportError(xn):this._engine.afterFlush(()=>{tc(a,Nn),Is(a,Zn)})}return}const rn=gr(this._engine.playersByElement,a,[]);rn.forEach(xn=>{xn.namespaceId==this.id&&xn.triggerName==n&&xn.queued&&xn.destroy()});let Kt=T.matchTransition(ie.value,Se.value,a,Se.params),Jt=!1;if(!Kt){if(!_)return;Kt=T.fallbackTransition,Jt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:n,transition:Kt,fromState:ie,toState:Se,player:P,isFallbackTransition:Jt}),Jt||(Uo(a,pm),P.onStart(()=>{cc(a,pm)})),P.onDone(()=>{let xn=this.players.indexOf(P);xn>=0&&this.players.splice(xn,1);const Nn=this._engine.playersByElement.get(a);if(Nn){let Zn=Nn.indexOf(P);Zn>=0&&Nn.splice(Zn,1)}}),this.players.push(P),rn.push(P),P}deregister(a){this._triggers.delete(a),this._engine.statesByElement.forEach(n=>n.delete(a)),this._elementListeners.forEach((n,d)=>{this._elementListeners.set(d,n.filter(_=>_.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const n=this._engine.playersByElement.get(a);n&&(n.forEach(d=>d.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,n){const d=this._engine.driver.query(a,tm,!0);d.forEach(_=>{if(_[fs])return;const T=this._engine.fetchNamespacesByElement(_);T.size?T.forEach(P=>P.triggerLeaveAnimation(_,n,!1,!0)):this.clearElementCache(_)}),this._engine.afterFlushAnimationsDone(()=>d.forEach(_=>this.clearElementCache(_)))}triggerLeaveAnimation(a,n,d,_){const T=this._engine.statesByElement.get(a),P=new Map;if(T){const B=[];if(T.forEach((ie,Se)=>{if(P.set(Se,ie.value),this._triggers.has(Se)){const tt=this.trigger(a,Se,Fi,_);tt&&B.push(tt)}}),B.length)return this._engine.markElementAsRemoved(this.id,a,!0,n,P),d&&ro(B).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const n=this._elementListeners.get(a),d=this._engine.statesByElement.get(a);if(n&&d){const _=new Set;n.forEach(T=>{const P=T.name;if(_.has(P))return;_.add(P);const ie=this._triggers.get(P).fallbackTransition,Se=d.get(P)||fm,tt=new lc(Fi),vt=new ta(this.id,P,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:P,transition:ie,fromState:Se,toState:tt,player:vt,isFallbackTransition:!0})})}}removeNode(a,n){const d=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,n),this.triggerLeaveAnimation(a,n,!0))return;let _=!1;if(d.totalAnimations){const T=d.players.length?d.playersByQueriedElement.get(a):[];if(T&&T.length)_=!0;else{let P=a;for(;P=P.parentNode;)if(d.statesByElement.get(P)){_=!0;break}}}if(this.prepareLeaveAnimationListeners(a),_)d.markElementAsRemoved(this.id,a,!1,n);else{const T=a[fs];(!T||T===Rg)&&(d.afterFlush(()=>this.clearElementCache(a)),d.destroyInnerAnimations(a),d._onRemovalComplete(a,n))}}insertNode(a,n){Uo(a,this._hostClassName)}drainQueuedTransitions(a){const n=[];return this._queue.forEach(d=>{const _=d.player;if(_.destroyed)return;const T=d.element,P=this._elementListeners.get(T);P&&P.forEach(B=>{if(B.name==d.triggerName){const ie=al(T,d.triggerName,d.fromState.value,d.toState.value);ie._data=a,Xs(d.player,B.phase,ie,B.callback)}}),_.markedForDestroy?this._engine.afterFlush(()=>{_.destroy()}):n.push(d)}),this._queue=[],n.sort((d,_)=>{const T=d.transition.ast.depCount,P=_.transition.ast.depCount;return 0==T||0==P?T-P:this._engine.driver.containsElement(d.element,_.element)?1:-1})}destroy(a){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let n=!1;return this._elementListeners.has(a)&&(n=!0),n=!!this._queue.find(d=>d.element===a)||n,n}}class ea{_onRemovalComplete(a,n){this.onRemovalComplete(a,n)}constructor(a,n,d){this.bodyNode=a,this.driver=n,this._normalizer=d,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(_,T)=>{}}get queuedPlayers(){const a=[];return this._namespaceList.forEach(n=>{n.players.forEach(d=>{d.queued&&a.push(d)})}),a}createNamespace(a,n){const d=new Js(a,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(d,n):(this.newHostElements.set(n,d),this.collectEnterElement(n)),this._namespaceLookup[a]=d}_balanceNamespaceList(a,n){const d=this._namespaceList,_=this.namespacesByHostElement;if(d.length-1>=0){let P=!1,B=this.driver.getParentElement(n);for(;B;){const ie=_.get(B);if(ie){const Se=d.indexOf(ie);d.splice(Se+1,0,a),P=!0;break}B=this.driver.getParentElement(B)}P||d.unshift(a)}else d.push(a);return _.set(n,a),a}register(a,n){let d=this._namespaceLookup[a];return d||(d=this.createNamespace(a,n)),d}registerTrigger(a,n,d){let _=this._namespaceLookup[a];_&&_.register(n,d)&&this.totalAnimations++}destroy(a,n){if(!a)return;const d=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(d.hostElement),delete this._namespaceLookup[a];const _=this._namespaceList.indexOf(d);_>=0&&this._namespaceList.splice(_,1)}),this.afterFlushAnimationsDone(()=>d.destroy(n))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const n=new Set,d=this.statesByElement.get(a);if(d)for(let _ of d.values())if(_.namespaceId){const T=this._fetchNamespace(_.namespaceId);T&&n.add(T)}return n}trigger(a,n,d,_){if(jp(n)){const T=this._fetchNamespace(a);if(T)return T.trigger(n,d,_),!0}return!1}insertNode(a,n,d,_){if(!jp(n))return;const T=n[fs];if(T&&T.setForRemoval){T.setForRemoval=!1,T.setForMove=!0;const P=this.collectedLeaveElements.indexOf(n);P>=0&&this.collectedLeaveElements.splice(P,1)}if(a){const P=this._fetchNamespace(a);P&&P.insertNode(n,d)}_&&this.collectEnterElement(n)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,n){n?this.disabledNodes.has(a)||(this.disabledNodes.add(a),Uo(a,Gc)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),cc(a,Gc))}removeNode(a,n,d,_){if(jp(n)){const T=a?this._fetchNamespace(a):null;if(T?T.removeNode(n,_):this.markElementAsRemoved(a,n,!1,_),d){const P=this.namespacesByHostElement.get(n);P&&P.id!==a&&P.removeNode(n,_)}}else this._onRemovalComplete(n,_)}markElementAsRemoved(a,n,d,_,T){this.collectedLeaveElements.push(n),n[fs]={namespaceId:a,setForRemoval:_,hasAnimation:d,removedBeforeQueried:!1,previousTriggersValues:T}}listen(a,n,d,_,T){return jp(n)?this._fetchNamespace(a).listen(n,d,_,T):()=>{}}_buildInstruction(a,n,d,_,T){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,d,_,a.fromState.options,a.toState.options,n,T)}destroyInnerAnimations(a){let n=this.driver.query(a,tm,!0);n.forEach(d=>this.destroyActiveAnimationsForElement(d)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(a,Mg,!0),n.forEach(d=>this.finishActiveQueriedAnimationOnElement(d)))}destroyActiveAnimationsForElement(a){const n=this.playersByElement.get(a);n&&n.forEach(d=>{d.queued?d.markedForDestroy=!0:d.destroy()})}finishActiveQueriedAnimationOnElement(a){const n=this.playersByQueriedElement.get(a);n&&n.forEach(d=>d.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return ro(this.players).onDone(()=>a());a()})}processLeaveNode(a){const n=a[fs];if(n&&n.setForRemoval){if(a[fs]=Rg,n.namespaceId){this.destroyInnerAnimations(a);const d=this._fetchNamespace(n.namespaceId);d&&d.clearElementCache(a)}this._onRemovalComplete(a,n.setForRemoval)}a.classList?.contains(Gc)&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(d=>{this.markElementAsDisabled(d,!1)})}flush(a=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((d,_)=>this._balanceNamespaceList(d,_)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let d=0;d<this.collectedEnterElements.length;d++)Uo(this.collectedEnterElements[d],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const d=[];try{n=this._flushAnimations(d,a)}finally{for(let _=0;_<d.length;_++)d[_]()}}else for(let d=0;d<this.collectedLeaveElements.length;d++)this.processLeaveNode(this.collectedLeaveElements[d]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(d=>d()),this._flushFns=[],this._whenQuietFns.length){const d=this._whenQuietFns;this._whenQuietFns=[],n.length?ro(n).onDone(()=>{d.forEach(_=>_())}):d.forEach(_=>_())}}reportError(a){throw function Io(l){return new t.\u0275RuntimeError(3402,!1)}()}_flushAnimations(a,n){const d=new oh,_=[],T=new Map,P=[],B=new Map,ie=new Map,Se=new Map,tt=new Set;this.disabledNodes.forEach(Pn=>{tt.add(Pn);const Yn=this.driver.query(Pn,".ng-animate-queued",!0);for(let ni=0;ni<Yn.length;ni++)tt.add(Yn[ni])});const vt=this.bodyNode,rn=Array.from(this.statesByElement.keys()),Kt=Vp(rn,this.collectedEnterElements),Jt=new Map;let xn=0;Kt.forEach((Pn,Yn)=>{const ni=Da+xn++;Jt.set(Yn,ni),Pn.forEach(Ki=>Uo(Ki,ni))});const Nn=[],Zn=new Set,Ri=new Set;for(let Pn=0;Pn<this.collectedLeaveElements.length;Pn++){const Yn=this.collectedLeaveElements[Pn],ni=Yn[fs];ni&&ni.setForRemoval&&(Nn.push(Yn),Zn.add(Yn),ni.hasAnimation?this.driver.query(Yn,".ng-star-inserted",!0).forEach(Ki=>Zn.add(Ki)):Ri.add(Yn))}const wr=new Map,Er=Vp(rn,Array.from(Zn));Er.forEach((Pn,Yn)=>{const ni=ka+xn++;wr.set(Yn,ni),Pn.forEach(Ki=>Uo(Ki,ni))}),a.push(()=>{Kt.forEach((Pn,Yn)=>{const ni=Jt.get(Yn);Pn.forEach(Ki=>cc(Ki,ni))}),Er.forEach((Pn,Yn)=>{const ni=wr.get(Yn);Pn.forEach(Ki=>cc(Ki,ni))}),Nn.forEach(Pn=>{this.processLeaveNode(Pn)})});const Qa=[],bu=[];for(let Pn=this._namespaceList.length-1;Pn>=0;Pn--)this._namespaceList[Pn].drainQueuedTransitions(n).forEach(ni=>{const Ki=ni.player,s=ni.element;if(Qa.push(Ki),this.collectedEnterElements.length){const L=s[fs];if(L&&L.setForMove){if(L.previousTriggersValues&&L.previousTriggersValues.has(ni.triggerName)){const j=L.previousTriggersValues.get(ni.triggerName),Z=this.statesByElement.get(ni.element);if(Z&&Z.has(ni.triggerName)){const se=Z.get(ni.triggerName);se.value=j,Z.set(ni.triggerName,se)}}return void Ki.destroy()}}const c=!vt||!this.driver.containsElement(vt,s),h=wr.get(s),y=Jt.get(s),w=this._buildInstruction(ni,d,y,h,c);if(w.errors&&w.errors.length)return void bu.push(w);if(c)return Ki.onStart(()=>tc(s,w.fromStyles)),Ki.onDestroy(()=>Is(s,w.toStyles)),void _.push(Ki);if(ni.isFallbackTransition)return Ki.onStart(()=>tc(s,w.fromStyles)),Ki.onDestroy(()=>Is(s,w.toStyles)),void _.push(Ki);const M=[];w.timelines.forEach(L=>{L.stretchStartingKeyframe=!0,this.disabledNodes.has(L.element)||M.push(L)}),w.timelines=M,d.append(s,w.timelines),P.push({instruction:w,player:Ki,element:s}),w.queriedElements.forEach(L=>gr(B,L,[]).push(Ki)),w.preStyleProps.forEach((L,j)=>{if(L.size){let Z=ie.get(j);Z||ie.set(j,Z=new Set),L.forEach((se,Ie)=>Z.add(Ie))}}),w.postStyleProps.forEach((L,j)=>{let Z=Se.get(j);Z||Se.set(j,Z=new Set),L.forEach((se,Ie)=>Z.add(Ie))})});if(bu.length){const Pn=[];bu.forEach(Yn=>{Pn.push(function Jo(l,a){return new t.\u0275RuntimeError(3505,!1)}())}),Qa.forEach(Yn=>Yn.destroy()),this.reportError(Pn)}const Rs=new Map,Td=new Map;P.forEach(Pn=>{const Yn=Pn.element;d.has(Yn)&&(Td.set(Yn,Yn),this._beforeAnimationBuild(Pn.player.namespaceId,Pn.instruction,Rs))}),_.forEach(Pn=>{const Yn=Pn.element;this._getPreviousPlayers(Yn,!1,Pn.namespaceId,Pn.triggerName,null).forEach(Ki=>{gr(Rs,Yn,[]).push(Ki),Ki.destroy()})});const Md=Nn.filter(Pn=>La(Pn,ie,Se)),Id=new Map;Ju(Id,this.driver,Ri,Se,E).forEach(Pn=>{La(Pn,ie,Se)&&Md.push(Pn)});const Zy=new Map;Kt.forEach((Pn,Yn)=>{Ju(Zy,this.driver,new Set(Pn),ie,He)}),Md.forEach(Pn=>{const Yn=Id.get(Pn),ni=Zy.get(Pn);Id.set(Pn,new Map([...Array.from(Yn?.entries()??[]),...Array.from(ni?.entries()??[])]))});const Of=[],Db=[],kb={};P.forEach(Pn=>{const{element:Yn,player:ni,instruction:Ki}=Pn;if(d.has(Yn)){if(tt.has(Yn))return ni.onDestroy(()=>Is(Yn,Ki.toStyles)),ni.disabled=!0,ni.overrideTotalTime(Ki.totalTime),void _.push(ni);let s=kb;if(Td.size>1){let h=Yn;const y=[];for(;h=h.parentNode;){const w=Td.get(h);if(w){s=w;break}y.push(h)}y.forEach(w=>Td.set(w,s))}const c=this._buildAnimation(ni.namespaceId,Ki,Rs,T,Zy,Id);if(ni.setRealPlayer(c),s===kb)Of.push(ni);else{const h=this.playersByElement.get(s);h&&h.length&&(ni.parentPlayer=ro(h)),_.push(ni)}}else tc(Yn,Ki.fromStyles),ni.onDestroy(()=>Is(Yn,Ki.toStyles)),Db.push(ni),tt.has(Yn)&&_.push(ni)}),Db.forEach(Pn=>{const Yn=T.get(Pn.element);if(Yn&&Yn.length){const ni=ro(Yn);Pn.setRealPlayer(ni)}}),_.forEach(Pn=>{Pn.parentPlayer?Pn.syncPlayerEvents(Pn.parentPlayer):Pn.destroy()});for(let Pn=0;Pn<Nn.length;Pn++){const Yn=Nn[Pn],ni=Yn[fs];if(cc(Yn,ka),ni&&ni.hasAnimation)continue;let Ki=[];if(B.size){let c=B.get(Yn);c&&c.length&&Ki.push(...c);let h=this.driver.query(Yn,Mg,!0);for(let y=0;y<h.length;y++){let w=B.get(h[y]);w&&w.length&&Ki.push(...w)}}const s=Ki.filter(c=>!c.destroyed);s.length?Fg(this,Yn,s):this.processLeaveNode(Yn)}return Nn.length=0,Of.forEach(Pn=>{this.players.push(Pn),Pn.onDone(()=>{Pn.destroy();const Yn=this.players.indexOf(Pn);this.players.splice(Yn,1)}),Pn.play()}),Of}elementContainsData(a,n){let d=!1;const _=n[fs];return _&&_.setForRemoval&&(d=!0),this.playersByElement.has(n)&&(d=!0),this.playersByQueriedElement.has(n)&&(d=!0),this.statesByElement.has(n)&&(d=!0),this._fetchNamespace(a).elementContainsData(n)||d}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,n,d,_,T){let P=[];if(n){const B=this.playersByQueriedElement.get(a);B&&(P=B)}else{const B=this.playersByElement.get(a);if(B){const ie=!T||T==Fi;B.forEach(Se=>{Se.queued||!ie&&Se.triggerName!=_||P.push(Se)})}}return(d||_)&&(P=P.filter(B=>!(d&&d!=B.namespaceId||_&&_!=B.triggerName))),P}_beforeAnimationBuild(a,n,d){const T=n.element,P=n.isRemovalTransition?void 0:a,B=n.isRemovalTransition?void 0:n.triggerName;for(const ie of n.timelines){const Se=ie.element,tt=Se!==T,vt=gr(d,Se,[]);this._getPreviousPlayers(Se,tt,P,B,n.toState).forEach(Kt=>{const Jt=Kt.getRealPlayer();Jt.beforeDestroy&&Jt.beforeDestroy(),Kt.destroy(),vt.push(Kt)})}tc(T,n.fromStyles)}_buildAnimation(a,n,d,_,T,P){const B=n.triggerName,ie=n.element,Se=[],tt=new Set,vt=new Set,rn=n.timelines.map(Jt=>{const xn=Jt.element;tt.add(xn);const Nn=xn[fs];if(Nn&&Nn.removedBeforeQueried)return new we(Jt.duration,Jt.delay);const Zn=xn!==ie,Ri=function Ng(l){const a=[];return Or(l,a),a}((d.get(xn)||zp).map(Rs=>Rs.getRealPlayer())).filter(Rs=>!!Rs.element&&Rs.element===xn),wr=T.get(xn),Er=P.get(xn),Qa=Ms(0,this._normalizer,0,Jt.keyframes,wr,Er),bu=this._buildPlayer(Jt,Qa,Ri);if(Jt.subTimeline&&_&&vt.add(xn),Zn){const Rs=new ta(a,B,xn);Rs.setRealPlayer(bu),Se.push(Rs)}return bu});Se.forEach(Jt=>{gr(this.playersByQueriedElement,Jt.element,[]).push(Jt),Jt.onDone(()=>function na(l,a,n){let d=l.get(a);if(d){if(d.length){const _=d.indexOf(n);d.splice(_,1)}0==d.length&&l.delete(a)}return d}(this.playersByQueriedElement,Jt.element,Jt))}),tt.forEach(Jt=>Uo(Jt,Tg));const Kt=ro(rn);return Kt.onDestroy(()=>{tt.forEach(Jt=>cc(Jt,Tg)),Is(ie,n.toStyles)}),vt.forEach(Jt=>{gr(_,Jt,[]).push(Kt)}),Kt}_buildPlayer(a,n,d){return n.length>0?this.driver.animate(a.element,n,a.duration,a.delay,a.easing,d):new we(a.duration,a.delay)}}class ta{constructor(a,n,d){this.namespaceId=a,this.triggerName=n,this.element=d,this._player=new we,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,this._queuedCallbacks.forEach((n,d)=>{n.forEach(_=>Xs(a,d,void 0,_))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const n=this._player;n.triggerCallback&&a.onStart(()=>n.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,n){gr(this._queuedCallbacks,a,[]).push(n)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const n=this._player;n.triggerCallback&&n.triggerCallback(a)}}function jp(l){return l&&1===l.nodeType}function Lg(l,a){const n=l.style.display;return l.style.display=a??"none",n}function Ju(l,a,n,d,_){const T=[];n.forEach(ie=>T.push(Lg(ie)));const P=[];d.forEach((ie,Se)=>{const tt=new Map;ie.forEach(vt=>{const rn=a.computeStyle(Se,vt,_);tt.set(vt,rn),(!rn||0==rn.length)&&(Se[fs]=ph,P.push(Se))}),l.set(Se,tt)});let B=0;return n.forEach(ie=>Lg(ie,T[B++])),P}function Vp(l,a){const n=new Map;if(l.forEach(B=>n.set(B,[])),0==a.length)return n;const d=1,_=new Set(a),T=new Map;function P(B){if(!B)return d;let ie=T.get(B);if(ie)return ie;const Se=B.parentNode;return ie=n.has(Se)?Se:_.has(Se)?d:P(Se),T.set(B,ie),ie}return a.forEach(B=>{const ie=P(B);ie!==d&&n.get(ie).push(B)}),n}function Uo(l,a){l.classList?.add(a)}function cc(l,a){l.classList?.remove(a)}function Fg(l,a,n){ro(n).onDone(()=>l.processLeaveNode(a))}function Or(l,a){for(let n=0;n<l.length;n++){const d=l[n];d instanceof Ce?Or(d.players,a):a.push(d)}}function La(l,a,n){const d=n.get(l);if(!d)return!1;let _=a.get(l);return _?d.forEach(T=>_.add(T)):a.set(l,d),n.delete(l),!0}class ia{constructor(a,n,d){this.bodyNode=a,this._driver=n,this._normalizer=d,this._triggerCache={},this.onRemovalComplete=(_,T)=>{},this._transitionEngine=new ea(a,n,d),this._timelineEngine=new dh(a,n,d),this._transitionEngine.onRemovalComplete=(_,T)=>this.onRemovalComplete(_,T)}registerTrigger(a,n,d,_,T){const P=a+"-"+_;let B=this._triggerCache[P];if(!B){const ie=[],Se=[],tt=ih(this._driver,T,ie,Se);if(ie.length)throw function Bi(l,a){return new t.\u0275RuntimeError(3404,!1)}();B=function ch(l,a,n){return new uh(l,a,n)}(_,tt,this._normalizer),this._triggerCache[P]=B}this._transitionEngine.registerTrigger(n,_,B)}register(a,n){this._transitionEngine.register(a,n)}destroy(a,n){this._transitionEngine.destroy(a,n)}onInsert(a,n,d,_){this._transitionEngine.insertNode(a,n,d,_)}onRemove(a,n,d,_){this._transitionEngine.removeNode(a,n,_||!1,d)}disableAnimations(a,n){this._transitionEngine.markElementAsDisabled(a,n)}process(a,n,d,_){if("@"==d.charAt(0)){const[T,P]=Eg(d);this._timelineEngine.command(T,n,P,_)}else this._transitionEngine.trigger(a,n,d,_)}listen(a,n,d,_,T){if("@"==d.charAt(0)){const[P,B]=Eg(d);return this._timelineEngine.listen(P,n,B,T)}return this._transitionEngine.listen(a,n,d,_,T)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Up=(()=>{class l{constructor(n,d,_){this._element=n,this._startStyles=d,this._endStyles=_,this._state=0;let T=l.initialStylesByElement.get(n);T||l.initialStylesByElement.set(n,T=new Map),this._initialStyles=T}start(){this._state<1&&(this._startStyles&&Is(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Is(this._element,this._initialStyles),this._endStyles&&(Is(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(tc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),Is(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function mh(l){let a=null;return l.forEach((n,d)=>{(function Bg(l){return"display"===l||"position"===l})(d)&&(a=a||new Map,a.set(d,n))}),a}class l_{constructor(a,n,d,_){this.element=a,this.keyframes=n,this.options=d,this._specialStyles=_,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=d.duration,this._delay=d.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(a){const n=[];return a.forEach(d=>{n.push(Object.fromEntries(d))}),n}_triggerWebAnimation(a,n,d){return a.animate(this._convertKeyframesToObject(n),d)}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a=new Map;this.hasStarted()&&this._finalKeyframe.forEach((d,_)=>{"offset"!==_&&a.set(_,this._finished?d:eh(this.element,_))}),this.currentSnapshot=a}triggerCallback(a){const n="start"===a?this._onStartFns:this._onDoneFns;n.forEach(d=>d()),n.length=0}}class zg{validateStyleProperty(a){return!0}validateAnimatableStyleProperty(a){return!0}matchesElement(a,n){return!1}containsElement(a,n){return em(a,n)}getParentElement(a){return Vc(a)}query(a,n,d){return Sg(a,n,d)}computeStyle(a,n,d){return window.getComputedStyle(a)[n]}animate(a,n,d,_,T,P=[]){const ie={duration:d,delay:_,fill:0==_?"both":"forwards"};T&&(ie.easing=T);const Se=new Map,tt=P.filter(Kt=>Kt instanceof l_);(function Dg(l,a){return 0===l||0===a})(d,_)&&tt.forEach(Kt=>{Kt.currentSnapshot.forEach((Jt,xn)=>Se.set(xn,Jt))});let vt=function Pr(l){return l.length?l[0]instanceof Map?l:l.map(a=>t_(a)):[]}(n).map(Kt=>Do(Kt));vt=function rm(l,a,n){if(n.size&&a.length){let d=a[0],_=[];if(n.forEach((T,P)=>{d.has(P)||_.push(P),d.set(P,T)}),_.length)for(let T=1;T<a.length;T++){let P=a[T];_.forEach(B=>P.set(B,eh(l,B)))}}return a}(a,vt,Se);const rn=function fh(l,a){let n=null,d=null;return Array.isArray(a)&&a.length?(n=mh(a[0]),a.length>1&&(d=mh(a[a.length-1]))):a instanceof Map&&(n=mh(a)),n||d?new Up(l,n,d):null}(a,vt);return new l_(a,vt,ie,rn)}}let Q0=(()=>{class l extends f{constructor(n,d){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(d.body,{id:"0",encapsulation:t.ViewEncapsulation.None,styles:[],data:{animation:[]}})}build(n){const d=this._nextAnimationId.toString();this._nextAnimationId++;const _=Array.isArray(n)?F(n):n;return gh(this._renderer,null,d,"register",[_]),new c_(d,this._renderer)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(t.RendererFactory2),t.\u0275\u0275inject(Ee))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();class c_ extends b{constructor(a,n){super(),this._id=a,this._renderer=n}create(a,n){return new Hp(this._id,a,n||{},this._renderer)}}class Hp{constructor(a,n,d,_){this.id=a,this.element=n,this._renderer=_,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",d)}_listen(a,n){return this._renderer.listen(this.element,`@@${this.id}:${a}`,n)}_command(a,...n){return gh(this._renderer,this.element,this.id,a,n)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function gh(l,a,n,d,_){return l.setProperty(a,`@@${n}:${d}`,_)}const mm="@.disabled";let Wc=(()=>{class l{constructor(n,d,_){this.delegate=n,this.engine=d,this._zone=_,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),d.onRemovalComplete=(T,P)=>{const B=P?.parentNode(T);B&&P.removeChild(B,T)}}createRenderer(n,d){const T=this.delegate.createRenderer(n,d);if(!(n&&d&&d.data&&d.data.animation)){let tt=this._rendererCache.get(T);return tt||(tt=new jg("",T,this.engine,()=>this._rendererCache.delete(T)),this._rendererCache.set(T,tt)),tt}const P=d.id,B=d.id+"-"+this._currentId;this._currentId++,this.engine.register(B,n);const ie=tt=>{Array.isArray(tt)?tt.forEach(ie):this.engine.registerTrigger(P,B,n,tt.name,tt)};return d.data.animation.forEach(ie),new u_(this,B,T,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,d,_){n>=0&&n<this._microtaskId?this._zone.run(()=>d(_)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(T=>{const[P,B]=T;P(B)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([d,_]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(t.RendererFactory2),t.\u0275\u0275inject(ia),t.\u0275\u0275inject(t.NgZone))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();class jg{constructor(a,n,d,_){this.namespaceId=a,this.delegate=n,this.engine=d,this._onDestroy=_,this.destroyNode=this.delegate.destroyNode?T=>n.destroyNode(T):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(a,n){return this.delegate.createElement(a,n)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,n){this.delegate.appendChild(a,n),this.engine.onInsert(this.namespaceId,n,a,!1)}insertBefore(a,n,d,_=!0){this.delegate.insertBefore(a,n,d),this.engine.onInsert(this.namespaceId,n,a,_)}removeChild(a,n,d){this.engine.onRemove(this.namespaceId,n,this.delegate,d)}selectRootElement(a,n){return this.delegate.selectRootElement(a,n)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,n,d,_){this.delegate.setAttribute(a,n,d,_)}removeAttribute(a,n,d){this.delegate.removeAttribute(a,n,d)}addClass(a,n){this.delegate.addClass(a,n)}removeClass(a,n){this.delegate.removeClass(a,n)}setStyle(a,n,d,_){this.delegate.setStyle(a,n,d,_)}removeStyle(a,n,d){this.delegate.removeStyle(a,n,d)}setProperty(a,n,d){"@"==n.charAt(0)&&n==mm?this.disableAnimations(a,!!d):this.delegate.setProperty(a,n,d)}setValue(a,n){this.delegate.setValue(a,n)}listen(a,n,d){return this.delegate.listen(a,n,d)}disableAnimations(a,n){this.engine.disableAnimations(a,n)}}class u_ extends jg{constructor(a,n,d,_,T){super(n,d,_,T),this.factory=a,this.namespaceId=n}setProperty(a,n,d){"@"==n.charAt(0)?"."==n.charAt(1)&&n==mm?this.disableAnimations(a,d=void 0===d||!!d):this.engine.process(this.namespaceId,a,n.slice(1),d):this.delegate.setProperty(a,n,d)}listen(a,n,d){if("@"==n.charAt(0)){const _=function td(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(a);let T=n.slice(1),P="";return"@"!=T.charAt(0)&&([T,P]=function $p(l){const a=l.indexOf(".");return[l.substring(0,a),l.slice(a+1)]}(T)),this.engine.listen(this.namespaceId,_,T,P,B=>{this.factory.scheduleListenerCallback(B._data||-1,d,B)})}return this.delegate.listen(a,n,d)}}const d_=[{provide:f,useClass:Q0},{provide:Ku,useFactory:function kv(){return new Pg}},{provide:ia,useClass:(()=>{class l extends ia{constructor(n,d,_,T){super(n.body,d,_)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee),t.\u0275\u0275inject(Ta),t.\u0275\u0275inject(Ku),t.\u0275\u0275inject(t.ApplicationRef))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})()},{provide:t.RendererFactory2,useFactory:function Vg(l,a,n){return new Wc(l,a,n)},deps:[ql,ia,t.NgZone]}],yh=[{provide:Ta,useFactory:()=>new zg},{provide:t.ANIMATION_MODULE_TYPE,useValue:"BrowserAnimations"},...d_],Ug=[{provide:Ta,useClass:oo},{provide:t.ANIMATION_MODULE_TYPE,useValue:"NoopAnimations"},...d_];let Hg=(()=>{class l{static withConfig(n){return{ngModule:l,providers:n.disableAnimations?Ug:yh}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({providers:yh,imports:[Mr]}),l})();var Rr=ut(76),nd=ut(669);function Rn(...l){const a=(0,nd.yG)(l);return(0,Rr.D)(l,a)}var lo=ut(579);class Xi extends lo.x{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const n=super._subscribe(a);return!n.closed&&a.next(this._value),n}getValue(){const{hasError:a,thrownError:n,_value:d}=this;if(a)throw n;return this._throwIfClosed(),d}next(a){super.next(this._value=a)}}const qc=(0,ut(888).d)(l=>function(){l(this),this.name="EmptyError",this.message="no elements in sequence"});var id=ut(751);const{isArray:Av}=Array,{getPrototypeOf:p_,prototype:Zc,keys:ym}=Object;function Gg(l){if(1===l.length){const a=l[0];if(Av(a))return{args:a,keys:null};if(function rd(l){return l&&"object"==typeof l&&p_(l)===Zc}(a)){const n=ym(a);return{args:n.map(d=>a[d]),keys:n}}}return{args:l,keys:null}}var Fa=ut(671),gi=ut(4);const{isArray:_m}=Array;function Wg(l){return(0,gi.U)(a=>function Pv(l,a){return _m(a)?l(...a):l(a)}(l,a))}function Ov(l,a){return l.reduce((n,d,_)=>(n[d]=a[_],n),{})}var Ho=ut(403),Gp=ut(672);function vm(...l){const a=(0,nd.yG)(l),n=(0,nd.jO)(l),{args:d,keys:_}=Gg(l);if(0===d.length)return(0,Rr.D)([],a);const T=new id.y(function vh(l,a,n=Fa.y){return d=>{Na(a,()=>{const{length:_}=l,T=new Array(_);let P=_,B=_;for(let ie=0;ie<_;ie++)Na(a,()=>{const Se=(0,Rr.D)(l[ie],a);let tt=!1;Se.subscribe((0,Ho.x)(d,vt=>{T[ie]=vt,tt||(tt=!0,B--),B||d.next(n(T.slice()))},()=>{--P||d.complete()}))},d)},d)}}(d,a,_?P=>Ov(_,P):Fa.y));return n?T.pipe(Wg(n)):T}function Na(l,a,n){l?(0,Gp.f)(n,l,a):a()}var Wp=ut(189);function bh(...l){return function Ir(){return(0,Wp.J)(1)}()((0,Rr.D)(l,(0,nd.yG)(l)))}var xh=ut(421);function wh(l){return new id.y(a=>{(0,xh.Xf)(l()).subscribe(a)})}var qp=ut(635),Yc=ut(576);function dl(l,a){const n=(0,Yc.m)(l)?l:()=>l,d=_=>_.error(n());return new id.y(a?_=>a.schedule(d,0,_):d)}var Ba=ut(515),Eh=ut(727),co=ut(482);function uc(){return(0,co.e)((l,a)=>{let n=null;l._refCount++;const d=(0,Ho.x)(a,void 0,void 0,void 0,()=>{if(!l||l._refCount<=0||0<--l._refCount)return void(n=null);const _=l._connection,T=n;n=null,_&&(!T||_===T)&&_.unsubscribe(),a.unsubscribe()});l.subscribe(d),d.closed||(n=l.connect())})}class bm extends id.y{constructor(a,n){super(),this.source=a,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,(0,co.A)(a)&&(this.lift=a.lift)}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:a}=this;this._subject=this._connection=null,a?.unsubscribe()}connect(){let a=this._connection;if(!a){a=this._connection=new Eh.w0;const n=this.getSubject();a.add(this.source.subscribe((0,Ho.x)(n,void 0,()=>{this._teardown(),n.complete()},d=>{this._teardown(),n.error(d)},()=>this._teardown()))),a.closed&&(this._connection=null,a=Eh.w0.EMPTY)}return a}refCount(){return uc()(this)}}function hl(l,a){return(0,co.e)((n,d)=>{let _=null,T=0,P=!1;const B=()=>P&&!_&&d.complete();n.subscribe((0,Ho.x)(d,ie=>{_?.unsubscribe();let Se=0;const tt=T++;(0,xh.Xf)(l(ie,tt)).subscribe(_=(0,Ho.x)(d,vt=>d.next(a?a(ie,vt,tt,Se++):vt),()=>{_=null,B()}))},()=>{P=!0,B()}))})}function od(l){return l<=0?()=>Ba.E:(0,co.e)((a,n)=>{let d=0;a.subscribe((0,Ho.x)(n,_=>{++d<=l&&(n.next(_),l<=d&&n.complete())}))})}function za(l,a){return(0,co.e)((n,d)=>{let _=0;n.subscribe((0,Ho.x)(d,T=>l.call(a,T,_++)&&d.next(T)))})}var mo=ut(577);function Yp(l){return(0,co.e)((a,n)=>{let d=!1;a.subscribe((0,Ho.x)(n,_=>{d=!0,n.next(_)},()=>{d||n.next(l),n.complete()}))})}function dc(l=ja){return(0,co.e)((a,n)=>{let d=!1;a.subscribe((0,Ho.x)(n,_=>{d=!0,n.next(_)},()=>d?n.complete():n.error(l())))})}function ja(){return new qc}function Va(l,a){const n=arguments.length>=2;return d=>d.pipe(l?za((_,T)=>l(_,T,d)):Fa.y,od(1),n?Yp(a):dc(()=>new qc))}function Xc(l,a){return(0,Yc.m)(a)?(0,mo.z)(l,a,1):(0,mo.z)(l,1)}function ts(l,a,n){const d=(0,Yc.m)(l)||a||n?{next:l,error:a,complete:n}:l;return d?(0,co.e)((_,T)=>{var P;null===(P=d.subscribe)||void 0===P||P.call(d);let B=!0;_.subscribe((0,Ho.x)(T,ie=>{var Se;null===(Se=d.next)||void 0===Se||Se.call(d,ie),T.next(ie)},()=>{var ie;B=!1,null===(ie=d.complete)||void 0===ie||ie.call(d),T.complete()},ie=>{var Se;B=!1,null===(Se=d.error)||void 0===Se||Se.call(d,ie),T.error(ie)},()=>{var ie,Se;B&&(null===(ie=d.unsubscribe)||void 0===ie||ie.call(d)),null===(Se=d.finalize)||void 0===Se||Se.call(d)}))}):Fa.y}function ra(l){return(0,co.e)((a,n)=>{let T,d=null,_=!1;d=a.subscribe((0,Ho.x)(n,void 0,void 0,P=>{T=(0,xh.Xf)(l(P,ra(l)(a))),d?(d.unsubscribe(),d=null,T.subscribe(n)):_=!0})),_&&(d.unsubscribe(),d=null,T.subscribe(n))})}function Rv(l,a){return(0,co.e)(function f_(l,a,n,d,_){return(T,P)=>{let B=n,ie=a,Se=0;T.subscribe((0,Ho.x)(P,tt=>{const vt=Se++;ie=B?l(ie,tt,vt):(B=!0,tt),d&&P.next(ie)},_&&(()=>{B&&P.next(ie),P.complete()})))}}(l,a,arguments.length>=2,!0))}function xm(l){return l<=0?()=>Ba.E:(0,co.e)((a,n)=>{let d=[];a.subscribe((0,Ho.x)(n,_=>{d.push(_),l<d.length&&d.shift()},()=>{for(const _ of d)n.next(_);n.complete()},void 0,()=>{d=null}))})}function Ch(l,a){const n=arguments.length>=2;return d=>d.pipe(l?za((_,T)=>l(_,T,d)):Fa.y,xm(1),n?Yp(a):dc(()=>new qc))}function Kc(l){return(0,co.e)((a,n)=>{try{a.subscribe(n)}finally{n.add(l)}})}const ci="primary",ns=Symbol("RouteTitle");class Fv{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const n=this.params[a];return Array.isArray(n)?n[0]:n}return null}getAll(a){if(this.has(a)){const n=this.params[a];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Qc(l){return new Fv(l)}function m_(l,a,n){const d=n.path.split("/");if(d.length>l.length||"full"===n.pathMatch&&(a.hasChildren()||d.length<l.length))return null;const _={};for(let T=0;T<d.length;T++){const P=d[T],B=l[T];if(P.startsWith(":"))_[P.substring(1)]=B;else if(P!==B.path)return null}return{consumed:l.slice(0,d.length),posParams:_}}function pl(l,a){const n=l?Object.keys(l):void 0,d=a?Object.keys(a):void 0;if(!n||!d||n.length!=d.length)return!1;let _;for(let T=0;T<n.length;T++)if(_=n[T],!g_(l[_],a[_]))return!1;return!0}function g_(l,a){if(Array.isArray(l)&&Array.isArray(a)){if(l.length!==a.length)return!1;const n=[...l].sort(),d=[...a].sort();return n.every((_,T)=>d[T]===_)}return l===a}function Xp(l){return Array.prototype.concat.apply([],l)}function Kp(l){return l.length>0?l[l.length-1]:null}function ko(l,a){for(const n in l)l.hasOwnProperty(n)&&a(l[n],n)}function Hn(l){return(0,t.\u0275isObservable)(l)?l:(0,t.\u0275isPromise)(l)?(0,Rr.D)(Promise.resolve(l)):Rn(l)}const hc=!1,Sh={exact:function Yg(l,a,n){if(!eu(l.segments,a.segments)||!Qp(l.segments,a.segments,n)||l.numberOfChildren!==a.numberOfChildren)return!1;for(const d in a.children)if(!l.children[d]||!Yg(l.children[d],a.children[d],n))return!1;return!0},subset:Em},wm={exact:function y_(l,a){return pl(l,a)},subset:function __(l,a){return Object.keys(a).length<=Object.keys(l).length&&Object.keys(a).every(n=>g_(l[n],a[n]))},ignored:()=>!0};function Th(l,a,n){return Sh[n.paths](l.root,a.root,n.matrixParams)&&wm[n.queryParams](l.queryParams,a.queryParams)&&!("exact"===n.fragment&&l.fragment!==a.fragment)}function Em(l,a,n){return Xg(l,a,a.segments,n)}function Xg(l,a,n,d){if(l.segments.length>n.length){const _=l.segments.slice(0,n.length);return!(!eu(_,n)||a.hasChildren()||!Qp(_,n,d))}if(l.segments.length===n.length){if(!eu(l.segments,n)||!Qp(l.segments,n,d))return!1;for(const _ in a.children)if(!l.children[_]||!Em(l.children[_],a.children[_],d))return!1;return!0}{const _=n.slice(0,l.segments.length),T=n.slice(l.segments.length);return!!(eu(l.segments,_)&&Qp(l.segments,_,d)&&l.children[ci])&&Xg(l.children[ci],a,T,d)}}function Qp(l,a,n){return a.every((d,_)=>wm[n](l[_].parameters,d.parameters))}class pc{constructor(a=new hi([],{}),n={},d=null){this.root=a,this.queryParams=n,this.fragment=d}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qc(this.queryParams)),this._queryParamMap}toString(){return Jp.serialize(this)}}class hi{constructor(a,n){this.segments=a,this.children=n,this.parent=null,ko(n,(d,_)=>d.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fc(this)}}class Mh{constructor(a,n){this.path=a,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Qc(this.parameters)),this._parameterMap}toString(){return Jg(this)}}function eu(l,a){return l.length===a.length&&l.every((n,d)=>n.path===a[d].path)}let tu=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return new go},providedIn:"root"}),l})();class go{parse(a){const n=new E_(a);return new pc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(a){const n=`/${mc(a.root,!0)}`,d=function Sm(l){const a=Object.keys(l).map(n=>{const d=l[n];return Array.isArray(d)?d.map(_=>`${Dh(n)}=${Dh(_)}`).join("&"):`${Dh(n)}=${Dh(d)}`}).filter(n=>!!n);return a.length?`?${a.join("&")}`:""}(a.queryParams);return`${n}${d}${"string"==typeof a.fragment?`#${function Bv(l){return encodeURI(l)}(a.fragment)}`:""}`}}const Jp=new go;function fc(l){return l.segments.map(a=>Jg(a)).join("/")}function mc(l,a){if(!l.hasChildren())return fc(l);if(a){const n=l.children[ci]?mc(l.children[ci],!1):"",d=[];return ko(l.children,(_,T)=>{T!==ci&&d.push(`${T}:${mc(_,!1)}`)}),d.length>0?`${n}(${d.join("//")})`:n}{const n=function Ih(l,a){let n=[];return ko(l.children,(d,_)=>{_===ci&&(n=n.concat(a(d,_)))}),ko(l.children,(d,_)=>{_!==ci&&(n=n.concat(a(d,_)))}),n}(l,(d,_)=>_===ci?[mc(l.children[ci],!1)]:[`${_}:${mc(d,!1)}`]);return 1===Object.keys(l.children).length&&null!=l.children[ci]?`${fc(l)}/${n[0]}`:`${fc(l)}/(${n.join("//")})`}}function Kg(l){return encodeURIComponent(l).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dh(l){return Kg(l).replace(/%3B/gi,";")}function Qg(l){return Kg(l).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oa(l){return decodeURIComponent(l)}function v_(l){return oa(l.replace(/\+/g,"%20"))}function Jg(l){return`${Qg(l.path)}${function Cm(l){return Object.keys(l).map(a=>`;${Qg(a)}=${Qg(l[a])}`).join("")}(l.parameters)}`}const b_=/^[^\/()?;=#]+/;function kh(l){const a=l.match(b_);return a?a[0]:""}const x_=/^[^=?&#]+/,zv=/^[^&#]+/;class E_{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hi([],{}):new hi([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let d={};return this.peekStartsWith("(")&&(d=this.parseParens(!1)),(a.length>0||Object.keys(n).length>0)&&(d[ci]=new hi(a,n)),d}parseSegment(){const a=kh(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new t.\u0275RuntimeError(4009,hc);return this.capture(a),new Mh(oa(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const n=kh(this.remaining);if(!n)return;this.capture(n);let d="";if(this.consumeOptional("=")){const _=kh(this.remaining);_&&(d=_,this.capture(d))}a[oa(n)]=oa(d)}parseQueryParam(a){const n=function w_(l){const a=l.match(x_);return a?a[0]:""}(this.remaining);if(!n)return;this.capture(n);let d="";if(this.consumeOptional("=")){const P=function jv(l){const a=l.match(zv);return a?a[0]:""}(this.remaining);P&&(d=P,this.capture(d))}const _=v_(n),T=v_(d);if(a.hasOwnProperty(_)){let P=a[_];Array.isArray(P)||(P=[P],a[_]=P),P.push(T)}else a[_]=T}parseParens(a){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const d=kh(this.remaining),_=this.remaining[d.length];if("/"!==_&&")"!==_&&";"!==_)throw new t.\u0275RuntimeError(4010,hc);let T;d.indexOf(":")>-1?(T=d.slice(0,d.indexOf(":")),this.capture(T),this.capture(":")):a&&(T=ci);const P=this.parseChildren();n[T]=1===Object.keys(P).length?P[ci]:new hi([],P),this.consumeOptional("//")}return n}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new t.\u0275RuntimeError(4011,hc)}}function ey(l){return l.segments.length>0?new hi([],{[ci]:l}):l}function ef(l){const a={};for(const d of Object.keys(l.children)){const T=ef(l.children[d]);(T.segments.length>0||T.hasChildren())&&(a[d]=T)}return function ty(l){if(1===l.numberOfChildren&&l.children[ci]){const a=l.children[ci];return new hi(l.segments.concat(a.segments),a.children)}return l}(new hi(l.segments,a))}function gc(l){return l instanceof pc}const xr=!1;function Ua(l,a,n,d,_){if(0===n.length)return Ha(a.root,a.root,a.root,d,_);const T=function Ph(l){if("string"==typeof l[0]&&1===l.length&&"/"===l[0])return new S_(!0,0,l);let a=0,n=!1;const d=l.reduce((_,T,P)=>{if("object"==typeof T&&null!=T){if(T.outlets){const B={};return ko(T.outlets,(ie,Se)=>{B[Se]="string"==typeof ie?ie.split("/"):ie}),[..._,{outlets:B}]}if(T.segmentPath)return[..._,T.segmentPath]}return"string"!=typeof T?[..._,T]:0===P?(T.split("/").forEach((B,ie)=>{0==ie&&"."===B||(0==ie&&""===B?n=!0:".."===B?a++:""!=B&&_.push(B))}),_):[..._,T]},[]);return new S_(n,a,d)}(n);return T.toRoot()?Ha(a.root,a.root,new hi([],{}),d,_):function P(ie){const Se=function Ni(l,a,n,d){if(l.isAbsolute)return new sa(a.root,!0,0);if(-1===d)return new sa(n,n===a.root,0);return function Oh(l,a,n){let d=l,_=a,T=n;for(;T>_;){if(T-=_,d=d.parent,!d)throw new t.\u0275RuntimeError(4005,xr&&"Invalid number of '../'");_=d.segments.length}return new sa(d,!1,_-T)}(n,d+(Ah(l.commands[0])?0:1),l.numberOfDoubleDots)}(T,a,l.snapshot?._urlSegment,ie),tt=Se.processChildren?$o(Se.segmentGroup,Se.index,T.commands):sf(Se.segmentGroup,Se.index,T.commands);return Ha(a.root,Se.segmentGroup,tt,d,_)}(l.snapshot?._lastPathIndex)}function Ah(l){return"object"==typeof l&&null!=l&&!l.outlets&&!l.segmentPath}function nf(l){return"object"==typeof l&&null!=l&&l.outlets}function Ha(l,a,n,d,_){let P,T={};d&&ko(d,(ie,Se)=>{T[Se]=Array.isArray(ie)?ie.map(tt=>`${tt}`):`${ie}`}),P=l===a?n:C_(l,a,n);const B=ey(ef(P));return new pc(B,T,_)}function C_(l,a,n){const d={};return ko(l.children,(_,T)=>{d[T]=_===a?n:C_(_,a,n)}),new hi(l.segments,d)}class S_{constructor(a,n,d){if(this.isAbsolute=a,this.numberOfDoubleDots=n,this.commands=d,a&&d.length>0&&Ah(d[0]))throw new t.\u0275RuntimeError(4003,xr&&"Root segment cannot have matrix parameters");const _=d.find(nf);if(_&&_!==Kp(d))throw new t.\u0275RuntimeError(4004,xr&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sa{constructor(a,n,d){this.segmentGroup=a,this.processChildren=n,this.index=d}}function sf(l,a,n){if(l||(l=new hi([],{})),0===l.segments.length&&l.hasChildren())return $o(l,a,n);const d=function nu(l,a,n){let d=0,_=a;const T={match:!1,pathIndex:0,commandIndex:0};for(;_<l.segments.length;){if(d>=n.length)return T;const P=l.segments[_],B=n[d];if(nf(B))break;const ie=`${B}`,Se=d<n.length-1?n[d+1]:null;if(_>0&&void 0===ie)break;if(ie&&Se&&"object"==typeof Se&&void 0===Se.outlets){if(!M_(ie,Se,P))return T;d+=2}else{if(!M_(ie,{},P))return T;d++}_++}return{match:!0,pathIndex:_,commandIndex:d}}(l,a,n),_=n.slice(d.commandIndex);if(d.match&&d.pathIndex<l.segments.length){const T=new hi(l.segments.slice(0,d.pathIndex),{});return T.children[ci]=new hi(l.segments.slice(d.pathIndex),l.children),$o(T,0,_)}return d.match&&0===_.length?new hi(l.segments,{}):d.match&&!l.hasChildren()?Rh(l,a,n):d.match?$o(l,0,_):Rh(l,a,n)}function $o(l,a,n){if(0===n.length)return new hi(l.segments,{});{const d=function rf(l){return nf(l[0])?l[0].outlets:{[ci]:l}}(n),_={};if(!d[ci]&&l.children[ci]&&1===l.numberOfChildren&&0===l.children[ci].segments.length){const T=$o(l.children[ci],a,n);return new hi(l.segments,T.children)}return ko(d,(T,P)=>{"string"==typeof T&&(T=[T]),null!==T&&(_[P]=sf(l.children[P],a,T))}),ko(l.children,(T,P)=>{void 0===d[P]&&(_[P]=T)}),new hi(l.segments,_)}}function Rh(l,a,n){const d=l.segments.slice(0,a);let _=0;for(;_<n.length;){const T=n[_];if(nf(T)){const ie=T_(T.outlets);return new hi(d,ie)}if(0===_&&Ah(n[0])){d.push(new Mh(l.segments[a].path,Im(n[0]))),_++;continue}const P=nf(T)?T.outlets[ci]:`${T}`,B=_<n.length-1?n[_+1]:null;P&&B&&Ah(B)?(d.push(new Mh(P,Im(B))),_+=2):(d.push(new Mh(P,{})),_++)}return new hi(d,{})}function T_(l){const a={};return ko(l,(n,d)=>{"string"==typeof n&&(n=[n]),null!==n&&(a[d]=Rh(new hi([],{}),0,n))}),a}function Im(l){const a={};return ko(l,(n,d)=>a[d]=`${n}`),a}function M_(l,a,n){return l==n.path&&pl(a,n.parameters)}const af="imperative";class $a{constructor(a,n){this.id=a,this.url=n}}class ny extends $a{constructor(a,n,d="imperative",_=null){super(a,n),this.type=0,this.navigationTrigger=d,this.restoredState=_}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class iu extends $a{constructor(a,n,d){super(a,n),this.urlAfterRedirects=d,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lf extends $a{constructor(a,n,d,_){super(a,n),this.reason=d,this.code=_,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dm extends $a{constructor(a,n,d,_){super(a,n),this.reason=d,this.code=_,this.type=16}}class Lh extends $a{constructor(a,n,d,_){super(a,n),this.error=d,this.target=_,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yo extends $a{constructor(a,n,d,_){super(a,n),this.urlAfterRedirects=d,this.state=_,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I_ extends $a{constructor(a,n,d,_){super(a,n),this.urlAfterRedirects=d,this.state=_,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class km extends $a{constructor(a,n,d,_,T){super(a,n),this.urlAfterRedirects=d,this.state=_,this.shouldActivate=T,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class D_ extends $a{constructor(a,n,d,_){super(a,n),this.urlAfterRedirects=d,this.state=_,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iy extends $a{constructor(a,n,d,_){super(a,n),this.urlAfterRedirects=d,this.state=_,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k_{constructor(a){this.route=a,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vv{constructor(a){this.route=a,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class A_{constructor(a){this.snapshot=a,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ry{constructor(a){this.snapshot=a,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Go{constructor(a){this.snapshot=a,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oy{constructor(a){this.snapshot=a,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sy{constructor(a,n,d){this.routerEvent=a,this.position=n,this.anchor=d,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let cf=(()=>{class l{createUrlTree(n,d,_,T,P,B){return Ua(n||d.root,_,T,P,B)}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})(),ay=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(a){return cf.\u0275fac(a)},providedIn:"root"}),l})();class uf{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const n=this.pathFromRoot(a);return n.length>1?n[n.length-2]:null}children(a){const n=aa(a,this._root);return n?n.children.map(d=>d.value):[]}firstChild(a){const n=aa(a,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(a){const n=Nh(a,this._root);return n.length<2?[]:n[n.length-2].children.map(_=>_.value).filter(_=>_!==a)}pathFromRoot(a){return Nh(a,this._root).map(n=>n.value)}}function aa(l,a){if(l===a.value)return a;for(const n of a.children){const d=aa(l,n);if(d)return d}return null}function Nh(l,a){if(l===a.value)return[a];for(const n of a.children){const d=Nh(l,n);if(d.length)return d.unshift(a),d}return[]}class fl{constructor(a,n){this.value=a,this.children=n}toString(){return`TreeNode(${this.value})`}}function Bh(l){const a={};return l&&l.children.forEach(n=>a[n.value.outlet]=n),a}class Am extends uf{constructor(a,n){super(a),this.snapshot=n,sd(this,a)}toString(){return this.snapshot.toString()}}function ly(l,a){const n=function cy(l,a){const P=new la([],{},{},"",{},ci,a,null,l.root,-1,{});return new zh("",new fl(P,[]))}(l,a),d=new Xi([new Mh("",{})]),_=new Xi({}),T=new Xi({}),P=new Xi({}),B=new Xi(""),ie=new Ao(d,_,P,B,T,ci,a,n.root);return ie.snapshot=n.root,new Am(new fl(ie,[]),n)}class Ao{constructor(a,n,d,_,T,P,B,ie){this.url=a,this.params=n,this.queryParams=d,this.fragment=_,this.data=T,this.outlet=P,this.component=B,this.title=this.data?.pipe((0,gi.U)(Se=>Se[ns]))??Rn(void 0),this._futureSnapshot=ie}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gi.U)(a=>Qc(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gi.U)(a=>Qc(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pm(l,a="emptyOnly"){const n=l.pathFromRoot;let d=0;if("always"!==a)for(d=n.length-1;d>=1;){const _=n[d],T=n[d-1];if(_.routeConfig&&""===_.routeConfig.path)d--;else{if(T.component)break;d--}}return function O_(l){return l.reduce((a,n)=>({params:{...a.params,...n.params},data:{...a.data,...n.data},resolve:{...n.data,...a.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(d))}class la{get title(){return this.data?.[ns]}constructor(a,n,d,_,T,P,B,ie,Se,tt,vt){this.url=a,this.params=n,this.queryParams=d,this.fragment=_,this.data=T,this.outlet=P,this.component=B,this.routeConfig=ie,this._urlSegment=Se,this._lastPathIndex=tt,this._resolve=vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(d=>d.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zh extends uf{constructor(a,n){super(n),this.url=a,sd(this,n)}toString(){return jh(this._root)}}function sd(l,a){a.value._routerState=l,a.children.forEach(n=>sd(l,n))}function jh(l){const a=l.children.length>0?` { ${l.children.map(jh).join(", ")} } `:"";return`${l.value}${a}`}function uy(l){if(l.snapshot){const a=l.snapshot,n=l._futureSnapshot;l.snapshot=n,pl(a.queryParams,n.queryParams)||l.queryParams.next(n.queryParams),a.fragment!==n.fragment&&l.fragment.next(n.fragment),pl(a.params,n.params)||l.params.next(n.params),function Nv(l,a){if(l.length!==a.length)return!1;for(let n=0;n<l.length;++n)if(!pl(l[n],a[n]))return!1;return!0}(a.url,n.url)||l.url.next(n.url),pl(a.data,n.data)||l.data.next(n.data)}else l.snapshot=l._futureSnapshot,l.data.next(l._futureSnapshot.data)}function df(l,a){const n=pl(l.params,a.params)&&function Jc(l,a){return eu(l,a)&&l.every((n,d)=>pl(n.parameters,a[d].parameters))}(l.url,a.url);return n&&!(!l.parent!=!a.parent)&&(!l.parent||df(l.parent,a.parent))}function ad(l,a,n){if(n&&l.shouldReuseRoute(a.value,n.value.snapshot)){const d=n.value;d._futureSnapshot=a.value;const _=function dy(l,a,n){return a.children.map(d=>{for(const _ of n.children)if(l.shouldReuseRoute(d.value,_.value.snapshot))return ad(l,d,_);return ad(l,d)})}(l,a,n);return new fl(d,_)}{if(l.shouldAttach(a.value)){const T=l.retrieve(a.value);if(null!==T){const P=T.route;return P.value._futureSnapshot=a.value,P.children=a.children.map(B=>ad(l,B)),P}}const d=function Vh(l){return new Ao(new Xi(l.url),new Xi(l.params),new Xi(l.queryParams),new Xi(l.fragment),new Xi(l.data),l.outlet,l.component,l)}(a.value),_=a.children.map(T=>ad(l,T));return new fl(d,_)}}const hf="ngNavigationCancelingError";function pf(l,a){const{redirectTo:n,navigationBehaviorOptions:d}=gc(a)?{redirectTo:a,navigationBehaviorOptions:void 0}:a,_=Qr(!1,0,a);return _.url=n,_.navigationBehaviorOptions=d,_}function Qr(l,a,n){const d=new Error("NavigationCancelingError: "+(l||""));return d[hf]=!0,d.cancellationCode=a,n&&(d.url=n),d}function ld(l){return ml(l)&&gc(l.url)}function ml(l){return l&&l[hf]}class Ga{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Uh,this.attachRef=null}}let Uh=(()=>{class l{constructor(){this.contexts=new Map}onChildOutletCreated(n,d){const _=this.getOrCreateContext(n);_.outlet=d,this.contexts.set(n,_)}onChildOutletDestroyed(n){const d=this.getContext(n);d&&(d.outlet=null,d.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let d=this.getContext(n);return d||(d=new Ga,this.contexts.set(n,d)),d}getContext(n){return this.contexts.get(n)||null}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const ru=!1;let ff=(()=>{class l{constructor(){this.activated=null,this._activatedRoute=null,this.name=ci,this.activateEvents=new t.EventEmitter,this.deactivateEvents=new t.EventEmitter,this.attachEvents=new t.EventEmitter,this.detachEvents=new t.EventEmitter,this.parentContexts=(0,t.inject)(Uh),this.location=(0,t.inject)(t.ViewContainerRef),this.changeDetector=(0,t.inject)(t.ChangeDetectorRef),this.environmentInjector=(0,t.inject)(t.EnvironmentInjector)}ngOnChanges(n){if(n.name){const{firstChange:d,previousValue:_}=n.name;if(d)return;this.isTrackedInParentContexts(_)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(_)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new t.\u0275RuntimeError(4012,ru);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new t.\u0275RuntimeError(4012,ru);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new t.\u0275RuntimeError(4012,ru);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,d){this.activated=n,this._activatedRoute=d,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,d){if(this.isActivated)throw new t.\u0275RuntimeError(4013,ru);this._activatedRoute=n;const _=this.location,P=n.snapshot.component,B=this.parentContexts.getOrCreateContext(this.name).children,ie=new Om(n,B,_.injector);if(d&&function Rm(l){return!!l.resolveComponentFactory}(d)){const Se=d.resolveComponentFactory(P);this.activated=_.createComponent(Se,_.length,ie)}else this.activated=_.createComponent(P,{index:_.length,injector:ie,environmentInjector:d??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[t.\u0275\u0275NgOnChangesFeature]}),l})();class Om{constructor(a,n,d){this.route=a,this.childContexts=n,this.parent=d}get(a,n){return a===Ao?this.route:a===Uh?this.childContexts:this.parent.get(a,n)}}let ou=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["ng-component"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(n,d){1&n&&t.\u0275\u0275element(0,"router-outlet")},dependencies:[ff],encapsulation:2}),l})();function hy(l,a){return l.providers&&!l._injector&&(l._injector=(0,t.createEnvironmentInjector)(l.providers,a,`Route: ${l.path}`)),l._injector??a}function Lm(l){const a=l.children&&l.children.map(Lm),n=a?{...l,children:a}:{...l};return!n.component&&!n.loadComponent&&(a||n.loadChildren)&&n.outlet&&n.outlet!==ci&&(n.component=ou),n}function Wo(l){return l.outlet||ci}function R_(l,a){const n=l.filter(d=>Wo(d)===a);return n.push(...l.filter(d=>Wo(d)!==a)),n}function Wa(l){if(!l)return null;if(l.routeConfig?._injector)return l.routeConfig._injector;for(let a=l.parent;a;a=a.parent){const n=a.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class L_{constructor(a,n,d,_){this.routeReuseStrategy=a,this.futureState=n,this.currState=d,this.forwardEvent=_}activate(a){const n=this.futureState._root,d=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,d,a),uy(this.futureState.root),this.activateChildRoutes(n,d,a)}deactivateChildRoutes(a,n,d){const _=Bh(n);a.children.forEach(T=>{const P=T.value.outlet;this.deactivateRoutes(T,_[P],d),delete _[P]}),ko(_,(T,P)=>{this.deactivateRouteAndItsChildren(T,d)})}deactivateRoutes(a,n,d){const _=a.value,T=n?n.value:null;if(_===T)if(_.component){const P=d.getContext(_.outlet);P&&this.deactivateChildRoutes(a,n,P.children)}else this.deactivateChildRoutes(a,n,d);else T&&this.deactivateRouteAndItsChildren(n,d)}deactivateRouteAndItsChildren(a,n){a.value.component&&this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,n):this.deactivateRouteAndOutlet(a,n)}detachAndStoreRouteSubtree(a,n){const d=n.getContext(a.value.outlet),_=d&&a.value.component?d.children:n,T=Bh(a);for(const P of Object.keys(T))this.deactivateRouteAndItsChildren(T[P],_);if(d&&d.outlet){const P=d.outlet.detach(),B=d.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:P,route:a,contexts:B})}}deactivateRouteAndOutlet(a,n){const d=n.getContext(a.value.outlet),_=d&&a.value.component?d.children:n,T=Bh(a);for(const P of Object.keys(T))this.deactivateRouteAndItsChildren(T[P],_);d&&(d.outlet&&(d.outlet.deactivate(),d.children.onOutletDeactivated()),d.attachRef=null,d.resolver=null,d.route=null)}activateChildRoutes(a,n,d){const _=Bh(n);a.children.forEach(T=>{this.activateRoutes(T,_[T.value.outlet],d),this.forwardEvent(new oy(T.value.snapshot))}),a.children.length&&this.forwardEvent(new ry(a.value.snapshot))}activateRoutes(a,n,d){const _=a.value,T=n?n.value:null;if(uy(_),_===T)if(_.component){const P=d.getOrCreateContext(_.outlet);this.activateChildRoutes(a,n,P.children)}else this.activateChildRoutes(a,n,d);else if(_.component){const P=d.getOrCreateContext(_.outlet);if(this.routeReuseStrategy.shouldAttach(_.snapshot)){const B=this.routeReuseStrategy.retrieve(_.snapshot);this.routeReuseStrategy.store(_.snapshot,null),P.children.onOutletReAttached(B.contexts),P.attachRef=B.componentRef,P.route=B.route.value,P.outlet&&P.outlet.attach(B.componentRef,B.route.value),uy(B.route.value),this.activateChildRoutes(a,null,P.children)}else{const B=Wa(_.snapshot),ie=B?.get(t.ComponentFactoryResolver)??null;P.attachRef=null,P.route=_,P.resolver=ie,P.injector=B,P.outlet&&P.outlet.activateWith(_,P.injector),this.activateChildRoutes(a,null,P.children)}}else this.activateChildRoutes(a,null,d)}}class my{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class cd{constructor(a,n){this.component=a,this.route=n}}function gy(l,a,n){const d=l._root;return ca(d,a?a._root:null,n,[d.value])}function lu(l,a){const n=Symbol(),d=a.get(l,n);return d===n?"function"!=typeof l||(0,t.\u0275isInjectable)(l)?a.get(l):l:d}function ca(l,a,n,d,_={canDeactivateChecks:[],canActivateChecks:[]}){const T=Bh(a);return l.children.forEach(P=>{(function N_(l,a,n,d,_={canDeactivateChecks:[],canActivateChecks:[]}){const T=l.value,P=a?a.value:null,B=n?n.getContext(l.value.outlet):null;if(P&&T.routeConfig===P.routeConfig){const ie=function cu(l,a,n){if("function"==typeof n)return n(l,a);switch(n){case"pathParamsChange":return!eu(l.url,a.url);case"pathParamsOrQueryParamsChange":return!eu(l.url,a.url)||!pl(l.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!df(l,a)||!pl(l.queryParams,a.queryParams);default:return!df(l,a)}}(P,T,T.routeConfig.runGuardsAndResolvers);ie?_.canActivateChecks.push(new my(d)):(T.data=P.data,T._resolvedData=P._resolvedData),ca(l,a,T.component?B?B.children:null:n,d,_),ie&&B&&B.outlet&&B.outlet.isActivated&&_.canDeactivateChecks.push(new cd(B.outlet.component,P))}else P&&Fm(a,B,_),_.canActivateChecks.push(new my(d)),ca(l,null,T.component?B?B.children:null:n,d,_)})(P,T[P.value.outlet],n,d.concat([P.value]),_),delete T[P.value.outlet]}),ko(T,(P,B)=>Fm(P,n.getContext(B),_)),_}function Fm(l,a,n){const d=Bh(l),_=l.value;ko(d,(T,P)=>{Fm(T,_.component?a?a.children.getContext(P):null:a,n)}),n.canDeactivateChecks.push(new cd(_.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,_))}function gl(l){return"function"==typeof l}function _o(l){return l instanceof qc||"EmptyError"===l?.name}const qa=Symbol("INITIAL_VALUE");function yl(){return hl(l=>vm(l.map(a=>a.pipe(od(1),function Zp(...l){const a=(0,nd.yG)(l);return(0,co.e)((n,d)=>{(a?bh(l,n,a):bh(l,n)).subscribe(d)})}(qa)))).pipe((0,gi.U)(a=>{for(const n of a)if(!0!==n){if(n===qa)return qa;if(!1===n||n instanceof pc)return n}return!0}),za(a=>a!==qa),od(1)))}function _l(l){return(0,qp.z)(ts(a=>{if(gc(a))throw pf(0,a)}),(0,gi.U)(a=>!0===a))}const yf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qh(l,a,n,d,_){const T=hd(l,a,n);return T.matched?function _c(l,a,n,d){const _=a.canMatch;return _&&0!==_.length?Rn(_.map(P=>{const B=lu(P,l);return Hn(function B_(l){return l&&gl(l.canMatch)}(B)?B.canMatch(a,n):l.runInContext(()=>B(a,n)))})).pipe(yl(),_l()):Rn(!0)}(d=hy(a,d),a,n).pipe((0,gi.U)(P=>!0===P?T:{...yf})):Rn(T)}function hd(l,a,n){if(""===a.path)return"full"===a.pathMatch&&(l.hasChildren()||n.length>0)?{...yf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const _=(a.matcher||m_)(n,l,a);if(!_)return{...yf};const T={};ko(_.posParams,(B,ie)=>{T[ie]=B.path});const P=_.consumed.length>0?{...T,..._.consumed[_.consumed.length-1].parameters}:T;return{matched:!0,consumedSegments:_.consumed,remainingSegments:n.slice(_.consumed.length),parameters:P,positionalParamSegments:_.posParams??{}}}function As(l,a,n,d){if(n.length>0&&function jm(l,a,n){return n.some(d=>Yh(l,a,d)&&Wo(d)!==ci)}(l,n,d)){const T=new hi(a,function _f(l,a,n,d){const _={};_[ci]=d,d._sourceSegment=l,d._segmentIndexShift=a.length;for(const T of n)if(""===T.path&&Wo(T)!==ci){const P=new hi([],{});P._sourceSegment=l,P._segmentIndexShift=a.length,_[Wo(T)]=P}return _}(l,a,d,new hi(n,l.children)));return T._sourceSegment=l,T._segmentIndexShift=a.length,{segmentGroup:T,slicedSegments:[]}}if(0===n.length&&function Zh(l,a,n){return n.some(d=>Yh(l,a,d))}(l,n,d)){const T=new hi(l.segments,function _y(l,a,n,d,_){const T={};for(const P of d)if(Yh(l,n,P)&&!_[Wo(P)]){const B=new hi([],{});B._sourceSegment=l,B._segmentIndexShift=a.length,T[Wo(P)]=B}return{..._,...T}}(l,a,n,d,l.children));return T._sourceSegment=l,T._segmentIndexShift=a.length,{segmentGroup:T,slicedSegments:n}}const _=new hi(l.segments,l.children);return _._sourceSegment=l,_._segmentIndexShift=a.length,{segmentGroup:_,slicedSegments:n}}function Yh(l,a,n){return(!(l.hasChildren()||a.length>0)||"full"!==n.pathMatch)&&""===n.path}function vy(l,a,n,d){return!!(Wo(l)===d||d!==ci&&Yh(a,n,l))&&("**"===l.path||hd(a,l,n).matched)}function z_(l,a,n){return 0===a.length&&!l.children[n]}const vf=!1;class pd{constructor(a){this.segmentGroup=a||null}}class by{constructor(a){this.urlTree=a}}function Za(l){return dl(new pd(l))}function Vm(l){return dl(new by(l))}class Hm{constructor(a,n,d,_,T){this.injector=a,this.configLoader=n,this.urlSerializer=d,this.urlTree=_,this.config=T,this.allowRedirects=!0}apply(){const a=As(this.urlTree.root,[],[],this.config).segmentGroup,n=new hi(a.segments,a.children);return this.expandSegmentGroup(this.injector,this.config,n,ci).pipe((0,gi.U)(T=>this.createUrlTree(ef(T),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ra(T=>{if(T instanceof by)return this.allowRedirects=!1,this.match(T.urlTree);throw T instanceof pd?this.noMatchError(T):T}))}match(a){return this.expandSegmentGroup(this.injector,this.config,a.root,ci).pipe((0,gi.U)(_=>this.createUrlTree(ef(_),a.queryParams,a.fragment))).pipe(ra(_=>{throw _ instanceof pd?this.noMatchError(_):_}))}noMatchError(a){return new t.\u0275RuntimeError(4002,vf)}createUrlTree(a,n,d){const _=ey(a);return new pc(_,n,d)}expandSegmentGroup(a,n,d,_){return 0===d.segments.length&&d.hasChildren()?this.expandChildren(a,n,d).pipe((0,gi.U)(T=>new hi([],T))):this.expandSegment(a,d,n,d.segments,_,!0)}expandChildren(a,n,d){const _=[];for(const T of Object.keys(d.children))"primary"===T?_.unshift(T):_.push(T);return(0,Rr.D)(_).pipe(Xc(T=>{const P=d.children[T],B=R_(n,T);return this.expandSegmentGroup(a,B,P,T).pipe((0,gi.U)(ie=>({segment:ie,outlet:T})))}),Rv((T,P)=>(T[P.outlet]=P.segment,T),{}),Ch())}expandSegment(a,n,d,_,T,P){return(0,Rr.D)(d).pipe(Xc(B=>this.expandSegmentAgainstRoute(a,n,d,B,_,T,P).pipe(ra(Se=>{if(Se instanceof pd)return Rn(null);throw Se}))),Va(B=>!!B),ra((B,ie)=>{if(_o(B))return z_(n,_,T)?Rn(new hi([],{})):Za(n);throw B}))}expandSegmentAgainstRoute(a,n,d,_,T,P,B){return vy(_,n,T,P)?void 0===_.redirectTo?this.matchSegmentAgainstRoute(a,n,_,T,P):B&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,n,d,_,T,P):Za(n):Za(n)}expandSegmentAgainstRouteUsingRedirect(a,n,d,_,T,P){return"**"===_.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,d,_,P):this.expandRegularSegmentAgainstRouteUsingRedirect(a,n,d,_,T,P)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,n,d,_){const T=this.applyRedirectCommands([],d.redirectTo,{});return d.redirectTo.startsWith("/")?Vm(T):this.lineralizeSegments(d,T).pipe((0,mo.z)(P=>{const B=new hi(P,{});return this.expandSegment(a,B,n,P,_,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,n,d,_,T,P){const{matched:B,consumedSegments:ie,remainingSegments:Se,positionalParamSegments:tt}=hd(n,_,T);if(!B)return Za(n);const vt=this.applyRedirectCommands(ie,_.redirectTo,tt);return _.redirectTo.startsWith("/")?Vm(vt):this.lineralizeSegments(_,vt).pipe((0,mo.z)(rn=>this.expandSegment(a,n,d,rn.concat(Se),P,!1)))}matchSegmentAgainstRoute(a,n,d,_,T){return"**"===d.path?(a=hy(d,a),d.loadChildren?(d._loadedRoutes?Rn({routes:d._loadedRoutes,injector:d._loadedInjector}):this.configLoader.loadChildren(a,d)).pipe((0,gi.U)(B=>(d._loadedRoutes=B.routes,d._loadedInjector=B.injector,new hi(_,{})))):Rn(new hi(_,{}))):qh(n,d,_,a).pipe(hl(({matched:P,consumedSegments:B,remainingSegments:ie})=>P?this.getChildConfig(a=d._injector??a,d,_).pipe((0,mo.z)(tt=>{const vt=tt.injector??a,rn=tt.routes,{segmentGroup:Kt,slicedSegments:Jt}=As(n,B,ie,rn),xn=new hi(Kt.segments,Kt.children);if(0===Jt.length&&xn.hasChildren())return this.expandChildren(vt,rn,xn).pipe((0,gi.U)(wr=>new hi(B,wr)));if(0===rn.length&&0===Jt.length)return Rn(new hi(B,{}));const Nn=Wo(d)===T;return this.expandSegment(vt,xn,rn,Jt,Nn?ci:T,!0).pipe((0,gi.U)(Ri=>new hi(B.concat(Ri.segments),Ri.children)))})):Za(n)))}getChildConfig(a,n,d){return n.children?Rn({routes:n.children,injector:a}):n.loadChildren?void 0!==n._loadedRoutes?Rn({routes:n._loadedRoutes,injector:n._loadedInjector}):function yc(l,a,n,d){const _=a.canLoad;return void 0===_||0===_.length?Rn(!0):Rn(_.map(P=>{const B=lu(P,l);return Hn(function uu(l){return l&&gl(l.canLoad)}(B)?B.canLoad(a,n):l.runInContext(()=>B(a,n)))})).pipe(yl(),_l())}(a,n,d).pipe((0,mo.z)(_=>_?this.configLoader.loadChildren(a,n).pipe(ts(T=>{n._loadedRoutes=T.routes,n._loadedInjector=T.injector})):function bf(l){return dl(Qr(vf,3))}())):Rn({routes:[],injector:a})}lineralizeSegments(a,n){let d=[],_=n.root;for(;;){if(d=d.concat(_.segments),0===_.numberOfChildren)return Rn(d);if(_.numberOfChildren>1||!_.children[ci])return a.redirectTo,dl(new t.\u0275RuntimeError(4e3,vf));_=_.children[ci]}}applyRedirectCommands(a,n,d){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),a,d)}applyRedirectCreateUrlTree(a,n,d,_){const T=this.createSegmentGroup(a,n.root,d,_);return new pc(T,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(a,n){const d={};return ko(a,(_,T)=>{if("string"==typeof _&&_.startsWith(":")){const B=_.substring(1);d[T]=n[B]}else d[T]=_}),d}createSegmentGroup(a,n,d,_){const T=this.createSegments(a,n.segments,d,_);let P={};return ko(n.children,(B,ie)=>{P[ie]=this.createSegmentGroup(a,B,d,_)}),new hi(T,P)}createSegments(a,n,d,_){return n.map(T=>T.path.startsWith(":")?this.findPosParam(a,T,_):this.findOrReturn(T,d))}findPosParam(a,n,d){const _=d[n.path.substring(1)];if(!_)throw new t.\u0275RuntimeError(4001,vf);return _}findOrReturn(a,n){let d=0;for(const _ of n){if(_.path===a.path)return n.splice(d),_;d++}return a}}class Ya{}class Xh{constructor(a,n,d,_,T,P,B){this.injector=a,this.rootComponentType=n,this.config=d,this.urlTree=_,this.url=T,this.paramsInheritanceStrategy=P,this.urlSerializer=B}recognize(){const a=As(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,a,ci).pipe((0,gi.U)(n=>{if(null===n)return null;const d=new la([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ci,this.rootComponentType,null,this.urlTree.root,-1,{}),_=new fl(d,n),T=new zh(this.url,_);return this.inheritParamsAndData(T._root),T}))}inheritParamsAndData(a){const n=a.value,d=Pm(n,this.paramsInheritanceStrategy);n.params=Object.freeze(d.params),n.data=Object.freeze(d.data),a.children.forEach(_=>this.inheritParamsAndData(_))}processSegmentGroup(a,n,d,_){return 0===d.segments.length&&d.hasChildren()?this.processChildren(a,n,d):this.processSegment(a,n,d,d.segments,_)}processChildren(a,n,d){return(0,Rr.D)(Object.keys(d.children)).pipe(Xc(_=>{const T=d.children[_],P=R_(n,_);return this.processSegmentGroup(a,P,T,_)}),Rv((_,T)=>_&&T?(_.push(...T),_):null),function Lv(l,a=!1){return(0,co.e)((n,d)=>{let _=0;n.subscribe((0,Ho.x)(d,T=>{const P=l(T,_++);(P||a)&&d.next(T),!P&&d.complete()}))})}(_=>null!==_),Yp(null),Ch(),(0,gi.U)(_=>{if(null===_)return null;const T=Kh(_);return function xy(l){l.sort((a,n)=>a.value.outlet===ci?-1:n.value.outlet===ci?1:a.value.outlet.localeCompare(n.value.outlet))}(T),T}))}processSegment(a,n,d,_,T){return(0,Rr.D)(n).pipe(Xc(P=>this.processSegmentAgainstRoute(P._injector??a,P,d,_,T)),Va(P=>!!P),ra(P=>{if(_o(P))return z_(d,_,T)?Rn([]):Rn(null);throw P}))}processSegmentAgainstRoute(a,n,d,_,T){if(n.redirectTo||!vy(n,d,_,T))return Rn(null);let P;if("**"===n.path){const B=_.length>0?Kp(_).parameters:{},ie=Wm(d)+_.length;P=Rn({snapshot:new la(_,B,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qm(n),Wo(n),n.component??n._loadedComponent??null,n,Gm(d),ie,Ey(n)),consumedSegments:[],remainingSegments:[]})}else P=qh(d,n,_,a).pipe((0,gi.U)(({matched:B,consumedSegments:ie,remainingSegments:Se,parameters:tt})=>{if(!B)return null;const vt=Wm(d)+ie.length;return{snapshot:new la(ie,tt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qm(n),Wo(n),n.component??n._loadedComponent??null,n,Gm(d),vt,Ey(n)),consumedSegments:ie,remainingSegments:Se}}));return P.pipe(hl(B=>{if(null===B)return Rn(null);const{snapshot:ie,consumedSegments:Se,remainingSegments:tt}=B;a=n._injector??a;const vt=n._loadedInjector??a,rn=function wy(l){return l.children?l.children:l.loadChildren?l._loadedRoutes:[]}(n),{segmentGroup:Kt,slicedSegments:Jt}=As(d,Se,tt,rn.filter(Nn=>void 0===Nn.redirectTo));if(0===Jt.length&&Kt.hasChildren())return this.processChildren(vt,rn,Kt).pipe((0,gi.U)(Nn=>null===Nn?null:[new fl(ie,Nn)]));if(0===rn.length&&0===Jt.length)return Rn([new fl(ie,[])]);const xn=Wo(n)===T;return this.processSegment(vt,rn,Kt,Jt,xn?ci:T).pipe((0,gi.U)(Nn=>null===Nn?null:[new fl(ie,Nn)]))}))}}function $m(l){const a=l.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function Kh(l){const a=[],n=new Set;for(const d of l){if(!$m(d)){a.push(d);continue}const _=a.find(T=>d.value.routeConfig===T.value.routeConfig);void 0!==_?(_.children.push(...d.children),n.add(_)):a.push(d)}for(const d of n){const _=Kh(d.children);a.push(new fl(d.value,_))}return a.filter(d=>!n.has(d))}function Gm(l){let a=l;for(;a._sourceSegment;)a=a._sourceSegment;return a}function Wm(l){let a=l,n=a._segmentIndexShift??0;for(;a._sourceSegment;)a=a._sourceSegment,n+=a._segmentIndexShift??0;return n-1}function qm(l){return l.data||{}}function Ey(l){return l.resolve||{}}function fd(l){return"string"==typeof l.title||null===l.title}function wf(l){return hl(a=>{const n=l(a);return n?(0,Rr.D)(n).pipe((0,gi.U)(()=>a)):Rn(a)})}const bl=new t.InjectionToken("ROUTES");let md=(()=>{class l{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,t.inject)(t.Compiler)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Rn(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const d=Hn(n.loadComponent()).pipe((0,gi.U)(gd),ts(T=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=T}),Kc(()=>{this.componentLoaders.delete(n)})),_=new bm(d,()=>new lo.x).pipe(uc());return this.componentLoaders.set(n,_),_}loadChildren(n,d){if(this.childrenLoaders.get(d))return this.childrenLoaders.get(d);if(d._loadedRoutes)return Rn({routes:d._loadedRoutes,injector:d._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(d);const T=this.loadModuleFactoryOrRoutes(d.loadChildren).pipe((0,gi.U)(B=>{this.onLoadEndListener&&this.onLoadEndListener(d);let ie,Se,tt=!1;Array.isArray(B)?Se=B:(ie=B.create(n).injector,Se=Xp(ie.get(bl,[],t.InjectFlags.Self|t.InjectFlags.Optional)));return{routes:Se.map(Lm),injector:ie}}),Kc(()=>{this.childrenLoaders.delete(d)})),P=new bm(T,()=>new lo.x).pipe(uc());return this.childrenLoaders.set(d,P),P}loadModuleFactoryOrRoutes(n){return Hn(n()).pipe((0,gi.U)(gd),(0,mo.z)(d=>d instanceof t.NgModuleFactory||Array.isArray(d)?Rn(d):(0,Rr.D)(this.compiler.compileModuleAsync(d))))}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function gd(l){return function pa(l){return l&&"object"==typeof l&&"default"in l}(l)?l.default:l}let ys=(()=>{class l{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new lo.x,this.configLoader=(0,t.inject)(md),this.environmentInjector=(0,t.inject)(t.EnvironmentInjector),this.urlSerializer=(0,t.inject)(tu),this.rootContexts=(0,t.inject)(Uh),this.navigationId=0,this.afterPreactivation=()=>Rn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=_=>this.events.next(new Vv(_)),this.configLoader.onLoadStartListener=_=>this.events.next(new k_(_))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const d=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:d})}setupNavigations(n){return this.transitions=new Xi({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:af,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(za(d=>0!==d.id),(0,gi.U)(d=>({...d,extractedUrl:n.urlHandlingStrategy.extract(d.rawUrl)})),hl(d=>{let _=!1,T=!1;return Rn(d).pipe(ts(P=>{this.currentNavigation={id:P.id,initialUrl:P.rawUrl,extractedUrl:P.extractedUrl,trigger:P.source,extras:P.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hl(P=>{const B=n.browserUrlTree.toString(),ie=!n.navigated||P.extractedUrl.toString()!==B||B!==n.currentUrlTree.toString();if(!ie&&"reload"!==(P.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const tt="";return this.events.next(new Dm(P.id,n.serializeUrl(d.rawUrl),tt,0)),n.rawUrlTree=P.rawUrl,P.resolve(null),Ba.E}if(n.urlHandlingStrategy.shouldProcessUrl(P.rawUrl))return hu(P.source)&&(n.browserUrlTree=P.extractedUrl),Rn(P).pipe(hl(tt=>{const vt=this.transitions?.getValue();return this.events.next(new ny(tt.id,this.urlSerializer.serialize(tt.extractedUrl),tt.source,tt.restoredState)),vt!==this.transitions?.getValue()?Ba.E:Promise.resolve(tt)}),function da(l,a,n,d){return hl(_=>function Um(l,a,n,d,_){return new Hm(l,a,n,d,_).apply()}(l,a,n,_.extractedUrl,d).pipe((0,gi.U)(T=>({..._,urlAfterRedirects:T}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),ts(tt=>{this.currentNavigation={...this.currentNavigation,finalUrl:tt.urlAfterRedirects},d.urlAfterRedirects=tt.urlAfterRedirects}),function Cy(l,a,n,d,_){return(0,mo.z)(T=>function vc(l,a,n,d,_,T,P="emptyOnly"){return new Xh(l,a,n,d,_,P,T).recognize().pipe(hl(B=>null===B?function ha(l){return new id.y(a=>a.error(l))}(new Ya):Rn(B)))}(l,a,n,T.urlAfterRedirects,d.serialize(T.urlAfterRedirects),d,_).pipe((0,gi.U)(P=>({...T,targetSnapshot:P}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ts(tt=>{if(d.targetSnapshot=tt.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!tt.extras.skipLocationChange){const rn=n.urlHandlingStrategy.merge(tt.urlAfterRedirects,tt.rawUrl);n.setBrowserUrl(rn,tt)}n.browserUrlTree=tt.urlAfterRedirects}const vt=new yo(tt.id,this.urlSerializer.serialize(tt.extractedUrl),this.urlSerializer.serialize(tt.urlAfterRedirects),tt.targetSnapshot);this.events.next(vt)}));if(ie&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:tt,extractedUrl:vt,source:rn,restoredState:Kt,extras:Jt}=P,xn=new ny(tt,this.urlSerializer.serialize(vt),rn,Kt);this.events.next(xn);const Nn=ly(vt,this.rootComponentType).snapshot;return Rn(d={...P,targetSnapshot:Nn,urlAfterRedirects:vt,extras:{...Jt,skipLocationChange:!1,replaceUrl:!1}})}{const tt="";return this.events.next(new Dm(P.id,n.serializeUrl(d.extractedUrl),tt,1)),n.rawUrlTree=P.rawUrl,P.resolve(null),Ba.E}}),ts(P=>{const B=new I_(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(B)}),(0,gi.U)(P=>d={...P,guards:gy(P.targetSnapshot,P.currentSnapshot,this.rootContexts)}),function ua(l,a){return(0,mo.z)(n=>{const{targetSnapshot:d,currentSnapshot:_,guards:{canActivateChecks:T,canDeactivateChecks:P}}=n;return 0===P.length&&0===T.length?Rn({...n,guardsResult:!0}):function zm(l,a,n,d){return(0,Rr.D)(l).pipe((0,mo.z)(_=>function Wh(l,a,n,d,_){const T=a&&a.routeConfig?a.routeConfig.canDeactivate:null;return T&&0!==T.length?Rn(T.map(B=>{const ie=Wa(a)??_,Se=lu(B,ie);return Hn(function yy(l){return l&&gl(l.canDeactivate)}(Se)?Se.canDeactivate(l,a,n,d):ie.runInContext(()=>Se(l,a,n,d))).pipe(Va())})).pipe(yl()):Rn(!0)}(_.component,_.route,n,a,d)),Va(_=>!0!==_,!0))}(P,d,_,l).pipe((0,mo.z)(B=>B&&function Nm(l){return"boolean"==typeof l}(B)?function Hh(l,a,n,d){return(0,Rr.D)(a).pipe(Xc(_=>bh(function $h(l,a){return null!==l&&a&&a(new A_(l)),Rn(!0)}(_.route.parent,d),function ud(l,a){return null!==l&&a&&a(new Go(l)),Rn(!0)}(_.route,d),function Gh(l,a,n){const d=a[a.length-1],T=a.slice(0,a.length-1).reverse().map(P=>function F_(l){const a=l.routeConfig?l.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:l,guards:a}:null}(P)).filter(P=>null!==P).map(P=>wh(()=>Rn(P.guards.map(ie=>{const Se=Wa(P.node)??n,tt=lu(ie,Se);return Hn(function Bm(l){return l&&gl(l.canActivateChild)}(tt)?tt.canActivateChild(d,l):Se.runInContext(()=>tt(d,l))).pipe(Va())})).pipe(yl())));return Rn(T).pipe(yl())}(l,_.path,n),function dd(l,a,n){const d=a.routeConfig?a.routeConfig.canActivate:null;if(!d||0===d.length)return Rn(!0);const _=d.map(T=>wh(()=>{const P=Wa(a)??n,B=lu(T,P);return Hn(function gf(l){return l&&gl(l.canActivate)}(B)?B.canActivate(a,l):P.runInContext(()=>B(a,l))).pipe(Va())}));return Rn(_).pipe(yl())}(l,_.route,n))),Va(_=>!0!==_,!0))}(d,T,l,a):Rn(B)),(0,gi.U)(B=>({...n,guardsResult:B})))})}(this.environmentInjector,P=>this.events.next(P)),ts(P=>{if(d.guardsResult=P.guardsResult,gc(P.guardsResult))throw pf(0,P.guardsResult);const B=new km(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot,!!P.guardsResult);this.events.next(B)}),za(P=>!!P.guardsResult||(n.restoreHistory(P),this.cancelNavigationTransition(P,"",3),!1)),wf(P=>{if(P.guards.canActivateChecks.length)return Rn(P).pipe(ts(B=>{const ie=new D_(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot);this.events.next(ie)}),hl(B=>{let ie=!1;return Rn(B).pipe(function Sy(l,a){return(0,mo.z)(n=>{const{targetSnapshot:d,guards:{canActivateChecks:_}}=n;if(!_.length)return Rn(n);let T=0;return(0,Rr.D)(_).pipe(Xc(P=>function vl(l,a,n,d){const _=l.routeConfig,T=l._resolve;return void 0!==_?.title&&!fd(_)&&(T[ns]=_.title),function xf(l,a,n,d){const _=function Ty(l){return[...Object.keys(l),...Object.getOwnPropertySymbols(l)]}(l);if(0===_.length)return Rn({});const T={};return(0,Rr.D)(_).pipe((0,mo.z)(P=>function My(l,a,n,d){const _=Wa(a)??d,T=lu(l,_);return Hn(T.resolve?T.resolve(a,n):_.runInContext(()=>T(a,n)))}(l[P],a,n,d).pipe(Va(),ts(B=>{T[P]=B}))),xm(1),function qg(l){return(0,gi.U)(()=>l)}(T),ra(P=>_o(P)?Ba.E:dl(P)))}(T,l,a,d).pipe((0,gi.U)(P=>(l._resolvedData=P,l.data=Pm(l,n).resolve,_&&fd(_)&&(l.data[ns]=_.title),null)))}(P.route,d,l,a)),ts(()=>T++),xm(1),(0,mo.z)(P=>T===_.length?Rn(n):Ba.E))})}(n.paramsInheritanceStrategy,this.environmentInjector),ts({next:()=>ie=!0,complete:()=>{ie||(n.restoreHistory(B),this.cancelNavigationTransition(B,"",2))}}))}),ts(B=>{const ie=new iy(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot);this.events.next(ie)}))}),wf(P=>{const B=ie=>{const Se=[];ie.routeConfig?.loadComponent&&!ie.routeConfig._loadedComponent&&Se.push(this.configLoader.loadComponent(ie.routeConfig).pipe(ts(tt=>{ie.component=tt}),(0,gi.U)(()=>{})));for(const tt of ie.children)Se.push(...B(tt));return Se};return vm(B(P.targetSnapshot.root)).pipe(Yp(),od(1))}),wf(()=>this.afterPreactivation()),(0,gi.U)(P=>{const B=function e1(l,a,n){const d=ad(l,a._root,n?n._root:void 0);return new Am(d,a)}(n.routeReuseStrategy,P.targetSnapshot,P.currentRouterState);return d={...P,targetRouterState:B}}),ts(P=>{n.currentUrlTree=P.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl),n.routerState=P.targetRouterState,"deferred"===n.urlUpdateStrategy&&(P.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,P),n.browserUrlTree=P.urlAfterRedirects)}),((l,a,n)=>(0,gi.U)(d=>(new L_(a,d.targetRouterState,d.currentRouterState,n).activate(l),d)))(this.rootContexts,n.routeReuseStrategy,P=>this.events.next(P)),od(1),ts({next:P=>{_=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new iu(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(P.targetRouterState.snapshot),P.resolve(!0)},complete:()=>{_=!0}}),Kc(()=>{_||T||this.cancelNavigationTransition(d,"",1),this.currentNavigation?.id===d.id&&(this.currentNavigation=null)}),ra(P=>{if(T=!0,ml(P)){ld(P)||(n.navigated=!0,n.restoreHistory(d,!0));const B=new lf(d.id,this.urlSerializer.serialize(d.extractedUrl),P.message,P.cancellationCode);if(this.events.next(B),ld(P)){const ie=n.urlHandlingStrategy.merge(P.url,n.rawUrlTree),Se={skipLocationChange:d.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||hu(d.source)};n.scheduleNavigation(ie,af,null,Se,{resolve:d.resolve,reject:d.reject,promise:d.promise})}else d.resolve(!1)}else{n.restoreHistory(d,!0);const B=new Lh(d.id,this.urlSerializer.serialize(d.extractedUrl),P,d.targetSnapshot??void 0);this.events.next(B);try{d.resolve(n.errorHandler(P))}catch(ie){d.reject(ie)}}return Ba.E}))}))}cancelNavigationTransition(n,d,_){const T=new lf(n.id,this.urlSerializer.serialize(n.extractedUrl),d,_);this.events.next(T),n.resolve(!1)}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function hu(l){return l!==af}let Ef=(()=>{class l{buildTitle(n){let d,_=n.root;for(;void 0!==_;)d=this.getResolvedTitleForRoute(_)??d,_=_.children.find(T=>T.outlet===ci);return d}getResolvedTitleForRoute(n){return n.data[ns]}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return(0,t.inject)(pu)},providedIn:"root"}),l})(),pu=(()=>{class l extends Ef{constructor(n){super(),this.title=n}updateTitle(n){const d=this.buildTitle(n);void 0!==d&&this.title.setTitle(d)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Fo))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),yd=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return(0,t.inject)(Ym)},providedIn:"root"}),l})();class Zm{shouldDetach(a){return!1}store(a,n){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,n){return a.routeConfig===n.routeConfig}}let Ym=(()=>{class l extends Zm{}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const Iy=new t.InjectionToken("",{providedIn:"root",factory:()=>({})});let V_=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:function(){return(0,t.inject)(U_)},providedIn:"root"}),l})(),U_=(()=>{class l{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,d){return n}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function Wv(l){throw l}function Gr(l,a,n){return a.parse("/")}const Dy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let uo=(()=>{class l{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,t.inject)(t.\u0275Console),this.isNgZoneEnabled=!1,this.options=(0,t.inject)(Iy,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Wv,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Gr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,t.inject)(V_),this.routeReuseStrategy=(0,t.inject)(yd),this.urlCreationStrategy=(0,t.inject)(ay),this.titleStrategy=(0,t.inject)(Ef),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Xp((0,t.inject)(bl,{optional:!0})??[]),this.navigationTransitions=(0,t.inject)(ys),this.urlSerializer=(0,t.inject)(tu),this.location=(0,t.inject)(G),this.isNgZoneEnabled=(0,t.inject)(t.NgZone)instanceof t.NgZone&&t.NgZone.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new pc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ly(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),af,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const d="popstate"===n.type?"popstate":"hashchange";"popstate"===d&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,d,n.state)},0)}))}navigateToSyncWithBrowser(n,d,_){const T={replaceUrl:!0},P=_?.navigationId?_:null;if(_){const ie={..._};delete ie.navigationId,delete ie.\u0275routerPageId,0!==Object.keys(ie).length&&(T.state=ie)}const B=this.parseUrl(n);this.scheduleNavigation(B,d,P,T)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Lm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,d={}){const{relativeTo:_,queryParams:T,fragment:P,queryParamsHandling:B,preserveFragment:ie}=d,Se=ie?this.currentUrlTree.fragment:P;let tt=null;switch(B){case"merge":tt={...this.currentUrlTree.queryParams,...T};break;case"preserve":tt=this.currentUrlTree.queryParams;break;default:tt=T||null}return null!==tt&&(tt=this.removeEmptyProps(tt)),this.urlCreationStrategy.createUrlTree(_,this.routerState,this.currentUrlTree,n,tt,Se??null)}navigateByUrl(n,d={skipLocationChange:!1}){const _=gc(n)?n:this.parseUrl(n),T=this.urlHandlingStrategy.merge(_,this.rawUrlTree);return this.scheduleNavigation(T,af,null,d)}navigate(n,d={skipLocationChange:!1}){return function Xm(l){for(let a=0;a<l.length;a++){const n=l[a];if(null==n)throw new t.\u0275RuntimeError(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,d),d)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let d;try{d=this.urlSerializer.parse(n)}catch(_){d=this.malformedUriErrorHandler(_,this.urlSerializer,n)}return d}isActive(n,d){let _;if(_=!0===d?{...Dy}:!1===d?{...H_}:d,gc(n))return Th(this.currentUrlTree,n,_);const T=this.parseUrl(n);return Th(this.currentUrlTree,T,_)}removeEmptyProps(n){return Object.keys(n).reduce((d,_)=>{const T=n[_];return null!=T&&(d[_]=T),d},{})}scheduleNavigation(n,d,_,T,P){if(this.disposed)return Promise.resolve(!1);let B,ie,Se,tt;return P?(B=P.resolve,ie=P.reject,Se=P.promise):Se=new Promise((vt,rn)=>{B=vt,ie=rn}),tt="computed"===this.canceledNavigationResolution?_&&_.\u0275routerPageId?_.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:tt,source:d,restoredState:_,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:T,resolve:B,reject:ie,promise:Se,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Se.catch(vt=>Promise.reject(vt))}setBrowserUrl(n,d){const _=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(_)||d.extras.replaceUrl){const P={...d.extras.state,...this.generateNgRouterState(d.id,this.browserPageId)};this.location.replaceState(_,"",P)}else{const T={...d.extras.state,...this.generateNgRouterState(d.id,d.targetPageId)};this.location.go(_,"",T)}}restoreHistory(n,d=!1){if("computed"===this.canceledNavigationResolution){const T=this.currentPageId-(this.browserPageId??this.currentPageId);0!==T?this.location.historyGo(T):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===T&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(d&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,d){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:d}:{navigationId:n}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();class xc{}let e=(()=>{class l{constructor(n,d,_,T,P){this.router=n,this.injector=_,this.preloadingStrategy=T,this.loader=P}setUpPreloading(){this.subscription=this.router.events.pipe(za(n=>n instanceof iu),Xc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,d){const _=[];for(const T of d){T.providers&&!T._injector&&(T._injector=(0,t.createEnvironmentInjector)(T.providers,n,`Route: ${T.path}`));const P=T._injector??n,B=T._loadedInjector??P;(T.loadChildren&&!T._loadedRoutes&&void 0===T.canLoad||T.loadComponent&&!T._loadedComponent)&&_.push(this.preloadConfig(P,T)),(T.children||T._loadedRoutes)&&_.push(this.processRoutes(B,T.children??T._loadedRoutes))}return(0,Rr.D)(_).pipe((0,Wp.J)())}preloadConfig(n,d){return this.preloadingStrategy.preload(d,()=>{let _;_=d.loadChildren&&void 0===d.canLoad?this.loader.loadChildren(n,d):Rn(null);const T=_.pipe((0,mo.z)(P=>null===P?Rn(void 0):(d._loadedRoutes=P.routes,d._loadedInjector=P.injector,this.processRoutes(P.injector??n,P.routes))));if(d.loadComponent&&!d._loadedComponent){const P=this.loader.loadComponent(d);return(0,Rr.D)([T,P]).pipe((0,Wp.J)())}return T})}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(uo),t.\u0275\u0275inject(t.Compiler),t.\u0275\u0275inject(t.EnvironmentInjector),t.\u0275\u0275inject(xc),t.\u0275\u0275inject(md))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const r=new t.InjectionToken("");let u=(()=>{class l{constructor(n,d,_,T,P={}){this.urlSerializer=n,this.transitions=d,this.viewportScroller=_,this.zone=T,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ny?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof iu&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof sy&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,d){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sy(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,d))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return l.\u0275fac=function(n){t.\u0275\u0275invalidFactory()},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();var m=(()=>((m=m||{})[m.COMPLETE=0]="COMPLETE",m[m.FAILED=1]="FAILED",m[m.REDIRECTING=2]="REDIRECTING",m))();const x=!1;function D(l,a){return{\u0275kind:l,\u0275providers:a}}const R=new t.InjectionToken("",{providedIn:"root",factory:()=>!1});function $(){const l=(0,t.inject)(t.Injector);return a=>{const n=l.get(t.ApplicationRef);if(a!==n.components[0])return;const d=l.get(uo),_=l.get(Q);1===l.get(ae)&&d.initialNavigation(),l.get(Ae,null,t.InjectFlags.Optional)?.setUpPreloading(),l.get(r,null,t.InjectFlags.Optional)?.init(),d.resetRootComponentType(n.componentTypes[0]),_.closed||(_.next(),_.complete(),_.unsubscribe())}}const Q=new t.InjectionToken(x?"bootstrap done indicator":"",{factory:()=>new lo.x}),ae=new t.InjectionToken(x?"initial navigation":"",{providedIn:"root",factory:()=>1});function xe(){let l=[];return l=x?[{provide:t.ENVIRONMENT_INITIALIZER,multi:!0,useFactory:()=>{const a=(0,t.inject)(uo);return()=>a.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function rs(l){if(!("type"in l))return`Unknown Router Event: ${l.constructor.name}`;switch(l.type){case 14:return`ActivationEnd(path: '${l.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${l.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${l.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${l.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${l.id}, url: '${l.url}', urlAfterRedirects: '${l.urlAfterRedirects}', state: ${l.state}, shouldActivate: ${l.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${l.id}, url: '${l.url}', urlAfterRedirects: '${l.urlAfterRedirects}', state: ${l.state})`;case 2:return`NavigationCancel(id: ${l.id}, url: '${l.url}')`;case 16:return`NavigationSkipped(id: ${l.id}, url: '${l.url}')`;case 1:return`NavigationEnd(id: ${l.id}, url: '${l.url}', urlAfterRedirects: '${l.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${l.id}, url: '${l.url}', error: ${l.error})`;case 0:return`NavigationStart(id: ${l.id}, url: '${l.url}')`;case 6:return`ResolveEnd(id: ${l.id}, url: '${l.url}', urlAfterRedirects: '${l.urlAfterRedirects}', state: ${l.state})`;case 5:return`ResolveStart(id: ${l.id}, url: '${l.url}', urlAfterRedirects: '${l.urlAfterRedirects}', state: ${l.state})`;case 10:return`RouteConfigLoadEnd(path: ${l.route.path})`;case 9:return`RouteConfigLoadStart(path: ${l.route.path})`;case 4:return`RoutesRecognized(id: ${l.id}, url: '${l.url}', urlAfterRedirects: '${l.urlAfterRedirects}', state: ${l.state})`;case 15:return`Scroll(anchor: '${l.anchor}', position: '${l.position?`${l.position[0]}, ${l.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],D(1,l)}const Ae=new t.InjectionToken(x?"router preloader":"");function Ve(l){return D(0,[{provide:Ae,useExisting:e},{provide:xc,useExisting:l}])}const St=!1,bt=new t.InjectionToken(St?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),At=[G,{provide:tu,useClass:go},uo,Uh,{provide:Ao,useFactory:function I(l){return l.routerState.root},deps:[uo]},md,St?{provide:R,useValue:!0}:[]];function kt(){return new t.NgProbeToken("Router",uo)}let Nt=(()=>{class l{constructor(n){}static forRoot(n,d){return{ngModule:l,providers:[At,St&&d?.enableTracing?xe().\u0275providers:[],{provide:bl,multi:!0,useValue:n},{provide:bt,useFactory:mn,deps:[[uo,new t.Optional,new t.SkipSelf]]},{provide:Iy,useValue:d||{}},d?.useHash?{provide:te,useClass:ne}:{provide:te,useClass:ue},{provide:r,useFactory:()=>{const l=(0,t.inject)(Od),a=(0,t.inject)(t.NgZone),n=(0,t.inject)(Iy),d=(0,t.inject)(ys),_=(0,t.inject)(tu);return n.scrollOffset&&l.setOffset(n.scrollOffset),new u(_,d,l,a,n)}},d?.preloadingStrategy?Ve(d.preloadingStrategy).\u0275providers:[],{provide:t.NgProbeToken,multi:!0,useFactory:kt},d?.initialNavigation?un(d):[],[{provide:Bn,useFactory:$},{provide:t.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:Bn}]]}}static forChild(n){return{ngModule:l,providers:[{provide:bl,multi:!0,useValue:n}]}}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(bt,8))},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({imports:[ou]}),l})();function mn(l){if(St&&l)throw new t.\u0275RuntimeError(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function un(l){return["disabled"===l.initialNavigation?D(3,[{provide:t.APP_INITIALIZER,multi:!0,useFactory:()=>{const a=(0,t.inject)(uo);return()=>{a.setUpLocationChangeListener()}}},{provide:ae,useValue:2}]).\u0275providers:[],"enabledBlocking"===l.initialNavigation?D(2,[{provide:ae,useValue:0},{provide:t.APP_INITIALIZER,multi:!0,deps:[t.Injector],useFactory:a=>{const n=a.get(Je,Promise.resolve());return()=>n.then(()=>new Promise(d=>{const _=a.get(uo),T=a.get(Q);(function v(l,a){l.events.pipe(za(n=>n instanceof iu||n instanceof lf||n instanceof Lh||n instanceof Dm),(0,gi.U)(n=>n instanceof iu||n instanceof Dm?m.COMPLETE:n instanceof lf&&(0===n.code||1===n.code)?m.REDIRECTING:m.FAILED),za(n=>n!==m.REDIRECTING),od(1)).subscribe(()=>{a()})})(_,()=>{d(!0)}),a.get(ys).afterPreactivation=()=>(d(!0),T.closed?Rn(void 0):T),_.initialNavigation()}))}}]).\u0275providers:[]]}const Bn=new t.InjectionToken(St?"Router Initializer":"");var On=ut(918);const yi=["inputField"],$n=function(l){return{"disabled-link":l}};function kn(l,a){if(1&l){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",41)(1,"div",9)(2,"div",42)(3,"div",43)(4,"a",44),t.\u0275\u0275element(5,"img",45),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",46)(7,"div",42)(8,"div",47)(9,"input",48,49),t.\u0275\u0275listener("onAddressChange",function(_){t.\u0275\u0275restoreView(n);const T=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(T.handleAddressChange(_))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",47)(13,"a",50),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.saveAddress())}),t.\u0275\u0275text(14,"Take the first step"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(15,"div",51)(16,"div")(17,"a",52),t.\u0275\u0275element(18,"img",6),t.\u0275\u0275text(19," 1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"div",53)(21,"a",54),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.closeNav())}),t.\u0275\u0275text(22,"\xd7"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"ul")(24,"li")(25,"a",44),t.\u0275\u0275text(26,"Home"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"li")(28,"a",55),t.\u0275\u0275text(29,"How it works"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"li")(31,"a",56),t.\u0275\u0275text(32,"Locations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"li")(34,"a",57),t.\u0275\u0275text(35,"FAQs"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(36,"li")(37,"a",58),t.\u0275\u0275text(38,"Why sell to us"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(39,"li")(40,"a",59),t.\u0275\u0275text(41,"Speed and simplicity"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"li")(43,"a",60),t.\u0275\u0275text(44,"experience and trust"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(45,"li")(46,"a",61),t.\u0275\u0275text(47,"Personal Trust"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(48,"li")(49,"a",62),t.\u0275\u0275text(50,"Customer Reviews"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(51,"li")(52,"a",63),t.\u0275\u0275text(53,"Investor sign up"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(54,"li")(55,"a",64),t.\u0275\u0275text(56,"About"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(57,"li")(58,"a",65),t.\u0275\u0275text(59,"Contact"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(60,"span",66),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.openNav())}),t.\u0275\u0275text(61,"\u2630"),t.\u0275\u0275elementEnd()()()()()()()}if(2&l){const n=t.\u0275\u0275reference(10),d=t.\u0275\u0275nextContext();t.\u0275\u0275advance(9),t.\u0275\u0275property("options",d.options),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(2,$n,!n.value))}}let Qn=(()=>{class l{constructor(n,d,_){this.router=n,this.route=d,this.el=_,this.showNav=!1,this.options={componentRestrictions:{country:"CA"}},this.fullAddress="",this.scroll=()=>{let T;T=window.innerWidth<350?150:window.innerWidth<500&&window.innerWidth>350?250:window.innerWidth<700&&window.innerWidth>500?350:window.innerWidth<1e3&&window.innerWidth>700?500:650,window.scrollY>=T?this.showNav=!0:window.scrollY<T&&(this.showNav=!1)}}ngOnInit(){window.addEventListener("scroll",this.scroll,!0)}handleAddressChange(n){this.fullAddress=n.formatted_address}saveAddress(){const n=this.inputField.nativeElement.value;""==this.fullAddress&&(this.fullAddress=n),console.log("Input Value:",n),sessionStorage.setItem("user_street_address",this.fullAddress);const d=(new Date).getTime()+3e5;sessionStorage.setItem("session_expiration",d.toString()),this.router.navigate(["/contact"])}openNav(){this.el.nativeElement.querySelector("#mySidenav").style.width="250px"}closeNav(){this.el.nativeElement.querySelector("#mySidenav").style.width="0"}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(uo),t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(t.ElementRef))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-navbar"]],viewQuery:function(d,_){if(1&d&&t.\u0275\u0275viewQuery(yi,5),2&d){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.inputField=T.first)}},inputs:{heading:"heading",subheading:"subheading"},decls:72,vars:1,consts:[[1,"top-heading","d-none","d-lg-block"],[1,"container","py-2"],[1,"row","d-flex","justify-content-between","align-items-center"],[1,"col-lg-7","col-md-7","col-12","text-start"],[1,"col-lg-5","col-md-7","col-12","text-end","social-icons"],["href","tel:18889869883",2,"text-decoration","none","font-weight","800","color","#dd3333"],["src","../../../assets/images/navbar/phone.svg","width","15","alt","",2,"margin-right","4px"],[1,"navigation"],[1,"navbar","navbar-expand-lg","py-3"],[1,"container"],[1,"logo","my-auto","d-flex","align-items-center","justify-content-center"],["href","#"],["alt","Logo","width","140","src","../../../assets/images/logo/source - logo.jpg"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],["href","tel:18889869883"],["src","../../../assets/images/navbar/phone.svg","width","20","alt","",2,"margin","0 10px 10px 0"],["aria-hidden","true",1,"fa","fa-bars","fs-1"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","my-4"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item"],["href","how-does-it-work",1,"nav-link","px-2","mx-2"],["href","locations",1,"nav-link","px-2","mx-2"],["href","questions-about-selling-your-home",1,"nav-link","px-2","mx-2"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","px-2","mx-2"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","py-3"],["href","selling-your-house",1,"dropdown-item"],["href","selling-your-house/i-need-to-sell-my-house-fast",1,"dropdown-item"],["href","selling-your-house/experience-and-trust",1,"dropdown-item"],["href","selling-your-house/personal-touch",1,"dropdown-item"],["href","selling-your-house/reviews",1,"dropdown-item"],["href","investor-sign-up",1,"nav-link","px-2","mx-2"],["href","about",1,"nav-link","px-2","mx-2"],["href","contact",1,"nav-link","px-2","mx-2"],[1,"d-block","d-md-none"],["id","mobile",1,"contactnav-wrap","mt-4"],[1,"icon","me-2"],["src","../../../assets/images/navbar/phone.svg","width","20","alt",""],[1,"box-body","justify-content-start","align-items-start"],[1,""],["class","header sticky-top bg-white py-3 ",4,"ngIf"],[1,"header","sticky-top","bg-white","py-3"],[1,"row"],[1,"col-lg-2"],["href","/"],["src","../../../assets/images/logo/source - logo.jpg","width","140","alt",""],[1,"col-lg-10","d-flex","justify-content-end","align-items-center"],[1,"col"],["ngx-google-places-autocomplete","","name","address","type","text","placeholder","Enter your property address","aria-label","Enter you address","aria-describedby","button-addon2",1,"form-control",3,"options","onAddressChange"],["addressInput","","inputField",""],["href","contact","id","button-vary1",1,"btn","btn-danger","col-12","py-3",3,"ngClass","click"],[1,"row","ms-lg-4","justify-content-center","align-items-center"],["href","tel:18889869883",1,"fs-5",2,"text-decoration","none","font-weight","800","color","#dd3333"],["id","mySidenav",1,"sidenav"],["href","javascript:void(0)",1,"closebtn",3,"click"],["href","how-does-it-work"],["href","locations"],["href","questions-about-selling-your-home"],["href","selling-your-house"],["href","selling-your-house/i-need-to-sell-my-house-fast"],["href","selling-your-house/experience-and-trust"],["href","selling-your-house/personal-touch"],["href","selling-your-house/reviews"],["href","investor-sign-up"],["href","about"],["href","contact"],["id","main",2,"font-size","40px","cursor","pointer",3,"click"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"small"),t.\u0275\u0275text(5,"Michael the Home Buyer | Quick, Hassle-free cash for your home."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",4)(7,"h5")(8,"a",5),t.\u0275\u0275element(9,"img",6),t.\u0275\u0275text(10," 1 (888) 986-9883"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"section",7)(12,"nav",8)(13,"div",9)(14,"div",10)(15,"a",11),t.\u0275\u0275element(16,"img",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"button",13)(18,"a",14),t.\u0275\u0275element(19,"img",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(20,"i",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",17)(22,"ul",18)(23,"li",19)(24,"a",20),t.\u0275\u0275text(25," How It Works"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"li",19)(27,"a",21),t.\u0275\u0275text(28," Locations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"li",19)(30,"a",22),t.\u0275\u0275text(31,"FAQ"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(32,"li",23)(33,"a",24),t.\u0275\u0275text(34,"Why Sell To Us "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"ul",25)(36,"li")(37,"a",26),t.\u0275\u0275text(38," Why sell to Us"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(39,"li")(40,"a",27),t.\u0275\u0275text(41," Speed and Simplicity"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"li")(43,"a",28),t.\u0275\u0275text(44,"Experience and trust"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(45,"li")(46,"a",29),t.\u0275\u0275text(47,"Personal Trust"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(48,"li")(49,"a",30),t.\u0275\u0275text(50,"Customer Review"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(51,"li")(52,"a",31),t.\u0275\u0275text(53," Investor Sign up"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(54,"li",19)(55,"a",32),t.\u0275\u0275text(56,"About"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(57,"li",19)(58,"a",33),t.\u0275\u0275text(59,"Contact"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(60,"div",34),t.\u0275\u0275element(61,"hr"),t.\u0275\u0275elementStart(62,"div",35)(63,"div",36),t.\u0275\u0275element(64,"img",37),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"div",38)(66,"h5",39),t.\u0275\u0275text(67," Contact for support "),t.\u0275\u0275element(68,"br"),t.\u0275\u0275elementStart(69,"a",14),t.\u0275\u0275text(70,"1 (888) 986-9883"),t.\u0275\u0275elementEnd()()()()()()()()(),t.\u0275\u0275template(71,kn,62,4,"div",40)),2&d&&(t.\u0275\u0275advance(71),t.\u0275\u0275property("ngIf",_.showNav))},dependencies:[ki,cn,On.GooglePlaceDirective],styles:[".top-heading[_ngcontent-%COMP%]{padding:5px 0;background-color:#d7d6d646;color:#d50404}.top-heading[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:500}.top-heading[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 12px}@media only screen and (max-width: 768px){.navbar-collapse[_ngcontent-%COMP%]{background-color:#fff}.nav-link[_ngcontent-%COMP%]{color:#000}}.navbar-toggler[_ngcontent-%COMP%]{font-size:16px}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{position:relative;text-transform:capitalize;transition:all .3s ease-in-out}a[_ngcontent-%COMP%]{color:#000}.contactnav-wrap[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;padding:0 0 0 20px;border-style:solid;border-width:0px 0px 0px 1px;border-color:#d1dbec52}#mobile[_ngcontent-%COMP%]{justify-content:start!important;border:none}.contactnav-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.contactnav-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.contactnav-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#d33;text-decoration:none}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.header[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none}.form-control[_ngcontent-%COMP%]{height:60px;width:300px}.disabled-link[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed;opacity:.6}.hidden-section[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 1024px){.header[_ngcontent-%COMP%]{display:none}}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#111;overflow-x:hidden;padding-top:60px;transition:.5s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-family:Gotham;color:#f1f1f1;display:block;transition:.3s;text-transform:capitalize}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .offcanvas[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#000}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#main[_ngcontent-%COMP%]{transition:margin-left .5s;padding:20px}@media screen and (max-height: 450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]})}return l})(),wn=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-footer"]],decls:126,vars:0,consts:[[1,"footer"],[1,"container"],[1,"row","mb-4","justify-content-center","align-items-center"],[1,"col-lg-8","col-md-8","col-12","order-lg-1","order-md-1","order-2"],["id","menu-footer-navigation",1,"nav"],["title","How it Works","href","how-does-it-work","target","_blank"],["title","Sell to Us","href","selling-your-house","target","_blank"],["title","Locations","href","locations","target","_blank"],["title","FAQ","href","questions-about-selling-your-home","target","_blank"],["title","About","href","about","target","_blank"],["title","Contact","href","investor-sign-up","target","_blank"],["title","Contact","href","contact","target","_blank"],["title","Feedback","href","feedback","target","_blank"],["title","Mobile Terms of Service","href","mobile-tos","target","_blank"],["title","Terms of Use","href","terms-of-use","target","_blank"],["title","Privacy Policy","href","privacy-policy","target","_blank"],[1,"col-lg-4","col-md-4","col-12","text-center","order-lg-2","order-md-2","order-1","pb-lg-0","pb-md-0","pb-4"],[1,"fw-bold"],["href","tel:18889869883"],["src","../../../assets/images/footer/phone-white.svg","width","15","alt","","srcset",""],[1,"row","mt-4"],[1,"col-lg-12"],["title","Hamilton","href","location/richmond-hill","target","_blank"],["title","Toronto","href","location/pickering","target","_blank"],["title","Sell Fast In St. Catharines","href","location/pembroke","target","_blank"],["title","Markham","href","location/markham","target","_blank"],["title","Dryden","href","location/dryden","target","_blank"],["title","Haldimand County","href","location/haldimand-county","target","_blank"],["title","Brant","href","location/brant","target","_blank"],["title","Windsor","href","location/windsor","target","_blank"],["title","Woodstock","href","location/woodstock","target","_blank"],["title","Toronto","href","location/toronto","target","_blank"],["title","Trenton","href","location/trenton","target","_blank"],["title","Thunder Bay","href","location/thunder-bay","target","_blank"],["title","Vaughan","href","location/vaughan","target","_blank"],["title","Sarnia","href","location/sarnia","target","_blank"],["title","Waterloo","href","location/waterloo","target","_blank"],["title","Pickering","href","location/pickering","target","_blank"],["title","Guelph","href","location/guelph","target","_blank"],["title","Hamilton","href","location/hamilton","target","_blank"],["title","Etobicoke","href","location/etobicoke","target","_blank"],["title","Kingston","href","location/kingston","target","_blank"],["title","Kirkland Lake","href","location/kirkland-lake","target","_blank"],["title","Kapuskasing","href","location/kapuskasing","target","_blank"],["title","Kawartha Lakes","href","location/kawartha-lakes","target","_blank"],[1,"mt-4"],[1,"col-12","justify-content-left","align-items-left","g-2"],["href","https://www.facebook.com/MichaeltheHomebuyer/","target","_blank",1,"bi","bi-facebook"],["href","https://www.instagram.com/michaelthehomebuyer/","target","_blank",1,"bi","bi-instagram"],["href","https://twitter.com/Michaelthebuyer/","target","_blank",1,"bi","bi-twitter-x"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li")(6,"a",5),t.\u0275\u0275text(7,"How it Works "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"li")(9,"a",6),t.\u0275\u0275text(10,"Sell to Us "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"li")(12,"a",7),t.\u0275\u0275text(13,"Locations"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"li")(15,"a",8),t.\u0275\u0275text(16,"FAQ"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"li")(18,"a",9),t.\u0275\u0275text(19,"About"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"li")(21,"a",10),t.\u0275\u0275text(22,"Investor Sign Up"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"li")(24,"a",11),t.\u0275\u0275text(25,"Contact"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"li")(27,"a",12),t.\u0275\u0275text(28,"Feedback"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"li")(30,"a",13),t.\u0275\u0275text(31,"Mobile Terms of Service"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(32,"li")(33,"a",14),t.\u0275\u0275text(34,"Terms of Use"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(35,"li")(36,"a",15),t.\u0275\u0275text(37,"Privacy Policy"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(38,"div",16)(39,"h3",17)(40,"a",18),t.\u0275\u0275element(41,"img",19),t.\u0275\u0275text(42," 1 (888) 986-9883"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275element(43,"hr"),t.\u0275\u0275elementStart(44,"div",20)(45,"div",21)(46,"h5",17),t.\u0275\u0275text(47,"AREAS WE SERVICE"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(48,"ul",4)(49,"li")(50,"a",22),t.\u0275\u0275text(51,"Sell Fast In Richmond Hill"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(52,"li")(53,"a",23),t.\u0275\u0275text(54,"Sell Fast In Pickering"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(55,"li")(56,"a",24),t.\u0275\u0275text(57,"Sell Fast In Pembroke"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(58,"li")(59,"a",25),t.\u0275\u0275text(60,"Sell Fast In Markham"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(61,"li")(62,"a",26),t.\u0275\u0275text(63,"Sell Fast In Dryden"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(64,"li")(65,"a",27),t.\u0275\u0275text(66,"Sell Fast In Haldimand County"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(67,"li")(68,"a",28),t.\u0275\u0275text(69,"Sell Fast In Brant"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(70,"li")(71,"a",29),t.\u0275\u0275text(72,"Sell Fast In Windsor"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(73,"li")(74,"a",30),t.\u0275\u0275text(75,"Sell Fast In Woodstock"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(76,"li")(77,"a",31),t.\u0275\u0275text(78,"Sell Fast In Toronto"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(79,"li")(80,"a",32),t.\u0275\u0275text(81,"Sell Fast In Trenton"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(82,"li")(83,"a",33),t.\u0275\u0275text(84,"Sell Fast In Thunder Bay"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(85,"li")(86,"a",34),t.\u0275\u0275text(87,"Sell Fast In Vaughan"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(88,"li")(89,"a",35),t.\u0275\u0275text(90,"Sell Fast In Sarnia"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(91,"li")(92,"a",36),t.\u0275\u0275text(93,"Sell Fast In Waterloo"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(94,"li")(95,"a",37),t.\u0275\u0275text(96,"Sell Fast In Pickering"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(97,"li")(98,"a",38),t.\u0275\u0275text(99,"Sell Fast In Guelph"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(100,"li")(101,"a",39),t.\u0275\u0275text(102,"Sell Fast In Hamilton"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(103,"li")(104,"a",40),t.\u0275\u0275text(105,"Sell Fast In Etobicoke"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(106,"li")(107,"a",41),t.\u0275\u0275text(108,"Sell Fast In Kingston"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(109,"li")(110,"a",42),t.\u0275\u0275text(111,"Sell Fast In Kirkland Lake"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(112,"li")(113,"a",43),t.\u0275\u0275text(114,"Sell Fast In Kapuskasing"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(115,"li")(116,"a",44),t.\u0275\u0275text(117,"Sell Fast In Kawartha Lakes"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(118,"p",45)(119,"small"),t.\u0275\u0275text(120," Based on seller reviews submitted through Google Reviews since 2014. \xa92023 Michael the Home Buyer of Canada Inc. All rights reserved."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(121,"div",20)(122,"div",46),t.\u0275\u0275element(123,"a",47)(124,"a",48)(125,"a",49),t.\u0275\u0275elementEnd()()()())},styles:[".footer[_ngcontent-%COMP%]{padding:80px 0 100px;background-color:#000;color:#fff}.nav[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link[_ngcontent-%COMP%]{display:block;padding:.5rem 1rem}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.2rem .5rem;color:#fff;text-decoration:none}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.bi[_ngcontent-%COMP%]{padding:8px 12px;font-size:1.4em;width:50px;text-align:center;text-decoration:none;margin-left:10px;border-radius:50%}.bi[_ngcontent-%COMP%]:hover{opacity:.7}.bi-facebook[_ngcontent-%COMP%]{background:#3B5998;color:#fff}.bi-twitter-x[_ngcontent-%COMP%]{background:#ffffff;color:#000}.bi-instagram[_ngcontent-%COMP%]{background:#d6249f;background:radial-gradient(circle at 30% 107%,#fdf497 0%,#fdf497 5%,#fd5949 45%,#d6249f 60%,#285AEB 90%);color:#fff}"]})}return l})();const qn=["inputField"],ji=function(l){return{"disabled-link":l}};let fi=(()=>{class l{constructor(n,d){this.router=n,this.route=d,this.options={componentRestrictions:{country:"CA"}},this.fullAddress=""}ngOnInit(){}handleAddressChange(n){this.fullAddress=n.formatted_address}saveAddress(){const n=this.inputField.nativeElement.value;""==this.fullAddress&&(this.fullAddress=n),console.log("Input Value:",n),sessionStorage.setItem("user_street_address",this.fullAddress);const d=(new Date).getTime()+3e5;sessionStorage.setItem("session_expiration",d.toString()),this.router.navigate(["/contact"])}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(uo),t.\u0275\u0275directiveInject(Ao))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-common-header"]],viewQuery:function(d,_){if(1&d&&t.\u0275\u0275viewQuery(qn,5),2&d){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.inputField=T.first)}},inputs:{heading:"heading",subheading:"subheading"},decls:22,vars:6,consts:[[1,"common-header"],[1,"container","overlay-text"],["data-scrollax-parent","true",1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-lg-10","col-md-12","col-sm-12","col-12","text-center","py-5"],[1,"subheading","mb-5"],[1,"row","justify-content-center","align-items-center"],[1,"col-lg-12"],[1,"row","bg-white","py-3","mx-1","border","rounded-3"],[1,"col-lg-2","col-md-2","col-12","m-auto","text-center"],["src","../../../assets/images/home/common-header/icons8-location-48.png","width","30","alt",""],[1,"d-lg-block","d-md-block","d-block","mb-lg-0","mb-md-0","m-2"],["src","../../../assets/images/powered-by-google.png","width","100","alt",""],[1,"col"],["ngx-google-places-autocomplete","","name","address","type","text","placeholder","Enter your property address","aria-label","Enter you address","aria-describedby","button-addon2",1,"form-control",3,"options","onAddressChange"],["addressInput","","inputField",""],[1,"col-lg-4","col-md-4","col-12","pt-lg-0","pt-md-0","pt-3"],["href","contact","id","button-vary1",1,"btn","btn-danger","col-12","py-3",3,"ngClass","click"]],template:function(d,_){if(1&d&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"h3",4),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),t.\u0275\u0275element(12,"img",9),t.\u0275\u0275elementStart(13,"div",10),t.\u0275\u0275element(14,"img",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div",12)(16,"input",13,14),t.\u0275\u0275listener("onAddressChange",function(P){return _.handleAddressChange(P)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"div",15)(20,"a",16),t.\u0275\u0275listener("click",function(){return _.saveAddress()}),t.\u0275\u0275text(21,"Take the first step"),t.\u0275\u0275elementEnd()()()()()()()()()),2&d){const T=t.\u0275\u0275reference(17);t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(_.heading),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(_.subheading),t.\u0275\u0275advance(9),t.\u0275\u0275property("options",_.options),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(4,ji,!T.value))}},dependencies:[ki,On.GooglePlaceDirective],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}.common-header[_ngcontent-%COMP%]{width:100%;height:580px;animation:_ngcontent-%COMP%_changeBackgroundImage 50s infinite;display:flex;align-items:center;text-align:center;background-position:center center;background-repeat:no-repeat;background-attachment:fixed;background-size:cover}@keyframes _ngcontent-%COMP%_changeBackgroundImage{0%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_3.16fd69bec4687052.jpg)}25%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_4.d157ca2ca240f1a4.jpg)}50%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_5.e1889d3fff6d2adf.jpg)}75%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_6.cc67be70e5697f8a.jpg)}to{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_7.67e6436bbb629b53.jpg)}}.form-control[_ngcontent-%COMP%]{height:60px}.disabled-link[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed;opacity:.6}"]})}return l})(),Oi=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-reviews-carousal"]],decls:110,vars:0,consts:[["id","testimonials",1,"section-testimonials","d-flex","align-items-center"],[1,"container"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide","carousel-fade","text-center"],[1,"carousel-inner"],["data-bs-interval","10000",1,"carousel-item","active"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-8","testimonial-text"],[1,"list-unstyled","d-flex","justify-content-center","text-warning","mt-4"],["aria-hidden","true",1,"fas","fa-star","fa-sm"],[1,"my-4"],[1,"mb-4"],["href","selling-your-house/reviews","id","button-vary1","target","_blank",1,"btn","btn-danger"],["data-bs-interval","10000",1,"carousel-item"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li"),t.\u0275\u0275element(11,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"li"),t.\u0275\u0275element(13,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"li"),t.\u0275\u0275element(15,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"li"),t.\u0275\u0275element(17,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"li"),t.\u0275\u0275element(19,"i",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"h3"),t.\u0275\u0275text(21,"I went Googled Michael the Home Buyer and read some reviews, and that was my decision. I\u2019m going with it. Being able to settle in a short time, minimized paperwork, that was the deciding factor!"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"div",11)(23,"h5"),t.\u0275\u0275text(24,"Charlotte W. (Ontario, Canada)"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"h6"),t.\u0275\u0275text(26,"28/10/2022"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",12)(28,"a",13),t.\u0275\u0275text(29,"View More Reviews"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(30,"div",14)(31,"div",7)(32,"div",8)(33,"ul",9)(34,"li"),t.\u0275\u0275element(35,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(36,"li"),t.\u0275\u0275element(37,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"li"),t.\u0275\u0275element(39,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"li"),t.\u0275\u0275element(41,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"li"),t.\u0275\u0275element(43,"i",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(44,"h3"),t.\u0275\u0275text(45," We sold a home to Michael a few months ago. His team worked with us and provided a super smooth and professional process. We agreed on a price, signed the papers, received the money without having to spend a dime on anything else. It was quick and headache-free. Thank you, Michael. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"div",11)(47,"h5"),t.\u0275\u0275text(48,"Golrokh K. (Ontario, Canada) "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"h6"),t.\u0275\u0275text(50,"23/02/2023"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(51,"div",12)(52,"a",13),t.\u0275\u0275text(53,"View More Reviews"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(54,"div",14)(55,"div",7)(56,"div",8)(57,"ul",9)(58,"li"),t.\u0275\u0275element(59,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(60,"li"),t.\u0275\u0275element(61,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"li"),t.\u0275\u0275element(63,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(64,"li"),t.\u0275\u0275element(65,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(66,"li"),t.\u0275\u0275element(67,"i",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(68,"h3"),t.\u0275\u0275text(69," I was in need of help in selling my condominium due to a flooding accident and needed to move back home to Sudbury with my family. I needed a quick solution and Michael the Home Buyer offered that solution. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(70,"div",11)(71,"h5"),t.\u0275\u0275text(72,"Samantha (Ontario, Canada) "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(73,"h6"),t.\u0275\u0275text(74,"18/09/2022"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(75,"div",12)(76,"a",13),t.\u0275\u0275text(77,"View More Reviews"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(78,"div",14)(79,"div",7)(80,"div",8)(81,"ul",9)(82,"li"),t.\u0275\u0275element(83,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(84,"li"),t.\u0275\u0275element(85,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(86,"li"),t.\u0275\u0275element(87,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(88,"li"),t.\u0275\u0275element(89,"i",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(90,"li"),t.\u0275\u0275element(91,"i",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(92,"h3"),t.\u0275\u0275text(93," We sold a home to Michael a few months ago. His team worked with us and provided a super smooth and professional process. We agreed on a price, signed the papers, received the money without having to spend a dime on anything else. It was quick and headache-free. Thank you, Michael. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(94,"div",11)(95,"h5"),t.\u0275\u0275text(96,"Golrokh K. (Ontario, Canada) "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(97,"h6"),t.\u0275\u0275text(98,"11/03/2023"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(99,"div",12)(100,"a",13),t.\u0275\u0275text(101,"View More Reviews"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(102,"button",15),t.\u0275\u0275element(103,"span",16),t.\u0275\u0275elementStart(104,"span",17),t.\u0275\u0275text(105,"Previous"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(106,"button",18),t.\u0275\u0275element(107,"span",19),t.\u0275\u0275elementStart(108,"span",17),t.\u0275\u0275text(109,"Next"),t.\u0275\u0275elementEnd()()()()()()())},styles:['.section-testimonials[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(0,0,0,.755),rgba(0,0,0,.705)),url(back-image.bff40214fac3a80b.jpg);background-attachment:fixed;background-size:cover;background-repeat:no-repeat;background-position:right;padding:140px 0}.section-testimonials[_ngcontent-%COMP%]   .testimonial-text[_ngcontent-%COMP%]{color:#ffffffe7}.list-unstyled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px}.testimonial-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";font-size:1em;display:inline-block;background:url(quote-gray.2f58e9a0dbe661f8.svg) top/contain no-repeat;height:.7em;width:.625em;margin-right:5px}.testimonial-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";font-size:1em;display:inline-block;background:url(endquote-gray.2f58e9a0dbe661f8.svg) top/contain no-repeat;height:.7em;width:.625em;margin-left:5px;background-position-y:bottom;transform:rotate(180deg)}']})}return l})();const Vi=["inputField"];let ar=(()=>{class l{constructor(n,d,_){this.router=n,this.route=d,this.el=_,this.showNav=!1,this.options={componentRestrictions:{country:"CA"}},this.fullAddress="",this.scroll=()=>{let T;T=window.innerWidth<350?150:window.innerWidth<500&&window.innerWidth>350?250:window.innerWidth<700&&window.innerWidth>500?350:window.innerWidth<1e3&&window.innerWidth>700?500:650,window.scrollY>=T?this.showNav=!0:window.scrollY<T&&(this.showNav=!1)}}ngOnInit(){window.addEventListener("scroll",this.scroll,!0)}handleAddressChange(n){this.fullAddress=n.formatted_address}saveAddress(){const n=this.inputField.nativeElement.value;""==this.fullAddress&&(this.fullAddress=n),console.log("Input Value:",n),sessionStorage.setItem("user_street_address",this.fullAddress);const d=(new Date).getTime()+3e5;sessionStorage.setItem("session_expiration",d.toString()),this.router.navigate(["/contact"])}openNav(){this.el.nativeElement.querySelector("#mySidenav").style.width="250px"}closeNav(){this.el.nativeElement.querySelector("#mySidenav").style.width="0"}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(uo),t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(t.ElementRef))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-home"]],viewQuery:function(d,_){if(1&d&&t.\u0275\u0275viewQuery(Vi,5),2&d){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.inputField=T.first)}},inputs:{heading:"heading",subheading:"subheading"},decls:162,vars:0,consts:[["heading","We buy houses fast, easy, and hassle-free.","subheading","Get a cash offer from the buyers with a 95%* customer satisfaction rating."],[1,"first-section"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-12","col-12","pb-5"],[1,"header"],[1,"row","g-lg-1","g-4","text-center"],[1,"col-lg-3","col-md-6","col-12","col-sm-12"],[1,"wrap-img"],["src","../../../assets/images/home/first-section/USP_Image1.jpg","alt",""],["href","selling-your-house/i-need-to-sell-my-house-fast","target","_blank"],[1,"mt-4"],["src","../../../assets/images/home/first-section/USP_Image2.svg","alt",""],["href","selling-your-house/personal-touch","target","_blank"],["src","../../../assets/images/home/first-section/USP_Image3.svg","alt",""],["href","how-does-it-work","target","_blank"],["src","../../../assets/images/home/first-section/USP_Image4.svg","alt",""],["href","locations","target","_blank"],[1,"row","justify-content-center","align-items-center","text-center","mt-4"],[1,"col-lg-8"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-danger","px-5","py-3","mt-4"],[1,"second-section"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-9","col-md-7","col-12"],[1,"pb-4"],[1,"col-lg-3","col-md-5","col-12","justify-content-center","align-items-center","text-center","d-none","d-md-block"],["src","../../../assets/images/home/second-section/HVA-Red-Shirt-Guy-291x432px.png","width","100%","alt",""],[1,"fourth-section","bg-light"],[1,"col-lg-8","pb-5"],[1,"row","justify-content-center","text-center"],[1,"col-lg-10"],["href","tel:18889869883"],["href","contact","target","_blank"],[1,"row","g-lg-1","g-4","mt-4","justify-content-center","text-center"],[1,"col-lg-4","col-md-4","col-12"],["src","./.././../../assets/images/home/fourth-section/1st.svg","width","100%","height","190px","alt",""],["src","../../../assets/images/home/fourth-section/2nd.svg","width","100%","height","190px","alt",""],["src","../../../assets/images/home/fourth-section/3rd.svg","width","100%","height","190px","alt",""],[1,"fifth-section"],[1,"col-lg-3","col-md-6","col-12"],["src","./.././../../assets/images/home/fifth-section/icons8-pen-100.png","alt",""],["src","../../../assets/images/home/fifth-section/icons8-repair-100.png","alt",""],["src","../../../assets/images/home/fifth-section/icons8-cash-100.png",1,""],["src","../../../assets/images/home/fifth-section/icons8-time-100.png","alt",""],[1,"sixth-section"],[1,"col-lg-12","col-12"],["href","selling-your-house","target","_blank"],[1,"seventh-section","bg-light"],[1,"col-lg-9","col-md-7","col-12","order-lg-2","order-md-2","order-1"],[1,"col-lg-3","col-md-5","col-12","justify-content-center","align-items-center","text-center","d-none","d-md-block","order-lg-1","order-md-1","order-2"],["src","../../../assets/images/home/seventh-section/HVA-Red-Shirt-Female-Agent-400x431px.png","width","100%","alt",""]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2"),t.\u0275\u0275text(8,"Don\u2019t let just anyone buy your house."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"h3"),t.\u0275\u0275text(10,"We\u2019re different from other cash home buyers."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(11,"div",6)(12,"div",7)(13,"div",8),t.\u0275\u0275element(14,"img",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"a",10)(16,"h5",11),t.\u0275\u0275text(17,"Confidence of selling to Canada's #1 home buyer"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"p"),t.\u0275\u0275text(19,"We have the most experience solving the problems houses can give you."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"div",7)(21,"div",8),t.\u0275\u0275element(22,"img",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"a",13)(24,"h5",11),t.\u0275\u0275text(25,'Sell your home "in its current condition."'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"p"),t.\u0275\u0275text(27,"You don\u2019t have to spend on repairs or renovations to sell your house to us."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(28,"div",7)(29,"div",8),t.\u0275\u0275element(30,"img",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"a",15)(32,"h5",11),t.\u0275\u0275text(33,"Convenience of a fast, fair cash offer"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(34,"p"),t.\u0275\u0275text(35,"Many buyers charge hidden fees. We can give you a fair cash offer that you can trust."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(36,"div",7)(37,"div",8),t.\u0275\u0275element(38,"img",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"a",17)(40,"h5",11),t.\u0275\u0275text(41,"Community knowledge and local expertise"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"p"),t.\u0275\u0275text(43,"We live and work in your community, so we can make fair offers fast."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(44,"div",18)(45,"div",19)(46,"a",20),t.\u0275\u0275text(47,"Talk to us now"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(48,"section",21)(49,"div",2)(50,"div",22)(51,"div",23)(52,"h2"),t.\u0275\u0275text(53,"We buy houses - fast, easy, and in almost any condition."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(54,"h3",24),t.\u0275\u0275text(55,"We buy houses for cash."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"p"),t.\u0275\u0275text(57,'Michael the Home Buyer\xae franchisees are the cash home buyers who will let you skip the stress and uncertainty of selling your house in the traditional way. We buy ugly homes so that sellers can enjoy both the time they save and the convenience of us purchasing their house "as is" for cash. Since 2014, we\u2019ve purchased over 2,500 houses the same way\u2014in person. You say, "Buy my house fast," and we visit your house personally, can make you an all-cash offer on the spot, and then close quickly. It\u2019s that easy.'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(58,"div",25),t.\u0275\u0275element(59,"img",26),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275element(60,"app-reviews-carousal"),t.\u0275\u0275elementStart(61,"section",27)(62,"div",2)(63,"div",3)(64,"div",28)(65,"div",5)(66,"h2"),t.\u0275\u0275text(67,"Sell your house in three easy steps."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(68,"h3"),t.\u0275\u0275text(69,"We are investors that buy houses."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(70,"div",29)(71,"div",30)(72,"p"),t.\u0275\u0275text(73,"Our process is all about simplicity. We can make you a no-obligation offer on the spot for your house \"as is.\" That means no repairs needed, no showings, and you don't even have to clean it. You won't have to pay typical closing costs or real estate agent listing fees, and we pay you in cash. To get started, simply call "),t.\u0275\u0275elementStart(74,"a",31),t.\u0275\u0275text(75,"1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(76," or fill out our "),t.\u0275\u0275elementStart(77,"a",32),t.\u0275\u0275text(78,"contact form"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(79,". We are house investors that buy homes for cash. "),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(80,"div",33)(81,"div",34),t.\u0275\u0275element(82,"img",35),t.\u0275\u0275elementStart(83,"h5"),t.\u0275\u0275text(84,"Free Consultation"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(85,"p"),t.\u0275\u0275text(86,"Your local Michael the Home Buyer\xae property specialist will meet with you for a quick, in-person visit of your house at your convenience."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(87,"div",34),t.\u0275\u0275element(88,"img",36),t.\u0275\u0275elementStart(89,"h5"),t.\u0275\u0275text(90,"Fair Cash Offer"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(91,"p"),t.\u0275\u0275text(92,"We will explain our home-buying process, answer your questions, and review the condition of your house. We can make a fair, fast cash offer that you can trust."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(93,"div",34),t.\u0275\u0275element(94,"img",37),t.\u0275\u0275elementStart(95,"h5"),t.\u0275\u0275text(96,"Fast Closing"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(97,"p"),t.\u0275\u0275text(98,"If you accept our no-obligation cash offer, we can close in as little as three weeks. Let\u2019s get started today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(99,"section",38)(100,"div",2)(101,"div",3)(102,"div",28)(103,"div",5)(104,"h2"),t.\u0275\u0275text(105,"When you need to sell fast, sell to us."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(106,"div",29)(107,"div",30)(108,"p"),t.\u0275\u0275text(109,"Sell us your house! It doesn't matter what type of home you have: house, condo, or duplex. Michael the Home Buyer would like to make a no-obligation, cash offer to purchase your house \"as is.\" Unlike other cash home buyers, our fair cash offer doesn't come with any hidden fees. When you want a fast cash offer that you can count on, "),t.\u0275\u0275elementStart(110,"a",31),t.\u0275\u0275text(111," call Michael the Home Buyer"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(112,"."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(113,"div",33)(114,"div",39),t.\u0275\u0275element(115,"img",40),t.\u0275\u0275elementStart(116,"h5",11),t.\u0275\u0275text(117,"We pay typical closing costs"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(118,"div",39),t.\u0275\u0275element(119,"img",41),t.\u0275\u0275elementStart(120,"h5",11),t.\u0275\u0275text(121,"We handle repairs, buy homes as-is"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(122,"div",39),t.\u0275\u0275element(123,"img",42),t.\u0275\u0275elementStart(124,"h5",11),t.\u0275\u0275text(125,"We pay cash. No banks needed!"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(126,"div",39),t.\u0275\u0275element(127,"img",43),t.\u0275\u0275elementStart(128,"h5",11),t.\u0275\u0275text(129,"We can close in as little as 3 weeks"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(130,"section",44)(131,"div",2)(132,"div",22)(133,"div",45)(134,"h2"),t.\u0275\u0275text(135,"We Buy Houses, Ugly or Not\xae"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(136,"h3",24),t.\u0275\u0275text(137,"We buy houses for cash."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(138,"p"),t.\u0275\u0275text(139,"Michael the Home Buyer\xae is the #1 cash home buyer in Canada and has been since 2014. We buy houses fast every day for cash, and we can buy yours too, no matter what condition it's in."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(140,"p"),t.\u0275\u0275text(141,'Michael the Home Buyer Home Buyer of Canada is a national network of real estate investors. We buy homes, condos, multi-tenant buildings, duplexes, townhouses, and occasionally commercial property. We specialize in helping homeowners skip the stress and uncertainty of selling the traditional route by buying houses in "as is" condition. Sales and closings happen quickly since we buy houses in cash. Our home-buying process really is as easy as it sounds.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(142,"p"),t.\u0275\u0275text(143,"Learn more about "),t.\u0275\u0275elementStart(144,"a",15),t.\u0275\u0275text(145," how we buy houses"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(146," and"),t.\u0275\u0275elementStart(147,"a",46),t.\u0275\u0275text(148," why you should sell to Michael the Home Buyer Home Buyer."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(149,"section",47)(150,"div",2)(151,"div",22)(152,"div",48)(153,"h2",24),t.\u0275\u0275text(154,"The personal touch: It makes a big, big difference."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(155,"p"),t.\u0275\u0275text(156,"If a cash home buyer makes an offer without seeing your house first, don't be surprised if it comes with hidden fees. We, on the other hand, always take the time upfront to do an in-person consultation at your house. Get a fair cash offer for your house that you can trust. We are by your side every step of the way. We have the experience and know-how to close on your house as promised. "),t.\u0275\u0275elementStart(157,"a",32),t.\u0275\u0275text(158,"Let's talk about your house today."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(159,"div",49),t.\u0275\u0275element(160,"img",50),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275element(161,"app-footer"))},dependencies:[Qn,wn,fi,Oi],styles:[".first-section[_ngcontent-%COMP%]{padding:100px 0;background:#faf1f1}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.first-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#000}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-decoration:none}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{text-decoration:underline}@media print,screen and (min-width: 48em){.first-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px}}@media print,screen and (min-width: 48em){.first-section[_ngcontent-%COMP%]   .wrap-img[_ngcontent-%COMP%]{width:100%;display:inline-block;height:auto;margin:0;min-height:115px;text-align:center}}.second-section[_ngcontent-%COMP%]{padding:100px 0}@media screen and (max-width: 600px){.second-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}}.fourth-section[_ngcontent-%COMP%]{padding:100px 0}.fourth-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:10px}.fourth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.fourth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.fifth-section[_ngcontent-%COMP%]{padding:100px 0;background-color:#a81c1c;color:#fff}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#ffdd05!important}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.sixth-section[_ngcontent-%COMP%]{padding:100px 0}.sixth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.sixth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.seventh-section[_ngcontent-%COMP%]{padding:100px 0}@media screen and (max-width: 600px){.seventh-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}}.seventh-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.seventh-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.header[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none}.form-control[_ngcontent-%COMP%]{height:60px;width:300px}.disabled-link[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed;opacity:.6}.hidden-section[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 1024px){.header[_ngcontent-%COMP%]{display:none}}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#111;overflow-x:hidden;padding-top:60px;transition:.5s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-family:Gotham;color:#818181;display:block;transition:.3s;text-transform:capitalize}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .offcanvas[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#f1f1f1}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#main[_ngcontent-%COMP%]{transition:margin-left .5s;padding:20px}@media screen and (max-height: 450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]})}return l})(),yr=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-about"]],decls:55,vars:0,consts:[[1,"intro"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-8","col-12"],[1,"first-section"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"fourth-section","bg-light"],[1,"fifth-section"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1"),t.\u0275\u0275text(6,"Our mission"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"h3"),t.\u0275\u0275text(8,"Fast. Easy. Complete peace of mind."),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(9,"section",4)(10,"div",1)(11,"div",5)(12,"div",6)(13,"h2",7),t.\u0275\u0275text(14,"Our WHY"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"p"),t.\u0275\u0275text(16,"We understand that the traditional real estate market doesn\u2019t fit everyone\u2019s needs or timeline. It tends to alienate sellers with homes that need repairs or updates, and not everyone can wait with their house on the market for months at a time. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"p"),t.\u0275\u0275text(18,"As a trailblazer in the cash home-buying industry, we want to help solve sellers\u2019 problems with a fast and easy way to sell their houses without the typical hassles and stress. We strive to give our customers a different experience by putting the seller first, not the transaction. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(19,"app-reviews-carousal"),t.\u0275\u0275elementStart(20,"section",8)(21,"div",1)(22,"div",5)(23,"div",6)(24,"h2",7),t.\u0275\u0275text(25,"Micheal the Home Buyer's history"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"p"),t.\u0275\u0275text(27,"We understand that the traditional real estate market doesn\u2019t fit everyone\u2019s needs or timeline. It tends to alienate sellers with homes that need repairs or updates, and not everyone can wait with their house on the market for months at a time. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(28,"p"),t.\u0275\u0275text(29,"As a trailblazer in the cash home-buying industry, we want to help solve sellers\u2019 problems with a fast and easy way to sell their houses without the typical hassles and stress. We strive to give our customers a different experience by putting the seller first, not the transaction. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"p"),t.\u0275\u0275text(31,"Michael the Home Buyer of Canada is a national network of over 1,100 franchises spanning the 48 continental United States. Every franchisee is trained and guided by the Michael the Home Buyer brand and upholds the highest standards in customer service, commitment, and transparency. We are a no-pressure, no-obligation, customer-focused cash home buyer. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(32,"div",6)(33,"h2",7),t.\u0275\u0275text(34,"Our commitment"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"p"),t.\u0275\u0275text(36,"Michael the Home Buyer\xae takes a personalised approach to buying and isn\u2019t your average home-buying company. We buy houses fast for cash and ensure that the customer understands the process every step of the way. We aren\u2019t like other cash buyers who focus on doing business only online. We visit each house in person to get to know our customers and their houses before we give a free, fair cash offer. We\u2019re cash home buyers who prefer to show up in person to answer questions and walk sellers through the process. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"p"),t.\u0275\u0275text(38,"We like to hear what our customers' needs are so that we can help solve their problems. Maybe they just got a new job and need to move quickly, maybe they need a bigger house because their parent is moving in, or maybe they inherited a house they can\u2019t keep. Whatever the situation is, we strive to navigate it step by step with the seller. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(39,"section",9)(40,"div",1)(41,"div",2)(42,"div",10)(43,"div",11)(44,"h2"),t.\u0275\u0275text(45,"Find out how easy selling your house can be."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(46,"div",12)(47,"div",13)(48,"p"),t.\u0275\u0275text(49,"Our process is simple and straightforward. After you book a free, no-obligation consultation, we\u2019ll visit your house and talk to you about your situation and timeline. We may even give you an offer on the same day. If you accept, we can close quickly, sometimes in as little as three weeks, or on your schedule. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(50,"p"),t.\u0275\u0275text(51,"See? Simple."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"a",14),t.\u0275\u0275text(53,"Get a cash offer"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(54,"app-footer"))},dependencies:[Qn,wn,Oi],styles:['.intro[_ngcontent-%COMP%]{color:#fff;padding:140px 0;background-image:url(about-cover.e632b4cfa112b790.webp);position:relative;background-size:cover;background-repeat:no-repeat;background-position:center;z-index:0}.intro[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;background:linear-gradient(90deg,rgba(162,75,75,.84) 19.27%,rgba(217,217,217,0) 100%);z-index:-1}.first-section[_ngcontent-%COMP%], .fourth-section[_ngcontent-%COMP%]{padding:100px 0}.fifth-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}']})}return l})();var Dr=ut(32);const Lr=["overlay"];function kr(l,a){1&l&&t.\u0275\u0275element(0,"div")}function hr(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,kr,1,0,"div",6),t.\u0275\u0275elementEnd()),2&l){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classMap(n.spinner.class),t.\u0275\u0275styleProp("color",n.spinner.color),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.spinner.divArray)}}function Mi(l,a){if(1&l&&(t.\u0275\u0275element(0,"div",7),t.\u0275\u0275pipe(1,"safeHtml")),2&l){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(1,1,n.template),t.\u0275\u0275sanitizeHtml)}}function Ar(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div",1,2),t.\u0275\u0275template(2,hr,2,5,"div",3),t.\u0275\u0275template(3,Mi,2,3,"div",4),t.\u0275\u0275elementStart(4,"div",5),t.\u0275\u0275projection(5),t.\u0275\u0275elementEnd()()),2&l){const n=t.\u0275\u0275nextContext();t.\u0275\u0275styleProp("background-color",n.spinner.bdColor)("z-index",n.spinner.zIndex)("position",n.spinner.fullScreen?"fixed":"absolute"),t.\u0275\u0275property("@.disabled",n.disableAnimation)("@fadeIn","in"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.template),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.template),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("z-index",n.spinner.zIndex)}}const Hi=["*"],vo={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},Fr="primary";class lr{constructor(a){Object.assign(this,a)}static create(a){return(null==a?.type||0===a.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new lr(a)}}let fr=(()=>{class l{constructor(){this.spinnerObservable=new Xi(null)}getSpinner(n){return this.spinnerObservable.asObservable().pipe(za(d=>d&&d.name===n))}show(n=Fr,d){return new Promise((_,T)=>{setTimeout(()=>{d&&Object.keys(d).length?(d.name=n,this.spinnerObservable.next(new lr({...d,show:!0})),_(!0)):(this.spinnerObservable.next(new lr({name:n,show:!0})),_(!0))},10)})}hide(n=Fr,d=10){return new Promise((_,T)=>{setTimeout(()=>{this.spinnerObservable.next(new lr({name:n,show:!1})),_(!0)},d)})}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const Nr=new t.InjectionToken("NGX_SPINNER_CONFIG");let Os=(()=>{class l{constructor(n){this._sanitizer=n}transform(n){if(n)return this._sanitizer.bypassSecurityTrustHtml(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(sl,16))},l.\u0275pipe=t.\u0275\u0275definePipe({name:"safeHtml",type:l,pure:!0}),l})(),fu=(()=>{class l{constructor(n,d,_,T){this.spinnerService=n,this.changeDetector=d,this.elementRef=_,this.globalConfig=T,this.disableAnimation=!1,this.spinner=new lr,this.ngUnsubscribe=new lo.x,this.setDefaultOptions=()=>{const{type:P}=this.globalConfig??{};this.spinner=lr.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??P,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=Fr,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(n){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(n.target))&&(n.returnValue=!1,n.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe(function Ui(l){return(0,co.e)((a,n)=>{(0,xh.Xf)(l).subscribe((0,Ho.x)(n,()=>n.complete(),Dr.Z)),!n.closed&&a.subscribe(n)})}(this.ngUnsubscribe)).subscribe(n=>{this.setDefaultOptions(),Object.assign(this.spinner,n),n.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(n){return n===this.elementRef.nativeElement.parentElement||n.parentNode&&this.isSpinnerZone(n.parentNode)}ngOnChanges(n){for(const d in n)if(d){const _=n[d];if(_.isFirstChange())return;typeof _.currentValue<"u"&&_.currentValue!==_.previousValue&&""!==_.currentValue&&(this.spinner[d]=_.currentValue,"showSpinner"===d&&(_.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===d&&this.initObservable())}}getClass(n,d){this.spinner.divCount=vo[n],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((T,P)=>P);let _="";switch(d.toLowerCase()){case"small":_="la-sm";break;case"medium":_="la-2x";break;case"large":_="la-3x"}return"la-"+n+" "+_}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(Nr,8))},l.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["ngx-spinner"]],viewQuery:function(n,d){if(1&n&&t.\u0275\u0275viewQuery(Lr,5),2&n){let _;t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(d.spinnerDOM=_.first)}},hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("keydown",function(T){return d.handleKeyboardEvent(T)},!1,t.\u0275\u0275resolveDocument)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[t.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Hi,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(n,d){1&n&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275template(0,Ar,6,12,"div",0)),2&n&&t.\u0275\u0275property("ngIf",d.spinner.show)},dependencies:[bo,cn,Os],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[S("fadeIn",[U("in",V({opacity:1})),oe(":enter",[V({opacity:0}),k(300)]),oe(":leave",k(200,V({opacity:0})))])]},changeDetection:0}),l})(),_d=(()=>{class l{static forRoot(n){return{ngModule:l,providers:[{provide:Nr,useValue:n}]}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({imports:[ku]}),l})();class xl{}class wl{}class El{constructor(a){this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?()=>{this.headers=new Map,a.split("\n").forEach(n=>{const d=n.indexOf(":");if(d>0){const _=n.slice(0,d),T=_.toLowerCase(),P=n.slice(d+1).trim();this.maybeSetNormalizedName(_,T),this.headers.has(T)?this.headers.get(T).push(P):this.headers.set(T,[P])}})}:()=>{this.headers=new Map,Object.entries(a).forEach(([n,d])=>{let _;if(_="string"==typeof d?[d]:"number"==typeof d?[d.toString()]:d.map(T=>T.toString()),_.length>0){const T=n.toLowerCase();this.headers.set(T,_),this.maybeSetNormalizedName(n,T)}})}:this.headers=new Map}has(a){return this.init(),this.headers.has(a.toLowerCase())}get(a){this.init();const n=this.headers.get(a.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(a){return this.init(),this.headers.get(a.toLowerCase())||null}append(a,n){return this.clone({name:a,value:n,op:"a"})}set(a,n){return this.clone({name:a,value:n,op:"s"})}delete(a,n){return this.clone({name:a,value:n,op:"d"})}maybeSetNormalizedName(a,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,a)}init(){this.lazyInit&&(this.lazyInit instanceof El?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(a=>this.applyUpdate(a)),this.lazyUpdate=null))}copyFrom(a){a.init(),Array.from(a.headers.keys()).forEach(n=>{this.headers.set(n,a.headers.get(n)),this.normalizedNames.set(n,a.normalizedNames.get(n))})}clone(a){const n=new El;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof El?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([a]),n}applyUpdate(a){const n=a.name.toLowerCase();switch(a.op){case"a":case"s":let d=a.value;if("string"==typeof d&&(d=[d]),0===d.length)return;this.maybeSetNormalizedName(a.name,n);const _=("a"===a.op?this.headers.get(n):void 0)||[];_.push(...d),this.headers.set(n,_);break;case"d":const T=a.value;if(T){let P=this.headers.get(n);if(!P)return;P=P.filter(B=>-1===T.indexOf(B)),0===P.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,P)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(a){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>a(this.normalizedNames.get(n),this.headers.get(n)))}}class vd{encodeKey(a){return Km(a)}encodeValue(a){return Km(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}const Tf=/%(\d[a-f0-9])/gi,Cl={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Km(l){return encodeURIComponent(l).replace(Tf,(a,n)=>Cl[n]??a)}function Xa(l){return`${l}`}class Sl{constructor(a={}){if(this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new vd,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ay(l,a){const n=new Map;return l.length>0&&l.replace(/^\?/,"").split("&").forEach(_=>{const T=_.indexOf("="),[P,B]=-1==T?[a.decodeKey(_),""]:[a.decodeKey(_.slice(0,T)),a.decodeValue(_.slice(T+1))],ie=n.get(P)||[];ie.push(B),n.set(P,ie)}),n}(a.fromString,this.encoder)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(n=>{const d=a.fromObject[n],_=Array.isArray(d)?d.map(Xa):[Xa(d)];this.map.set(n,_)})):this.map=null}has(a){return this.init(),this.map.has(a)}get(a){this.init();const n=this.map.get(a);return n?n[0]:null}getAll(a){return this.init(),this.map.get(a)||null}keys(){return this.init(),Array.from(this.map.keys())}append(a,n){return this.clone({param:a,value:n,op:"a"})}appendAll(a){const n=[];return Object.keys(a).forEach(d=>{const _=a[d];Array.isArray(_)?_.forEach(T=>{n.push({param:d,value:T,op:"a"})}):n.push({param:d,value:_,op:"a"})}),this.clone(n)}set(a,n){return this.clone({param:a,value:n,op:"s"})}delete(a,n){return this.clone({param:a,value:n,op:"d"})}toString(){return this.init(),this.keys().map(a=>{const n=this.encoder.encodeKey(a);return this.map.get(a).map(d=>n+"="+this.encoder.encodeValue(d)).join("&")}).filter(a=>""!==a).join("&")}clone(a){const n=new Sl({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(a),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(a=>this.map.set(a,this.cloneFrom.map.get(a))),this.updates.forEach(a=>{switch(a.op){case"a":case"s":const n=("a"===a.op?this.map.get(a.param):void 0)||[];n.push(Xa(a.value)),this.map.set(a.param,n);break;case"d":if(void 0===a.value){this.map.delete(a.param);break}{let d=this.map.get(a.param)||[];const _=d.indexOf(Xa(a.value));-1!==_&&d.splice(_,1),d.length>0?this.map.set(a.param,d):this.map.delete(a.param)}}}),this.cloneFrom=this.updates=null)}}class mu{constructor(){this.map=new Map}set(a,n){return this.map.set(a,n),this}get(a){return this.map.has(a)||this.map.set(a,a.defaultValue()),this.map.get(a)}delete(a){return this.map.delete(a),this}has(a){return this.map.has(a)}keys(){return this.map.keys()}}function $_(l){return typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer}function Wr(l){return typeof Blob<"u"&&l instanceof Blob}function os(l){return typeof FormData<"u"&&l instanceof FormData}class Tl{constructor(a,n,d,_){let T;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function Py(l){switch(l){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||_?(this.body=void 0!==d?d:null,T=_):T=d,T&&(this.reportProgress=!!T.reportProgress,this.withCredentials=!!T.withCredentials,T.responseType&&(this.responseType=T.responseType),T.headers&&(this.headers=T.headers),T.context&&(this.context=T.context),T.params&&(this.params=T.params)),this.headers||(this.headers=new El),this.context||(this.context=new mu),this.params){const P=this.params.toString();if(0===P.length)this.urlWithParams=n;else{const B=n.indexOf("?");this.urlWithParams=n+(-1===B?"?":B<n.length-1?"&":"")+P}}else this.params=new Sl,this.urlWithParams=n}serializeBody(){return null===this.body?null:$_(this.body)||Wr(this.body)||os(this.body)||function gu(l){return typeof URLSearchParams<"u"&&l instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||os(this.body)?null:Wr(this.body)?this.body.type||null:$_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(a={}){const n=a.method||this.method,d=a.url||this.url,_=a.responseType||this.responseType,T=void 0!==a.body?a.body:this.body,P=void 0!==a.withCredentials?a.withCredentials:this.withCredentials,B=void 0!==a.reportProgress?a.reportProgress:this.reportProgress;let ie=a.headers||this.headers,Se=a.params||this.params;const tt=a.context??this.context;return void 0!==a.setHeaders&&(ie=Object.keys(a.setHeaders).reduce((vt,rn)=>vt.set(rn,a.setHeaders[rn]),ie)),a.setParams&&(Se=Object.keys(a.setParams).reduce((vt,rn)=>vt.set(rn,a.setParams[rn]),Se)),new Tl(n,d,T,{params:Se,headers:ie,context:tt,reportProgress:B,responseType:_,withCredentials:P})}}var pi=(()=>((pi=pi||{})[pi.Sent=0]="Sent",pi[pi.UploadProgress=1]="UploadProgress",pi[pi.ResponseHeader=2]="ResponseHeader",pi[pi.DownloadProgress=3]="DownloadProgress",pi[pi.Response=4]="Response",pi[pi.User=5]="User",pi))();class yu{constructor(a,n=200,d="OK"){this.headers=a.headers||new El,this.status=void 0!==a.status?a.status:n,this.statusText=a.statusText||d,this.url=a.url||null,this.ok=this.status>=200&&this.status<300}}class G_ extends yu{constructor(a={}){super(a),this.type=pi.ResponseHeader}clone(a={}){return new G_({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class Qm extends yu{constructor(a={}){super(a),this.type=pi.Response,this.body=void 0!==a.body?a.body:null}clone(a={}){return new Qm({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class i1 extends yu{constructor(a){super(a,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${a.url||"(unknown url)"}`:`Http failure response for ${a.url||"(unknown url)"}: ${a.status} ${a.statusText}`,this.error=a.error||null}}function W_(l,a){return{body:a,headers:l.headers,context:l.context,observe:l.observe,params:l.params,reportProgress:l.reportProgress,responseType:l.responseType,withCredentials:l.withCredentials}}let bd=(()=>{class l{constructor(n){this.handler=n}request(n,d,_={}){let T;if(n instanceof Tl)T=n;else{let ie,Se;ie=_.headers instanceof El?_.headers:new El(_.headers),_.params&&(Se=_.params instanceof Sl?_.params:new Sl({fromObject:_.params})),T=new Tl(n,d,void 0!==_.body?_.body:null,{headers:ie,context:_.context,params:Se,reportProgress:_.reportProgress,responseType:_.responseType||"json",withCredentials:_.withCredentials})}const P=Rn(T).pipe(Xc(ie=>this.handler.handle(ie)));if(n instanceof Tl||"events"===_.observe)return P;const B=P.pipe(za(ie=>ie instanceof Qm));switch(_.observe||"body"){case"body":switch(T.responseType){case"arraybuffer":return B.pipe((0,gi.U)(ie=>{if(null!==ie.body&&!(ie.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ie.body}));case"blob":return B.pipe((0,gi.U)(ie=>{if(null!==ie.body&&!(ie.body instanceof Blob))throw new Error("Response is not a Blob.");return ie.body}));case"text":return B.pipe((0,gi.U)(ie=>{if(null!==ie.body&&"string"!=typeof ie.body)throw new Error("Response is not a string.");return ie.body}));default:return B.pipe((0,gi.U)(ie=>ie.body))}case"response":return B;default:throw new Error(`Unreachable: unhandled observe type ${_.observe}}`)}}delete(n,d={}){return this.request("DELETE",n,d)}get(n,d={}){return this.request("GET",n,d)}head(n,d={}){return this.request("HEAD",n,d)}jsonp(n,d){return this.request("JSONP",n,{params:(new Sl).append(d,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,d={}){return this.request("OPTIONS",n,d)}patch(n,d,_={}){return this.request("PATCH",n,W_(_,d))}post(n,d,_={}){return this.request("POST",n,W_(_,d))}put(n,d,_={}){return this.request("PUT",n,W_(_,d))}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(xl))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();function Yv(l,a){return a(l)}function r1(l,a){return(n,d)=>a.intercept(n,{handle:_=>l(_,d)})}const Ob=new t.InjectionToken("HTTP_INTERCEPTORS"),Oy=new t.InjectionToken("HTTP_INTERCEPTOR_FNS");function Ry(){let l=null;return(a,n)=>(null===l&&(l=((0,t.inject)(Ob,{optional:!0})??[]).reduceRight(r1,Yv)),l(a,n))}let o1=(()=>{class l extends xl{constructor(n,d){super(),this.backend=n,this.injector=d,this.chain=null}handle(n){if(null===this.chain){const d=Array.from(new Set(this.injector.get(Oy)));this.chain=d.reduceRight((_,T)=>function Pb(l,a,n){return(d,_)=>n.runInContext(()=>a(d,T=>l(T,_)))}(_,T,this.injector),Yv)}return this.chain(n,d=>this.backend.handle(d))}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(wl),t.\u0275\u0275inject(t.EnvironmentInjector))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const zb=/^\)\]\}',?\n/;let Kv=(()=>{class l{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new id.y(d=>{const _=this.xhrFactory.build();if(_.open(n.method,n.urlWithParams),n.withCredentials&&(_.withCredentials=!0),n.headers.forEach((Kt,Jt)=>_.setRequestHeader(Kt,Jt.join(","))),n.headers.has("Accept")||_.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const Kt=n.detectContentTypeHeader();null!==Kt&&_.setRequestHeader("Content-Type",Kt)}if(n.responseType){const Kt=n.responseType.toLowerCase();_.responseType="json"!==Kt?Kt:"text"}const T=n.serializeBody();let P=null;const B=()=>{if(null!==P)return P;const Kt=_.statusText||"OK",Jt=new El(_.getAllResponseHeaders()),xn=function s1(l){return"responseURL"in l&&l.responseURL?l.responseURL:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):null}(_)||n.url;return P=new G_({headers:Jt,status:_.status,statusText:Kt,url:xn}),P},ie=()=>{let{headers:Kt,status:Jt,statusText:xn,url:Nn}=B(),Zn=null;204!==Jt&&(Zn=typeof _.response>"u"?_.responseText:_.response),0===Jt&&(Jt=Zn?200:0);let Ri=Jt>=200&&Jt<300;if("json"===n.responseType&&"string"==typeof Zn){const wr=Zn;Zn=Zn.replace(zb,"");try{Zn=""!==Zn?JSON.parse(Zn):null}catch(Er){Zn=wr,Ri&&(Ri=!1,Zn={error:Er,text:Zn})}}Ri?(d.next(new Qm({body:Zn,headers:Kt,status:Jt,statusText:xn,url:Nn||void 0})),d.complete()):d.error(new i1({error:Zn,headers:Kt,status:Jt,statusText:xn,url:Nn||void 0}))},Se=Kt=>{const{url:Jt}=B(),xn=new i1({error:Kt,status:_.status||0,statusText:_.statusText||"Unknown Error",url:Jt||void 0});d.error(xn)};let tt=!1;const vt=Kt=>{tt||(d.next(B()),tt=!0);let Jt={type:pi.DownloadProgress,loaded:Kt.loaded};Kt.lengthComputable&&(Jt.total=Kt.total),"text"===n.responseType&&_.responseText&&(Jt.partialText=_.responseText),d.next(Jt)},rn=Kt=>{let Jt={type:pi.UploadProgress,loaded:Kt.loaded};Kt.lengthComputable&&(Jt.total=Kt.total),d.next(Jt)};return _.addEventListener("load",ie),_.addEventListener("error",Se),_.addEventListener("timeout",Se),_.addEventListener("abort",Se),n.reportProgress&&(_.addEventListener("progress",vt),null!==T&&_.upload&&_.upload.addEventListener("progress",rn)),_.send(T),d.next({type:pi.Sent}),()=>{_.removeEventListener("error",Se),_.removeEventListener("abort",Se),_.removeEventListener("load",ie),_.removeEventListener("timeout",Se),n.reportProgress&&(_.removeEventListener("progress",vt),null!==T&&_.upload&&_.upload.removeEventListener("progress",rn)),_.readyState!==_.DONE&&_.abort()}})}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Vs))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const q_=new t.InjectionToken("XSRF_ENABLED"),Qv=new t.InjectionToken("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),a1=new t.InjectionToken("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ub{}let uw=(()=>{class l{constructor(n,d,_){this.doc=n,this.platform=d,this.cookieName=_,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Tt(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275inject(Ee),t.\u0275\u0275inject(t.PLATFORM_ID),t.\u0275\u0275inject(Qv))},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();function dw(l,a){const n=l.url.toLowerCase();if(!(0,t.inject)(q_)||"GET"===l.method||"HEAD"===l.method||n.startsWith("http://")||n.startsWith("https://"))return a(l);const d=(0,t.inject)(Ub).getToken(),_=(0,t.inject)(a1);return null!=d&&!l.headers.has(_)&&(l=l.clone({headers:l.headers.set(_,d)})),a(l)}var Jr=(()=>((Jr=Jr||{})[Jr.Interceptors=0]="Interceptors",Jr[Jr.LegacyInterceptors=1]="LegacyInterceptors",Jr[Jr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Jr[Jr.NoXsrfProtection=3]="NoXsrfProtection",Jr[Jr.JsonpSupport=4]="JsonpSupport",Jr[Jr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Jr))();function xd(l,a){return{\u0275kind:l,\u0275providers:a}}function Hb(...l){const a=[bd,Kv,o1,{provide:xl,useExisting:o1},{provide:wl,useExisting:Kv},{provide:Oy,useValue:dw,multi:!0},{provide:q_,useValue:!0},{provide:Ub,useClass:uw}];for(const n of l)a.push(...n.\u0275providers);return(0,t.makeEnvironmentProviders)(a)}const Jv=new t.InjectionToken("LEGACY_INTERCEPTOR_FN");let l1=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({providers:[Hb(xd(Jr.LegacyInterceptors,[{provide:Jv,useFactory:Ry},{provide:Oy,useExisting:Jv,multi:!0}]))]}),l})();function Gb(l,a){if(1&l){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",5),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.closeToast())}),t.\u0275\u0275text(1,"\xd7"),t.\u0275\u0275elementEnd()}}const Ny=function(l,a,n,d){return{"fa-times-circle":l,"fa-check-circle":a,"fa-exclamation-circle":n,"fa-info-circle":d}};let Jh=(()=>{class l{constructor(){this.toastDetails$=new lo.x}getToastDetails(){return this.toastDetails$.asObservable()}success(n){this.toastDetails$.next({type:"success",detail:n.detail,position:n.position,summary:n.summary,duration:n.duration,sticky:n.sticky})}error(n){this.toastDetails$.next({type:"error",detail:n.detail,position:n.position,summary:n.summary,duration:n.duration,sticky:n.sticky})}info(n){this.toastDetails$.next({type:"info",detail:n.detail,position:n.position,summary:n.summary,duration:n.duration,sticky:n.sticky})}warning(n){this.toastDetails$.next({type:"warning",detail:n.detail,summary:n.summary,position:n.position,duration:n.duration,sticky:n.sticky})}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),c1=(()=>{class l{constructor(n){this.toastService=n,this.show=!1}ngOnInit(){this.toastService.getToastDetails().subscribe(n=>{this.show=!0,clearTimeout(this.timeoutRef),this.toastDetails=n,this.toastDetails.duration&&(this.timeoutRef=setTimeout(()=>{this.show=!1},this.toastDetails.duration)),this.toastDetails.sticky&&(clearTimeout(this.timeoutRef),this.show=!0),!this.toastDetails.duration&&!this.toastDetails.sticky&&(this.timeoutRef=setTimeout(()=>{this.show=!1},5e3))})}closeToast(){clearTimeout(this.timeoutRef),this.show=!1}loadPosition(){let n="";if(void 0!==this.toastDetails?.position)switch(this.toastDetails.position){case"tr":default:n="toast-right-top";break;case"tl":n="toast-left-top";break;case"br":n="toast-right-bottom";break;case"bl":n="toast-left-bottom"}else n="toast-right-top";if(void 0!==this.toastDetails?.type)switch(this.toastDetails.type){case"success":n+=" success";break;case"error":n+=" error";break;case"info":n+=" info";break;case"warning":n+=" warning";break;default:n="toast-right-top"}return n}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(Jh))},l.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["lib-ng-toast"]],decls:9,vars:12,consts:[[3,"ngClass"],[1,"container-1"],[1,"fa",3,"ngClass"],[1,"container-2"],["id","close",3,"click",4,"ngIf"],["id","close",3,"click"]],template:function(n,d){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275element(2,"i",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",3)(4,"p"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"p"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,Gb,2,0,"button",4),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275classProp("active",d.show),t.\u0275\u0275property("ngClass",d.loadPosition()),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction4(7,Ny,"error"===(null==d.toastDetails?null:d.toastDetails.type),"success"===(null==d.toastDetails?null:d.toastDetails.type),"warning"===(null==d.toastDetails?null:d.toastDetails.type),"info"===(null==d.toastDetails?null:d.toastDetails.type))),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==d.toastDetails?null:d.toastDetails.detail),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==d.toastDetails?null:d.toastDetails.summary),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",d.show))},dependencies:[ki,cn],styles:["*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box;border:none}.show-toast[_ngcontent-%COMP%]{margin:10px;background-color:#101020;color:#fff;padding:20px;border-radius:5px;cursor:pointer}.toast-right-top[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;right:1%;top:5%;transform:translate(400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-right-top.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-right-top.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-right-top.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-right-top.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-right-top.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.toast-right-bottom[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;right:1%;bottom:5%;transform:translate(400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-right-bottom.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-right-bottom.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-right-bottom.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-right-bottom.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-right-bottom.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.toast-left-top[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;left:1%;top:5%;transform:translate(-400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-left-top.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-left-top.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-left-top.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-left-top.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-left-top.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.toast-left-bottom[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;left:1%;bottom:5%;transform:translate(-400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-left-bottom.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-left-bottom.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-left-bottom.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-left-bottom.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-left-bottom.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.container-1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px}.fa-times-circle[_ngcontent-%COMP%]{color:#ff355b}.fa-check-circle[_ngcontent-%COMP%]{color:#47d764}.fa-exclamation-circle[_ngcontent-%COMP%]{color:#ffc021}.fa-info-circle[_ngcontent-%COMP%]{color:#2f86eb}.container-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{color:#101020;font-weight:600;font-size:16px;font-family:roboto,sans-serif}.container-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:14px;color:#656565;font-weight:400;font-family:roboto,sans-serif}#close[_ngcontent-%COMP%]{align-self:flex-start;background-color:transparent;font-size:25px;line-height:0;color:#656565;cursor:pointer}"]}),l})(),Wb=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({imports:[ku]}),l})(),Mf=(()=>{class l{constructor(n){this.http=n,this.apiKey="5ff0fedbab61462d958d31c234c6a31f",this.rootURL3="https://api.michaelthehomebuyer.ca/"}contactLeadApi(n,d,_,T,P){return this.http.post(this.rootURL3+"michael-the-home-buyer/contact",{firstName:n,lastName:d,email:_,phoneNumber:T,streetAddress:P}).pipe(ra(this.errorHandler))}contactLeadFullFormApi(n,d,_,T,P,B,ie,Se,tt,vt,rn,Kt,Jt,xn){return this.http.post(this.rootURL3+"michael-the-home-buyer/contact",{firstName:n,lastName:d,email:_,phoneNumber:T,streetAddress:P,ownedProperty:B,sizeProperty:ie,numberOfBedroom:Se,numberOfBathroom:tt,desiredSellingPrice:vt,currentCondition:rn,motiveSellProperty:Kt,propertyType:Jt,sellingTimeline:xn,leadSource:"MHB Contact Form"}).pipe(ra(this.errorHandler))}feedbackFormApi(n,d,_,T,P,B){return this.http.post(this.rootURL3+"michael-the-home-buyer/feedback",{firstName:n,lastName:d,phoneNumber:_,email:T,comments:P,requestRespond:B}).pipe(ra(this.errorHandler))}getFaqDataFromPodio(n){return this.http.get(this.rootURL3+"michael-the-home-buyer/faqs/"+n).pipe(ra(this.errorHandler))}investorFormApi(n,d,_,T,P,B,ie,Se,tt,vt,rn,Kt,Jt){return this.http.post(this.rootURL3+"michael-the-home-buyer/investor-signup-form",{firstName:n,lastName:d,phoneNumber:_,email:T,buyholdOrfixdeals:P,citiesLikeToBuy:B,purchasePropertes:ie,propertyCriteria:Se,returnLokking:tt,selectedTimeToCloseDeal:vt,handlePropertiesPerMonth:rn,selectedCloseOnNextDeal:Kt,otherServicesCanHelp:Jt}).pipe(ra(this.errorHandler))}errorHandler(n){return console.error(n),dl(n.message||"Server Error")}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275inject(bd))};static#t=this.\u0275prov=t.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();function qb(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div",21)(1,"h2",22)(2,"button",23),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",24),t.\u0275\u0275element(5,"div",25),t.\u0275\u0275elementEnd()()),2&l){const n=a.$implicit,d=a.index;t.\u0275\u0275advance(2),t.\u0275\u0275attribute("data-bs-target","#flush-collapse"+d)("aria-controls","flush-collapse"+d),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",d+1,". ",n.question," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("id","flush-collapse"+d),t.\u0275\u0275advance(1),t.\u0275\u0275property("innerHTML",n.answer,t.\u0275\u0275sanitizeHtml)}}function u1(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,qb,6,6,"div",20),t.\u0275\u0275elementEnd()),2&l){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.faqData)}}function Zb(l,a){1&l&&(t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275text(1," No response / No FAQs found "),t.\u0275\u0275elementEnd())}let e0=(()=>{class l{constructor(n,d,_,T){this.spinner=n,this.http=d,this._toast=_,this._apiCallServices=T,this.testDate=[{config:{default_value:null,delta:0,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 1 ",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"title",field_id:257865429,label:"Question 1 ",status:"active",type:"text",values:[{value:"How many homes has Michael the Home Buyer bought over the years?"}]},{config:{default_value:null,delta:1,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 1",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer",field_id:257865430,label:"Answer 1",status:"active",type:"text",values:[{value:"<p>Since 2014 we have purchased hundreds of homes in the Province of Ontario We are not an outside agency that swoops in to buy up homes.</p>"}]},{config:{default_value:null,delta:2,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 2",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-2",field_id:257943963,label:"Question 2",status:"active",type:"text",values:[{value:"What do you need to know in order to buy my house?"}]},{config:{default_value:null,delta:3,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 2",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-2",field_id:257943962,label:"Answer 2",status:"active",type:"text",values:[{value:"<p>We can get started with just some basic information about your house. How many bedrooms? How many bathrooms? Is there a garage? Is the basement finished? What is the overall condition of the property?</p>"}]},{config:{default_value:null,delta:4,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 3",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-3",field_id:257943961,label:"Question 3",status:"active",type:"text",values:[{value:"Can you really buy my house in just one week?"}]},{config:{default_value:null,delta:5,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 3",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-3",field_id:257943960,label:"Answer 3",status:"active",type:"text",values:[{value:"<p>If all the paperwork is completed promptly, you have clear title and there are no problems, we can often complete the purchase of a property in just 7 days. Our fastest ever close was done in less than 24 hours.</p>"}]},{config:{default_value:null,delta:6,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 4",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-4",field_id:257943959,label:"Question 4",status:"active",type:"text",values:[{value:"Is there a fee you charge when you buy a house?"}]},{config:{default_value:null,delta:7,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 4",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-4",field_id:257943958,label:"Answer 4",status:"active",type:"text",values:[{value:"<p>No. Unlike many home buying companies or real estate agents, Express Homebuyers never charges a fee.</p>"}]},{config:{default_value:null,delta:8,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 5",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-5",field_id:257943957,label:"Question 5",status:"active",type:"text",values:[{value:"How long do I have to decide once you make an offer on my house?"}]},{config:{default_value:null,delta:9,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 5",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-5",field_id:257943948,label:"Answer 5",status:"active",type:"text",values:[{value:"<p>Most of our offers have a 30 day expiration date. But in many cases, homeowners find our offers so attractive and fair they accept them immediately!</p>"}]},{config:{default_value:null,delta:10,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 6",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-6",field_id:257943956,label:"Question 6",status:"active",type:"text",values:[{value:"Do you buy condominiums?"}]},{config:{default_value:null,delta:11,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 6",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-6",field_id:257943955,label:"Answer 6",status:"active",type:"text",values:[{value:"<p>Yes. Michael the Home Buyer will purchase a condo, town- house, duplex, farm, apartment house, vacation property, land \u2013 almost any piece of real estate.</p>"}]},{config:{default_value:null,delta:12,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 7",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-7",field_id:257943954,label:"Question 7",status:"active",type:"text",values:[{value:"I have a mortgage. Does it get paid off?"}]},{config:{default_value:null,delta:13,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 7",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-7",field_id:257943953,label:"Answer 7",status:"active",type:"text",values:[{value:"<p>Yes. By law, any mortgage or other liens must be paid off when you sell the house. The balance of the money goes to you.</p>"}]},{config:{default_value:null,delta:14,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 8",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-8",field_id:257943952,label:"Question 8",status:"active",type:"text",values:[{value:"I am facing foreclosure. Can you still buy my house?"}]},{config:{default_value:null,delta:15,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 8",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-8",field_id:257943951,label:"Answer 8",status:"active",type:"text",values:[{value:"<p>Yes, if we work quickly! Many lenders would prefer to receive payment on their mortgage loan instead of taking the property. Michael the Home Buyer often works with lenders to delay foreclosure until we can complete the home purchase and you have the money to pay off the mortgage and avoid foreclosure. If you live in Ontario and are within a certain period of time before your foreclosure sale date, we will introduce you to a Foreclosure Consultant.</p>"}]},{config:{default_value:null,delta:16,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 9",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-9",field_id:257943949,label:"Question 9",status:"active",type:"text",values:[{value:"How do you determine the amount you will pay for a house?"}]},{config:{default_value:null,delta:17,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 9",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-9",field_id:257943950,label:"Answer 9",status:"active",type:"text",values:[{value:"<p>We take many factors into consideration, including: location of the home, age and condition of the property, any needed repairs, selling prices of similar homes, etc. We\u2019ve been making real estate transactions for many years and have deep experience in determining the fair market value of a home.</p>"}]},{config:{default_value:null,delta:18,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 10",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-10",field_id:257944083,label:"Question 10",status:"active",type:"text",values:[{value:"My house needs several repairs. Does this mean you won\u2019t buy it?"}]},{config:{default_value:null,delta:19,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 10",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-10",field_id:257944085,label:"Answer 10",status:"active",type:"text",values:[{value:"<p>Not at all! Most of the houses we purchase are in need of repairs or updating. So long as the home is basically in good condition, we\u2019ll buy it from you.</p>"}]},{config:{default_value:null,delta:20,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Question 11",mapping:null,required:!1,settings:{size:"small",format:"plain"},unique:!1,visible:!0},external_id:"question-11",field_id:257944082,label:"Question 11",status:"active",type:"text",values:[{value:"Where do you buy property?"}]},{config:{default_value:null,delta:21,description:null,hidden:!1,hidden_create_view_edit:!1,label:"Answer 11",mapping:null,required:!1,settings:{size:"large",format:"html"},unique:!1,visible:!0},external_id:"answer-11",field_id:257944084,label:"Answer 11",status:"active",type:"text",values:[{value:"<p>We currently buy properties all over Ontario.</p>"}]}],this.faqData=[],this.newData=[]}ngOnInit(){console.log(this.faqData);const n=sessionStorage.getItem("faqData");n?(this.faqData=JSON.parse(n),console.log(this.faqData),console.log(this.structureFaq(this.faqData))):this.getFaqData("2693909249")}getFaqData(n){this.spinner.show(),this._apiCallServices.getFaqDataFromPodio(n).subscribe(d=>{setTimeout(()=>{this.spinner.hide()},1e3),this.faqData=d,sessionStorage.setItem("faqData",JSON.stringify(d));const _=(new Date).getTime()+72e5;sessionStorage.setItem("faqDataExpiration",_.toString()),console.log("FAQ Data:",d),this.structureFaq(this.faqData)},d=>{console.error("Error:",d),setTimeout(()=>{this.spinner.hide()},1e3)})}structureFaq(n){console.log(n.length);for(var d=0;d<n.length;d+=2)this.newData.push({question:n[d].values[0].value,answer:n[d+1].values[0].value});this.faqData=this.newData,console.log(this.newData)}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(bd),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(Mf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-faqs"]],decls:44,vars:2,consts:[[1,"intro"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-8","col-12"],[1,"first-section"],[1,"row"],[1,"col-lg-12","col-12"],[1,"pb-4"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-danger","px-5","py-3","mt-4"],[1,"second-section","bg-light"],[1,"mb-4"],["class","accordion accordion-flush","id","accordionFlushExample",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"third-section"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],["href","contact","id","button-vary1","target","_blank",1,"btn","btn-dark","px-5","py-3","mt-4"],["id","accordionFlushExample",1,"accordion","accordion-flush"],["class","accordion-item my-3  border",4,"ngFor","ngForOf"],[1,"accordion-item","my-3","border"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse",1,"accordion-button","collapsed"],["data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body",3,"innerHTML"],["role","alert",1,"alert","alert-warning"]],template:function(d,_){if(1&d&&(t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1"),t.\u0275\u0275text(6,"Frequently Asked Questions"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"h3"),t.\u0275\u0275text(8,"We\u2019re always here to help you."),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(9,"section",4)(10,"div",1)(11,"div",5)(12,"div",6)(13,"h2",7),t.\u0275\u0275text(14,"We're happy to answer any questions you have."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"p"),t.\u0275\u0275text(16,"When you're selling a house, questions always arise - especially if you want to sell \"as is\" for cash. We've bought over 2,500 houses and can help guide you through the process. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"p"),t.\u0275\u0275text(18,"You'll find the answers to the most common questions below, but if you have a question that's not listed, please don't hesitate to contact us for more information or for a free, no-obligation consultation."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"a",8),t.\u0275\u0275text(20,"Talk to us now"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(21,"section",9)(22,"div",1)(23,"div",5)(24,"div",6)(25,"h2",10),t.\u0275\u0275text(26,"Most Frequently Asked Questions"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(27,u1,2,1,"div",11),t.\u0275\u0275template(28,Zb,2,0,"ng-template",null,12,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(30,"section",13)(31,"div",1)(32,"div",2)(33,"div",14)(34,"div",15)(35,"h2"),t.\u0275\u0275text(36,"Work with Canada's #1 home buyer."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(37,"div",16)(38,"div",17)(39,"p"),t.\u0275\u0275text(40,"Let\u2019s get started with a free consultation today. No obligation and no pressure\u2014just a quick visit to your house and then we can make a fair cash offer on the spot! "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"a",18),t.\u0275\u0275text(42,"Talk to us now"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(43,"app-footer")),2&d){const T=t.\u0275\u0275reference(29);t.\u0275\u0275advance(27),t.\u0275\u0275property("ngIf",""!=_.faqData.length)("ngIfElse",T)}},dependencies:[bo,cn,Qn,wn],styles:['.intro[_ngcontent-%COMP%]{color:#fff;padding:140px 0;background-image:url(https://exprealty.com/wp-content/uploads/First-Time-Home-Buyers-Step-by-Step-Guide.jpg);position:relative;background-size:cover;background-repeat:no-repeat;background-position:center bottom;z-index:0}.intro[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;background:linear-gradient(90deg,rgba(162,75,75,.84) 19.27%,rgba(217,217,217,0) 100%);z-index:-1}.first-section[_ngcontent-%COMP%], .second-section[_ngcontent-%COMP%]{padding:100px 0}.second-section[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{margin-bottom:10px}.third-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.accordion-item[_ngcontent-%COMP%], .accordion-button[_ngcontent-%COMP%]{border-radius:10px!important}']})}return l})();var d1=ut(90);let t0=(()=>{class l{constructor(n,d){this._renderer=n,this._elementRef=d,this.onChange=_=>{},this.onTouched=()=>{}}setProperty(n,d){this._renderer.setProperty(this._elementRef.nativeElement,n,d)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ElementRef))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l}),l})(),If=(()=>{class l extends t0{}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,features:[t.\u0275\u0275InheritDefinitionFeature]}),l})();const _u=new t.InjectionToken("NgValueAccessor"),Yb={provide:_u,useExisting:(0,t.forwardRef)(()=>wd),multi:!0};let wd=(()=>{class l extends If{writeValue(n){this.setProperty("checked",n)}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("change",function(T){return d.onChange(T.target.checked)})("blur",function(){return d.onTouched()})},features:[t.\u0275\u0275ProvidersFeature([Yb]),t.\u0275\u0275InheritDefinitionFeature]}),l})();const Xb={provide:_u,useExisting:(0,t.forwardRef)(()=>ep),multi:!0},Kb=new t.InjectionToken("CompositionEventMode");let ep=(()=>{class l extends t0{constructor(n,d,_){super(n,d),this._compositionMode=_,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function p1(){const l=Pt()?Pt().getUserAgent():"";return/android (\d+)/.test(l.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(Kb,8))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("input",function(T){return d._handleInput(T.target.value)})("blur",function(){return d.onTouched()})("compositionstart",function(){return d._compositionStart()})("compositionend",function(T){return d._compositionEnd(T.target.value)})},features:[t.\u0275\u0275ProvidersFeature([Xb]),t.\u0275\u0275InheritDefinitionFeature]}),l})();const Qb=!1;function tp(l){return null==l||("string"==typeof l||Array.isArray(l))&&0===l.length}const _s=new t.InjectionToken("NgValidators"),np=new t.InjectionToken("NgAsyncValidators");function r0(l){return tp(l.value)?{required:!0}:null}function Y_(l){return!0===l.value?null:{required:!0}}function eg(l){return null}function a0(l){return null!=l}function K_(l){const a=(0,t.\u0275isPromise)(l)?(0,Rr.D)(l):l;if(Qb&&!(0,t.\u0275isObservable)(a)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof l&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new t.\u0275RuntimeError(-1101,n)}return a}function y1(l){let a={};return l.forEach(n=>{a=null!=n?{...a,...n}:a}),0===Object.keys(a).length?null:a}function _1(l,a){return a.map(n=>n(l))}function v1(l){return l.map(a=>function l0(l){return!l.validate}(a)?a:n=>a.validate(n))}function ip(l){return null!=l?function c0(l){if(!l)return null;const a=l.filter(a0);return 0==a.length?null:function(n){return y1(_1(n,a))}}(v1(l)):null}function Q_(l){return null!=l?function u0(l){if(!l)return null;const a=l.filter(a0);return 0==a.length?null:function(n){return function h1(...l){const a=(0,nd.jO)(l),{args:n,keys:d}=Gg(l),_=new id.y(T=>{const{length:P}=n;if(!P)return void T.complete();const B=new Array(P);let ie=P,Se=P;for(let tt=0;tt<P;tt++){let vt=!1;(0,xh.Xf)(n[tt]).subscribe((0,Ho.x)(T,rn=>{vt||(vt=!0,Se--),B[tt]=rn},()=>ie--,void 0,()=>{(!ie||!vt)&&(Se||T.next(d?Ov(d,B):B),T.complete())}))}});return a?_.pipe(Wg(a)):_}(_1(n,a).map(K_)).pipe((0,gi.U)(y1))}}(v1(l)):null}function b1(l,a){return null===l?[a]:Array.isArray(l)?[...l,a]:[l,a]}function d0(l){return l?Array.isArray(l)?l:[l]:[]}function tg(l,a){return Array.isArray(l)?l.includes(a):l===a}function x1(l,a){const n=d0(a);return d0(l).forEach(_=>{tg(n,_)||n.push(_)}),n}function h0(l,a){return d0(a).filter(n=>!tg(l,n))}class ev{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(a){this._rawValidators=a||[],this._composedValidatorFn=ip(this._rawValidators)}_setAsyncValidators(a){this._rawAsyncValidators=a||[],this._composedAsyncValidatorFn=Q_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(a){this._onDestroyCallbacks.push(a)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(a=>a()),this._onDestroyCallbacks=[]}reset(a){this.control&&this.control.reset(a)}hasError(a,n){return!!this.control&&this.control.hasError(a,n)}getError(a,n){return this.control?this.control.getError(a,n):null}}class vs extends ev{get formDirective(){return null}get path(){return null}}class vu extends ev{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class p0{constructor(a){this._cd=a}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Df=(()=>{class l extends p0{constructor(n){super(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(vu,2))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,d){2&n&&t.\u0275\u0275classProp("ng-untouched",d.isUntouched)("ng-touched",d.isTouched)("ng-pristine",d.isPristine)("ng-dirty",d.isDirty)("ng-valid",d.isValid)("ng-invalid",d.isInvalid)("ng-pending",d.isPending)},features:[t.\u0275\u0275InheritDefinitionFeature]}),l})(),ng=(()=>{class l extends p0{constructor(n){super(n)}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(vs,10))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,d){2&n&&t.\u0275\u0275classProp("ng-untouched",d.isUntouched)("ng-touched",d.isTouched)("ng-pristine",d.isPristine)("ng-dirty",d.isDirty)("ng-valid",d.isValid)("ng-invalid",d.isInvalid)("ng-pending",d.isPending)("ng-submitted",d.isSubmitted)},features:[t.\u0275\u0275InheritDefinitionFeature]}),l})();function m0(l,a){return l?`with name: '${a}'`:`at index: ${a}`}const nv=!1,rg="VALID",rp="INVALID",kf="PENDING",og="DISABLED";function iv(l){return(ov(l)?l.validators:l)||null}function rv(l,a){return(ov(a)?a.asyncValidators:l)||null}function ov(l){return null!=l&&!Array.isArray(l)&&"object"==typeof l}class y0{constructor(a,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(a),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(a){this._rawValidators=this._composedValidatorFn=a}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(a){this._rawAsyncValidators=this._composedAsyncValidatorFn=a}get parent(){return this._parent}get valid(){return this.status===rg}get invalid(){return this.status===rp}get pending(){return this.status==kf}get disabled(){return this.status===og}get enabled(){return this.status!==og}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(a){this._assignValidators(a)}setAsyncValidators(a){this._assignAsyncValidators(a)}addValidators(a){this.setValidators(x1(a,this._rawValidators))}addAsyncValidators(a){this.setAsyncValidators(x1(a,this._rawAsyncValidators))}removeValidators(a){this.setValidators(h0(a,this._rawValidators))}removeAsyncValidators(a){this.setAsyncValidators(h0(a,this._rawAsyncValidators))}hasValidator(a){return tg(this._rawValidators,a)}hasAsyncValidator(a){return tg(this._rawAsyncValidators,a)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(a={}){this.touched=!0,this._parent&&!a.onlySelf&&this._parent.markAsTouched(a)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(a=>a.markAllAsTouched())}markAsUntouched(a={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}markAsDirty(a={}){this.pristine=!1,this._parent&&!a.onlySelf&&this._parent.markAsDirty(a)}markAsPristine(a={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}markAsPending(a={}){this.status=kf,!1!==a.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!a.onlySelf&&this._parent.markAsPending(a)}disable(a={}){const n=this._parentMarkedDirty(a.onlySelf);this.status=og,this.errors=null,this._forEachChild(d=>{d.disable({...a,onlySelf:!0})}),this._updateValue(),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...a,skipPristineCheck:n}),this._onDisabledChange.forEach(d=>d(!0))}enable(a={}){const n=this._parentMarkedDirty(a.onlySelf);this.status=rg,this._forEachChild(d=>{d.enable({...a,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors({...a,skipPristineCheck:n}),this._onDisabledChange.forEach(d=>d(!1))}_updateAncestors(a){this._parent&&!a.onlySelf&&(this._parent.updateValueAndValidity(a),a.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(a){this._parent=a}getRawValue(){return this.value}updateValueAndValidity(a={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rg||this.status===kf)&&this._runAsyncValidator(a.emitEvent)),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.updateValueAndValidity(a)}_updateTreeValidity(a={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(a)),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?og:rg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(a){if(this.asyncValidator){this.status=kf,this._hasOwnPendingAsyncValidator=!0;const n=K_(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(d=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(d,{emitEvent:a})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(a,n={}){this.errors=a,this._updateControlsErrors(!1!==n.emitEvent)}get(a){let n=a;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((d,_)=>d&&d._find(_),this)}getError(a,n){const d=n?this.get(n):this;return d&&d.errors?d.errors[a]:null}hasError(a,n){return!!this.getError(a,n)}get root(){let a=this;for(;a._parent;)a=a._parent;return a}_updateControlsErrors(a){this.status=this._calculateStatus(),a&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(a)}_initObservables(){this.valueChanges=new t.EventEmitter,this.statusChanges=new t.EventEmitter}_calculateStatus(){return this._allControlsDisabled()?og:this.errors?rp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kf)?kf:this._anyControlsHaveStatus(rp)?rp:rg}_anyControlsHaveStatus(a){return this._anyControls(n=>n.status===a)}_anyControlsDirty(){return this._anyControls(a=>a.dirty)}_anyControlsTouched(){return this._anyControls(a=>a.touched)}_updatePristine(a={}){this.pristine=!this._anyControlsDirty(),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}_updateTouched(a={}){this.touched=this._anyControlsTouched(),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}_registerOnCollectionChange(a){this._onCollectionChange=a}_setUpdateStrategy(a){ov(a)&&null!=a.updateOn&&(this._updateOn=a.updateOn)}_parentMarkedDirty(a){return!a&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(a){return null}_assignValidators(a){this._rawValidators=Array.isArray(a)?a.slice():a,this._composedValidatorFn=function T1(l){return Array.isArray(l)?ip(l):l||null}(this._rawValidators)}_assignAsyncValidators(a){this._rawAsyncValidators=Array.isArray(a)?a.slice():a,this._composedAsyncValidatorFn=function M1(l){return Array.isArray(l)?Q_(l):l||null}(this._rawAsyncValidators)}}class sv extends y0{constructor(a,n,d){super(iv(n),rv(d,n)),this.controls=a,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(a,n){return this.controls[a]?this.controls[a]:(this.controls[a]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(a,n,d={}){this.registerControl(a,n),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}removeControl(a,n={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(a,n,d={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],n&&this.registerControl(a,n),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}contains(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled}setValue(a,n={}){(function g0(l,a,n){l._forEachChild((d,_)=>{if(void 0===n[_])throw new t.\u0275RuntimeError(1002,nv?function S1(l,a){return`Must supply a value for form control ${m0(l,a)}`}(a,_):"")})})(this,!0,a),Object.keys(a).forEach(d=>{(function sx(l,a,n){const d=l.controls;if(!(a?Object.keys(d):d).length)throw new t.\u0275RuntimeError(1e3,nv?function E1(l){return`\n    There are no form controls registered with this ${l?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(a):"");if(!d[n])throw new t.\u0275RuntimeError(1001,nv?function C1(l,a){return`Cannot find form control ${m0(l,a)}`}(a,n):"")})(this,!0,d),this.controls[d].setValue(a[d],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(a,n={}){null!=a&&(Object.keys(a).forEach(d=>{const _=this.controls[d];_&&_.patchValue(a[d],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(a={},n={}){this._forEachChild((d,_)=>{d.reset(a[_],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(a,n,d)=>(a[d]=n.getRawValue(),a))}_syncPendingControls(){let a=this._reduceChildren(!1,(n,d)=>!!d._syncPendingControls()||n);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){Object.keys(this.controls).forEach(n=>{const d=this.controls[n];d&&a(d,n)})}_setUpControls(){this._forEachChild(a=>{a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(a){for(const[n,d]of Object.entries(this.controls))if(this.contains(n)&&a(d))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,d,_)=>((d.enabled||this.disabled)&&(n[_]=d.value),n))}_reduceChildren(a,n){let d=a;return this._forEachChild((_,T)=>{d=n(d,_,T)}),d}_allControlsDisabled(){for(const a of Object.keys(this.controls))if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(a){return this.controls.hasOwnProperty(a)?this.controls[a]:null}}const op=new t.InjectionToken("CallSetDisabledState",{providedIn:"root",factory:()=>Ka}),Ka="always";function sp(l,a,n=Ka){_0(l,a),a.valueAccessor.writeValue(l.value),(l.disabled||"always"===n)&&a.valueAccessor.setDisabledState?.(l.disabled),function cv(l,a){a.valueAccessor.registerOnChange(n=>{l._pendingValue=n,l._pendingChange=!0,l._pendingDirty=!0,"change"===l.updateOn&&I1(l,a)})}(l,a),function D1(l,a){const n=(d,_)=>{a.valueAccessor.writeValue(d),_&&a.viewToModelUpdate(d)};l.registerOnChange(n),a._registerOnDestroy(()=>{l._unregisterOnChange(n)})}(l,a),function ux(l,a){a.valueAccessor.registerOnTouched(()=>{l._pendingTouched=!0,"blur"===l.updateOn&&l._pendingChange&&I1(l,a),"submit"!==l.updateOn&&l.markAsTouched()})}(l,a),function cx(l,a){if(a.valueAccessor.setDisabledState){const n=d=>{a.valueAccessor.setDisabledState(d)};l.registerOnDisabledChange(n),a._registerOnDestroy(()=>{l._unregisterOnDisabledChange(n)})}}(l,a)}function lv(l,a){l.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(a)})}function _0(l,a){const n=function J_(l){return l._rawValidators}(l);null!==a.validator?l.setValidators(b1(n,a.validator)):"function"==typeof n&&l.setValidators([n]);const d=function By(l){return l._rawAsyncValidators}(l);null!==a.asyncValidator?l.setAsyncValidators(b1(d,a.asyncValidator)):"function"==typeof d&&l.setAsyncValidators([d]);const _=()=>l.updateValueAndValidity();lv(a._rawValidators,_),lv(a._rawAsyncValidators,_)}function I1(l,a){l._pendingDirty&&l.markAsDirty(),l.setValue(l._pendingValue,{emitModelToViewChange:!1}),a.viewToModelUpdate(l._pendingValue),l._pendingChange=!1}const E0={provide:vs,useExisting:(0,t.forwardRef)(()=>Ed)},sg=(()=>Promise.resolve())();let Ed=(()=>{class l extends vs{constructor(n,d,_){super(),this.callSetDisabledState=_,this.submitted=!1,this._directives=new Set,this.ngSubmit=new t.EventEmitter,this.form=new sv({},ip(n),Q_(d))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){sg.then(()=>{const d=this._findContainer(n.path);n.control=d.registerControl(n.name,n.control),sp(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){sg.then(()=>{const d=this._findContainer(n.path);d&&d.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){sg.then(()=>{const d=this._findContainer(n.path),_=new sv({});(function v0(l,a){_0(l,a)})(_,n),d.registerControl(n.name,_),_.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){sg.then(()=>{const d=this._findContainer(n.path);d&&d.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,d){sg.then(()=>{this.form.get(n.path).setValue(d)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function A1(l,a){l._syncPendingControls(),a.forEach(n=>{const d=n.control;"submit"===d.updateOn&&d._pendingChange&&(n.viewToModelUpdate(d._pendingValue),d._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(_s,10),t.\u0275\u0275directiveInject(np,10),t.\u0275\u0275directiveInject(op,8))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("submit",function(T){return d.onSubmit(T)})("reset",function(){return d.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[t.\u0275\u0275ProvidersFeature([E0]),t.\u0275\u0275InheritDefinitionFeature]}),l})();function C0(l,a){const n=l.indexOf(a);n>-1&&l.splice(n,1)}function S0(l){return"object"==typeof l&&null!==l&&2===Object.keys(l).length&&"value"in l&&"disabled"in l}const P1=class extends y0{constructor(a=null,n,d){super(iv(n),rv(d,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(a),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ov(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=S0(a)?a.value:a)}setValue(a,n={}){this.value=this._pendingValue=a,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(d=>d(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(a,n={}){this.setValue(a,n)}reset(a=this.defaultValue,n={}){this._applyFormState(a),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(a){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(a){this._onChange.push(a)}_unregisterOnChange(a){C0(this._onChange,a)}registerOnDisabledChange(a){this._onDisabledChange.push(a)}_unregisterOnDisabledChange(a){C0(this._onDisabledChange,a)}_forEachChild(a){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(a){S0(a)?(this.value=this._pendingValue=a.value,a.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=a}},bx={provide:vu,useExisting:(0,t.forwardRef)(()=>lp)},xx=(()=>Promise.resolve())();let lp=(()=>{class l extends vu{constructor(n,d,_,T,P,B){super(),this._changeDetectorRef=P,this.callSetDisabledState=B,this.control=new P1,this._registered=!1,this.update=new t.EventEmitter,this._parent=n,this._setValidators(d),this._setAsyncValidators(_),this.valueAccessor=function w0(l,a){if(!a)return null;let n,d,_;return Array.isArray(a),a.forEach(T=>{T.constructor===ep?n=T:function px(l){return Object.getPrototypeOf(l.constructor)===If}(T)?d=T:_=T}),_||d||n||null}(0,T)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const d=n.name.previousValue;this.formDirective.removeControl({name:d,path:this._getPath(d)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Vy(l,a){if(!l.hasOwnProperty("model"))return!1;const n=l.model;return!!n.isFirstChange()||!Object.is(a,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){xx.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const d=n.isDisabled.currentValue,_=0!==d&&(0,t.\u0275coerceToBoolean)(d);xx.then(()=>{_&&!this.control.disabled?this.control.disable():!_&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function av(l,a){return[...a.path,l]}(n,this._parent):[n]}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(vs,9),t.\u0275\u0275directiveInject(_s,10),t.\u0275\u0275directiveInject(np,10),t.\u0275\u0275directiveInject(_u,10),t.\u0275\u0275directiveInject(t.ChangeDetectorRef,8),t.\u0275\u0275directiveInject(op,8))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[t.\u0275\u0275ProvidersFeature([bx]),t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275NgOnChangesFeature]}),l})(),cp=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),l})();const Hy={provide:_u,useExisting:(0,t.forwardRef)(()=>T0),multi:!0};let T0=(()=>{class l extends If{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=d=>{n(""==d?null:parseFloat(d))}}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("input",function(T){return d.onChange(T.target.value)})("blur",function(){return d.onTouched()})},features:[t.\u0275\u0275ProvidersFeature([Hy]),t.\u0275\u0275InheritDefinitionFeature]}),l})(),I0=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({}),l})();const V1={provide:_u,useExisting:(0,t.forwardRef)(()=>L0),multi:!0};function U1(l,a){return null==l?`${a}`:(a&&"object"==typeof a&&(a="Object"),`${l}: ${a}`.slice(0,50))}let L0=(()=>{class l extends If{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const _=U1(this._getOptionId(n),n);this.setProperty("value",_)}registerOnChange(n){this.onChange=d=>{this.value=this._getOptionValue(d),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const d of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(d),n))return d;return null}_getOptionValue(n){const d=function Ew(l){return l.split(":")[0]}(n);return this._optionMap.has(d)?this._optionMap.get(d):n}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("change",function(T){return d.onChange(T.target.value)})("blur",function(){return d.onTouched()})},inputs:{compareWith:"compareWith"},features:[t.\u0275\u0275ProvidersFeature([V1]),t.\u0275\u0275InheritDefinitionFeature]}),l})(),F0=(()=>{class l{constructor(n,d,_){this._element=n,this._renderer=d,this._select=_,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(U1(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(L0,9))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),l})();const N0={provide:_u,useExisting:(0,t.forwardRef)(()=>hv),multi:!0};function B0(l,a){return null==l?`${a}`:("string"==typeof a&&(a=`'${a}'`),a&&"object"==typeof a&&(a="Object"),`${l}: ${a}`.slice(0,50))}let hv=(()=>{class l extends If{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let d;if(this.value=n,Array.isArray(n)){const _=n.map(T=>this._getOptionId(T));d=(T,P)=>{T._setSelected(_.indexOf(P.toString())>-1)}}else d=(_,T)=>{_._setSelected(!1)};this._optionMap.forEach(d)}registerOnChange(n){this.onChange=d=>{const _=[],T=d.selectedOptions;if(void 0!==T){const P=T;for(let B=0;B<P.length;B++){const Se=this._getOptionValue(P[B].value);_.push(Se)}}else{const P=d.options;for(let B=0;B<P.length;B++){const ie=P[B];if(ie.selected){const Se=this._getOptionValue(ie.value);_.push(Se)}}}this.value=_,n(_)}}_registerOption(n){const d=(this._idCounter++).toString();return this._optionMap.set(d,n),d}_getOptionId(n){for(const d of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(d)._value,n))return d;return null}_getOptionValue(n){const d=function H1(l){return l.split(":")[0]}(n);return this._optionMap.has(d)?this._optionMap.get(d)._value:n}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("change",function(T){return d.onChange(T.target)})("blur",function(){return d.onTouched()})},inputs:{compareWith:"compareWith"},features:[t.\u0275\u0275ProvidersFeature([N0]),t.\u0275\u0275InheritDefinitionFeature]}),l})(),pv=(()=>{class l{constructor(n,d,_){this._element=n,this._renderer=d,this._select=_,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(B0(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(B0(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(hv,9))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),l})();function G1(l){return"number"==typeof l?l:parseFloat(l)}let up=(()=>{class l{constructor(){this._validator=eg}ngOnChanges(n){if(this.inputName in n){const d=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(d),this._validator=this._enabled?this.createValidator(d):eg,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,features:[t.\u0275\u0275NgOnChangesFeature]}),l})();const Cx={provide:_s,useExisting:(0,t.forwardRef)(()=>fv),multi:!0};let fv=(()=>{class l extends up{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=n=>G1(n),this.createValidator=n=>function n0(l){return a=>{if(tp(a.value)||tp(l))return null;const n=parseFloat(a.value);return!isNaN(n)&&n>l?{max:{max:l,actual:a.value}}:null}}(n)}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,d){2&n&&t.\u0275\u0275attribute("max",d._enabled?d.max:null)},inputs:{max:"max"},features:[t.\u0275\u0275ProvidersFeature([Cx]),t.\u0275\u0275InheritDefinitionFeature]}),l})();const W1={provide:_s,useExisting:(0,t.forwardRef)(()=>mv),multi:!0};let mv=(()=>{class l extends up{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>G1(n),this.createValidator=n=>function Z_(l){return a=>{if(tp(a.value)||tp(l))return null;const n=parseFloat(a.value);return!isNaN(n)&&n<l?{min:{min:l,actual:a.value}}:null}}(n)}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,d){2&n&&t.\u0275\u0275attribute("min",d._enabled?d.min:null)},inputs:{min:"min"},features:[t.\u0275\u0275ProvidersFeature([W1]),t.\u0275\u0275InheritDefinitionFeature]}),l})();const q1={provide:_s,useExisting:(0,t.forwardRef)(()=>dp),multi:!0},Sx={provide:_s,useExisting:(0,t.forwardRef)(()=>ag),multi:!0};let dp=(()=>{class l extends up{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t.\u0275coerceToBoolean,this.createValidator=n=>r0}enabled(n){return n}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,d){2&n&&t.\u0275\u0275attribute("required",d._enabled?"":null)},inputs:{required:"required"},features:[t.\u0275\u0275ProvidersFeature([q1]),t.\u0275\u0275InheritDefinitionFeature]}),l})(),ag=(()=>{class l extends dp{constructor(){super(...arguments),this.createValidator=n=>Y_}}return l.\u0275fac=function(){let a;return function(d){return(a||(a=t.\u0275\u0275getInheritedFactory(l)))(d||l)}}(),l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(n,d){2&n&&t.\u0275\u0275attribute("required",d._enabled?"":null)},features:[t.\u0275\u0275ProvidersFeature([Sx]),t.\u0275\u0275InheritDefinitionFeature]}),l})(),Q1=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({imports:[I0]}),l})(),Px=(()=>{class l{static withConfig(n){return{ngModule:l,providers:[{provide:op,useValue:n.callSetDisabledState??Ka}]}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({imports:[Q1]}),l})();class eb{constructor(){this.isAsync=!1,this.inputSelector="input"}}const lg=new t.InjectionToken("InputMaskConfig"),Ox=d1.default||d1;let Gy=(()=>{class l{constructor(n,d,_,T,P,B){this.platformId=n,this.elementRef=d,this.renderer=_,this.ngControl=T,this.ngZone=B,this.inputMaskPlugin=null,this.nativeInputElement=null,this.defaultInputMaskConfig=new eb,this.inputMaskOptions=null,this.onChange=()=>{},this.mutationObserver=null,this.onInput=ie=>{},this.onTouched=ie=>{},this.validate=ie=>ie.value&&this.inputMaskPlugin&&!this.inputMaskPlugin.isValid()?{inputMask:!0}:null,null!=this.ngControl&&(this.ngControl.valueAccessor=this),this.setNativeInputElement(P)}set inputMask(n){n&&(this.inputMaskOptions=n,this.updateInputMask())}ngOnInit(){this.control&&(this.control.setValidators(this.control.validator?[this.control.validator,this.validate]:[this.validate]),this.control.updateValueAndValidity())}ngOnDestroy(){this.removeInputMaskPlugin(),this.mutationObserver?.disconnect()}writeValue(n){const d=this.inputMaskOptions?.formatter;this.nativeInputElement&&this.renderer.setProperty(this.nativeInputElement,"value",d&&n?d(n):n??"")}registerOnChange(n){this.onChange=n;const d=this.inputMaskOptions?.parser;this.onInput=_=>{this.onChange(d&&_?d(_):_)}}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.nativeInputElement&&this.renderer.setProperty(this.nativeInputElement,"disabled",n)}updateInputMask(){this.removeInputMaskPlugin(),this.createInputMaskPlugin(),this.registerOnChange(this.onChange)}createInputMaskPlugin(){const{nativeInputElement:n,inputMaskOptions:d}=this;if(function Au(l){return"server"===l}(this.platformId)||!n||null===d||0===Object.keys(d).length)return;const{parser:_,formatter:T,...P}=d;this.inputMaskPlugin=this.ngZone.runOutsideAngular(()=>new Ox(P).mask(n)),this.control&&setTimeout(()=>{this.control.updateValueAndValidity()})}get control(){return this.ngControl?.control}setNativeInputElement(n){"INPUT"===this.elementRef.nativeElement.tagName?this.nativeInputElement=this.elementRef.nativeElement:(this.defaultInputMaskConfig={...this.defaultInputMaskConfig,...n},this.defaultInputMaskConfig.isAsync?(this.mutationObserver=new MutationObserver(d=>{for(const _ of d)if("childList"===_.type){const T=this.elementRef.nativeElement.querySelector(this.defaultInputMaskConfig.inputSelector);T&&(this.nativeInputElement=T,this.mutationObserver?.disconnect(),this.createInputMaskPlugin())}}),this.mutationObserver.observe(this.elementRef.nativeElement,{childList:!0,subtree:!0})):this.nativeInputElement=this.elementRef.nativeElement.querySelector(this.defaultInputMaskConfig.inputSelector))}removeInputMaskPlugin(){this.inputMaskPlugin?.remove(),this.inputMaskPlugin=null}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(t.PLATFORM_ID),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.Renderer2),t.\u0275\u0275directiveInject(vu,10),t.\u0275\u0275directiveInject(lg),t.\u0275\u0275directiveInject(t.NgZone))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["","inputMask",""]],hostBindings:function(n,d){1&n&&t.\u0275\u0275listener("input",function(T){return d.onInput(T.target.value)})("blur",function(T){return d.onTouched(T.target.value)})},inputs:{inputMask:"inputMask"}}),l})(),Rx=(()=>{class l{static forRoot(n){return{ngModule:l,providers:[{provide:lg,useValue:n}]}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:lg,useClass:eb}]}),l})();const ss=l=>"string"==typeof l?{mask:l}:l,tb=["firstNameInput"],Lx=["lastNameInput"],nb=["emailInput"],Fx=["phoneInput"],Nx=["addressInput"],ib=["ownedPropertyInput"],rb=["sizePropertyInput"],Bx=["numberOfBedroomInput"],Ml=["numberOfBathroomInput"],zx=["desiredSellingPriceInput"],V0=["currentConditionInput"],jx=["motiveSellPropertyInput"],kw=["myForm"];function Il(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"option",78),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&l){const n=a.$implicit;t.\u0275\u0275property("value",n.label)("selected",1==n.status),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.label,"")}}function Vx(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"option",78),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&l){const n=a.$implicit;t.\u0275\u0275property("value",n.label)("selected",1==n.status),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.label,"")}}const yv=function(l){return{display:l}};let Ux=(()=>{class l{selectChangeHandler1(n){this.selectedPropertyType=n.target.value}selectChangeHandler2(n){this.selectedSellingTimeline=n.target.value}constructor(n,d,_,T,P){this.route=n,this.spinner=d,this.http=_,this._toast=T,this._apiCallServices=P,this.isCheckboxChecked=!1,this.options={componentRestrictions:{country:"CA"}},this.formData={sessionFullStreetAddress:"",firstName:"",lastName:"",phoneNumber:"",email:"",confirm:!1},this.formData2={ownedProperty:"",sizeProperty:"",numberOfBedroom:"",numberOfBathroom:"",desiredSellingPrice:"",currentCondition:"",motiveSellProperty:""},this.selectedPropertyType="",this.propertyType=[{id:1,label:"Detached",status:!0},{id:2,label:"Semi-detached",status:!1},{id:3,label:"Townhouses",status:!1},{id:4,label:"Condos",status:!1},{id:5,label:"Condo Townhomes",status:!1},{id:6,label:"Bungalows",status:!1},{id:7,label:"Split-level",status:!1},{id:8,label:"Duplex, Triplex, Fourplex",status:!1},{id:9,label:"Others",status:!1}],this.selectedSellingTimeline="",this.sellingTimeline=[{id:1,label:"Immediate Sale",status:!0},{id:2,label:"Within the Next 3 Months",status:!1},{id:3,label:"Within the Next 6 Months",status:!1},{id:4,label:"Within the Next Year",status:!1},{id:5,label:"Flexible Timeline",status:!1},{id:6,label:"Dependent on Finding a New Home",status:!1},{id:7,label:"Seasonal Considerations",status:!1},{id:8,label:"Financial Milestone",status:!1}],this.currencyInputMask=ss({alias:"numeric",groupSeparator:",",digits:0,digitsOptional:!1,placeholder:"0"}),this.numericInputMask=ss({alias:"numeric",groupSeparator:",",digits:0,digitsOptional:!1,placeholder:"0"}),this.numericDecimalInputMask=ss({alias:"numeric",groupSeparator:",",digits:2,digitsOptional:!1,placeholder:"0"}),this.isVisibleForm1=!0,this.isVisibleForm2=!1,this.progressWidth=50,this.step=1,this.isButtonDisabled=!1,this.phoneNumberInputMask=ss({mask:"(999) 999-9999"})}handleAddressChange(n){this.formData.sessionFullStreetAddress=n.formatted_address}ngOnInit(){const n=sessionStorage.getItem("session_expiration");!n||(new Date).getTime()>parseInt(n,10)?this.sessionFullStreetAddress=null:(this.sessionFullStreetAddress=sessionStorage.getItem("user_street_address"),this.formData.sessionFullStreetAddress=this.sessionFullStreetAddress),console.log(this.sessionFullStreetAddress)}showPre(){document.getElementById("progress-bar")?.style.setProperty("width","50%"),this.progressWidth=50,this.step=1,this.isVisibleForm1=!0,this.isVisibleForm2=!1}showNext(){document.getElementById("progress-bar")?.style.setProperty("width","100%"),this.step=2,this.progressWidth=100,this.isVisibleForm1=!1,this.isVisibleForm2=!0}form2Data(n){this.spinner.show(),this.formData2.ownedProperty=this.ownedPropertyInput.nativeElement.value,this.formData2.sizeProperty=this.sizePropertyInput.nativeElement.value,this.formData2.numberOfBedroom=this.numberOfBedroomInput.nativeElement.value,this.formData2.numberOfBathroom=this.numberOfBathroomInput.nativeElement.value,this.formData2.desiredSellingPrice=this.desiredSellingPriceInput.nativeElement.value,this.formData2.currentCondition=this.currentConditionInput.nativeElement.value,this.formData2.motiveSellProperty=this.motiveSellPropertyInput.nativeElement.value,n.value.firstName=this.firstNameInput.nativeElement.value,n.value.lastName=this.lastNameInput.nativeElement.value,n.value.email=this.emailInput.nativeElement.value,n.value.phoneNumber=this.phoneInput.nativeElement.value,n.value.streetAddress=this.addressInput.nativeElement.value,this._apiCallServices.contactLeadFullFormApi(n.value.firstName,n.value.lastName,n.value.email,n.value.phoneNumber,n.value.streetAddress,this.formData2.ownedProperty,this.formData2.sizeProperty,this.formData2.numberOfBedroom,this.formData2.numberOfBathroom,this.formData2.desiredSellingPrice,this.formData2.currentCondition,this.formData2.motiveSellProperty,this.selectedPropertyType,this.selectedSellingTimeline).subscribe(d=>{console.log(d),"success"==d.status?(setTimeout(()=>{this.spinner.hide()},1e3),this._toast.success({detail:"SUCCESS",summary:"Form successfully submitted",position:"br"}),setTimeout(function(){window.location.href="/thank-you"},1e3)):("error"==d.status||"timeout"==d.status)&&(alert(d.message),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3))},d=>{var _="",T=[];""==n.value.firstName?T.push("First Name"):""==n.value.lastName?T.push("Last Name"):""==n.value.email?T.push("Email"):""==n.value.phoneNumber?T.push("Phone Number"):""==n.value.streetAddress?T.push("Property Address"):_="Unable to submit. Please re-enter the details manually, in the form. Avoid selecting from pre filled options.",_=0==T.length?"Unable to submit. Maybe enter the details manually in the webform instead of Pre-filled options. or please try after sometime! ":"Unable to submit. Please re-enter "+T+", and try again. Try to enter the details manually.",alert(_),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3)},()=>console.log("CONTACT US FORM SUMBITTED SUCCESSFULLY"))}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(bd),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(Mf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-contact"]],viewQuery:function(d,_){if(1&d&&(t.\u0275\u0275viewQuery(tb,5),t.\u0275\u0275viewQuery(Lx,5),t.\u0275\u0275viewQuery(nb,5),t.\u0275\u0275viewQuery(Fx,5),t.\u0275\u0275viewQuery(Nx,5),t.\u0275\u0275viewQuery(ib,5),t.\u0275\u0275viewQuery(rb,5),t.\u0275\u0275viewQuery(Bx,5),t.\u0275\u0275viewQuery(Ml,5),t.\u0275\u0275viewQuery(zx,5),t.\u0275\u0275viewQuery(V0,5),t.\u0275\u0275viewQuery(jx,5),t.\u0275\u0275viewQuery(kw,5)),2&d){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.firstNameInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.lastNameInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.emailInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.phoneInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.addressInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.ownedPropertyInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.sizePropertyInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.numberOfBedroomInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.numberOfBathroomInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.desiredSellingPriceInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.currentConditionInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.motiveSellPropertyInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.myForm=T.first)}},decls:209,vars:33,consts:[[1,"intro"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-8","col-12"],[1,"first-section"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"row","justify-content-center","align-items-center","mt-4"],[1,"col-lg-10","col-md-12","col-12"],[1,"progress"],["role","progressbar","id","progress-bar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],[1,"mt-3"],[1,"fs-5","text-muted"],[1,"form-1",3,"ngStyle"],["novalidate","",1,"needs-validation"],["contactForm","ngForm"],[1,"col-lg-6","col-md-6","col-12"],[1,"row","mt-4"],[1,"col-lg-12"],[1,"form-floating","mb-4"],["type","text","autocomplete","new-password","ngx-google-places-autocomplete","","id","floatingInput","placeholder","Property address","name","streetAddress","ngModel","","required","",1,"form-control",3,"options","ngModel","onAddressChange","ngModelChange"],["streetAddressRef","ngModel","addressInput",""],["for","floatingInput"],[1,"d-lg-block","d-md-block","d-block","mb-lg-0","mb-md-0","m-2"],["src","../../../assets/images/powered-by-google.png","width","100","alt",""],["type","text","autocomplete","new-password","id","floatingInput","placeholder","First Name","name","firstName","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstNameRef","ngModel","firstNameInput",""],["type","text","autocomplete","new-password","id","floatingInput","placeholder","Last Name","name","lastName","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastNameRef","ngModel","lastNameInput",""],[1,"form-floating","mb-lg-5","mb-md-5","mb-4"],["type","tel","id","floatingInput","autocomplete","new-password","placeholder","Phone Number","name","phoneNumber","ngModel","","required","",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["phoneNumberRef","ngModel","phoneInput",""],[1,"form-floating","mt-lg-2","mt-md-2","mb-4"],["type","email","id","floatingInput","autocomplete","new-password","placeholder","Email","name","email","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["emailRef","ngModel","emailInput",""],[1,"mt-4"],["type","submit",1,"btn","btn-dark","px-5","py-3",3,"disabled","click"],[3,"ngStyle"],["novalidate","",1,"needs-validation",3,"ngSubmit"],["form2","ngForm"],[1,"col-lg-12","col-md-12","col-12"],["type","number","min","0","max","100","id","floatingInput","name","ownedProperty","ngModel","","required","","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["ownedPropertyRef","ngModel","ownedPropertyInput",""],[1,"col-lg-6","col-12"],["name","serviceReq","id","floatingSelect","aria-label","Floating label select example","required","",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","floatingSelect"],[1,"col-lg-6"],["type","text","id","floatingInput","name","sizeProperty","autocomplete","new-password","ngModel","","required","","placeholder","0",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["sizeProperty","ngModel","sizePropertyInput",""],["type","text","id","floatingInput","name","numberOfBedroom","autocomplete","new-password","ngModel","","required","","placeholder","0",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["numberOfBedroomRef","ngModel","numberOfBedroomInput",""],["type","text","id","floatingInput","name","numberOfBathroom","autocomplete","new-password","ngModel","","required","","placeholder","0",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["numberOfBathroomRef","ngModel","numberOfBathroomInput",""],["name","currentCondition","autocomplete","new-password","ngModel","","required","",1,"form-control",2,"height","100px",3,"ngModel","ngModelChange"],["currentConditionRef","ngModel","currentConditionInput",""],["for","floatingTextarea"],["type","text","id","floatingInput","name","desiredSellingPrice","autocomplete","new-password","ngModel","","required","","placeholder","0",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["desiredSellingPriceRef","ngModel","desiredSellingPriceInput",""],["name","motiveSellProperty","autocomplete","new-password","ngModel","","required","",1,"form-control",2,"height","100px",3,"ngModel","ngModelChange"],["motiveSellPropertyRef","ngModel","motiveSellPropertyInput",""],["id","confirm-msg",1,"mt-4","form-check"],["type","checkbox","name","confirm","required","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","exampleCheck1",1,"form-check-label"],["href","terms-of-use","target","_blank"],["href","privacy-policy","target","_blank"],[1,"my-4"],["type","button",1,"btn","btn-dark","px-5","py-3","me-2",3,"click"],["type","submit",1,"btn","btn-danger","px-5","py-3",3,"disabled","click"],[1,"second-section","bg-light"],["href","tel:18889869883"],["href","tel:2897684983"],["href","www.michaelthehomebuyer.ca","target","_blank"],["href","mailto:info@michaelthehomebuyer.ca"],["href","https://maps.app.goo.gl/v9dAsVNJkamWaix79","id","button-vary1","target","_blank",1,"btn","btn-danger","px-5","mt-4"],[1,"fa","fa-map-marker","me-2"],[1,"fw-bold"],[3,"value","selected"]],template:function(d,_){if(1&d){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1"),t.\u0275\u0275text(6,'Ready to sell your house "as is?"'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"h3"),t.\u0275\u0275text(8,"Contact us today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(9,"section",4)(10,"div",1)(11,"div",5)(12,"div",6)(13,"h2",7),t.\u0275\u0275text(14,"See how quick and easy selling your house can be."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"p"),t.\u0275\u0275text(16,'If you\u2019re considering selling and would like a fair cash offer for your house "as is," contact us. Your local Michael the Home Buyer\xae representative will schedule a quick visit with you. After a brief look at your property in person, you can get a fair cash offer you can count on, right there on the spot.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"p"),t.\u0275\u0275text(18,"It\u2019s that simple. It\u2019s that fast. And it all starts when you fill out the information below."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",8)(20,"div",9)(21,"div",10)(22,"div",11),t.\u0275\u0275text(23),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",12)(25,"p",13),t.\u0275\u0275text(26),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",14)(28,"form",15,16)(30,"div",5)(31,"div",17)(32,"h3"),t.\u0275\u0275text(33,"1. Add Property Address"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"div",18)(35,"div",19)(36,"div",20)(37,"input",21,22),t.\u0275\u0275listener("onAddressChange",function(B){return _.handleAddressChange(B)})("ngModelChange",function(B){return _.formData.sessionFullStreetAddress=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"label",23),t.\u0275\u0275text(41,"Property address*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"div",24),t.\u0275\u0275element(43,"img",25),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(44,"div",17)(45,"div",20)(46,"input",26,27),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.firstName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"label",23),t.\u0275\u0275text(50,"First name*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(51,"div",17)(52,"div",20)(53,"input",28,29),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.lastName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"label",23),t.\u0275\u0275text(57,"Last name*"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(58,"div",17)(59,"h3"),t.\u0275\u0275text(60,"2. Add Contact Info"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(61,"div",18)(62,"div",19)(63,"div",30)(64,"input",31,32),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.phoneNumber=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(67,"label",23),t.\u0275\u0275text(68,"Phone number*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(69,"div",19)(70,"div",33)(71,"input",34,35),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.email=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(74,"label",23),t.\u0275\u0275text(75,"Email*"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(76,"div",36)(77,"button",37),t.\u0275\u0275listener("click",function(){return _.showNext()}),t.\u0275\u0275text(78,"Next"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(79,"div",38)(80,"form",39,40),t.\u0275\u0275listener("ngSubmit",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(81);return t.\u0275\u0275resetView(_.form2Data(B))}),t.\u0275\u0275elementStart(82,"div",5)(83,"div",41)(84,"p"),t.\u0275\u0275text(85),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(86,"div",18)(87,"div",19)(88,"div",20)(89,"input",42,43),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.ownedProperty=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(92,"label",23),t.\u0275\u0275text(93,"(in yrs)"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(94,"p"),t.\u0275\u0275text(95,"What are the details of the property, including its type, size, number of bedrooms, and number of bathrooms?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(96,"div",44)(97,"div",20)(98,"select",45),t.\u0275\u0275listener("change",function(B){return _.selectChangeHandler1(B)}),t.\u0275\u0275template(99,Il,2,3,"option",46),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(100,"label",47),t.\u0275\u0275text(101,"Type of property"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(102,"div",48)(103,"div",20)(104,"input",49,50),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.sizeProperty=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(107,"label",23),t.\u0275\u0275text(108,"Size of the property (sq ft)"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(109,"div",48)(110,"div",20)(111,"input",51,52),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.numberOfBedroom=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(114,"label",23),t.\u0275\u0275text(115,"Number of bedrooms"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(116,"div",48)(117,"div",20)(118,"input",53,54),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.numberOfBathroom=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(121,"label",23),t.\u0275\u0275text(122,"Number of bathroom"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(123,"div",19)(124,"p"),t.\u0275\u0275text(125,"Can you tell me about the current condition of the property? Any recent upgrades or improvements you'd like to mention?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(126,"div",20)(127,"textarea",55,56),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.currentCondition=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(130,"label",57),t.\u0275\u0275text(131,"Current Condition and Upgrades"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(132,"p"),t.\u0275\u0275text(133,"What's your desired selling price and timeline for the sale?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(134,"div",44)(135,"div",20)(136,"input",58,59),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.desiredSellingPrice=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(139,"label",23),t.\u0275\u0275text(140,"Desired selling price (C$)"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(141,"div",44)(142,"div",20)(143,"select",45),t.\u0275\u0275listener("change",function(B){return _.selectChangeHandler2(B)}),t.\u0275\u0275template(144,Vx,2,3,"option",46),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(145,"label",47),t.\u0275\u0275text(146,"Preferred timeline for selling"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(147,"div",19)(148,"div",19)(149,"p"),t.\u0275\u0275text(150,"What's the reason behind selling the property?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(151,"div",20)(152,"textarea",60,61),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData2.motiveSellProperty=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(155,"label",57),t.\u0275\u0275text(156,"Reason for Selling"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(157,"div",62)(158,"input",63),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.confirm=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(159,"label",64),t.\u0275\u0275text(160,"By checking this box, I authorize and provide my consent for Michael the Home Buyer\xae or its franchisees, or their service providers, to contact me at the phone number provided above via text (SMS) or calling using automated dialing technology to schedule an appointment and for marketing purposes related to the Michael the Home Buyer\xae services I am inquiring about. Consent not required to purchase services. Message and data rates may apply. Message frequency varies by account. To opt-out at any time reply STOP to the message you receive. For more information, please review our "),t.\u0275\u0275elementStart(161,"a",65),t.\u0275\u0275text(162,"Terms of Use"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(163," and "),t.\u0275\u0275elementStart(164,"a",66),t.\u0275\u0275text(165,"Privacy Policy"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(166,". "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(167,"hr",67),t.\u0275\u0275elementStart(168,"div")(169,"button",68),t.\u0275\u0275listener("click",function(){return _.showPre()}),t.\u0275\u0275text(170,"Previous"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(171,"button",69),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(81);return t.\u0275\u0275resetView(_.form2Data(B))}),t.\u0275\u0275text(172,"Submit"),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(173,"section",70)(174,"div",1)(175,"div",5)(176,"div",6)(177,"h2",7),t.\u0275\u0275text(178,"Micheal the Home Buyer\xae is here to help."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(179,"p"),t.\u0275\u0275text(180,"Whether you\u2019re a homeowner with a need to sell your house or an investor seeking a franchise opportunity, Michael the Home Buyer is excited to speak with you. We\u2019re house buyers that are happy to answer any questions you may have. It all starts with contacting us!"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(181,"p"),t.\u0275\u0275text(182,"For information about selling your house, call us at "),t.\u0275\u0275elementStart(183,"a",71),t.\u0275\u0275text(184,"1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(185," or submit our website form today."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(186,"p"),t.\u0275\u0275text(187,"For all other inquiries, please contact us at "),t.\u0275\u0275elementStart(188,"a",72),t.\u0275\u0275text(189,"1 (289) 768-4983"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(190,"div",6)(191,"h2",7),t.\u0275\u0275text(192,"Corporate Office:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(193,"p"),t.\u0275\u0275text(194,"Micheal the Home Buyer\xae"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(195,"p")(196,"a",73),t.\u0275\u0275text(197,"www.michaelthehomebuyer.ca"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(198,"p")(199,"a",74),t.\u0275\u0275text(200,"info@michaelthehomebuyer.ca"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(201,"a",75),t.\u0275\u0275element(202,"i",76),t.\u0275\u0275text(203," Get Direction "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(204,"p",36)(205,"span",77),t.\u0275\u0275text(206,"Please Note:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(207," Michael the Home Buyer\xae corporate office does not buy or sell houses."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275element(208,"app-footer")}if(2&d){const T=t.\u0275\u0275reference(29),P=t.\u0275\u0275reference(81);t.\u0275\u0275advance(22),t.\u0275\u0275attribute("aria-valuenow",_.progressWidth),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",_.progressWidth,"% "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("Step ",_.step," of 2"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(29,yv,_.isVisibleForm1?"block":"none")),t.\u0275\u0275advance(10),t.\u0275\u0275property("options",_.options)("ngModel",_.formData.sessionFullStreetAddress),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngModel",_.formData.firstName),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.lastName),t.\u0275\u0275advance(11),t.\u0275\u0275property("ngModel",_.formData.phoneNumber)("inputMask",_.phoneNumberInputMask),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.email),t.\u0275\u0275advance(6),t.\u0275\u0275property("disabled",!T.form.valid),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction1(31,yv,_.isVisibleForm2?"block":"none")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1("Ok so, how long have you owned the property - ",_.formData.sessionFullStreetAddress,"?"),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngModel",_.formData2.ownedProperty),t.\u0275\u0275advance(10),t.\u0275\u0275property("ngForOf",_.propertyType),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngModel",_.formData2.sizeProperty)("inputMask",_.numericDecimalInputMask),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData2.numberOfBedroom)("inputMask",_.numericInputMask),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData2.numberOfBathroom)("inputMask",_.numericInputMask),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngModel",_.formData2.currentCondition),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngModel",_.formData2.desiredSellingPrice)("inputMask",_.currencyInputMask),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngForOf",_.sellingTimeline),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngModel",_.formData2.motiveSellProperty),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.confirm),t.\u0275\u0275advance(13),t.\u0275\u0275property("disabled",!P.form.valid)}},dependencies:[bo,as,cp,F0,pv,ep,T0,wd,Df,ng,dp,ag,mv,fv,lp,Ed,On.GooglePlaceDirective,Gy,Qn,wn],styles:['.intro[_ngcontent-%COMP%]{color:#fff;padding:140px 0;background-image:url(https://www.nerdwallet.com/assets/blog/wp-content/uploads/2019/07/8-First-Time-Home-Buyer-Loans-and-Programs.jpg);position:relative;background-size:cover;background-repeat:no-repeat;background-position:center;z-index:0}.intro[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;background:linear-gradient(90deg,rgba(162,75,75,.84) 19.27%,rgba(217,217,217,0) 100%);z-index:-1}.first-section[_ngcontent-%COMP%]{padding:100px 0}.progress-bar[_ngcontent-%COMP%]{width:50%}.second-section[_ngcontent-%COMP%]{padding:100px 0}.second-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.second-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.first-section[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']})}return l})(),Hx=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-why-sell-to-us"]],decls:107,vars:0,consts:[["heading","Why sell my house to Michael the Home Buyer\xae?","subheading","You can trust our fair cash offer."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"fw-bold"],["href","selling-your-house/reviews","target","_blank"],[1,"second-section","bg-light"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-10"],[1,"row","g-lg-4","g-4","mt-4","justify-content-center","text-center"],[1,"col-lg-4","col-md-4","col-12"],["src","./.././../../assets/images/why-sell-to-us/why-sell-to-us/image-removebg-preview (1).png","width","200px","height","190px","alt",""],[1,"small"],["href","micheal-the-home-buyer-vs-traditional-realtors","target","_blank"],["src","../../../assets/images/why-sell-to-us/why-sell-to-us/image-removebg-preview (2).png","width","200px","height","190px","alt",""],["href","micheal-the-home-buyer-vs-online-buyers","target","_blank"],["src","../../../assets/images/why-sell-to-us/why-sell-to-us/image-removebg-preview (3).png","width","200px","height","190px","alt",""],["href","micheal-the-home-buyer-vs-local-flippers","target","_blank"],[1,"third-section"],[1,"col-lg-8"],[1,"anchor-para"],["href","contact","id","button-vary1","target","_blank",1,"btn","btn-dark","px-5","py-3","mt-4"],[1,"fifth-section"],[1,"col-lg-10","col-md-12","col-12","py-5"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),t.\u0275\u0275text(7,"Sell my home quick and easy."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p"),t.\u0275\u0275text(9,"If you\u2019re thinking, "),t.\u0275\u0275elementStart(10,"i"),t.\u0275\u0275text(11,'"I want to sell my home fast to someone trustworthy,"'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"i"),t.\u0275\u0275text(13,'"Who will buy my house for cash?"'),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(14," or "),t.\u0275\u0275elementStart(15,"i"),t.\u0275\u0275text(16,'"How can I sell my house for cash?"'),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(17," - we can help! Michael the Home Buyer\xae has purchased over 2,500 houses since 2014, making us the industry leader in cash home buying. It's our experience, personal service, and fair offers you can trust that set Michael the Home Buyer apart from all other options. If you have a need to sell your house fast, we're here to help. We trade homes for cash. No longer will you be wondering, "),t.\u0275\u0275elementStart(18,"i"),t.\u0275\u0275text(19,'"How can I sell my home fast?"'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"div")(21,"h5",6),t.\u0275\u0275text(22,"Michael the Home Buyer\xae is Canada's #1 home buyer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"p"),t.\u0275\u0275text(24,"We can give you a fair cash offer because we visit your property in person. And when you sell your house, we never ask you to make concessions for repairs or clean up. Sellers have trusted our fair offers since 2014, and you won\u2019t be hit by any of those surprise fees."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"h5",6),t.\u0275\u0275text(26,"We are with you through each step of the sales process."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"p"),t.\u0275\u0275text(28,"We pride ourselves on our honesty, transparency, and personal service. Your local property specialist will handle your unique situation personally and professionally and has the experience and know-how to close on your house as promised."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"h5",6),t.\u0275\u0275text(30,"We see your property in person before making an offer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"p"),t.\u0275\u0275text(32,"Some cash home buyers will make an offer without seeing your house first. Don\u2019t be surprised when these other home-buying companies hit you with hidden fees. We, on the other hand, always take the time up front to do an in-person consultation at your house. You wouldn\u2019t buy a house sight unseen, and neither would we. With us, you can sell homes for cash. We\u2019re cash home buyers that make the process easy."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"p"),t.\u0275\u0275text(34,"That\u2019s the Michael the Home Buyer\xae difference. Don\u2019t believe us? "),t.\u0275\u0275elementStart(35,"a",7),t.\u0275\u0275text(36,"Read Micheal the Home Buyers reviews"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(37,". "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(38,"section",8)(39,"div",2)(40,"div",9)(41,"div",10)(42,"div",11)(43,"h2"),t.\u0275\u0275text(44,"Why selling my house to Michael the Home Buyer\xae is the right choice"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(45,"div",12)(46,"div",13)(47,"p")(48,"i"),t.\u0275\u0275text(49,'"I need to sell my home fast!"'),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(50," You want to sell your house quickly, and we understand that you have options with other home-buying companies. But unlike other home-buying companies, we offer advantages over each of them. Click on the options below to learn what makes Michael the Home Buyer the right choice when you want a quick and fair offer to sell your house fast."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(51,"div",14)(52,"div",15),t.\u0275\u0275element(53,"img",16),t.\u0275\u0275elementStart(54,"h5"),t.\u0275\u0275text(55,"Traditional Realtors\xae"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"p"),t.\u0275\u0275text(57,"They charge big commissions and can take several months to close a sale."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"p",17)(59,"a",18),t.\u0275\u0275text(60,"Learn the difference between Michael the Home Buyer and traditional Realtors\xae in selling your home."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(61,"div",15),t.\u0275\u0275element(62,"img",19),t.\u0275\u0275elementStart(63,"h5"),t.\u0275\u0275text(64,"Online Buyers"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"p"),t.\u0275\u0275text(66,'They make a "sight unseen" offer, but charge hidden fees and commissions.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(67,"p",17)(68,"a",20),t.\u0275\u0275text(69,"Learn the differences between Michael the Home Buyer and online buyers in determining the sales price of your house."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(70,"div",15),t.\u0275\u0275element(71,"img",21),t.\u0275\u0275elementStart(72,"h5"),t.\u0275\u0275text(73,"Local Flippers"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(74,"p"),t.\u0275\u0275text(75,"Experience and know-how can vary greatly, and they may not operate under a shared Code of Ethics."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(76,"p",17)(77,"a",22),t.\u0275\u0275text(78,"Learn the differences between Michael the Home Buyer and local flippers in how they operate."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(79,"section",23)(80,"div",2)(81,"div",9)(82,"div",10)(83,"div",11)(84,"h2"),t.\u0275\u0275text(85,"Sell your house fast. Don't wait; let's get started today."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(86,"div",12)(87,"div",24)(88,"div",25)(89,"p"),t.\u0275\u0275text(90,"We can help if you need to sell your house fast. With us, there\u2019s no obligation or pressure, and our in-home visit is free. We simply take a quick look at your house and can make you a fair cash offer on the spot. That\u2019s all there is to it. Check our "),t.\u0275\u0275elementStart(91,"a",7),t.\u0275\u0275text(92,"cash home buyer reviews!"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(93,"a",26),t.\u0275\u0275text(94,"Buy My House For Cash!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(95,"section",27)(96,"div",2)(97,"div",9)(98,"div",28)(99,"div",11),t.\u0275\u0275element(100,"hr"),t.\u0275\u0275elementStart(101,"h1"),t.\u0275\u0275text(102,"Micheal the Home Buyer "),t.\u0275\u0275elementStart(103,"span",6),t.\u0275\u0275text(104,"has been Canada's #1 Cash Home Buyer Since 2014."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(105,"hr"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(106,"app-footer"))},dependencies:[Qn,wn,fi],styles:[".intro[_ngcontent-%COMP%]{background-color:#a81c1c;color:#fff;padding:80px 0}.first-section[_ngcontent-%COMP%]{padding:100px 0}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.second-section[_ngcontent-%COMP%]{padding:100px 0}.third-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.third-section[_ngcontent-%COMP%]   .anchor-para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#ffdd05!important}.third-section[_ngcontent-%COMP%]   .anchor-para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.fifth-section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:1px solid red!important}"]})}return l})(),U0=(()=>{class l{constructor(n,d,_,T,P){this.route=n,this.spinner=d,this.http=_,this._toast=T,this._apiCallServices=P,this.options={componentRestrictions:{country:"CA"}},this.isCheckboxChecked=!1,this.formData={sessionFullStreetAddress:"",firstName:"",lastName:"",phoneNumber:"",email:"",confirm:!1},this.phoneNumberInputMask=ss({mask:"(999) 999-9999"})}ngOnInit(){const n=sessionStorage.getItem("session_expiration");!n||(new Date).getTime()>parseInt(n,10)?this.sessionFullStreetAddress=null:(this.sessionFullStreetAddress=sessionStorage.getItem("user_street_address"),this.formData.sessionFullStreetAddress=this.sessionFullStreetAddress),console.log(this.sessionFullStreetAddress)}handleAddressChange(n){this.formData.sessionFullStreetAddress=n.formatted_address}contactFormData(n){n.valid&&this.formData.confirm&&(this.spinner.show(),console.log(n.value),this._apiCallServices.contactLeadApi(n.value.firstName,n.value.lastName,n.value.email,n.value.phoneNumber,n.value.streetAddress).subscribe(d=>{console.log(d),"success"==d.status?(setTimeout(()=>{this.spinner.hide()},1e3),this._toast.success({detail:"SUCCESS",summary:"Form successfully submitted",position:"br"}),setTimeout(function(){window.location.href="/thank-you"},1e3)):("error"==d.status||"timeout"==d.status)&&(alert(d.message),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3))},d=>{alert("An error occurred. Please try after sometime!"),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3)},()=>console.log("CONTACT US FORM SUMBITTED SUCCESSFULLY")))}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(bd),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(Mf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-reviews"]],decls:75,vars:9,consts:[["heading","We\u2019ve earned a 95%* customer satisfaction rating.","subheading","We\u2019re thrilled our clients have given us rave reviews."],[1,"first-section"],[1,"container"],[1,"row","g-4"],[1,"col-lg-7","col-md-7","col-12"],[1,"mb-4"],["href","https://g.page/r/Ce5dYi1ujHTZEB0/review","target","_blank",1,"btn","btn-danger"],[1,"col-lg-5","col-md-5","col-12"],[1,"text-center","pb-4"],["src","../../../assets/images/why-sell-to-us/reviews/hva-gb-customer-satisfaction-icon.png","width","300","alt",""],[1,"second-section","bg-light"],[1,"col-lg-7","col-md-7","col-12","order-lg-1","order-md-1","order-2"],["data-elfsight-app-lazy","",1,"elfsight-app-86b7f862-31d3-4f89-9ac6-7b003fd2e6f5"],[1,"col-lg-5","col-md-5","col-12","order-lg-2","order-md-2","order-1"],[1,"fifth-section","py-5","px-3","rounded","rounded-4"],[1,"pb-4"],["novalidate","",1,"needs-validation",3,"ngSubmit"],["contactForm","ngForm"],[1,"row"],[1,"col-lg-6","col-md-6","col-12"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","placeholder","First Name","name","firstName","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstNameRef","ngModel"],["for","floatingInput"],["type","text","id","floatingInput","placeholder","Last Name","name","lastName","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastNameRef","ngModel"],[1,"col-lg-12"],["type","tel","id","floatingInput","placeholder","Phone Number","name","phoneNumber","ngModel","","required","",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["phoneNumberRef","ngModel"],["type","email","id","floatingInput","placeholder","Email","name","email","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["emailRef","ngModel"],["type","text","ngx-google-places-autocomplete","","id","floatingInput","placeholder","Property address","name","streetAddress","ngModel","","required","",1,"form-control",3,"options","ngModel","onAddressChange","ngModelChange"],["streetAddressRef","ngModel"],[1,"d-lg-block","d-md-block","d-block","mb-lg-0","mb-md-0","m-2"],["src","../../../assets/images/powered-by-google-transparent.png","width","100","alt",""],["id","confirm-msg",1,"mt-4","form-check"],["type","checkbox","name","confirm","required","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","exampleCheck1",1,"form-check-label"],["href","terms-of-use","target","_blank"],["href","privacy-policy","target","_blank"],[1,"mt-4"],["type","submit","id","button-vary1",1,"btn","btn-warning","px-5","py-3",3,"disabled"]],template:function(d,_){if(1&d){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),t.\u0275\u0275text(7,"We know how to make sellers happy."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p"),t.\u0275\u0275text(9,"After closing, we ask all our clients to provide feedback, and we publish their impartial comments about their entire experience. Our impressive 95%* rating is a testament to the high level of satisfaction among our valued customers."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"a",6),t.\u0275\u0275text(11,"Write a review"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",7)(13,"div",8),t.\u0275\u0275element(14,"img",9),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(15,"section",10)(16,"div",2)(17,"div",3)(18,"div",11)(19,"h2",5),t.\u0275\u0275text(20,"Michael the Home Buyer\xae reviews and testimonials"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(21,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"div",13)(23,"div",14)(24,"h4",15),t.\u0275\u0275text(25,"Request a free, no-obligation consultation."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"form",16,17),t.\u0275\u0275listener("ngSubmit",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(27);return t.\u0275\u0275resetView(_.contactFormData(B))}),t.\u0275\u0275elementStart(28,"div",18)(29,"div",19)(30,"div",20)(31,"input",21,22),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.firstName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"label",23),t.\u0275\u0275text(34,"First name*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(35,"div",19)(36,"div",20)(37,"input",24,25),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.lastName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"label",23),t.\u0275\u0275text(40,"Last name*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(41,"div",26)(42,"div",20)(43,"input",27,28),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.phoneNumber=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(45,"label",23),t.\u0275\u0275text(46,"Phone Number*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(47,"div",26)(48,"div",20)(49,"input",29,30),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.email=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(51,"label",23),t.\u0275\u0275text(52,"Email*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(53,"div",26)(54,"div",20)(55,"input",31,32),t.\u0275\u0275listener("onAddressChange",function(B){return _.handleAddressChange(B)})("ngModelChange",function(B){return _.formData.sessionFullStreetAddress=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(57,"label",23),t.\u0275\u0275text(58,"Property address*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"div",33),t.\u0275\u0275element(60,"img",34),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(61,"div",35)(62,"input",36),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.confirm=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(63,"label",37),t.\u0275\u0275text(64,"By checking this box, I authorize and provide my consent for Michael the Home Buyer\xae or its franchisees, or their service providers, to contact me at the phone number provided above via text (SMS) or calling using automated dialing technology to schedule an appointment and for marketing purposes related to the Michael the Home Buyer\xae services I am inquiring about. Consent not required to purchase services. Message and data rates may apply. Message frequency varies by account. To opt-out at any time reply STOP to the message you receive. For more information, please review our "),t.\u0275\u0275elementStart(65,"a",38),t.\u0275\u0275text(66,"Terms of Use"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(67," and "),t.\u0275\u0275elementStart(68,"a",39),t.\u0275\u0275text(69,"Privacy Policy"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(70,". "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(71,"div",40)(72,"button",41),t.\u0275\u0275text(73,"Get a cash offer"),t.\u0275\u0275elementEnd()()()()()()()(),t.\u0275\u0275element(74,"app-footer")}if(2&d){const T=t.\u0275\u0275reference(27);t.\u0275\u0275advance(31),t.\u0275\u0275property("ngModel",_.formData.firstName),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.lastName),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.phoneNumber)("inputMask",_.phoneNumberInputMask),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.email),t.\u0275\u0275advance(6),t.\u0275\u0275property("options",_.options)("ngModel",_.formData.sessionFullStreetAddress),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.confirm),t.\u0275\u0275advance(10),t.\u0275\u0275property("disabled",!T.form.valid)}},dependencies:[cp,ep,wd,Df,ng,dp,ag,lp,Ed,On.GooglePlaceDirective,Gy,Qn,wn,fi],styles:[".first-section[_ngcontent-%COMP%], .second-section[_ngcontent-%COMP%]{padding:100px 0}.fifth-section[_ngcontent-%COMP%]{background:#e72113;color:#fff}.pac-container[_ngcontent-%COMP%]{z-index:1060!important}.fifth-section[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{color:#000!important}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#ffdd05!important}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{border:2px solid gray}.summary-review[_ngcontent-%COMP%]{background-color:#bee4e0;padding:10px 0}.summary-row.overview[_ngcontent-%COMP%]{background-color:#bee4e0;padding:.5rem;margin-bottom:1rem;font-family:IBM Plex Sans,sans-serif;line-height:.9}.summary-row.overview[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#197d7b;font-size:.875rem}.summary-row.overview[_ngcontent-%COMP%]   .grey[_ngcontent-%COMP%]{color:#514d4d;font-weight:600}.summary-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1px .5rem;border-radius:6px}.summary-row.total[_ngcontent-%COMP%]{margin-bottom:.5rem}.summary-row[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:8px}.summary-row[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{flex:1;margin:3px 7px 3px 0;border-radius:.5rem;background-color:#ececec}.summary-row[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background-color:#19a39a}.summary-row[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .summary-row[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{height:1rem;border-radius:.5rem}.summary-row[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{flex:0 0 1.75rem;text-align:right;font-size:.875rem;font-weight:700;color:#19a39a}.summary-row.filtered[_ngcontent-%COMP%]{background-color:#8fd7d4}.summary-row.filtered[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background-color:#fff}.summary-row.filtered[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background-color:#ee3e33}.summary-row.filtered[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{color:#000}.rating-period[_ngcontent-%COMP%]{font-size:.625rem;font-family:IBM Plex Sans,sans-serif}@media print,screen and (min-width: 48em){.summary-row.overview[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem}.grey[_ngcontent-%COMP%]{font-size:1rem}.summary-row[_ngcontent-%COMP%]{font-size:1.25rem}.summary-row[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{flex-basis:170px;margin-right:28px}.summary-row[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.summary-row[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{flex-basis:2.5rem;font-size:1.25rem}.rating-period[_ngcontent-%COMP%]{font-size:.825rem}}"]})}return l})(),ob=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-experience-and-test"]],decls:126,vars:0,consts:[["heading","The industry leaders in cash home buying","subheading","You can trust that our offers won't come with hidden fees."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"third-section","bg-light"],[1,"fourth-section"],["href","https://realestate.usnews.com/real-estate/articles/what-you-need-to-know-about-those-companies-that-buy-houses","target","_blank"],["href","home-buyers-still-open","target","_blank"],[1,"fifth-section","bg-light"],[1,"row","g-4"],[1,"col-lg-2","col-12"],["src","../../../assets/images/why-sell-to-us/experience-and-trust/quote.svg","width","100%","alt",""],[1,"col-lg-10","col-12"],[1,"sixth-section"],["href","selling-your-house","target","_blank"],[1,"seventh-section","bg-light"],["href","selling-your-house/personal-touch","target","_blank"],["href","how-does-it-work","target","_blank"],["href","selling-your-house/reviews","target","_blank"],["href","questions-about-selling-your-home","target","_blank"],["href","contact","target","_blank"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),t.\u0275\u0275text(7,"Experience matters when selling your house fast."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p"),t.\u0275\u0275text(9,"When you need or want to sell a house fast, things can get stressful, emotional, and sometimes frustrating. You can begin to think things like: "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p")(11,"i"),t.\u0275\u0275text(12,'"Has the real estate agent handled a situation like mine?"'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"p")(14,"i"),t.\u0275\u0275text(15,'"Will I get the price they say I\'ll get?"'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(16,"p")(17,"i"),t.\u0275\u0275text(18,'"How long will I wait for this house to actually sell?"'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"p"),t.\u0275\u0275text(20,'At Michael the Home Buyer\xae, we know the feeling. Since 2014, we\u2019ve been helping homeowners every day escape these worries and more by purchasing houses "as is" for cash. Unlike other companies that buy houses, we buy houses in almost any condition. Having bought over 2,500 houses, we\u2019ve seen it all and know how to handle every situation. '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"p"),t.\u0275\u0275text(22,"You can trust our fair offer. We don\u2019t charge\u202fcommissions and\u202fpay typical closing costs. We are among the most trustworthy cash buyers of homes. Every month, hundreds of sellers trust us to get them cash quickly, sometimes in as little as 3 weeks. Plus, we are by your side every step of the way. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(23,"app-reviews-carousal"),t.\u0275\u0275elementStart(24,"section",6)(25,"div",2)(26,"div",3)(27,"div",4)(28,"h2",5),t.\u0275\u0275text(29,"Canada's #1 cash home buyer"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"p"),t.\u0275\u0275text(31,"Every day, homeowners trust us to make fast and fair cash offers\u2014and we come through. We buy homes fast. We have long-lasting relationships with lenders, making financing easy. Our free, no-obligation consultations are held at your house so we can visit your property and possibly make a fair cash offer. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"p"),t.\u0275\u0275text(33,"We strive to provide a personalised, hassle-free process. Selling a house is a major life decision with many details, choices, and things to consider. When we\u2019re working with seniors, we encourage them to have family members or friends join the conversation and ask questions during our visit and throughout every step along the way. We understand it\u2019s important to have support and guidance from loved ones throughout the process."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"p"),t.\u0275\u0275text(35,"If the sale is complicated or if it makes the homeowner more comfortable, we\u2019re also happy to include whatever type of advisor the seller wishes to have present so that we can answer any questions they might have at our initial meeting, or at any time during the sale. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(36,"section",7)(37,"div",2)(38,"div",3)(39,"div",4)(40,"h2",5),t.\u0275\u0275text(41,"For a fast cash offer, who should you trust?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"p"),t.\u0275\u0275text(43,"Other companies may call or email you with an instant offer to buy your house. Of course, they often lower their price once they actually see your home. They usually ask you to make concessions or pay for repairs. Why waste time with all that back and forth? Instead, you could work with us, "),t.\u0275\u0275elementStart(44,"a",8),t.\u0275\u0275text(45," one of the nation's most recognizable home buyers "),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(46,", according to the US News. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"p"),t.\u0275\u0275text(48,"We prefer a simple and straightforward process. We always "),t.\u0275\u0275elementStart(49,"a",9),t.\u0275\u0275text(50,"visit in person"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(51," and look at your home before we make an offer. We buy houses in almost any condition. Since 2014, home sellers have trusted our fair cash offers. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"p"),t.\u0275\u0275text(53,"Would you make an offer on a home you\u2019ve never even seen? Of course not. So why should you trust someone who would? We buy houses we\u2019ve seen and don\u2019t give offers on houses we haven\u2019t. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(54,"section",10)(55,"div",2)(56,"div",11)(57,"div",12),t.\u0275\u0275element(58,"img",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"div",14)(60,"h3",5),t.\u0275\u0275text(61,"The rental property I had needed a lot of work. When Michael the Home Buyer offered a fair price and I found out I could make some money, I was thrilled. They made it easy. Michael the Home Buyer was great."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"h5"),t.\u0275\u0275text(63,"-Angela W., Oklahoma City, OK"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(64,"section",15)(65,"div",2)(66,"div",3)(67,"div",4)(68,"h2",5),t.\u0275\u0275text(69,"Seven reasons to trust Michael the Home Buyer\xae"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(70,"p"),t.\u0275\u0275text(71,"You want to "),t.\u0275\u0275elementStart(72,"a",16),t.\u0275\u0275text(73,"sell your house fast for cash"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(74,". Here are seven things you can count on from Michael the Home Buyer: "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(75,"ol")(76,"li")(77,"p"),t.\u0275\u0275text(78,"We visit your home before ever making an offer. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(79,"li")(80,"p"),t.\u0275\u0275text(81,"You\u2019ll have personal access to a Michael the Home Buyer property specialist who lives in your area. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(82,"li")(83,"p"),t.\u0275\u0275text(84,"We can make a fair cash offer that you can trust."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(85,"li")(86,"p"),t.\u0275\u0275text(87,"We purchase houses with cash."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(88,"li")(89,"p"),t.\u0275\u0275text(90,"With over 2,500 houses purchased, we\u2019re experienced in resolving almost every type of unexpected obstacle and situation imaginable. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(91,"li")(92,"p"),t.\u0275\u0275text(93,"We can close quickly, often in as little as 3 weeks, or later if that\u2019s better for you. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(94,"li")(95,"p"),t.\u0275\u0275text(96,"When we close, you won\u2019t pay any commissions or hidden fees. "),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(97,"section",17)(98,"div",2)(99,"div",3)(100,"div",4)(101,"h2",5),t.\u0275\u0275text(102,"Want to know more about what makes Micheal the Home Buyer\xae a great selling experience?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(103,"p"),t.\u0275\u0275text(104,"Read about our process,\u202f"),t.\u0275\u0275elementStart(105,"a",18),t.\u0275\u0275text(106,"personal touch"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(107,", and "),t.\u0275\u0275elementStart(108,"a",19),t.\u0275\u0275text(109,"how we do what we do"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(110,". Want more proof? Read "),t.\u0275\u0275elementStart(111,"a",20),t.\u0275\u0275text(112,"\u202ftestimonials"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(113," from satisfied customers across the U.S. about how we make it easy to "),t.\u0275\u0275elementStart(114,"a",16),t.\u0275\u0275text(115,"\u202fsell your house fast"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(116,"."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(117,"p"),t.\u0275\u0275text(118,"If you still have questions, we may have the answers you are looking for in our "),t.\u0275\u0275elementStart(119,"a",21),t.\u0275\u0275text(120,"\u202fFAQs"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(121," section. Or, feel free to "),t.\u0275\u0275elementStart(122,"a",22),t.\u0275\u0275text(123,"contact us"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(124," if you need to\u202fsell your home fast. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(125,"app-footer"))},dependencies:[Qn,wn,fi,Oi],styles:[".first-section[_ngcontent-%COMP%], .third-section[_ngcontent-%COMP%], .fourth-section[_ngcontent-%COMP%]{padding:100px 0}.fourth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.fourth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.fifth-section[_ngcontent-%COMP%]{padding:100px 0}@media only screen and (max-width: 992px){.fifth-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}}.sixth-section[_ngcontent-%COMP%]{padding:100px 0}.sixth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.sixth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.seventh-section[_ngcontent-%COMP%]{padding:100px 0}.seventh-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.seventh-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return l})(),sb=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-personal-touch"]],decls:79,vars:0,consts:[["heading","We're with you every step of your home sale.","subheading","Get personalised service when selling your house."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],["href","selling-your-house/reviews","target","_blank"],[1,"fourth-section","bg-light"],[1,"fifth-section"],["href","selling-your-house","target","_blank"],["href","contact","target","_blank"],[1,"sixth-section","bg-light"],[1,"row","g-4"],[1,"col-lg-2","col-12"],["src","../../../assets/images/why-sell-to-us/experience-and-trust/quote.svg","width","100%","alt",""],[1,"col-lg-10","col-12"],[1,"seventh-section"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],[1,"anchor-para"],["href","contact","id","button-vary1",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),t.\u0275\u0275text(7,"Selling Your House Fast and Easy...Done Together."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p"),t.\u0275\u0275text(9,"Selling a home can be a confusing and stressful ordeal when you are just looking to sell your house fast. If unexpected problems like tax liens or probate issues pop up, the stress and frustration can feel overwhelming. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p"),t.\u0275\u0275text(11,"That\u2019s what makes personal service in real estate so important. At Michael the Home Buyer, we\u2019ve helped over 2,500 homeowners through situations just like yours and more. We even expanded our services during the Covid-19 pandemic to include virtual consultations, so we could continue serving you when you need. We understand your situation and, more importantly, we are going to guide you to your fast and easy selling solution. If any obstacles arise, we\u2019re there to help you navigate them, in person. You\u2019re not alone."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"p"),t.\u0275\u0275text(13,'We have a 95%* satisfaction rating with the homeowners that have said "YES" to our fair, all-cash offers. '),t.\u0275\u0275elementStart(14,"a",6),t.\u0275\u0275text(15,"Read more"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(16," in our seller\u2019s own words on how our in-person service makes all the difference. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(17,"app-reviews-carousal"),t.\u0275\u0275elementStart(18,"section",7)(19,"div",2)(20,"div",3)(21,"div",4)(22,"h2"),t.\u0275\u0275text(23,"What Makes An In-Person Offer Better?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"h3",5),t.\u0275\u0275text(25,"We Buy Houses Cash"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"p"),t.\u0275\u0275text(27,'Today, there are buyers who contact you and make a "sight unseen" cash offer for your house. Sure, it sounds convenient and easy. But there\u2019s a problem: when they actually look at your house, the offer often comes down. They see problems. Structural issues. Costly repairs. Wear and tear. That\u2019s when they lower their price or ask you to pay for repairs.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(28,"p"),t.\u0275\u0275text(29,"At Michael the Home Buyer, we never make offers without seeing your house first. We visit you and your house in person. Or make a virtual visit. We can make a fair cash offer that you can trust."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"p")(31,"i"),t.\u0275\u0275text(32,"Remember: The in-person offer is the one that really counts. And that\u2019s the only kind we make."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(33,"section",8)(34,"div",2)(35,"div",3)(36,"div",4)(37,"h2"),t.\u0275\u0275text(38,"Your Buyer Is Closer Than You Think."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"h3",5),t.\u0275\u0275text(40,"We Buy Homes Fast & For Cash"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"p"),t.\u0275\u0275text(42,"Your independent Michael the Home Buyer\xae property specialist is locally based, living and working near you. He or she knows your town and knows the local market. And, most of all, they are right down the road; ready to come over and help you out\u2026 in person."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"p"),t.\u0275\u0275text(44,"We pass each other in the grocery store. Our kids go to the same schools. We cheer for the same teams. We are neighbours and we will always treat you ethically, and will work hard to help resolve your situation. Plus, because our Michael the Home Buyer\xae representatives are local, they have the knowledge needed to make a fair, all cash offer "),t.\u0275\u0275elementStart(45,"a",9),t.\u0275\u0275text(46,"when you need to sell your home fast "),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(47,". To meet your local Michael the Home Buyer\xae property specialist, "),t.\u0275\u0275elementStart(48,"a",10),t.\u0275\u0275text(49,"just fill out this short form"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(50,". A fast cash offer is a lot closer than you realise."),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(51,"section",11)(52,"div",2)(53,"div",12)(54,"div",13),t.\u0275\u0275element(55,"img",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"div",15)(57,"h3",5),t.\u0275\u0275text(58,"There were a lot of companies I could have sold to, but no one would have treated my family as well as your whole office has. Michael the Home Buyer allowed me two extra days to remove my belongings with no problems. They understood moving is a rough experience."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"h5"),t.\u0275\u0275text(60,"-Misty P., Hampton, VA"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(61,"section",16)(62,"div",2)(63,"div",17)(64,"div",18)(65,"div",19)(66,"h2"),t.\u0275\u0275text(67,"We're all about honesty and transparency."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(68,"div",20)(69,"div",21)(70,"div",22)(71,"p"),t.\u0275\u0275text(72,"Let\u2019s get started for free today with the cash home buyer you can "),t.\u0275\u0275elementStart(73,"a",9),t.\u0275\u0275text(74,"trust to sell your home"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(75,". No obligation and no pressure. Just a quick visit to your house and we can then make you a fair cash offer on the spot!"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(76,"a",23),t.\u0275\u0275text(77,"Contact Us Today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(78,"app-footer"))},dependencies:[Qn,wn,fi,Oi],styles:[".first-section[_ngcontent-%COMP%]{padding:100px 0}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.third-section[_ngcontent-%COMP%], .fourth-section[_ngcontent-%COMP%], .fifth-section[_ngcontent-%COMP%]{padding:100px 0}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.sixth-section[_ngcontent-%COMP%]{padding:100px 0}@media only screen and (max-width: 992px){.sixth-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}}.seventh-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.seventh-section[_ngcontent-%COMP%]   .anchor-para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#ffdd05!important}.seventh-section[_ngcontent-%COMP%]   .anchor-para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return l})(),ab=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-terms-of-service"]],decls:52,vars:0,consts:[[1,"intro"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-8","col-12"],[1,"first-section"],[1,"row"],[1,"col-lg-6","col-md-12","col-12"],["href","mailto:info@michaelthehomebuyer.ca"],["href","tel:18889869883"],["href","privacy-policy","target","_blank"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1"),t.\u0275\u0275text(6,"Mobile Terms of Service"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(7,"section",4)(8,"div",1)(9,"div",5)(10,"div",6)(11,"p"),t.\u0275\u0275text(12,'Michael the Home Buyer of Canada, Inc. (\u201cMichael the Home Buyer\u201d) provides the following terms and conditions ("Mobile Terms of Service") that will govern communications between you and Michael the Home Buyer and any resulting transactions, all of which are also subject to Michael the Home Buyer Terms of Use and Privacy Policies available on its websites and mobile apps, including michaelthehomebuyer.ca, ibuyuglyhouse.ca (collectively, \u201cWebsites\u201d; and individually, "Website"). Michael the Home Buyer provides numerous services, including those referenced on the Websites (\u201cServices\u201d). These Mobile Terms of Service are in supplementation of those other policies and relate to features unique to communications on a mobile phone, particularly involving use of a five- or six-digit number referred to as a Short Code and short message services (\u201cSMS\u201d). '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"p"),t.\u0275\u0275text(14,"BY COMMUNICATING WITH MICHAEL THE HOME BUYER OR USING ANY WEBSITE, MOBILE APP, SERVICE, SHORT CODE OR SMS SERVICE OF MICHAEL THE HOME BUYER, YOU AGREE TO ABIDE BY THESE MOBILE TERMS OF SERVICE BETWEEN YOU AND MICHAEL THE HOME BUYER, WHICH INCLUDE THE REFERENCED WEBSITE TERMS OF USE AND PRIVACY POLICY (\u201cAGREEMENT\u201d). IF YOU DO NOT AGREE TO BE BOUND BY THIS AGREEMENT, YOU ARE NOT AUTHORIZED TO USE ANY MICHAEL THE HOME BUYER WEBSITE, TO OBTAIN ANY SERVICES FROM MICHAEL THE HOME BUYER OR TO COMMUNICATE WITH MICHAEL THE HOME BUYER USING A SHORT CODE OR SHORT MESSAGE SERVICES. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"p"),t.\u0275\u0275text(16,"Michael the Home Buyer reserves the right, at its discretion, to revise the terms of this Agreement and/or change, suspend, discontinue or modify any aspect of any the use of a Short Code, a Website, Services or SMS services. Such modifications may include, without limitation, changes in content, in user priorities, and discontinuance of functional aspects of any Short Code or Website. Your continued use of any Short Code, SMS services, Website or Services after the posting of revisions to the Mobile Terms Of Use, or the incorporated Website Terms of Use or Privacy Policies, shall constitute your acceptance to be bound by the express terms of any such revisions."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",6)(18,"p"),t.\u0275\u0275text(19,"Below you will find customer support contact information; and complete opt-out instructions. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"p")(21,"u"),t.\u0275\u0275text(22,"Michael the Home Buyer Mobile Communication Program:"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"ol")(24,"li")(25,"p"),t.\u0275\u0275text(26,"Michael the Home Buyer Mobile Communication Program is a communication platform that allows you to receive information from Michael the Home Buyer about the services offered by our independently owned and operated franchises. Messages can include appointment scheduling, information about the company, and information about our buying Process. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"li")(28,"p"),t.\u0275\u0275text(29,'You can cancel the SMS service and cease receiving mobile communications from Michael the Home Buyer at any time. Just text "STOP" to the short code. After you send the SMS message "STOP" to us, we will send you an SMS message to confirm that you have been unsubscribed. After this, you will no longer receive SMS messages from us. If you want to join again, just sign up as you did the first time and we will start sending SMS messages to you again. '),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"li")(31,"p"),t.\u0275\u0275text(32,"If you are experiencing issues with the messaging program, you can reply with the keyword HELP for more assistance, or you can get help directly by send an e-mail message to: "),t.\u0275\u0275elementStart(33,"a",7),t.\u0275\u0275text(34,"info@michaelthehomebuyer.ca"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(35," or calling us at "),t.\u0275\u0275elementStart(36,"a",8),t.\u0275\u0275text(37,"1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(38,". "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(39,"li")(40,"p"),t.\u0275\u0275text(41,"Carriers are not liable for delayed or undelivered messages. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"li")(43,"p"),t.\u0275\u0275text(44,"As always, message and data rates may apply for any messages sent to you from us and to us from you. Message frequency varies. If you have any questions about your text plan or data plan, it is best to contact your wireless provider. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(45,"li")(46,"p"),t.\u0275\u0275text(47,"If you have any questions regarding privacy, please read our privacy policy: "),t.\u0275\u0275elementStart(48,"a",9),t.\u0275\u0275text(49,"click here"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(50,". "),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275element(51,"app-footer"))},dependencies:[Qn,wn],styles:[".intro[_ngcontent-%COMP%]{background-color:#a81c1c;color:#fff;padding:80px 0}.first-section[_ngcontent-%COMP%]{padding:80px 0}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return l})(),lb=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-privacy-policy"]],decls:155,vars:0,consts:[[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"my-4"],["href","mailto:info@michaelthehomebuyer.ca"],["href","tel:18889869883"],[1,"mt-5"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),t.\u0275\u0275text(6,"Privacy Policy"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p"),t.\u0275\u0275text(8,"This Privacy Policy is part of the Terms of Use and describes how Michael the Home Buyer Home Buyer of Canada, Inc. and our franchisees handle information collected and received from or through our websites, associated applications, including mobile apps, as well as any other source such as social media. This Policy does not govern the activities of any third party. By accepting the Terms of Use you are accepting and agreeing to be bound by this Privacy Policy and consent to our use and disclosure of such information as indicated herein."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"h5"),t.\u0275\u0275text(10,"Collection and Use of Personally Identifying Information"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12,"We collect and use personally identifying information that you provide to us in the course of seeking offerings or information from us. This personally identifying information may include your name, address, e-mail address, contact information, and information about a property you seek to sell."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"p"),t.\u0275\u0275text(14,"We use this information (and other information we collect from you as described in this Policy) for our business purposes, including to contact you, evaluate and value any property you seek to sell, and formulating proposed transactions. We will also seek to match you to a franchisee, send you communications, including from a franchisee, contact you about changes to our Terms of Use and provide transaction related information. We may also communicate with you via text, including communications concerning franchisees. We will also monitor your compliance with our Terms of Use. We may also provide you with offers based upon the information we collect including your location. We may also contact you, or provide your information to a third party to contact you, during and after any initial contact so as to inquire as to your user experience, to provide you with an opportunity to participate in a survey and or to offer you an opportunity to provide feedback as to your user experience. This may include disclosures to a research firm to conduct email, online, phone, text and or zoom surveys to homeowners who contacted us but did not sell their house to us."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"h5"),t.\u0275\u0275text(16,"We do not sell any of the personal information we collect about you to third parties."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"p"),t.\u0275\u0275text(18,"Your personally identifying information will not be shared with any third party, with the following exceptions: A. information that Michael the Home Buyer in good faith determines is legally required to be revealed by any relevant statute, regulation, ordinance, rule, administrative or court order, decree, or subpoena; B. information revealed during the course of Michael the Home Buyer\u2019 enforcement of its policies and procedures, its Terms of Use, the terms of this Policy, the Online User Agreement, or any other agreement with us, or during the course of any disciplinary actions; C. information in a manner expressly permitted by the provisions of this Policy; D. information that Michael the Home Buyer in good faith determines must be disclosed to correct what it believes to be false or misleading information or to address activities that Michael the Home Buyer believes to be manipulative, deceptive or otherwise a violation of law; E. unless you are otherwise notified at the time we collect the data; or F. in connection with a merger, sale, \u200eacquisition, assignment, bankruptcy proceeding, reorganization or other disposition \u200eof some or all \u200easpects of our business or assets."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"p"),t.\u0275\u0275text(20,"We may also share your personal information with third-party non-profit organizations who may be interested in purchasing your home, but only after obtaining your consent to share."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"p"),t.\u0275\u0275text(22,"Within the last twelve (12) months, we have shared each of the categories of personal \u200e\u200einformation collected in connection with this website with affiliates and service providers as set \u200e\u200eforth herein.\u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"p"),t.\u0275\u0275text(24,'"Nonpublic Personal Information" is the nonpublic information about you that is obtained by Michael the Home Buyer from you. Michael the Home Buyer and its advertisers may collect Nonpublic Personal Information from the online forms you complete, from information collected as a result of your transactions with Michael the Home Buyer, our advertisers, or others, and from consumer reporting agencies. Michael the Home Buyer will not disclose any Nonpublic Personal Information except as permitted or required by law or as described in this Policy. We may disclose all of the Nonpublic Personal Information we collect about you, as well as other information collected as described in this Policy, to our affiliates who offer related goods and services, and to non-affiliated third parties that perform services on our behalf, including marketing services, or financial institutions with whom we have joint marketing agreements.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"h5"),t.\u0275\u0275text(26,"Other Information You Provide or Post"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"p"),t.\u0275\u0275text(28,"In addition to the practices described above, we may also use information we collect to, at your election, provide you with information and advertisements about goods and services we believe may be of interest to you. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"p"),t.\u0275\u0275text(30,"You may provide us with testimonials about your experience with us (including a picture of yourself), and with feedback about our services. We may use any such information you provide to enhance our services and for public-facing marketing purposes, such as through online or public display of your testimonial, feedback, and/or picture. We may also incorporate information you provide through messages, e-mails, or other means (though not your personally identifying information) into our materials or offerings."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"h5"),t.\u0275\u0275text(32,"Accessing the Websites and Information Collection"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"p"),t.\u0275\u0275text(34,"When you access the Websites without actively providing any personal information we collect limited technical information, such as your IP address. We also use cookies as described below."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"p"),t.\u0275\u0275text(36,"As a registered user, we collect information about your use of the Websites including homes viewed, photos viewed, pages visited, information about your location and preferences for offerings. We will maintain your login information."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"p"),t.\u0275\u0275text(38,"Records of your use of the Websites are the sole property of Michael the Home Buyer. Michael the Home Buyer reserves the right to use such information for its marketing, franchising, and membership endeavors."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"h5"),t.\u0275\u0275text(40,"Cookies"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"p"),t.\u0275\u0275text(42,"We, like most major websites, use cookies (text files placed on your hard drive by a web server) to help personalize and maximize your experience and time online. Cookies are not used to run programs or deliver viruses to your computer. They are uniquely assigned to your computer and can only be read by a web server in the domain that issued the cookie to you. We use cookies to improve the Websites and to facilitate your use of the Websites."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"h5"),t.\u0275\u0275text(44,"Location-Based Services"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(45,"p"),t.\u0275\u0275text(46,"To provide location-based services, it may be necessary to collect, use, and share precise location data, including the real-time geographic location of your computer or device. Where available, location-based services may use GPS, Bluetooth, and your IP Address, along with crowd-sourced Wi-Fi hotspot and cell tower locations, and other technologies to determine the location of your device. Unless you provide consent, such location data is collected anonymously in a form that does not personally identify you and is used to provide location-based services."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"p"),t.\u0275\u0275text(48,"For example, your device may share its geographic location with a Service that selects and displays properties relative to the location of your device. Some location-based services may require your personal information for the service to be provided."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"h5"),t.\u0275\u0275text(50,"Links"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(51,"p"),t.\u0275\u0275text(52,"The Websites contain links to other websites. Michael the Home Buyer is not responsible for the privacy practices of sites other than our own. We encourage you to be aware of the privacy statements on other websites and to read those statements."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"h5"),t.\u0275\u0275text(54,"Protection of Information"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(55,"p"),t.\u0275\u0275text(56,"Some areas of the Websites are secured and can only be accessed using unique login credentials. You must have a specific user identifier (user ID) and password to access resources through any password-protected portions of the Websites. Your login credentials and password are for your use only and strictly confidential. You are responsible for maintaining the confidentiality and security of those credentials, and are responsible for all activity occurring on the Websites using your login credentials and password. You are strictly prohibited from any sharing of your login credentials and/or password with any other person(s) and from any use of your login credentials other than for your use of the Websites in compliance with the Online User Agreement."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(57,"h5"),t.\u0275\u0275text(58,"Third-Party Data Collection/Online Tracking"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"p"),t.\u0275\u0275text(60,"We use service providers such as Google Analytics to help us understand and improve the usage of the Websites and the effectiveness of our marketing efforts. We, Google Analytics, and/or our other analytics providers may use cookies, your IP address or an anonymous identifier as well as certain information from your browser, together with other non-personal information about your visits to the Websites (this may include information like page views and visit times; app store views; app downloads; user engagement information like active devices and location; app crashes; and behavior metrics) and other websites, so that we, Google Analytics, or third parties may improve the Websites and provide you with advertisements about goods and services of interest to you on the Websites and other websites (including through search engine results pages) and/or to provide analytical information about our Websites. If you would like more information about advertising networks, including choices about the use of information by Google Analytics and other companies for multi-site advertising purposes, go to www.networkadvertising.org and www.networkadvertising.org/choices/. Also, Google offers a Google Analytics browser add-on (designed to be compatible only with certain browsers) to provide website visitors the ability to prevent their data from being collected and used by Google Analytics. That add-on may be obtained here."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(61,"p"),t.\u0275\u0275text(62,'Currently, various Internet browsers offer a "do not track" or "DNT" option that uses a DNT header to indicate the DNT preference setting on the browser. Michael the Home Buyer does not track your activity over time and across different websites or online services other than as set forth herein, and we do not currently respond to browsers\u2019 DNT signals with respect to the Websites. We do not permit our third-party service providers to collect information from the Websites for other websites or for their own purposes other than as described in this Policy.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(63,"h5"),t.\u0275\u0275text(64,"Social Media; Third-Party Applications"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"p"),t.\u0275\u0275text(66,"The collection and use of information on social media websites and applications are governed by their own privacy policies and terms. Please remember that any information posted on or through the Michael the Home Buyer pages such as Facebook, Twitter, Google+, or on other social media pages or channels, is subject to the policies and practices of the applicable social media channel."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(67,"p"),t.\u0275\u0275text(68,'We may receive personal information from a social media site platform or application when you connect through a social media feed, post content, or otherwise interact with us using social media tools. For example, we may receive basic Facebook account information (name, e\u2011mail, gender, birthday, current city, and profile picture URL) through Facebook. Also, when you "like" us, or send a "Tweet" to us through a social media channel, we may receive your username, handle, and any other available personal information from the social media site or application. All information received from social media sites and applications is treated and used in the same manner and for the same purposes as described in this Policy with respect to similar information we obtain through the Site.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(69,"h5"),t.\u0275\u0275text(70,"Children\u2019s Privacy"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(71,"p"),t.\u0275\u0275text(72,"We are committed to complying with all applicable laws and regulations regarding the collection, storage, and use of personal information of minors under the age of 18, including the Children\u2019s Online Privacy Protection Act of 1998."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(73,"p"),t.\u0275\u0275text(74,"We do not collect personal information from minors under the age of 18. Individuals under the age of 18 are not permitted to use the Websites without the supervision of a parent or legal guardian. We do not knowingly collect or solicit personal information from children under the age of 18 or knowingly allow such persons to register for an online account or to place orders or provide personal information through the Websites. If we learn that someone under the age of 18 has provided any personal information through the Websites, we will remove and permanently delete that information as soon as reasonably possible."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(75,"p"),t.\u0275\u0275text(76,"If you are a parent or guardian who believes that your minor under the age of 18 has submitted personal information or other information to us without your consent, please contact us using the contact information provided below. Once we verify that you are the parent or legal guardian, we will cooperate with you to discuss what, if any, personal information we have collected about your child and how that information may have been shared or used."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(77,"h5"),t.\u0275\u0275text(78,"Changes to This Statement"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(79,"p"),t.\u0275\u0275text(80,"Michael the Home Buyer reserves the right to change this Privacy Policy at any time. Notification of changes will be posted on the Websites. Because these changes may affect your personal information, we suggest that you look for information regarding changes on a regular basis and review the changes as soon as they are published on the website."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(81,"h5"),t.\u0275\u0275text(82,"Disclosures for Compliance with Law"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(83,"p"),t.\u0275\u0275text(84,"Notwithstanding the provisions of this Privacy Policy or the Online User Agreement, information may be and will be disclosed as needed in order to comply with law, respond to facially valid process or subpoena, to stop or mitigate illegal activity or potential harm, to protect the security of information, and to protect against fraud."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(85,"h5"),t.\u0275\u0275text(86,"Maintenance of Information Collected"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(87,"p"),t.\u0275\u0275text(88,"We may maintain the information that we collect indefinitely or may delete it at any time in our sole discretion."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(89,"h5"),t.\u0275\u0275text(90,"Security"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(91,"p"),t.\u0275\u0275text(92,"We employ reasonable security methods to prevent unauthorized access, maintain data accuracy, and ensure correct use of your information. We maintain organizational, technical and administrative measures designed to protect your information against unauthorized access, loss, alteration or misuse. However, no data transmission over the Internet or any wireless network can be guaranteed to be perfectly secure. As a result, while we try to protect your information, we cannot ensure or guarantee the security of any information you transmit to us, and you do so at your own risk."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(93,"h5"),t.\u0275\u0275text(94,"Jurisdiction-specific Provisions and New Laws"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"p"),t.\u0275\u0275text(96,'This Privacy Policy is intended to comply with all legal requirements including the requirements of any jurisdiction having unique laws regarding the collection and use of personal data \u200e(e.g., the California Consumer Privacy Act or "CCPA")\u200e. Should you be a resident of any such jurisdiction, this policy is hereby deemed to be amended as appropriate to comply with any such laws. Moreover, to the extent there is any conflict with this Privacy Policy and any \u200eand all privacy requirements under the law, including the CCPA and laws that may be enacted after this policy has been updated, this Privacy Policy is to be \u200edeemed amended and updated to conform with any and all such legal requirements.\u200e'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(97,"h5"),t.\u0275\u0275text(98,"How do we keep your personal information secure?\u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(99,"p"),t.\u0275\u0275text(100,"We have implemented reasonable safeguards to protect your personal information from unauthorized access and improper use."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(101,"p"),t.\u0275\u0275text(102,"If the CCPA applies to you, then you have the following additional rights:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(103,"p"),t.\u0275\u0275text(104,"Deletion Rights: You have the right to request that we delete any of your personal information \u200ethat we retain, subject to certain legal exceptions, such as U.S., state, local and non-U.S. laws, rules and regulations."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(105,"p"),t.\u0275\u0275text(106,"Disclosure and Access Rights: You have the right to request that we disclose to you certain \u200einformation regarding our collection and use of personal information specific to you over the last \u200etwelve (12) months. Such information includes:\u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(107,"ul")(108,"li")(109,"p"),t.\u0275\u0275text(110,"the categories of personal information we collected about you;"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(111,"li")(112,"p"),t.\u0275\u0275text(113,"the categories of sources from which the personal information is collected;\u200e"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(114,"li")(115,"p"),t.\u0275\u0275text(116,"our business or commercial purpose for collecting such personal information;\u200e"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(117,"li")(118,"p"),t.\u0275\u0275text(119,"the categories of third parties with whom we share the personal information;\u200e"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(120,"li")(121,"p"),t.\u0275\u0275text(122,"the specific pieces of personal information we have collected about you; and\u200e"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(123,"li")(124,"p"),t.\u0275\u0275text(125,"whether we disclosed your personal information to a third party, and, if yes, the categories of \u200epersonal information that each recipient obtained.\u200e"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(126,"p"),t.\u0275\u0275text(127,"No Discrimination: We will not discriminate against you for exercising your rights under the \u200eCCPA, including by denying service, suggesting that you will receive, or charging, different rates \u200efor services or suggesting that you will receive, or providing, a different level or quality of service \u200eto you.\u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(128,"p"),t.\u0275\u0275text(129,"How to Exercise Your Rights: To exercise any of your rights under the CCPA, or to access this \u200enotice in an alternative format, please submit a request on your behalf using any of the methods \u200eset forth in the Contact Us section below. \u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(130,"p"),t.\u0275\u0275text(131,"For any requests relating to the exercise of your rights under this Privacy Policy, including the CCPA, or questions regarding \u200eour processing of your personal information, please submit or have your authorized representative \u200esubmit a request using any of the methods set forth below. \u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(132,"p"),t.\u0275\u0275text(133,"We will contact you to confirm receipt of your request, including under the CCPA and request any \u200eadditional information necessary to verify your request. We verify requests by matching \u200einformation provided in connection with your request to information contained in our records. \u200eDepending on the sensitivity of the request and the varying levels of risk in responding to such \u200erequests (for example, the risk of responding to fraudulent or malicious requests), we may request \u200efurther information or your investor portal access credentials, if applicable, in order to verify your \u200erequest. You may designate an authorized agent to make a request under the CCPA on your \u200ebehalf, provided that you provide a signed agreement verifying such authorized agent\u2019s authority \u200eto make requests on your behalf, and we may verify such authorized person\u2019s identity using the \u200eprocedures above.\u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(134,"p"),t.\u0275\u0275text(135,"We will respond to a consumer request within forty-five (45) days of our receipt thereof.\u200e We will notify you in \u200ewriting if we cannot comply with the request and provide an \u200e\u200eexplanation of the reasons. \u200e"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(136,"h5"),t.\u0275\u0275text(137,"Contacting Us And Correcting Your Information"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(138,"p"),t.\u0275\u0275text(139,"Please contact us with any questions including with any questions as to the correctness of the information that we collect and maintain. We strive to assure the correctness of the information we maintain. If the information we have about you is inaccurate, we will correct the information in a manner as timely as possible. To contact us, including to provide us with corrections, please do so in any of the following ways: "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(140,"ul")(141,"li")(142,"p"),t.\u0275\u0275text(143,"Send an e-mail message with corrections to: "),t.\u0275\u0275elementStart(144,"a",5),t.\u0275\u0275text(145,"info@michaelthehomebuyer.ca"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(146,"li")(147,"p"),t.\u0275\u0275text(148,"Call us at "),t.\u0275\u0275elementStart(149,"a",6),t.\u0275\u0275text(150,"1 (888) 986-9883"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(151,"div",7)(152,"h5"),t.\u0275\u0275text(153,"\xa9 2023 Michael the Home Buyer of Canada, Inc. All rights reserved."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275element(154,"app-footer"))},dependencies:[Qn,wn],styles:[".first-section[_ngcontent-%COMP%]{padding:80px 0}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return l})(),H0=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-terms-of-use"]],decls:149,vars:0,consts:[[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"my-4"],[1,"mt-5"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),t.\u0275\u0275text(6,"Terms of Use"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p"),t.\u0275\u0275text(8,'BY USING ANY WEBSITE, MOBILE APP OR SERVICE OF MICHAEL THE HOME BUYER OF CANADA, INC. ("MICHAEL THE HOME BUYER") YOU AGREE TO ABIDE BY THESE TERMS OF USE BETWEEN YOU AND MICHAEL THE HOME BUYER, WHICH INCLUDE THE REFERENCED PRIVACY POLICY ("AGREEMENT"). IF YOU DO NOT AGREE TO BE BOUND BY THIS AGREEMENT, YOU ARE NOT AUTHORIZED TO USE ANY MICHAEL THE HOME BUYER WEBSITE OR TO OBTAIN ANY SERVICES FROM MICHAEL THE HOME BUYER.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"p"),t.\u0275\u0275text(10,'The Michael the Home Buyer websites and mobile apps include Michael the Home Buyer.com, WeBuyUglyHouses.com, and Michael the Home BuyerFranchise.com (collectively, "Websites"; and individually, "Website"). Michael the Home Buyer provides numerous services, including as referenced on the Websites ("Services").'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12,"Michael the Home Buyer reserves the right, at its discretion, to revise the terms of this Agreement and/or change, suspend, discontinue or modify any aspect of any Website. Such modifications may include, without limitation, changes in content, in user priorities, and discontinuance of functional aspects of any Website. Your continued use of any Website after the posting of revisions to the Terms Of Use shall constitute your acceptance to be bound by the express terms of any such revisions."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"ol")(14,"li")(15,"p"),t.\u0275\u0275text(16,"CERTIFICATION OF USER."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"p"),t.\u0275\u0275text(18,"By using or attempting to use this Website, you certify to Michael the Home Buyer that you are a resident of the United States or otherwise authorized to conduct business in the United States, are at least 18 years of age or older and have the legal capacity to enter into this Agreement."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"li")(20,"p"),t.\u0275\u0275text(21,"CONTENT AND REGISTRATION."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"p"),t.\u0275\u0275text(23,'2.1 The Website content shall mean all areas and aspects of the Website and Services including, without limitation, text, data, photos, graphics and/or video or any information whatsoever obtained through the Website (collectively referred to herein as "Information"), Michael the Home Buyer\u2019 computers or network and any subscription or software, product, service, or information provided by Michael the Home Buyer.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"p"),t.\u0275\u0275text(25,'2.2 Vendor Content. Michael the Home Buyer has entered into contractual relationships with certain vendors, sponsors, and advertisers of products or services ("Vendors"), pursuant to which Michael the Home Buyer may link to or display information, advertisements, discounts, products, goods, or services offered by the Vendors ("Vendor Content"). Michael the Home Buyer does not guarantee the availability or accuracy of any such Vendor Content or offers, nor does it endorse, guarantee nor insure any Vendor products or services.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"p"),t.\u0275\u0275text(27,"2.3 Michael the Home Buyer shall not be held liable, directly or indirectly, for any loss or damage caused by your use of: (a) any external site linked to the Service, (b) Vendor Information, or (c) Vendor products or services. Statements made on the Service Area concerning the products or services of Michael the Home Buyer do not constitute an offer, but are merely solicitations of an offer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(28,"p"),t.\u0275\u0275text(29,"2.4 Registration. You may browse and view certain content on the Website without registering, but as a condition to using certain other aspects of the Website or accessing certain services, you may be required to register and select a user identification and password. You agree to maintain the confidentiality of such registration information, be the sole user of such registration and use your registration solely to access the Website and to obtain Services. Michael the Home Buyer reserves the right to monitor your use of the registration and to discontinue you it at any time in Michael the Home Buyer sole discretion. If you believe that your registration has been compromised, you must promptly change your registration information and notify us immediately."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"li")(31,"p"),t.\u0275\u0275text(32,"LIMITATIONS ON USE AND USER SUBMISSIONS."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"p"),t.\u0275\u0275text(34,"3.1 Copyright, Patent and Trademark Notice. All content of the Website provided by Michael the Home Buyer, including, but not limited to, all text, photos, graphics, audio, software, webpage layouts or configurations, presentations in any format and/or video is copyrighted by Michael the Home Buyer of Canada, Inc., or its affiliates or subsidiaries. Copyright \xa9 2013-2019 Michael the Home Buyer of Canada, Inc. All rights reserved. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"p"),t.\u0275\u0275text(36,'No portion of the Content or other materials may be directly or indirectly copied, published, reproduced, modified, performed, displayed, sold, transmitted, published, broadcast, rewritten for broadcast or publication or redistributed in any medium, whether now known or hereafter created. The foregoing prohibition includes, but is not limited to "screen scraping" or "database scraping" to obtain lists of users or other Information. Nor may any portion of the Information or other materials be stored in a computer or distributed over any network, except that you may download or print one copy of pages strictly for personal and non-commercial use; however, any print out of any page of the Website or portion thereof, must include Michael the Home Buyer\u2019 copyright notice.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"p"),t.\u0275\u0275text(38,"Michael the Home Buyer, and its associated logos, page headers, custom graphics, buttons, and other icons are service marks, trademarks, registered service marks, registered trademarks, and/or trade dress of Michael the Home Buyer. All other content product names and company logos are trademarks of their respective owners. Neither these materials, nor any portion thereof, may be stored in a computer except as reasonably necessary for personal and non-commercial use; however, any print out of any page of the Website or portion thereof, must include Michael the Home Buyer\u2019 copyright notice and/or trademark registration notice as appropriate."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"p"),t.\u0275\u0275text(40,"3.2 Notice of Copyright Infringement. Michael the Home Buyer respects the copyrights of others. Michael the Home Buyer reserves the right, but not the obligation, to terminate your license to use the Services if it determines in its sole and absolute discretion that you are involved in infringing activity, including alleged acts of first-time or repeat infringement, regardless of whether the material or activity is ultimately determined to be infringing. Michael the Home Buyer has implemented procedures for receiving written notification of claimed infringements. If you believe that your copyrighted work has been reproduced on the Website in a way that constitutes copyright infringement you may notify our designated copyright agent, Charles E. Phipps, Locke Lord LLP, J.P. Morgan Chase Tower, 2200 Ross Avenue, Suite 2800, Dallas, Texas 75201, or by e-mail at cphipps@lockelord.com."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"p"),t.\u0275\u0275text(42,"3.3. Restricted Use. You agree to use the Service Area and Information for lawful purposes only. You agree not to post or transmit any information through the Service Area which: (a) infringes any patent, trademark or copyright rights of others or violates their privacy or publicity rights, (b) is unlawful, threatening, abusive, defamatory, libelous, vulgar, obscene, profane, indecent or otherwise objectionable, or (c) is protected by patent, copyright, trademark or other proprietary right without the express permission of the owner of such right. You shall be solely liable for any damages resulting from any infringement of patent, copyright, trademark or other proprietary rights, or any other harm resulting from your use of the Service."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"p"),t.\u0275\u0275text(44,"3.4. Your Submission of Messages. You hereby grant to Michael the Home Buyer a worldwide, royalty-free, perpetual, irrevocable, non-exclusive right and license to use, reproduce, modify, adapt, publish, translate, create derivative works from, distribute, perform, display and use for any purpose all messages or other materials posted by you on the Service or any e-mail sent by you to Michael the Home Buyer (in whole or in part) and to incorporate any such messages or other materials or e-mails in any form, into other media or technology whether now known or hereafter developed."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(45,"p"),t.\u0275\u0275text(46,'3.5. Public messages. All electronic forums made available to users of the Service are the sole property of Michael the Home Buyer and are not a public forum. You understand and acknowledge that all information, data, files, software, music, sound, photographs, graphics, video, messages or other materials posted by any person or entity other than Michael the Home Buyer ("Third-Party Content"), whether publicly posted or privately transmitted, are the sole responsibility of the person from which such Third-Party Content originated. You assume total liability for all Third-Party Content that you upload, post, email or otherwise transmit via the Service. Michael the Home Buyer assumes no liability for any such Third-Party Content. You agree not to use the Service to:'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"ol")(48,"li"),t.\u0275\u0275text(49," upload, post, e-mail or otherwise transmit any Third-Party Content that is unlawful, harmful, threatening, abusive, harassing, tortious, defamatory, vulgar, obscene, libelous, invasive of another\u2019s privacy, or hateful, or is racially, ethnically or otherwise objectionable; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(50,"li"),t.\u0275\u0275text(51," harm minors in any way; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"li"),t.\u0275\u0275text(53," impersonate any person or entity, including, but not limited to, an official or representative of Michael the Home Buyer, or falsely state or otherwise misrepresent your affiliation with a person or entity; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(54,"li"),t.\u0275\u0275text(55," forge headers or otherwise manipulate identifiers to disguise the origin of any Content transmitted through the Service; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"li"),t.\u0275\u0275text(57," upload, post, e-mail or otherwise transmit any Third-Party Content that you do not have a right to transmit under any law or under contractual or fiduciary relationships (such as inside information, proprietary and confidential information learned or disclosed as part of employment relationships or under nondisclosure agreements); "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"li"),t.\u0275\u0275text(59," upload, post, e-mail or otherwise transmit any Third-Party Content that infringes any patent, trademark, trade secret, copyright or other proprietary rights of any party; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(60,"li"),t.\u0275\u0275text(61,' upload, post, e-mail or otherwise transmit any unsolicited or unauthorized advertising, promotional materials, "junk mail," "spam," "chain letters," "pyramid schemes," or any other form of solicitation; '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"li"),t.\u0275\u0275text(63," upload, post, e-mail or otherwise transmit any material that contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer software or hardware or telecommunications equipment or network; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(64,"li"),t.\u0275\u0275text(65,' disrupt the normal flow of dialogue, cause a screen to "scroll" faster than other users of the Service are able to type, or otherwise act in a manner that negatively affects other users\u2019 ability to engage in real time exchanges; '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(66,"li"),t.\u0275\u0275text(67," interfere with or disrupt the Service or servers or networks connected to the Service, or disobey any requirements, procedures, policies or regulations of networks connected to the Service; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(68,"li"),t.\u0275\u0275text(69," intentionally or unintentionally violate any applicable local, state, national or international law, including, but not limited to, regulations promulgated by the U.S. Securities and Exchange Commission, any rules of any national or other securities exchange, including, without limitation, the New York Stock Exchange, the Canadian Stock Exchange or the NASDAQ, and any regulations having the force of law; "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(70,"li"),t.\u0275\u0275text(71,' "stalk" or otherwise harass another; or '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(72,"li"),t.\u0275\u0275text(73," collect or store personal data about other users. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(74,"p"),t.\u0275\u0275text(75,"You acknowledge that Michael the Home Buyer does not pre-screen Third-Party Content, but that Michael the Home Buyer and its designees shall have the right (but not the obligation) in their sole discretion to refuse or move any Third-Party Content that is available via the Service. Without limiting the foregoing, Michael the Home Buyer and its designees shall have the right to remove any Third-Party Content that violates this Agreement or is otherwise objectionable. You agree that you must evaluate, and bear all risks associated with, the use of any Third-Party Content, including any reliance on the accuracy, completeness, or usefulness of such Third-Party Content."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(76,"p"),t.\u0275\u0275text(77,"You acknowledge and agree that Michael the Home Buyer may preserve Third-Party Content and may also disclose Third-Party Content if required to do so by law or in the good faith belief that such preservation or disclosure is reasonably necessary to: (a) comply with legal process; (b) enforce this Agreement; (c) respond to claims that any Third-Party Content violates the rights of other third-parties; or (d) protect the rights, property, or personal safety of Michael the Home Buyer, its users, or the public."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(78,"p"),t.\u0275\u0275text(79,'3.6. Linking. Without the prior written consent of Michael the Home Buyer, you may not use any of Michael the Home Buyer\u2019 proprietary logos, marks, or other distinctive graphics, video, or audio material in your links. You may not link to the Website or to any page thereof or engage in the practice of "deep linking" in any manner reasonably likely to: (a) imply affiliation with or endorsement or sponsorship of or by Michael the Home Buyer; (b) cause confusion, mistake, or deception; (c) dilute Michael the Home Buyer\u2019 trademarks or service marks; (d) otherwise violate state or federal law; or (e) constitute improper disparagement or disclosure concerning Michael the Home Buyer or any of its respective affiliates, or their respective officers, directors, agents, franchises, or Vendors. You may not frame or otherwise incorporate into another Website any of the Information or other materials on this Website without the prior written consent of Michael the Home Buyer.'),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(80,"li"),t.\u0275\u0275text(81," ACCESS AND DELAYS IN SERVICES. "),t.\u0275\u0275elementStart(82,"p"),t.\u0275\u0275text(83," Michael the Home Buyer, its affiliates, subsidiaries, and Vendors shall have no responsibility to provide you access to the Website. Further, Michael the Home Buyer, its affiliates, subsidiaries, and Vendors shall not be liable to you for any loss or liability resulting, directly or indirectly, from delays, inaccuracies, errors, omissions, or interruptions of the Service for any reason, including, without limitation, due to electronic or mechanical equipment failures, telephone interconnect problems, defects, weather, strikes, walkouts, fire, acts of God, riots, armed conflicts, acts of war, acts of terrorism, or to other like causes. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(84,"li"),t.\u0275\u0275text(85," MONITORING BY MICHAEL THE HOME BUYER. "),t.\u0275\u0275elementStart(86,"p"),t.\u0275\u0275text(87," You acknowledge that Michael the Home Buyer reserves the right to, and may from time to time, monitor for all lawful purposes any and all Third-Party Content transmitted or received through the Service. During monitoring, information may be examined, recorded, copied, and used for authorized purposes. All Third-Party Content, including personal information, placed on or sent over the Service may be monitored. Use of the Service, authorized or unauthorized, constitutes consent to such monitoring and to the other terms of this Agreement. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(88,"li")(89,"p"),t.\u0275\u0275text(90," REPRESENTATIONS, WARRANTIES AND LIMITATION OF LIABILITY."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(91,"p"),t.\u0275\u0275text(92," 6.1. General Disclaimer and Limited Warranty. You acknowledge that certain aspects of the Information and/or Vendor Information and links provided through the Website are compiled from sources which may be beyond the control of Michael the Home Buyer. Though such Information and links are recognized by the parties to be generally reliable, the parties acknowledge that inaccuracies may occur. Michael the Home Buyer, its licensors and Vendors do not warrant the accuracy or suitability of any such Information. Neither Michael the Home Buyer nor its licensors or Vendors represent or endorse the accuracy or reliability of the Information distributed through the Service. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(93,"p"),t.\u0275\u0275text(94,'FOR THIS REASON, YOU ACKNOWLEDGE THAT THE WEBSITE IS PROVIDED TO YOU ON AN "AS IS WITH ALL FAULTS BASIS." MICHAEL THE HOME BUYER AND ITS LICENSORS AND VENDORS EXPRESSLY DISCLAIM ANY AND ALL WARRANTIES, WHETHER EXPRESS, ORAL, IMPLIED, STATUTORY OR OTHERWISE, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, NON-INFRINGEMENT, OR ANY WARRANTIES ARISING BY VIRTUE OF CUSTOM OF TRADE OR COURSE OF DEALING. FURTHER, MICHAEL THE HOME BUYER AND ITS LICENSORS AND VENDORS NEITHER REPRESENT NOR WARRANT THAT THE WEBSITE WILL MEET YOUR REQUIREMENTS OR IS SUITABLE FOR YOUR NEEDS OR WILL ACHIEVE ANY DESIRED RESULT. '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"p"),t.\u0275\u0275text(96,"6.2. You assume all risk of errors and/or omissions in the Website, including the transmission or translation of data. You assume full responsibility for implementing sufficient procedures and checks to satisfy your requirements for the accuracy and suitability of the Website, including the Information, and for maintaining any means which you may require for the reconstruction of lost data or subsequent manipulations or analyses of the Information provided under this Agreement. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(97,"p"),t.\u0275\u0275text(98,"6.3. Viruses. YOU ACKNOWLEDGE AND AGREE THAT MICHAEL THE HOME BUYER USES REASONABLE EFFORTS TO ASSURE THAT NO VIRUSES OR PROGRAMS WITH SIMILAR FUNCTIONS OPERATE ON, OR ARE PASSED THROUGH, THE WEBSITE OR THE INFORMATION. HOWEVER, YOU HEREBY ASSUME ALL RESPONSIBILITY (AND THEREBY HOLD MICHAEL THE HOME BUYER HARMLESS), BY WHATEVER MEANS YOU DEEM MOST APPROPRIATE FOR YOUR NEEDS, FOR DETECTING AND ERADICATING ANY VIRUS OR PROGRAM WITH A SIMILAR FUNCTION."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(99,"p"),t.\u0275\u0275text(100,"6.4. LIMITATION OF LIABILITY. YOU AGREE THAT MICHAEL THE HOME BUYER AND ITS AFFILIATES, SUBSIDIARIES, AND VENDORS SHALL NOT IN ANY EVENT BE LIABLE FOR ANY SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE SERVICE FOR ANY PURPOSE WHATSOEVER. IF THE ABOVE LIMITATIONS OF LIABILITIES SHOULD FAIL IN THEIR ESSENTIAL PURPOSE FOR ANY REASON, SUCH LIABILITY IS AND SHALL BE LIMITED TO A SUM EQUAL IN AMOUNT TO TEN (10%) PERCENT OF THE SUMS PAID TO MICHAEL THE HOME BUYER BY YOU UNDER THE TERMS OF THIS AGREEMENT OR $100.00, WHICHEVER IS GREATER, AS LIQUIDATED DAMAGES AND NOT AS A PENALTY EVEN IF MICHAEL THE HOME BUYER OR ITS AFFILIATES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. THIS LIABILITY, IF ANY, SHALL BE COMPLETE AND EXCLUSIVE. THE PROVISIONS CONTAINED IN THIS SECTION 6 SHALL SURVIVE TERMINATION OF THIS AGREEMENT."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(101,"p"),t.\u0275\u0275text(102,"6.5. FTC NOTICE. SOME STATES DO NOT ALLOW LIMITATIONS ON HOW LONG AN IMPLIED WARRANTY LASTS, SO THE ABOVE LIMITATION MAY NOT APPLY TO YOU. SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU. THIS WARRANTY GIVES YOU SPECIFIC LEGAL RIGHTS, AND YOU MAY ALSO HAVE OTHER RIGHTS WHICH VARY FROM STATE TO STATE."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(103,"li")(104,"p"),t.\u0275\u0275text(105,"INDEMNIFICATION"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(106,"p"),t.\u0275\u0275text(107,"YOU SHALL RELEASE, DISCHARGE, AND RELINQUISH, DEFEND INDEMNIFY AND HOLD HARMLESS MICHAEL THE HOME BUYER AND ITS AFFILIATES, SUBSIDIARIES, AND VENDORS, AND EACH OF THEIR MEMBERS, SHAREHOLDERS, DIRECTORS, EMPLOYEES, AGENTS, REPRESENTATIVES, VENDORS, AND CONTRACTORS OF WHATEVER TIER (COLLECTIVELY, THE INDEMNITEES) FROM AND AGAINST ALL LOSS, CLAIMS, DEMANDS AND CAUSES OF ACTION OF WHATEVER KIND OR CHARACTER, INCLUDING WITHOUT LIMITATION COSTS, ATTORNEYS\u2019 FEES AND EXPENSES INCURRED IN CONNECTION WITH ANY CLAIM BROUGHT BY ANY PERSON(S) OR ENTITY(IES) ARISING FROM, IN CONNECTION WITH, OR RELATING TO, YOUR ACCESS AND USE OF THE WEBSITE, INCLUDING YOUR USE OF THE INFORMATION OBTAINED THROUGH THE WEBSITE. THE OBLIGATIONS TO RELEASE, DEFEND AND TO INDEMNIFY CONTAINED IN THIS SECTION SHALL APPLY EVEN IF CAUSED, IN WHOLE OR IN PART, BY THE JOINT, SOLE, GROSS OR CONCURRENT NEGLIGENCE, STRICT LIABILITY, CONTRACTUAL LIABILITIES OF THIRD PARTIES, OR OTHER FAULT, WHETHER PASSIVE OR ACTIVE, OF ANY PERSON OR ENTITY, INCLUDING BUT NOT LIMITED TO THE INDEMNITEES, JOINTLY OR SEVERALLY. YOU SHALL COOPERATE AS FULLY AS REASONABLY REQUIRED IN THE DEFENSE OF ANY SUCH CLAIM."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(108,"li")(109,"p"),t.\u0275\u0275text(110,"PRIVACY POLICIES."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(111,"p"),t.\u0275\u0275text(112,"These Terms of Use include our Privacy Policy as contained on our website, which is incorporated fully herein."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(113,"li")(114,"p"),t.\u0275\u0275text(115,"9. UNSOLICITED MARKETING."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(116,"p"),t.\u0275\u0275text(117,'9.1. Unsolicited Marketing. Michael the Home Buyer supports responsible e-commerce. Michael the Home Buyer does not authorize anyone to use the Service to broadcast, distribute, transmit or retransmit unsolicited commercial, non-commercial, bulk, or junk electronic mail, including email ("SPAM").'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(118,"p"),t.\u0275\u0275text(119,"9.2. Electronic Direct Marketing Programs. Michael the Home Buyer may develop and participate in electronic direct marketing to users of the Website who elect to receive electronic mail of specific interest to them. In keeping with this Agreement, Michael the Home Buyer does not forward the names and addresses (electronic or otherwise) to third parties. Advertisers who participate in Michael the Home Buyer\u2019 electronic direct marketing programs identify the category of users who would most likely be interested in their goods and services. Michael the Home Buyer then forwards the advertisements to users who have elected to receive that category of electronic mail. Users may elect to not receive similar electronic mail by requesting that their e-mail address be removed from the mailing list by selecting the appropriate option included with each e-mail advertisement sent by Michael the Home Buyer. In addition, users may elect to be removed from such lists at any time by sending a message to the System administrator at webmaster@homevestors.com."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(120,"p"),t.\u0275\u0275text(121,"9.3. Reporting SPAM. Users who receive SPAM or any threatening or offensive e-mail through the Services may report it to Michael the Home Buyer by forwarding the unedited message with the full message header to webmaster@homevestors.com."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(122,"p"),t.\u0275\u0275text(123,"9.4. Reservation of Rights. Michael the Home Buyer reserves the right to take all legal or technical steps that it deems necessary to prevent the broadcast, distribution, transmission, or retransmission over the Service of SPAM, junk e-mail, threatening or offensive e-mail, or e-mail otherwise determined by Michael the Home Buyer, in its sole discretion, to be objectionable. Michael the Home Buyer reserves the right to suspend or terminate any person or entity\u2019s use of or access to the Service if it determines, in its sole and absolute discretion, that such person has used or intends to use the Service in violation of this policy. A failure of Michael the Home Buyer to exercise any right provided for herein shall not be deemed to be a waiver of such right. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(124,"li")(125,"p"),t.\u0275\u0275text(126,"MISCELLANEOUS"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(127,"p"),t.\u0275\u0275text(128,"10.1. Governing Law; Limitations; Venue. The laws of the State of Texas, excluding any rule or principle that would refer to and apply the substantive law of another state or jurisdiction, shall govern this Agreement. To the extent allowed by applicable law, any claims or causes of action arising from or relating to your access and use of the Service as contemplated by this Agreement must be instituted within two (2) years from the date upon which such claim or cause arose. Further, any such claim or cause of action shall be brought EXCLUSIVELY in the state or federal courts located in Dallas County, Texas, and you agree to submit to the exclusive personal jurisdiction of such courts and hereby appoint the Secretary of State of Texas as your agent for service of process. You agree to waive any objection that the state or federal courts of Dallas County, Texas, are an inconvenient forum."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(129,"p"),t.\u0275\u0275text(130,"10.2. Assignments. You may not assign any of your rights, obligations, privileges, or performance hereunder without the prior written consent of Michael the Home Buyer. Any assignment other than as provided for in this Section 10.2 shall be null and void."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(131,"p"),t.\u0275\u0275text(132,"10.3. Severability. If any provision of this Agreement is found to be unlawful or unenforceable in any respect, the court shall reform such provision so as to render it enforceable (or, if it is not possible to reform such provision so as to make it enforceable, then delete such provision); and, as so reformed or modified, fully enforce this Agreement."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(133,"p"),t.\u0275\u0275text(134,"10.4 Connectivity Charges. You understand that your access to the Website and use of the Services may incur third party connectivity charges. You understand that you are responsibly for any such charges that your use incurs, including from your cell phone or internet service provider, including fees related to text messaging and data fees."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(135,"p"),t.\u0275\u0275text(136,"10.5. Termination. Michael the Home Buyer may terminate or suspend your use of the Website for any reason. Termination or cancellation of your use of the Website shall not affect any right or relief to which Michael the Home Buyer may be entitled, at law or in equity. Upon termination of this Agreement, all rights granted to you will terminate and revert to Michael the Home Buyer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(137,"p"),t.\u0275\u0275text(138,"10.6. Notice. Official correspondence must be sent via postal mail to: Michael the Home Buyer of Canada, Inc. 6500 Greenville Avenue, Suite 400 Dallas, TX 75206."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(139,"p"),t.\u0275\u0275text(140,"10.7 Notice Regarding Electronic Commercial Service for California Users. Pursuant to California Civil Code Section 1789.3, California Site users are entitled to the following specific consumer rights notice: The Complaint Assistance Unit of the Division of consumer Services of the California Department of consumer Affairs may be contacted in writing at 1625 North Market Blvd., Sacramento, CA 95834, or by telephone at 916-445-1254 or 800-952-5210."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(141,"p"),t.\u0275\u0275text(142,"10.8 Entire Agreement. This Agreement is complete and effective at the time you begin use of the Service. This Agreement constitutes the entire agreement between the parties, and no other agreement, written or oral, exists between you and MICHAEL THE HOME BUYER. In the event that any inconsistencies exist between this Agreement and any future published terms or understanding, the last published Agreement or terms of use shall control."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(143,"div",5)(144,"h5"),t.\u0275\u0275text(145,"ANY RIGHTS NOT EXPRESSLY GRANTED HEREIN ARE RESERVED BY MICHAEL THE HOME BUYER OF CANADA, INC."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(146,"h5"),t.\u0275\u0275text(147,"\xa9 2023 Michael the Home Buyer of Canada, Inc. All rights reserved."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275element(148,"app-footer"))},dependencies:[Qn,wn],styles:[".first-section[_ngcontent-%COMP%]{padding:80px 0}"]})}return l})(),$x=(()=>{class l{constructor(n,d,_,T,P){this.route=n,this.spinner=d,this.http=_,this._toast=T,this._apiCallServices=P,this.options={componentRestrictions:{country:"CA"}},this.isCheckboxChecked=!1,this.formData={sessionFullStreetAddress:"",firstName:"",lastName:"",phoneNumber:"",email:"",confirm:!1},this.phoneNumberInputMask=ss({mask:"(999) 999-9999"})}ngOnInit(){const n=sessionStorage.getItem("session_expiration");!n||(new Date).getTime()>parseInt(n,10)?this.sessionFullStreetAddress=null:(this.sessionFullStreetAddress=sessionStorage.getItem("user_street_address"),this.formData.sessionFullStreetAddress=this.sessionFullStreetAddress),console.log(this.sessionFullStreetAddress)}handleAddressChange(n){this.formData.sessionFullStreetAddress=n.formatted_address}contactFormData(n){n.valid&&this.formData.confirm&&(this.spinner.show(),console.log(n.value),this._apiCallServices.contactLeadApi(n.value.firstName,n.value.lastName,n.value.email,n.value.phoneNumber,n.value.streetAddress).subscribe(d=>{console.log(d),"success"==d.status?(setTimeout(()=>{this.spinner.hide()},1e3),this._toast.success({detail:"SUCCESS",summary:"Form successfully submitted",position:"br"}),setTimeout(function(){window.location.href="/thank-you"},1e3)):("error"==d.status||"timeout"==d.status)&&(alert(d.message),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3))},d=>{var _="",T=[];""==n.value.firstName?T.push("First Name"):""==n.value.lastName?T.push("Last Name"):""==n.value.email?T.push("Email"):""==n.value.phoneNumber?T.push("Phone Number"):""==n.value.streetAddress?T.push("Property Address"):_="Unable to submit. Please re-enter the details manually, in the form. Avoid selecting from pre filled options.",_=0==T.length?"Unable to submit. Maybe enter the details manually in the webform instead of Pre-filled options. or please try after sometime! ":"Unable to submit. Please re-enter "+T+", and try again. Try to enter the details manually.",alert(_),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3)},()=>console.log("CONTACT US FORM SUMBITTED SUCCESSFULLY")))}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(bd),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(Mf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-home-it-works"]],decls:133,vars:9,consts:[["heading","Michael the Home Buyer\xae pays cash for houses.","subheading","How It All Works"],[1,"container"],[1,"row","g-4","py-3"],[1,"col-lg-7","col-md-7","col-12","order-lg-1","order-md-1","order-2"],[1,"first-section"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"second-section"],[1,"steps-list","pills","module"],[1,"column"],["href","selling-your-house/experience-and-trust","target","_blank"],["href","selling-your-house/personal-touch","target","_blank"],["href","selling-your-house/i-need-to-sell-my-house-fast","target","_blank"],[1,"third-section","bg-light"],[1,"row","g-4"],[1,"col-lg-2","col-12"],["src","../../../assets/images/why-sell-to-us/experience-and-trust/quote.svg","width","100%","alt",""],[1,"col-lg-10","col-12"],[1,"fourth-section"],[1,"col-lg-5","col-md-5","col-12","order-lg-2","order-md-2","order-1"],[1,"fifth-section","py-5","px-3","rounded","rounded-4"],[1,"pb-4"],["novalidate","",1,"needs-validation",3,"ngSubmit"],["contactForm","ngForm"],[1,"col-lg-6","col-md-6","col-12"],[1,"form-floating","mb-3"],["type","text","autocomplete","new-password","id","floatingInput","placeholder","First Name","name","firstName","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstNameRef","ngModel"],["for","floatingInput"],["type","text","autocomplete","new-password","id","floatingInput","placeholder","Last Name","name","lastName","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastNameRef","ngModel"],[1,"col-lg-12"],["type","tel","autocomplete","new-password","id","floatingInput","placeholder","Phone Number","name","phoneNumber","ngModel","","required","",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["phoneNumberRef","ngModel"],["type","email","autocomplete","new-password","id","floatingInput","placeholder","Email","name","email","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["emailRef","ngModel"],["type","text","autocomplete","new-password","ngx-google-places-autocomplete","","id","floatingInput","placeholder","Property address","name","streetAddress","ngModel","","required","",1,"form-control",3,"options","ngModel","onAddressChange","ngModelChange"],["streetAddressRef","ngModel"],[1,"d-lg-block","d-md-block","d-block","mb-lg-0","mb-md-0","m-2"],["src","../../../assets/images/powered-by-google-transparent.png","width","100","alt",""],["id","confirm-msg",1,"mt-4","form-check"],["type","checkbox","name","confirm","required","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","exampleCheck1",1,"form-check-label"],["href","terms-of-use","target","_blank"],["href","privacy-policy","target","_blank"],[1,"mt-4"],["type","submit","id","button-vary1",1,"btn","btn-warning","px-5","py-3",3,"disabled"],[1,"sixth-section"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],[1,"anchor-para"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){if(1&d){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"div",1)(3,"div",2)(4,"div",3)(5,"section",4)(6,"div",5)(7,"div",6)(8,"h2",7),t.\u0275\u0275text(9,"Cash for homes makes everything quick and simple. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p"),t.\u0275\u0275text(11,'You might be thinking, "What is the process of getting cash for my house?" It\u2019s very simple, starting with a free, in-home consultation. Your local, Michael the Home Buyer Home Buyer\xae property specialist will visit in person, review your property, explain the process and answer all your questions.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"p"),t.\u0275\u0275text(13,"From there, we can make you a fair offer to pay cash to purchase your house. If you like our offer, we pay all normal closing costs, there are no real estate commissions, and you get to skip all repairs, cleaning and showings. We can even close in as little as 3 weeks or on your timeline (taking longer if you choose)."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"p"),t.\u0275\u0275text(15,"Sellers have trusted our fair offers for since 2014, and you won\u2019t be hit by any of those surprise fees."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"p"),t.\u0275\u0275text(17,"That\u2019s the entire process, quick and simple!"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(18,"section",8)(19,"div",5)(20,"div",6)(21,"h2",7),t.\u0275\u0275text(22,'Why did we make this "cash for homes" process? '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div")(24,"div",9)(25,"div",5)(26,"div",10)(27,"ol")(28,"li"),t.\u0275\u0275text(29,"Let's Talk"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"li"),t.\u0275\u0275text(31,"Get a Fair Cash Offer"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"li"),t.\u0275\u0275text(33,"A Fast Closing"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(34,"p"),t.\u0275\u0275text(35,"Homeowners were looking for a quick and easy way to sell their house and get cash in their hand. They don\u2019t need another confusing and slow process. What they wanted is a company they can trust. A company that has "),t.\u0275\u0275elementStart(36,"a",11),t.\u0275\u0275text(37,"experience"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(38," in buying houses for cash, and local property specialists that "),t.\u0275\u0275elementStart(39,"a",12),t.\u0275\u0275text(40,"help every step of the way"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(41,". We buy houses with cash, and our whole process is designed with the seller in mind. Just three quick and easy steps and your home will be sold before you know it. It\u2019s that "),t.\u0275\u0275elementStart(42,"a",13),t.\u0275\u0275text(43,"simple"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(44,"."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(45,"p"),t.\u0275\u0275text(46,"Let us show you just how easy it is\u2014contact us today."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(47,"section",14)(48,"div",1)(49,"div",15)(50,"div",16),t.\u0275\u0275element(51,"img",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"div",18)(53,"h3",7),t.\u0275\u0275text(54,"The rental property I had needed a lot of work. When Michael the Home Buyer offered a fair price and I found out I could make some money, I was thrilled. They made it easy. Michael the Home Buyer was great."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(55,"h5"),t.\u0275\u0275text(56,"-Angela W., Oklahoma City, OK"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(57,"section",19)(58,"div",5)(59,"div",6)(60,"h2",7),t.\u0275\u0275text(61,'"We pay cash for houses."'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"p"),t.\u0275\u0275text(63,"If you\u2019re needing cash for your house and want a simple and quick selling process, then Michael the Home Buyer can be the perfect solution."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(64,"p"),t.\u0275\u0275text(65,'We offer the ultimate in convenience since we buy houses "as is." Also, since we buy houses cash, we can close in as little as 3 weeks or on your timeline (taking longer if you choose). Don\u2019t bother with repairs, cleaning or showings, and we cover typical closing costs. When we make a fair offer, we don\u2019t add any hidden fees. No surprises, only simplicity.'),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(66,"div",20)(67,"div",21)(68,"h4",22),t.\u0275\u0275text(69,"Request a free, no-obligation consultation."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(70,"form",23,24),t.\u0275\u0275listener("ngSubmit",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(71);return t.\u0275\u0275resetView(_.contactFormData(B))}),t.\u0275\u0275elementStart(72,"div",5)(73,"div",25)(74,"div",26)(75,"input",27,28),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.firstName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(77,"label",29),t.\u0275\u0275text(78,"First name*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(79,"div",25)(80,"div",26)(81,"input",30,31),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.lastName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(83,"label",29),t.\u0275\u0275text(84,"Last name*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(85,"div",32)(86,"div",26)(87,"input",33,34),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.phoneNumber=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(89,"label",29),t.\u0275\u0275text(90,"Phone Number*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(91,"div",32)(92,"div",26)(93,"input",35,36),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.email=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"label",29),t.\u0275\u0275text(96,"Email*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(97,"div",32)(98,"div",26)(99,"input",37,38),t.\u0275\u0275listener("onAddressChange",function(B){return _.handleAddressChange(B)})("ngModelChange",function(B){return _.formData.sessionFullStreetAddress=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(101,"label",29),t.\u0275\u0275text(102,"Property address*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(103,"div",39),t.\u0275\u0275element(104,"img",40),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(105,"div",41)(106,"input",42),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.confirm=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(107,"label",43),t.\u0275\u0275text(108,"By checking this box, I authorize and provide my consent for Michael the Home Buyer\xae or its franchisees, or their service providers, to contact me at the phone number provided above via text (SMS) or calling using automated dialing technology to schedule an appointment and for marketing purposes related to the Michael the Home Buyer\xae services I am inquiring about. Consent not required to purchase services. Message and data rates may apply. Message frequency varies by account. To opt-out at any time reply STOP to the message you receive. For more information, please review our "),t.\u0275\u0275elementStart(109,"a",44),t.\u0275\u0275text(110,"Terms of Use"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(111," and "),t.\u0275\u0275elementStart(112,"a",45),t.\u0275\u0275text(113,"Privacy Policy"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(114,". "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(115,"div",46)(116,"button",47),t.\u0275\u0275text(117,"Get a cash offer"),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(118,"section",48)(119,"div",1)(120,"div",49)(121,"div",50)(122,"div",51)(123,"h2"),t.\u0275\u0275text(124,"It's as easy as 1 - 2 - 3!"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(125,"div",52)(126,"div",53)(127,"div",54)(128,"p"),t.\u0275\u0275text(129,"Let\u2019s get started for free today. No obligation and no pressure. Just a quick visit to your house and we can then make you a fair cash offer on the spot!"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(130,"a",55),t.\u0275\u0275text(131,"Contact Us Today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(132,"app-footer")}if(2&d){const T=t.\u0275\u0275reference(71);t.\u0275\u0275advance(75),t.\u0275\u0275property("ngModel",_.formData.firstName),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.lastName),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.phoneNumber)("inputMask",_.phoneNumberInputMask),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.email),t.\u0275\u0275advance(6),t.\u0275\u0275property("options",_.options)("ngModel",_.formData.sessionFullStreetAddress),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.confirm),t.\u0275\u0275advance(10),t.\u0275\u0275property("disabled",!T.form.valid)}},dependencies:[cp,ep,wd,Df,ng,dp,ag,lp,Ed,On.GooglePlaceDirective,Gy,Qn,wn,fi],styles:[".first-section[_ngcontent-%COMP%]{padding:100px 0}.second-section[_ngcontent-%COMP%]{padding:0 0 80px}.second-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.second-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.third-section[_ngcontent-%COMP%]{padding:100px 0}@media only screen and (max-width: 992px){.third-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}}.fourth-section[_ngcontent-%COMP%]{padding:100px 0}.fifth-section[_ngcontent-%COMP%]{background:#e72113;color:#fff}.fifth-section[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{color:#000!important}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#ffdd05!important}.fifth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.sixth-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}@media print,screen and (max-width: 19.99875em){.steps-list[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:25px;margin-bottom:20px}}.steps-list[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#19a39a;font-weight:300;margin-right:10px}.steps-list.pills[_ngcontent-%COMP%]{margin:1rem 0 1.5rem}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:none;counter-reset:numeral-in-circle;width:18rem;padding-left:1.5em;margin:0 auto}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{counter-increment:numeral-in-circle;height:2.5em;border-radius:0 1.25em 1.25em 0;padding:0 1em 0 2em;margin-bottom:1em;text-indent:0;color:#fff;position:relative;line-height:2.5em;font-size:.9375rem}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n+1){background:#19a39a}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n+2){background:#f04134}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3n+3){background:#000}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(numeral-in-circle);background:#ffdf1c;font-size:1.4em;width:1.83em;height:1.83em;line-height:1.83;border-radius:1em;text-align:center;color:#000;font-weight:700;display:block;position:absolute;left:-.915em;top:0}@media screen and (min-width: 85.375em){.steps-list.pills[_ngcontent-%COMP%]{text-align:center}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{width:100%}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding-right:4.25em;margin-left:-1em;font-size:1.0625rem}.steps-list.pills[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{font-weight:400}}"]})}return l})();function cb(l,a){if(1&l){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",12),t.\u0275\u0275listener("keyup.enter",function(){t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext(3);const _=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(_.previous())})("click",function(){t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext(3);const _=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(_.previous())}),t.\u0275\u0275text(1),t.\u0275\u0275elementStart(2,"span",13),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&l){const n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.previousLabel," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.screenReaderPageLabel)}}function ub(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275text(1),t.\u0275\u0275elementStart(2,"span",13),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&l){const n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.previousLabel," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.screenReaderPageLabel)}}function $0(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"li",9),t.\u0275\u0275template(1,cb,4,2,"a",10),t.\u0275\u0275template(2,ub,4,2,"span",11),t.\u0275\u0275elementEnd()),2&l){t.\u0275\u0275nextContext(2);const n=t.\u0275\u0275reference(1);t.\u0275\u0275classProp("disabled",n.isFirstPage()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",1<n.getCurrent()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isFirstPage())}}function Sd(l,a){if(1&l){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",12),t.\u0275\u0275listener("keyup.enter",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275nextContext(2);const T=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(T.setCurrent(_.value))})("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275nextContext(2);const T=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(T.setCurrent(_.value))}),t.\u0275\u0275elementStart(1,"span",13),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"number"),t.\u0275\u0275elementEnd()()}if(2&l){const n=t.\u0275\u0275nextContext().$implicit,d=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",d.screenReaderPageLabel," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate("..."===n.label?n.label:t.\u0275\u0275pipeBind2(5,2,n.label,""))}}function hp(l,a){if(1&l&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",16)(2,"span",13),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"number"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&l){const n=t.\u0275\u0275nextContext().$implicit,d=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",d.screenReaderCurrentLabel," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate("..."===n.label?n.label:t.\u0275\u0275pipeBind2(6,2,n.label,""))}}function G0(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275template(1,Sd,6,5,"a",10),t.\u0275\u0275template(2,hp,7,5,"ng-container",15),t.\u0275\u0275elementEnd()),2&l){const n=a.$implicit;t.\u0275\u0275nextContext(2);const d=t.\u0275\u0275reference(1);t.\u0275\u0275classProp("current",d.getCurrent()===n.value)("ellipsis","..."===n.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",d.getCurrent()!==n.value),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",d.getCurrent()===n.value)}}function W0(l,a){if(1&l){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"a",12),t.\u0275\u0275listener("keyup.enter",function(){t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext(3);const _=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(_.next())})("click",function(){t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext(3);const _=t.\u0275\u0275reference(1);return t.\u0275\u0275resetView(_.next())}),t.\u0275\u0275text(1),t.\u0275\u0275elementStart(2,"span",13),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&l){const n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.nextLabel," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.screenReaderPageLabel)}}function db(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275text(1),t.\u0275\u0275elementStart(2,"span",13),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&l){const n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.nextLabel," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(n.screenReaderPageLabel)}}function hb(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"li",17),t.\u0275\u0275template(1,W0,4,2,"a",10),t.\u0275\u0275template(2,db,4,2,"span",11),t.\u0275\u0275elementEnd()),2&l){t.\u0275\u0275nextContext(2);const n=t.\u0275\u0275reference(1);t.\u0275\u0275classProp("disabled",n.isLastPage()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isLastPage()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isLastPage())}}function Aw(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"ul",4),t.\u0275\u0275template(1,$0,3,4,"li",5),t.\u0275\u0275elementStart(2,"li",6),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,G0,3,6,"li",7),t.\u0275\u0275template(5,hb,3,4,"li",8),t.\u0275\u0275elementEnd()),2&l){const n=t.\u0275\u0275nextContext(),d=t.\u0275\u0275reference(1);t.\u0275\u0275classProp("responsive",n.responsive),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.directionLinks),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2(" ",d.getCurrent()," / ",d.getLastPage()," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",d.pages)("ngForTrackBy",n.trackByIndex),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.directionLinks)}}class _v{constructor(){this.change=new t.EventEmitter,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(a){return null==a.id&&(a.id=this.DEFAULT_ID),this.instances[a.id]?this.updateInstance(a):(this.instances[a.id]=a,!0)}updateInstance(a){let n=!1;for(let d in this.instances[a.id])a[d]!==this.instances[a.id][d]&&(this.instances[a.id][d]=a[d],n=!0);return n}getCurrentPage(a){return this.instances[a]?this.instances[a].currentPage:1}setCurrentPage(a,n){if(this.instances[a]){let d=this.instances[a];n<=Math.ceil(d.totalItems/d.itemsPerPage)&&1<=n&&(this.instances[a].currentPage=n,this.change.emit(a))}}setTotalItems(a,n){this.instances[a]&&0<=n&&(this.instances[a].totalItems=n,this.change.emit(a))}setItemsPerPage(a,n){this.instances[a]&&(this.instances[a].itemsPerPage=n,this.change.emit(a))}getInstance(a=this.DEFAULT_ID){return this.instances[a]?this.clone(this.instances[a]):{}}clone(a){var n={};for(var d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);return n}}const Gx=Number.MAX_SAFE_INTEGER;let pb=(()=>{class l{constructor(n){this.service=n,this.state={}}transform(n,d){if(!(n instanceof Array)){let vt=d.id||this.service.defaultId();return this.state[vt]?this.state[vt].slice:n}let B,ie,_=d.totalItems&&d.totalItems!==n.length,T=this.createInstance(n,d),P=T.id,Se=T.itemsPerPage,tt=this.service.register(T);if(!_&&n instanceof Array){if(Se=+Se||Gx,B=(T.currentPage-1)*Se,ie=B+Se,this.stateIsIdentical(P,n,B,ie))return this.state[P].slice;{let rn=n.slice(B,ie);return this.saveState(P,n,rn,B,ie),this.service.change.emit(P),rn}}return tt&&this.service.change.emit(P),this.saveState(P,n,n,B,ie),n}createInstance(n,d){return this.checkConfig(d),{id:null!=d.id?d.id:this.service.defaultId(),itemsPerPage:+d.itemsPerPage||0,currentPage:+d.currentPage||1,totalItems:+d.totalItems||n.length}}checkConfig(n){const _=["itemsPerPage","currentPage"].filter(T=>!(T in n));if(0<_.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${_.join(", ")}`)}saveState(n,d,_,T,P){this.state[n]={collection:d,size:d.length,slice:_,start:T,end:P}}stateIsIdentical(n,d,_,T){let P=this.state[n];return!(!P||P.size!==d.length||P.start!==_||P.end!==T)&&P.slice.every((ie,Se)=>ie===d[_+Se])}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(_v,16))},l.\u0275pipe=t.\u0275\u0275definePipe({name:"paginate",type:l,pure:!1}),l})(),qx=(()=>{class l{constructor(n,d){this.service=n,this.changeDetectorRef=d,this.maxSize=7,this.pageChange=new t.EventEmitter,this.pageBoundsCorrection=new t.EventEmitter,this.pages=[],this.changeSub=this.service.change.subscribe(_=>{this.id===_&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(n){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(n){this.pageChange.emit(n)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let n=this.service.getInstance(this.id);return n.totalItems<1?1:Math.ceil(n.totalItems/n.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let n=this.service.getInstance(this.id);const d=this.outOfBoundCorrection(n);d!==n.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(d),this.pages=this.createPageArray(n.currentPage,n.itemsPerPage,n.totalItems,this.maxSize)}):this.pages=this.createPageArray(n.currentPage,n.itemsPerPage,n.totalItems,this.maxSize)}outOfBoundCorrection(n){const d=Math.ceil(n.totalItems/n.itemsPerPage);return d<n.currentPage&&0<d?d:n.currentPage<1?1:n.currentPage}createPageArray(n,d,_,T){T=+T;let P=[];const B=Math.max(Math.ceil(_/d),1),ie=Math.ceil(T/2),Se=n<=ie,tt=B-ie<n,vt=!Se&&!tt;let rn=T<B,Kt=1;for(;Kt<=B&&Kt<=T;){let Jt,xn=this.calculatePageNumber(Kt,n,T,B);Jt=rn&&(2===Kt&&(vt||tt)||Kt===T-1&&(vt||Se))?"...":xn,P.push({label:Jt,value:xn}),Kt++}return P}calculatePageNumber(n,d,_,T){let P=Math.ceil(_/2);return n===_?T:1===n?n:_<T?T-P<d?T-_+n:P<d?d-P+n:n:n}}return l.\u0275fac=function(n){return new(n||l)(t.\u0275\u0275directiveInject(_v),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},l.\u0275dir=t.\u0275\u0275defineDirective({type:l,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[t.\u0275\u0275NgOnChangesFeature]}),l})();function vv(l){return!!l&&"false"!==l}let fb=(()=>{class l{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new t.EventEmitter,this.pageBoundsCorrection=new t.EventEmitter,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(n){this._directionLinks=vv(n)}get autoHide(){return this._autoHide}set autoHide(n){this._autoHide=vv(n)}get responsive(){return this._responsive}set responsive(n){this._responsive=vv(n)}trackByIndex(n){return n}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(n,d){if(1&n&&(t.\u0275\u0275elementStart(0,"pagination-template",0,1),t.\u0275\u0275listener("pageChange",function(T){return d.pageChange.emit(T)})("pageBoundsCorrection",function(T){return d.pageBoundsCorrection.emit(T)}),t.\u0275\u0275elementStart(2,"nav",2),t.\u0275\u0275template(3,Aw,6,8,"ul",3),t.\u0275\u0275elementEnd()()),2&n){const _=t.\u0275\u0275reference(1);t.\u0275\u0275property("id",d.id)("maxSize",d.maxSize),t.\u0275\u0275advance(2),t.\u0275\u0275attribute("aria-label",d.screenReaderPaginationLabel),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(d.autoHide&&_.pages.length<=1))}},dependencies:[qx,cn,bo,zr],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),l})(),mb=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=t.\u0275\u0275defineInjector({providers:[_v],imports:[[ku]]}),l})();var cg=ut(898);let bv=(()=>{class l{constructor(n,d,_){this.spinner=n,this._toast=d,this._router=_,this.lat=45.3495391,this.lng=-80.0936722,this.style="mapbox://styles/mapbox/outdoors-v12?optimize=true",this.buyerListingMapDataObject=[],this.citiesData=[{id:1,name:"Bancroft",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.0555555556,lng:-77.855},{id:2,name:"Barrie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.389355,lng:-79.690331},{id:3,name:"Belleville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.166668,lng:-77.383331},{id:4,name:"Brampton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.7315479,lng:-79.7624177},{id:5,name:"Brantford",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.1393867,lng:-80.2644254},{id:6,name:"Brockville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.583332,lng:-75.683334},{id:7,name:"Burlington",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.3255196,lng:-79.7990319},{id:8,name:"Cambridge",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.397221,lng:-80.311386},{id:9,name:"Chatham",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.404804,lng:-82.19104},{id:10,name:"Chatham-Kent",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.404804,lng:-82.19104},{id:11,name:"Cornwall",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.021276,lng:-74.730345},{id:12,name:"Elliot Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.3867,lng:-82.6548},{id:13,name:"Etobicoke",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.6435559,lng:-79.5656326},{id:14,name:"Fort Erie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.9,lng:-78.933333},{id:15,name:"Fort Frances",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.616667,lng:-93.4},{id:16,name:"Gananoque",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.330618,lng:-76.161864},{id:17,name:"Guelph",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.546165,lng:-80.250109},{id:18,name:"Hamilton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.25608,lng:-79.872858},{id:19,name:"Iroquois Falls",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.766667,lng:-80.683333},{id:20,name:"Kapuskasing",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:49.416667,lng:-82.433333},{id:21,name:"Kawartha Lakes",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.349998,lng:-78.75},{id:22,name:"Kenora",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:49.766666,lng:-94.48333},{id:23,name:"Kingston",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.233334,lng:-76.5},{id:24,name:"Kirkland Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.15,lng:-80.0333},{id:25,name:"Kitchener",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.452969,lng:-80.495064},{id:26,name:"Laurentian Hills",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.9551,lng:-77.5179},{id:27,name:"London",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.5890452,lng:-79.6441198},{id:28,name:"Midland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.75,lng:-79.89},{id:29,name:"Mississauga",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.5890452,lng:-79.6441198},{id:30,name:"Moose Factory",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:51.25,lng:-80.6},{id:31,name:"Moosonee",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:51.273089,lng:-80.640049},{id:32,name:"Niagara Falls",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.089558,lng:-79.084944},{id:33,name:"Niagara-on-the-Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.255721,lng:-79.071342},{id:34,name:"North Bay",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.309115,lng:-79.46082},{id:35,name:"North York",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.761539,lng:-79.411079},{id:36,name:"Oakville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.467517,lng:-79.687666},{id:37,name:"Orillia",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.608246,lng:-79.419678},{id:38,name:"Oshawa",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.897545,lng:-78.865719},{id:39,name:"Ottawa",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.42153,lng:-75.697193},{id:40,name:"Parry Sound",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.34732,lng:-80.03527},{id:41,name:"Perth",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.898811,lng:-76.248558},{id:42,name:"Peterborough",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.3001,lng:-78.3162},{id:43,name:"Picton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.0001,lng:-77.1328},{id:44,name:"Port Colborne",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.891411,lng:-79.252075},{id:45,name:"Saint Catharines",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.159374,lng:-79.246864},{id:46,name:"Saint Thomas",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.778828,lng:-81.175369},{id:47,name:"Sarnia-Clearwater",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.999443,lng:-82.308891},{id:48,name:"Sault Sainte Marie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.5168,lng:-84.3333},{id:49,name:"Scarborough",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.777702,lng:-79.233238},{id:50,name:"Simcoe",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.8333,lng:-80.3},{id:51,name:"Stratford",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.370834,lng:-80.981941},{id:52,name:"Sudbury",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.493919,lng:-80.995415},{id:53,name:"Temiskaming Shores",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:47.516666,lng:-79.683334},{id:54,name:"Thorold",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.1236091,lng:-79.1989299},{id:55,name:"Thunder Bay",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.382221,lng:-89.246109},{id:56,name:"Timmins",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.4758208,lng:-81.3304953},{id:57,name:"Toronto",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.65107,lng:-79.347015},{id:58,name:"Trenton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.101029,lng:-77.576485},{id:59,name:"Waterloo",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.4667,lng:-80.5167},{id:60,name:"Welland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.992157,lng:-79.248253},{id:61,name:"West Nipissing",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.3704,lng:-79.9248},{id:62,name:"Windsor",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.317432,lng:-83.026772},{id:63,name:"Woodstock",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.130554,lng:-80.746666},{id:64,name:"York",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.695683,lng:-79.450279},{id:64,name:"Brant",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.116669,lng:-80.366669},{id:65,name:"Clarence-Rockland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.483334,lng:-75.199997},{id:66,name:"Dryden",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:49.780094,lng:-92.83696},{id:67,name:"Greater Sudbury",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.490002,lng:-81.010002},{id:68,name:"Haldimand County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.928,lng:-79.886},{id:69,name:"Leamington",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.0531,lng:-82.5998},{id:70,name:"Markham",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.856098,lng:-79.337021},{id:71,name:"Norfolk County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.8334,lng:-80.38297},{id:72,name:"Owen Sound",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.566666,lng:-80.933334},{id:73,name:"Pembroke",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.826653,lng:-77.110886},{id:74,name:"Pickering",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.838413,lng:-79.086761},{id:75,name:"Prince Edward County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.000338,lng:-77.250494},{id:76,name:"Quinte West",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.102524,lng:-77.581596},{id:77,name:"Richmond Hill",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.8828401,lng:-79.4402808},{id:78,name:"Sarnia",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.999443,lng:-82.308891},{id:79,name:"St. Catharines",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.159374,lng:-79.246864},{id:80,name:"St. Thomas",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.778828,lng:-81.175369},{id:81,name:"Vaughan",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.837208,lng:-79.508278},{id:82,name:"Woodstock",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.130554,lng:-80.746666}],cg.accessToken="pk.eyJ1IjoibG90dXNiaXN3YXMiLCJhIjoiY2t5ZTd4ZnFjMDUycjJucG1vamhuMmFxbSJ9.iot_0EeUP_G4rtV33DV_QA"}ngOnInit(){this.initializeMap(),this.getBuyersData()}getBuyersData(){for(var n=0;n<this.citiesData.length;n++){var d={type:"Michael the Home Buyer",geometry:{type:"Point",coordinates:{lng:this.citiesData[n].lng,lat:this.citiesData[n].lat}},properties:{cityName:this.citiesData[n].name,providence:this.citiesData[n].providence,country:this.citiesData[n].country,url:this.generateSlug(this.citiesData[n].name)}};this.buyerListingMapDataObject.push(d),console.log(this.buyerListingMapDataObject),console.log(this.buyerListingMapDataObject);for(const _ of this.buyerListingMapDataObject){const T=document.createElement("div");T.className="marker",T.style.backgroundImage="url(https://img.icons8.com/?size=48&id=E70fsabn6Rl1&format=png)",new cg.Marker(T).setLngLat([_.geometry.coordinates.lng,_.geometry.coordinates.lat]).setPopup(new cg.Popup({offset:25}).setHTML(`<h5>${_.properties.cityName}</h5>\n                 <p\n                 style="padding-top:5px;">Province:\n                 ${_.properties.providence}</p>\n                 <p\n                 style="padding-bottom:5px;">Country:\n                 ${_.properties.country}</p>\n                 <a href="location/${_.properties.url}" target="_blank">More Details</a> `)).addTo(this.map)}}}initializeMap(){var n=this.lat,d=this.lng;navigator.geolocation&&navigator.geolocation.getCurrentPosition(_=>{this.map.flyTo({center:[d,n]})}),this.buildMap()}buildMap(){this.map=new cg.Map({container:"map",style:this.style,zoom:5,center:[this.lng,this.lat]});const _=new cg.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),T=new cg.NavigationControl({visualizePitch:!0});this.map.addControl(T,"bottom-right"),this.map.addControl(_,"bottom-right")}generateSlug(n){return n.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(uo))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-map"]],decls:3,vars:0,consts:[[1,"map-outer"],["id","map",1,"map-container"],[1,"button-home-track"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"section",0),t.\u0275\u0275element(1,"div",1)(2,"div",2),t.\u0275\u0275elementEnd())},styles:[".map-outer[_ngcontent-%COMP%]{position:relative}.map-container[_ngcontent-%COMP%]{width:100%;height:58vh}.button-home-track[_ngcontent-%COMP%]{position:absolute;top:52px;right:16px}.mapboxgl-marker[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%;border:1px solid gray;background-color:#add8e6}"]})}return l})();function q0(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div",29)(1,"div",30)(2,"h3"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",31)(5,"div",32)(6,"div",33)(7,"a",34),t.\u0275\u0275element(8,"img",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",36)(10,"div",37)(11,"h4",38),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(13,"div",39)(14,"h5",40)(15,"a",41),t.\u0275\u0275element(16,"img",42),t.\u0275\u0275text(17," 1 (888) 986-9883"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"p",43),t.\u0275\u0275text(19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"div",44)(21,"a",45),t.\u0275\u0275text(22,"View Location |"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"a",28),t.\u0275\u0275text(24,"Contact Us"),t.\u0275\u0275elementEnd()()()()()()),2&l){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("Showing nearby results for ",n.formattedAddress,"."),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate1("href","location/",n.generateSlug(n.onSearchCityFound[0].name),"",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("src",n.onSearchCityFound[0].coverPhoto,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2("",n.onSearchCityFound[0].name,", ",n.onSearchCityFound[0].providence,""),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(n.onSearchCityFound[0].desc),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("href","location/",n.generateSlug(n.onSearchCityFound[0].name),"",t.\u0275\u0275sanitizeUrl)}}function gb(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div",25)(1,"div",46)(2,"h3"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"h5"),t.\u0275\u0275text(5,"Please adjust your search, call "),t.\u0275\u0275elementStart(6,"a",41),t.\u0275\u0275text(7,"1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(8," or "),t.\u0275\u0275elementStart(9,"a",28),t.\u0275\u0275text(10," contact us"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(11," to find nearest location."),t.\u0275\u0275elementEnd()()()),2&l){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("We couldn\u2019t find results for ",n.formattedAddress,".")}}function yb(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"div",31)(1,"div",32)(2,"div",33)(3,"a",34),t.\u0275\u0275element(4,"img",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",36)(6,"div",37)(7,"h4"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(9,"div",39)(10,"h5",40)(11,"a",41),t.\u0275\u0275element(12,"img",42),t.\u0275\u0275text(13," 1 (888) 986-9883"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"p",43),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",44)(17,"a",45),t.\u0275\u0275text(18,"View Location |"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"a",28),t.\u0275\u0275text(20,"Contact Us"),t.\u0275\u0275elementEnd()()()()()),2&l){const n=a.$implicit,d=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("href","location/",d.generateSlug(n.name),"",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("src",n.coverPhoto,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2("",n.name,", ",n.providence,""),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(n.desc),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("href","location/",d.generateSlug(n.name),"",t.\u0275\u0275sanitizeUrl)}}const _b=function(l){return{itemsPerPage:6,currentPage:l}};function vb(l,a){if(1&l){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",19)(1,"div",29),t.\u0275\u0275template(2,yb,21,6,"div",47),t.\u0275\u0275pipe(3,"paginate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",48)(5,"div",49)(6,"pagination-controls",50),t.\u0275\u0275listener("pageChange",function(_){t.\u0275\u0275restoreView(n);const T=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(T.p=_)}),t.\u0275\u0275elementEnd()()()()}if(2&l){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind2(3,1,n.citiesData,t.\u0275\u0275pureFunction1(4,_b,n.p)))}}let xv=(()=>{class l{constructor(n,d,_){this.router=n,this.route=d,this.spinner=_,this.p=1,this.options={componentRestrictions:{country:"CA"}},this.citiesData=[{id:1,name:"Bancroft",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.0555555556,long:-77.855},{id:2,name:"Barrie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.389355,long:-79.690331},{id:3,name:"Belleville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.166668,long:-77.383331},{id:4,name:"Brampton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.7315479,long:-79.7624177},{id:5,name:"Brantford",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.1393867,long:-80.2644254},{id:6,name:"Brockville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.583332,long:-75.683334},{id:7,name:"Burlington",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.3255196,long:-79.7990319},{id:8,name:"Cambridge",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.397221,long:-80.311386},{id:9,name:"Chatham",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.404804,long:-82.19104},{id:10,name:"Chatham-Kent",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.404804,long:-82.19104},{id:11,name:"Cornwall",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.021276,long:-74.730345},{id:12,name:"Elliot Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.3867,long:-82.6548},{id:13,name:"Etobicoke",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.6435559,long:-79.5656326},{id:14,name:"Fort Erie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.9,long:-78.933333},{id:15,name:"Fort Frances",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.616667,long:-93.4},{id:16,name:"Gananoque",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.330618,long:-76.161864},{id:17,name:"Guelph",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.546165,long:-80.250109},{id:18,name:"Hamilton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.25608,long:-79.872858},{id:19,name:"Iroquois Falls",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.766667,long:-80.683333},{id:20,name:"Kapuskasing",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:49.416667,long:-82.433333},{id:21,name:"Kawartha Lakes",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.349998,long:-78.75},{id:22,name:"Kenora",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:49.766666,long:-94.48333},{id:23,name:"Kingston",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.233334,long:-76.5},{id:24,name:"Kirkland Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.15,long:-80.0333},{id:25,name:"Kitchener",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.452969,long:-80.495064},{id:26,name:"Laurentian Hills",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.9551,long:-77.5179},{id:27,name:"London",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.5890452,long:-79.6441198},{id:28,name:"Midland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.75,long:-79.89},{id:29,name:"Mississauga",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.5890452,long:-79.6441198},{id:30,name:"Moose Factory",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:51.25,long:-80.6},{id:31,name:"Moosonee",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:51.273089,long:-80.640049},{id:32,name:"Niagara Falls",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.089558,long:-79.084944},{id:33,name:"Niagara-on-the-Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.255721,long:-79.071342},{id:34,name:"North Bay",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.309115,long:-79.46082},{id:35,name:"North York",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.761539,long:-79.411079},{id:36,name:"Oakville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.467517,long:-79.687666},{id:37,name:"Orillia",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.608246,long:-79.419678},{id:38,name:"Oshawa",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.897545,long:-78.865719},{id:39,name:"Ottawa",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.42153,long:-75.697193},{id:40,name:"Parry Sound",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.34732,long:-80.03527},{id:41,name:"Perth",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.898811,long:-76.248558},{id:42,name:"Peterborough",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.3001,long:-78.3162},{id:43,name:"Picton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.0001,long:-77.1328},{id:44,name:"Port Colborne",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.891411,long:-79.252075},{id:45,name:"Saint Catharines",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.159374,long:-79.246864},{id:46,name:"Saint Thomas",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.778828,long:-81.175369},{id:47,name:"Sarnia-Clearwater",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.999443,long:-82.308891},{id:48,name:"Sault Sainte Marie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.5168,long:-84.3333},{id:49,name:"Scarborough",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.777702,long:-79.233238},{id:50,name:"Simcoe",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.8333,long:-80.3},{id:51,name:"Stratford",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.370834,long:-80.981941},{id:52,name:"Sudbury",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.493919,long:-80.995415},{id:53,name:"Temiskaming Shores",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:47.516666,long:-79.683334},{id:54,name:"Thorold",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.1236091,long:-79.1989299},{id:55,name:"Thunder Bay",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.382221,long:-89.246109},{id:56,name:"Timmins",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:48.4758208,long:-81.3304953},{id:57,name:"Toronto",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.65107,long:-79.347015},{id:58,name:"Trenton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.101029,long:-77.576485},{id:59,name:"Waterloo",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.4667,long:-80.5167},{id:60,name:"Welland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.992157,long:-79.248253},{id:61,name:"West Nipissing",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.3704,long:-79.9248},{id:62,name:"Windsor",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.317432,long:-83.026772},{id:63,name:"Woodstock",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.130554,long:-80.746666},{id:64,name:"York",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.695683,long:-79.450279},{id:64,name:"Brant",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.116669,long:-80.366669},{id:65,name:"Clarence-Rockland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.483334,long:-75.199997},{id:66,name:"Dryden",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:49.780094,long:-92.83696},{id:67,name:"Greater Sudbury",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:46.490002,long:-81.010002},{id:68,name:"Haldimand County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.928,long:-79.886},{id:69,name:"Leamington",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.0531,long:-82.5998},{id:70,name:"Markham",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.856098,long:-79.337021},{id:71,name:"Norfolk County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.8334,long:-80.38297},{id:72,name:"Owen Sound",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.566666,long:-80.933334},{id:73,name:"Pembroke",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:45.826653,long:-77.110886},{id:74,name:"Pickering",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.838413,long:-79.086761},{id:75,name:"Prince Edward County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.000338,long:-77.250494},{id:76,name:"Quinte West",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:44.102524,long:-77.581596},{id:77,name:"Richmond Hill",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.8828401,long:-79.4402808},{id:78,name:"Sarnia",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.999443,long:-82.308891},{id:79,name:"St. Catharines",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.159374,long:-79.246864},{id:80,name:"St. Thomas",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:42.778828,long:-81.175369},{id:81,name:"Vaughan",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.837208,long:-79.508278},{id:82,name:"Woodstock",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash.",lat:43.130554,long:-80.746666}],this.cityNameFound="",this.onSearchCityFound=[],this.isFound="false",this.noSearchShow="false",this.showMap="false"}ngOnInit(){}handleAddressChange(n){this.fullAddress=n,console.log(n),this.formattedAddress=n.formatted_address}generateSlug(n){return n.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}getAddress(n){n.scrollIntoView(),this.spinner.show(),this.cityNameFound="",this.onSearchCityFound=[],this.isFound="false",console.log(this.fullAddress);const d=this.fullAddress.address_components.find(T=>T.types.includes("locality"))?.long_name;if(console.log(d),this.cityNameFound=d,""!=this.cityNameFound){for(var _=0;_<this.citiesData.length;_++)this.citiesData[_].name==d&&(this.onSearchCityFound.push(this.citiesData[_]),this.isFound="true",setTimeout(()=>{this.spinner.hide()},1e3),console.log(this.onSearchCityFound),console.log(this.onSearchCityFound.length));"true"!=this.isFound&&(setTimeout(()=>{this.spinner.hide()},1e3),this.isFound="false",this.noSearchShow="true",this.onSearchCityFound.length=0)}else this.onSearchCityFound.length=0,this.isFound="false",setTimeout(()=>{this.spinner.hide()},1e3)}getMap(n){n.scrollIntoView()}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(uo),t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-locations"]],inputs:{heading:"heading",subheading:"subheading"},decls:45,vars:5,consts:[[1,"common-header"],[1,"container","overlay-text"],["data-scrollax-parent","true",1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-lg-10","col-md-12","col-sm-12","col-12","text-center","py-5"],[1,"mb-5"],[1,"row","justify-content-center","align-items-center"],[1,"col-lg-10"],[1,"row","bg-white","py-3","mx-1","border","rounded-3"],[1,"col-lg-1","col-md-1","col-2","m-auto"],["src","../../../assets/images/home/common-header/icons8-location-48.png","width","30","alt",""],[1,"col"],["ngx-google-places-autocomplete","","name","address","type","text","placeholder","Enter your property address","aria-label","Enter you address","aria-describedby","button-addon2",1,"form-control",3,"options","onAddressChange"],["addressInput",""],[1,"col-lg-5","col-md-2","col-12","pt-lg-0","pt-md-0","pt-3","d-flex","justify-content-center","align-items-center"],["type","button","id","button-vary1",1,"btn","btn-danger","col","py-3",3,"disabled","click"],[1,"px-3","d-none","d-lg-block"],["type","button","id","button-vary1",1,"btn","btn-success","col","py-3","d-none","d-lg-block",3,"click"],["target",""],[1,"second-section","bg-light"],[1,"container"],["class","row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-3 ",4,"ngIf"],["class","row",4,"ngIf"],["class","container",4,"ngIf"],["mapView",""],[1,"first-section"],[1,"row"],[1,"col-lg-12","col-12"],[1,"pb-4"],["href","contact","target","_blank"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-3","row-cols-xl-3"],[1,"col-lg-12","col-12","mb-4","text-center"],[1,"col","mb-4"],[1,"card"],[1,"img-container"],["target","_blank",3,"href"],["width","100%","alt","...",1,"card-img-top",3,"src"],[1,"overlay"],[1,"centered"],[1,"card-title"],[1,"card-body","mb-4"],[1,"mt-4"],["href","tel:18889869883"],["src","../../../assets/images/navbar/phone.svg","width","12px","alt",""],[1,"card-text"],[1,"quick-link"],["target","_blank",1,"me-2","fw-bold",3,"href"],["id","notFound",1,"col-lg-12","col-md-12","col-12","text-center","mb-4"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-lg-12","col-12","text-center","pagination","justify-content-center","align-items-center"],[3,"pageChange"]],template:function(d,_){if(1&d){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),t.\u0275\u0275text(6,"Find Local Home Buyers Near You"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t.\u0275\u0275element(11,"img",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",10)(13,"input",11,12),t.\u0275\u0275listener("onAddressChange",function(B){return _.handleAddressChange(B)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div",13)(16,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(23);return t.\u0275\u0275resetView(_.getAddress(B))}),t.\u0275\u0275text(17,"Search"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"span",15),t.\u0275\u0275text(19,"or"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"button",16),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(30);return t.\u0275\u0275resetView(_.getMap(B))}),t.\u0275\u0275text(21,"View Map"),t.\u0275\u0275elementEnd()()()()()()()()(),t.\u0275\u0275elementStart(22,"div",null,17)(24,"section",18)(25,"div",19),t.\u0275\u0275template(26,q0,25,7,"div",20),t.\u0275\u0275template(27,gb,12,1,"div",21),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(28,vb,7,6,"div",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"div",null,23)(31,"div"),t.\u0275\u0275element(32,"app-map"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"section",24)(34,"div",19)(35,"div",25)(36,"div",26)(37,"h2",27),t.\u0275\u0275text(38,"Why Wait? Skip the Stress and Sell Your House to Us."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"p"),t.\u0275\u0275text(40,'If you\u2019re wondering: "where can I sell my house, and how can I sell my house quickly?", we\u2019ve got you covered. Nationwide, our independent Michael the Home Buyer property specialists are locally based, living and working near you. They have the market knowledge needed to make a fair cash offer for your house that you can trust. A quick and easy selling process is a lot closer than you realise. '),t.\u0275\u0275elementStart(41,"a",28),t.\u0275\u0275text(42,"Contact us"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(43," today to sell homes fast."),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(44,"app-footer")}if(2&d){const T=t.\u0275\u0275reference(14);t.\u0275\u0275advance(13),t.\u0275\u0275property("options",_.options),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",!T.value),t.\u0275\u0275advance(10),t.\u0275\u0275property("ngIf",1==_.onSearchCityFound.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0==_.onSearchCityFound.length&&"true"==_.noSearchShow),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","false"==_.isFound)}},dependencies:[bo,cn,fb,On.GooglePlaceDirective,Qn,wn,bv,pb],styles:[".first-section[_ngcontent-%COMP%]{padding:100px 0}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.second-section[_ngcontent-%COMP%], .third-section[_ngcontent-%COMP%]{padding:100px 0}.common-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}.common-header[_ngcontent-%COMP%]{width:100%;height:580px;animation:_ngcontent-%COMP%_changeBackgroundImage 50s infinite;display:flex;align-items:center;text-align:center;background-position:center center;background-repeat:no-repeat;background-attachment:fixed;background-size:cover}@keyframes _ngcontent-%COMP%_changeBackgroundImage{0%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_3.16fd69bec4687052.jpg)}25%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_4.d157ca2ca240f1a4.jpg)}50%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_5.e1889d3fff6d2adf.jpg)}75%{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_6.cc67be70e5697f8a.jpg)}to{background-image:linear-gradient(rgba(0,0,0,.29),rgba(0,0,0,.29)),url(hv_hero_door_7.67e6436bbb629b53.jpg)}}.form-control[_ngcontent-%COMP%]{height:100%}.second-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:green}#notFound[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#a81c1c}#notFound[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}#notFound[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:#d33;text-decoration:none}h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.quick-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#d33}.quick-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.img-container[_ngcontent-%COMP%]{position:relative}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(50%)}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ff00004d;z-index:1}.centered[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.5)}@media only screen and (max-width: 600px){.pagination[_ngcontent-%COMP%]{font-size:12px}}"]})}return l})(),wv=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-speed-and-simplicity"]],decls:98,vars:0,consts:[["heading","Want to sell a house fast?","subheading","We make selling your house fast and easy."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"third-section","bg-light"],[1,"fourth-section"],[1,"row","align-items-center","justify-content-center"],[1,"col-lg-9","col-md-7","col-12","order-lg-2","order-md-2","order-1"],["href","selling-your-house","target","_blank"],["href","tel:18889869883"],[1,"fw-bold"],[1,"pb-5","fw-bold"],[1,"col-lg-3","col-md-5","col-12","justify-content-center","align-items-center","text-center","d-none","d-md-block","order-lg-1","order-md-1","order-2"],["src","../../../assets/images/home/seventh-section/HVA-Red-Shirt-Female-Agent-400x431px.png","width","100%","alt",""],[1,"fifth-section","bg-light"],[1,"sixth-section"],[1,"row","g-4"],[1,"col-lg-2","col-12"],["src","../../../assets/images/why-sell-to-us/experience-and-trust/quote.svg","width","100%","alt",""],[1,"col-lg-10","col-12"],[1,"seventh-section","bg-light"],["href","selling-your-house/experience-and-trust","target","_blank"],["href","selling-your-house/personal-touch","target","_blank"],["href","how-does-it-work","target","_blank"],["href","reviews","target","_blank"],["href","questions-about-selling-your-home","target","_blank"],["href","contact","target","_blank"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),t.\u0275\u0275text(7,"#Michael the Home Buyer Home Buyer\xae is all about speed and simplicity."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p"),t.\u0275\u0275text(9,"There\u2019s lots of reasons for why you need (or just want) to sell your house fast. It could be a job relocation. There might be structural issues you don\u2019t want to deal with. Or you\u2019ve got an inherited house that\u2019s too far away to manage and you just don\u2019t want to deal with it."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p"),t.\u0275\u0275text(11,'Michael the Home Buyer is the perfect solution for homeowners looking for a quick and easy way to sell their house and get cash in their hand. We buy houses "as is" for cash, which means we save our customers a ton of time in property repairs, realtor meetings, house showings, waiting for "house selling season," etc. We also cover typical closing costs and there are no listing fees. And we\u2019re just a simple click or call away.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"p"),t.\u0275\u0275text(13,"Whether you contact us over the phone or online, it all starts with a very simple, free in-home consultation. From there, we can make you an honest and fair cash offer to purchase your house. If you choose to accept our offer, we\u2019ll be with you every step of the sale. You\u2019ll have cash in your hand in no time."),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(14,"app-reviews-carousal"),t.\u0275\u0275elementStart(15,"section",6)(16,"div",2)(17,"div",3)(18,"div",4)(19,"h2",5),t.\u0275\u0275text(20,'We hear "I want to sell my house fast" everyday... and we\'re here to help!'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"p"),t.\u0275\u0275text(22,"In real estate, things can move at a snail\u2019s pace. When you want or need to sell quickly, using traditional methods can be frustrating. That\u2019s why we buy any house fast."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"p"),t.\u0275\u0275text(24,"It can take weeks to get your house listed through traditional channels. First you have to find a Realtor, sign with them, clean and prep the house, schedule a photos shoot\u2026all just to get it listed. Then the waiting game begins."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"p"),t.\u0275\u0275text(26,'Houses can sit on the market for months or years before getting a valid offer. In the meantime, you\u2019re stuck paying the mortgage, utilities and home insurance on a vacant house. Or, you\u2019re arranging your life around your realtor\u2019s showing schedule and always having to keep the house "showing ready."'),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(27,"section",7)(28,"div",2)(29,"div",8)(30,"div",9)(31,"h2",5),t.\u0275\u0275text(32,"Getting started is easy."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"p")(34,"a",10),t.\u0275\u0275text(35,"Selling my house is easy"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(36,". So is getting started. All you have to do is enter your address at the top of the page or call "),t.\u0275\u0275elementStart(37,"a",11),t.\u0275\u0275text(38,"1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(39," and your local property specialist will contact you shortly."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"p",12),t.\u0275\u0275text(41,"Remember: There\u2019s no pressure and no obligation to accept our offer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"p",13),t.\u0275\u0275text(43,"We can simply make you an offer to buy your house for cash that you\u2019re free to accept or keep looking. It\u2019s that simple."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(44,"div",14),t.\u0275\u0275element(45,"img",15),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(46,"section",16)(47,"div",2)(48,"div",3)(49,"div",4)(50,"h2",5),t.\u0275\u0275text(51,"We can close on your house in as little as 3 weeks."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"p"),t.\u0275\u0275text(53,"That\u2019s all it takes. We\u2019ll visit your house for a free, no-obligation consultation, where our knowledgeable, property specialist can make you a fair offer. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(54,"p"),t.\u0275\u0275text(55,"You can choose to accept our offer or keep looking. There\u2019s no pressure. There never is, when you call Michael the Home Buyer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"p"),t.\u0275\u0275text(57,'If you accept the offer, we can move quickly. We understand that time is important to you, and that you want to sell your house fast, with as few hassles as possible. That\u2019s why we make cash offers. What we mean by we buy any house fast, is that you can sell your house "as is" with no cleanup or repairs. At closing, we take care of all typical closing costs.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"p"),t.\u0275\u0275text(59,"In many cases, we can close in as little as 3 weeks or on your timeline (or longer, if that\u2019s your timeline). "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(60,"section",17)(61,"div",2)(62,"div",18)(63,"div",19),t.\u0275\u0275element(64,"img",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"div",21)(66,"h3",5),t.\u0275\u0275text(67,"Selling my lifelong home could have been difficult, but Michael the Home Buyer made it very easy. The fair evaluation was confirmed to me by one of the area\u2019s leading home sellers. The sale of my home was fair and smooth."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(68,"h5"),t.\u0275\u0275text(69,"- Eric U., Sussex, WI"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(70,"section",22)(71,"div",2)(72,"div",3)(73,"div",4)(74,"h2",5),t.\u0275\u0275text(75,"Want to know more about what makes Michael the Home Buyer stand out from the crowd?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(76,"p"),t.\u0275\u0275text(77,"Read about our "),t.\u0275\u0275elementStart(78,"a",23),t.\u0275\u0275text(79,"experience"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(80,","),t.\u0275\u0275elementStart(81,"a",24),t.\u0275\u0275text(82,"personal touch"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(83,", and "),t.\u0275\u0275elementStart(84,"a",25),t.\u0275\u0275text(85,"how we do what we do"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(86,". Want more proof? Read "),t.\u0275\u0275elementStart(87,"a",26),t.\u0275\u0275text(88,"\u202ftestimonials"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(89," from satisfied customers across the Canada."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(90,"p"),t.\u0275\u0275text(91,"If you still have questions, we may have the answers you are looking for in our "),t.\u0275\u0275elementStart(92,"a",27),t.\u0275\u0275text(93,"\u202fFAQs"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(94," section. Or, feel free to "),t.\u0275\u0275elementStart(95,"a",28),t.\u0275\u0275text(96,"contact us."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275element(97,"app-footer"))},dependencies:[Qn,wn,fi,Oi],styles:[".first-section[_ngcontent-%COMP%], .third-section[_ngcontent-%COMP%], .fourth-section[_ngcontent-%COMP%]{padding:100px 0}.fourth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.fourth-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.fifth-section[_ngcontent-%COMP%], .sixth-section[_ngcontent-%COMP%]{padding:100px 0}@media only screen and (max-width: 992px){.sixth-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}}.seventh-section[_ngcontent-%COMP%]{padding:100px 0}.seventh-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.seventh-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return l})(),bb=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-vs-traditional-realtors"]],decls:113,vars:0,consts:[["heading","Michael the Home Buyer vs Traditional Realtors","subheading","Know the difference."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"mt-4","table-responsive"],["cellpadding","0","cellspacing","0",1,"table","hv-table","red"],["role","presentation","data-uw-rm-sr",""],[1,"second-section","bg-light"],[1,"third-section"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2"),t.\u0275\u0275text(7,"How long will it take to sell my house?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"h3",5),t.\u0275\u0275text(9,"Sell My House Fast"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p")(11,"i"),t.\u0275\u0275text(12,'"I want to sell my house fast for cash, can a realtor help?"'),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(13," The answer is likely no. Homeowners that don't need to sell their house quickly and have the time and patience to wait for retail price on their house often hire a realtor to help them with the traditional selling route. But, homeowners looking for a simple selling process and want to move on quickly may not find this traditional route works for them."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"p"),t.\u0275\u0275text(15,"There are definitely pluses to hiring a qualified real estate agent. But if you want to sell a house fast (and without hassles)... there are a few minuses. Check out below how selling your house to Michael the Home Buyer compares to the traditional selling route."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",6)(17,"table",7)(18,"thead")(19,"tr")(20,"td"),t.\u0275\u0275element(21,"br",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"td"),t.\u0275\u0275text(23,"Traditional Selling"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"td"),t.\u0275\u0275text(25,"Michael the Home Buyer"),t.\u0275\u0275elementStart(26,"sup"),t.\u0275\u0275text(27,"\xae"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(28,"tbody")(29,"tr")(30,"td"),t.\u0275\u0275text(31,"Commissions/Fees:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"td"),t.\u0275\u0275text(33,"6% (national avg. paid by seller)"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"td"),t.\u0275\u0275text(35,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(36,"tr")(37,"td"),t.\u0275\u0275text(38,"Typical Closing Costs:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"td"),t.\u0275\u0275text(40,"2% (national avg. paid by seller)"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"td"),t.\u0275\u0275text(42,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(43,"tr")(44,"td"),t.\u0275\u0275text(45,"Inspection/Financing Contingency:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"td"),t.\u0275\u0275text(47,"Time off work for inspection"),t.\u0275\u0275element(48,"br",8),t.\u0275\u0275text(49,"(15% of sales financing fails) "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(50,"td"),t.\u0275\u0275text(51,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(52,"tr")(53,"td"),t.\u0275\u0275text(54,"Appraisal Needed:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(55,"td"),t.\u0275\u0275text(56,"Sale can be subject to appraisal"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(57,"td"),t.\u0275\u0275text(58,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(59,"tr")(60,"td"),t.\u0275\u0275text(61,"Cleaning & Prepping:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"td"),t.\u0275\u0275text(63,"Time spent before every showing"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(64,"td"),t.\u0275\u0275text(65,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(66,"tr")(67,"td"),t.\u0275\u0275text(68,"Number of Showings:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(69,"td"),t.\u0275\u0275text(70,"Can be countless"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(71,"td"),t.\u0275\u0275text(72,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(73,"tr")(74,"td"),t.\u0275\u0275text(75,"Repairs:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(76,"td"),t.\u0275\u0275text(77,"Repairs are made both before listing and then again after the inspection"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(78,"td"),t.\u0275\u0275text(79,"None"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(80,"tr")(81,"td"),t.\u0275\u0275text(82,"Average Days Until Sold:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(83,"td"),t.\u0275\u0275text(84,"Varies depending on location and market conditions: National Avg. 68 days on market plus an additional 30-60 days after accepting the offer to close"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(85,"td"),t.\u0275\u0275text(86,"Close in as little as 3 weeks"),t.\u0275\u0275elementEnd()()()()()()()()(),t.\u0275\u0275elementStart(87,"section",9)(88,"div",2)(89,"div",3)(90,"div",4)(91,"h2",5),t.\u0275\u0275text(92,"Canada's#1 cash home buyer"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(93,"p"),t.\u0275\u0275text(94,"Every day, homeowners trust us to make fast and fair cash offers\u2014and we come through. We buy homes fast. We have long-lasting relationships with lenders, making financing easy. Our free, no-obligation consultations are held at your house so we can visit your property and possibly make a fair cash offer. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"p"),t.\u0275\u0275text(96,"We strive to provide a personalised, hassle-free process. Selling a house is a major life decision with many details, choices, and things to consider. When we\u2019re working with seniors, we encourage them to have family members or friends join the conversation and ask questions during our visit and throughout every step along the way. We understand it\u2019s important to have support and guidance from loved ones throughout the process."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(97,"p"),t.\u0275\u0275text(98,"If the sale is complicated or if it makes the homeowner more comfortable, we\u2019re also happy to include whatever type of advisor the seller wishes to have present so that we can answer any questions they might have at our initial meeting, or at any time during the sale. "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(99,"section",10)(100,"div",2)(101,"div",11)(102,"div",12)(103,"div",13)(104,"h2"),t.\u0275\u0275text(105,"Why wait? Let's get started today."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(106,"div",14)(107,"div",15)(108,"p"),t.\u0275\u0275text(109,"With us, there\u2019s no obligation or pressure, and our in home consultation is free. We simply take a quick look at your house and can make you a fair cash offer on the spot. That's all there is to it."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(110,"a",16),t.\u0275\u0275text(111,"Contact us today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(112,"app-footer"))},dependencies:[Qn,wn,fi],styles:[".first-section[_ngcontent-%COMP%], .second-section[_ngcontent-%COMP%]{padding:100px 0}.third-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.hv-table[_ngcontent-%COMP%]{border-collapse:separate;max-width:1200px;margin:auto}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:0}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#a81c1c;color:#fff;text-transform:uppercase;padding:.8rem .625rem .8rem 1.625rem}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{border:0}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{box-shadow:inset 0 5px 6px #0000001a}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;border-bottom:1px solid #c7c7c7;font-size:1rem;padding:.4rem .625rem .4rem 1.625rem}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:1px solid #c7c7c7}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:12px}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:12px}"]})}return l})(),Zx=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-vs-online-buyers"]],decls:121,vars:0,consts:[["heading","Michael the Home Buyer\xae vs Online Buyers","subheading","Know the difference."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"mt-4","table-responsive"],[1,"hv-table","red","table",2,"width","100%"],[2,"width","33.3333%"],["role","presentation","data-uw-rm-sr",""],[1,"second-section","bg-light"],["href","selling-your-house/reviews","target","_blank"],[1,"third-section"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2"),t.\u0275\u0275text(7,"Can You Trust Sight Unseen Offers?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"h3",5),t.\u0275\u0275text(9,"Michael the Home Buyer is the top among companies that buy property for cash."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p"),t.\u0275\u0275text(11,"Recently, several online home buyers have emerged that make attractive initial offers without even seeing your house. Not many homeowners realise upfront that hidden fees and commissions are not uncommon with online home buyers. How is that fair (or convenient) to you?"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"p"),t.\u0275\u0275text(13,"When we buy a house, it always starts with a personal or virtual visit. After a quick consultation, we can make you a fair, no-obligation offer on the spot. Sellers have trusted our fair offers for almost 30 years. And, we\u2019ll be there to walk you through every step of the sale."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"p"),t.\u0275\u0275text(15,"See the chart below on how Michael the Home Buyer compares to online home buyers."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",6)(17,"table",7)(18,"thead")(19,"tr")(20,"td",8),t.\u0275\u0275text(21,"Look at the Difference"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"td",8),t.\u0275\u0275text(23,"Online Home Buyers"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"td",8),t.\u0275\u0275text(25,"Michael the Home Buyer"),t.\u0275\u0275elementStart(26,"sup"),t.\u0275\u0275text(27,"\xae"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(28,"tbody")(29,"tr")(30,"td",8),t.\u0275\u0275text(31,"Personalized Service"),t.\u0275\u0275element(32,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"td",8),t.\u0275\u0275text(34,"No"),t.\u0275\u0275element(35,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(36,"td",8),t.\u0275\u0275text(37,"Yes"),t.\u0275\u0275element(38,"br",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(39,"tr")(40,"td",8),t.\u0275\u0275text(41,"Locally Based"),t.\u0275\u0275element(42,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"td",8),t.\u0275\u0275text(44,"Rarely"),t.\u0275\u0275element(45,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"td",8),t.\u0275\u0275text(47,"Yes"),t.\u0275\u0275element(48,"br",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(49,"tr")(50,"td",8),t.\u0275\u0275text(51,"Years in Business"),t.\u0275\u0275element(52,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"td",8),t.\u0275\u0275text(54,"Varies; many are startups"),t.\u0275\u0275element(55,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(56,"td",8),t.\u0275\u0275text(57,"Since 2014"),t.\u0275\u0275element(58,"br",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(59,"tr")(60,"td",8),t.\u0275\u0275text(61,"Share a Defined Code Of Ethics"),t.\u0275\u0275element(62,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(63,"td",8),t.\u0275\u0275text(64,"No"),t.\u0275\u0275element(65,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(66,"td",8),t.\u0275\u0275text(67,"Yes"),t.\u0275\u0275element(68,"br",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(69,"tr")(70,"td",8),t.\u0275\u0275text(71,"Charges Hidden Fees At Closing"),t.\u0275\u0275element(72,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(73,"td",8),t.\u0275\u0275text(74,"Often"),t.\u0275\u0275element(75,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(76,"td",8),t.\u0275\u0275text(77,"Never"),t.\u0275\u0275element(78,"br",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(79,"tr")(80,"td",8),t.\u0275\u0275text(81,"Covers Typical Closing Costs"),t.\u0275\u0275element(82,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(83,"td",8),t.\u0275\u0275text(84,"Varies"),t.\u0275\u0275element(85,"br",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(86,"td",8),t.\u0275\u0275text(87,"Yes"),t.\u0275\u0275element(88,"br",9),t.\u0275\u0275elementEnd()()()()()()()()(),t.\u0275\u0275elementStart(89,"section",10)(90,"div",2)(91,"div",3)(92,"div",4)(93,"h2"),t.\u0275\u0275text(94,"Michael the Home Buyer always sees your house before making an offer."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"h3",5),t.\u0275\u0275text(96,"We Pay Cash For Houses"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(97,"p"),t.\u0275\u0275text(98,"Let\u2019s be honest: Would you make an offer on a house without seeing it? Online buyers do."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(99,"p"),t.\u0275\u0275text(100,'Online buyers use computer algorithms to make unsolicited, "sight-unseen" offers. If you are interested, they eventually look at your house in person. It\u2019s not unusual to be asked to make allowances for clean up and repair. Then, at closing, you may be surprised with hidden fees and closing costs that had not been mentioned before.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(101,"p"),t.\u0275\u0275text(102,'You won\u2019t encounter these types of issues with Michael the Home Buyer. We always visit your house in person first. Then we can make you a fair cash offer on your house, sometimes on the same day. Because we buy "as is," you\u2019re never asked to pay for clean up or repair. There are no hidden fees, and we cover most typical closing costs. '),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(103,"p"),t.\u0275\u0275text(104,"Online buyers may seem like the easy option at first, but you can\u2019t count on their offer being fair. Michael the Home Buyer is Canada's#1 home buyer because we\u2019ve purchased over 2,500 houses since 2014 the same way\u2026in person with no surprises. When you want a fast, fair, all cash offer you can count on, call Michael the Home Buyer. We have the track record to prove it, just "),t.\u0275\u0275elementStart(105,"a",11),t.\u0275\u0275text(106,"read Michael the Home Buyer reviews."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(107,"section",12)(108,"div",2)(109,"div",13)(110,"div",14)(111,"div",15)(112,"h2"),t.\u0275\u0275text(113,"Get An Offer You Can Trust."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(114,"div",16)(115,"div",17)(116,"p"),t.\u0275\u0275text(117,"Let us take a quick look at your house and then we can make you an offer on the spot. And we don\u2019t charge a commission and pay typical closing costs. That's all there is to it."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(118,"a",18),t.\u0275\u0275text(119,"Contact us today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(120,"app-footer"))},dependencies:[Qn,wn,fi],styles:[".first-section[_ngcontent-%COMP%], .second-section[_ngcontent-%COMP%]{padding:100px 0}.third-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.hv-table[_ngcontent-%COMP%]{border-collapse:separate;max-width:1200px;margin:auto}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:0}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#a81c1c;color:#fff;text-transform:uppercase;padding:.8rem .625rem .8rem 1.625rem}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{border:0}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{box-shadow:inset 0 5px 6px #0000001a}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;border-bottom:1px solid #c7c7c7;font-size:1rem;padding:.4rem .625rem .4rem 1.625rem}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:1px solid #c7c7c7}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:12px}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:12px}"]})}return l})(),Yx=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-vs-local-flippers"]],decls:126,vars:0,consts:[["heading","Michael the Home Buyer\xae vs Local Flippers","subheading","Know the difference."],[1,"first-section"],[1,"container"],[1,"row"],[1,"col-lg-12","col-12"],[1,"mb-4"],[1,"mt-4","table-responsive"],["cellpadding","0","cellspacing","0",1,"hv-table","red","table"],[1,"second-section","bg-light"],["href","selling-your-house/reviews","target","_blank"],[1,"third-section"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","pb-5"],[1,"header"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],["href","contact","target","_blank","id","button-vary1",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar")(1,"app-common-header",0),t.\u0275\u0275elementStart(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2"),t.\u0275\u0275text(7,"Not all cash home buyers operate the same."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"h3",5),t.\u0275\u0275text(9,"We Pay Cash For Houses"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"p"),t.\u0275\u0275text(11,'Have you noticed all the "mom and pop" cash home buyers popping up everywhere? Yep, us too. They all say the same thing, how they\u2019ll buy any house in any condition for cash and close quickly. Who should you trust?'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"p"),t.\u0275\u0275text(13,"Trust Canada's#1 home buyer, Michael the Home Buyer\xae. We've purchased over 2,500 houses nationwide, not just a few houses like the inexperienced guys. We've been the preeminent homebuyer in the industry since 2014. We make fair cash offers you can trust, fast."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"p"),t.\u0275\u0275text(15,"If you\u2019re thinking of selling to a local flipper, read below and see why you should consider Michael the Home Buyer\xae. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",6)(17,"table",7)(18,"thead")(19,"tr")(20,"td"),t.\u0275\u0275text(21,"Look at the Difference"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"td"),t.\u0275\u0275text(23,"Local Flippers"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"td"),t.\u0275\u0275text(25,"Michael the Home Buyer"),t.\u0275\u0275elementStart(26,"sup"),t.\u0275\u0275text(27,"\xae"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(28,"tbody")(29,"tr")(30,"td"),t.\u0275\u0275text(31,"Proven, reliable track record"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"td"),t.\u0275\u0275text(33,"Varies"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"td"),t.\u0275\u0275text(35,"Yes"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(36,"tr")(37,"td"),t.\u0275\u0275text(38,"Years In Business"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"td"),t.\u0275\u0275text(40,"Varies"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"td"),t.\u0275\u0275text(42,"Since 2014"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(43,"tr")(44,"td"),t.\u0275\u0275text(45,"Makes A Fair Offer"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"td"),t.\u0275\u0275text(47,"Sometimes"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(48,"td"),t.\u0275\u0275text(49,"Yes"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(50,"tr")(51,"td"),t.\u0275\u0275text(52,"Avoids Bank Delays"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"td"),t.\u0275\u0275text(54,"Varies"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(55,"td"),t.\u0275\u0275text(56,"Yes"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(57,"tr")(58,"td"),t.\u0275\u0275text(59,"Covers Typical Closing Costs"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(60,"td"),t.\u0275\u0275text(61,"Varies"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(62,"td"),t.\u0275\u0275text(63,"Yes"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(64,"tr")(65,"td"),t.\u0275\u0275text(66,"Closes Quickly"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(67,"td"),t.\u0275\u0275text(68,"Varies"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(69,"td"),t.\u0275\u0275text(70,"Yes"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(71,"tr")(72,"td"),t.\u0275\u0275text(73,"Requests Repairs Or Repair Allowances"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(74,"td"),t.\u0275\u0275text(75,"Often"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(76,"td"),t.\u0275\u0275text(77,"No"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(78,"tr")(79,"td"),t.\u0275\u0275text(80,"Deals Fall Apart During Financing"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(81,"td"),t.\u0275\u0275text(82,"Often"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(83,"td"),t.\u0275\u0275text(84,"No"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(85,"tr")(86,"td"),t.\u0275\u0275text(87,"Share A Defined Code Of Ethics"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(88,"td"),t.\u0275\u0275text(89,"No"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(90,"td"),t.\u0275\u0275text(91,"Yes"),t.\u0275\u0275elementEnd()()()()()()()()(),t.\u0275\u0275elementStart(92,"section",8)(93,"div",2)(94,"div",3)(95,"div",4)(96,"h2"),t.\u0275\u0275text(97,"Sell your house to the buyer you can trust."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(98,"h3",5),t.\u0275\u0275text(99,"We Buy Houses Fast"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(100,"p"),t.\u0275\u0275text(101,'When you try to sell your house to a local flipper, you may find an experienced pro with an acceptable reputation. Then again, you might end up with an absolute novice or unreputable person. These include people who attended a seminar or watched an HGTV show, and decided to "try their hand" at rehabbing a property. The results can be very frustrating.'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(102,"p"),t.\u0275\u0275text(103,"Local flippers are not bound by a common code of ethics. Some of them make offers and back out. Other companies that buy houses make an offer then ask you to make concessions for the repair and clean up. Many even encounter problems getting financing for a loan. Many novices even get cold feet in the middle of the transaction and simply walk away."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(104,"p"),t.\u0275\u0275text(105,'You won\u2019t encounter these issues with Michael the Home Buyer\xae. We make fair cash offers that won\'t be subject to hidden fees. There are no bank delays. And we all embrace the same standards: buying houses "as is" - that means no cleanup or repair needed. We can close in as little as 3 weeks or on your timeline (taking longer if you choose).'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(106,"p"),t.\u0275\u0275text(107,"A local flipper may seem eager to buy your house, but there are many potential pitfalls and headaches. When you want a fast, fair, all cash offer that you can really trust, call Michael the Home Buyer. We have the track record to prove it, just "),t.\u0275\u0275elementStart(108,"a",9),t.\u0275\u0275text(109,"read Michael the Home Buyer reviews."),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(110,"section",10)(111,"div",2)(112,"div",11)(113,"div",12)(114,"div",13)(115,"h2"),t.\u0275\u0275text(116,"Go with the cash home buyer you can trust... "),t.\u0275\u0275element(117,"br"),t.\u0275\u0275text(118,"Michael the Home Buyer\xae"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(119,"div",14)(120,"div",15)(121,"p"),t.\u0275\u0275text(122,"We have the experience and know-how to close on your house as promised! Let us take a quick look at your house and then we can make you a fair cash offer on the spot that you can trust. That's all there is to it. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(123,"a",16),t.\u0275\u0275text(124,"Contact us today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(125,"app-footer"))},dependencies:[Qn,wn,fi],styles:[".first-section[_ngcontent-%COMP%], .second-section[_ngcontent-%COMP%]{padding:100px 0}.third-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.hv-table[_ngcontent-%COMP%]{border-collapse:separate;max-width:1200px;margin:auto}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:0}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#a81c1c;color:#fff;text-transform:uppercase;padding:.8rem .625rem .8rem 1.625rem}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.hv-table.red[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{border:0}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{box-shadow:inset 0 5px 6px #0000001a}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-right:1px solid #c7c7c7;border-bottom:1px solid #c7c7c7;font-size:1rem;padding:.4rem .625rem .4rem 1.625rem}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:1px solid #c7c7c7}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:12px}.hv-table.red[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:12px}"]})}return l})(),Xx=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-thank-you"]],decls:12,vars:0,consts:[[1,"thank-you"],[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-lg-8","col-md-8","col-sm-12","col-12","text-center"],[1,"mb-3"],["src","../../../assets/images/thank-you/tick.gif","alt",""],[1,"fs-3"],["href","/","id","button-vary1",1,"btn","btn-danger","px-5","py-3"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.\u0275\u0275element(5,"img",5),t.\u0275\u0275elementStart(6,"h1"),t.\u0275\u0275text(7,"THANK YOU"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"p",6),t.\u0275\u0275text(9,"Form has been submitted successfully. Thank you for your request, we'll be in contact within 24 hours for a fair cash offer."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"a",7),t.\u0275\u0275text(11,"Go Back"),t.\u0275\u0275elementEnd()()()()())},styles:[".thank-you[_ngcontent-%COMP%]{font-family:Oswald,sans-serif}"]})}return l})();const Kx=["firstNameInput"],Qx=["lastNameInput"],xb=["emailInput"],wb=["phoneInput"],Eb=["commentsInput"];let Jx=(()=>{class l{constructor(n,d,_,T,P){this.route=n,this.spinner=d,this.http=_,this._toast=T,this._apiCallServices=P,this.formData={firstName:"",lastName:"",phoneNumber:"",email:"",comments:"",requestRespond:""},this.phoneNumberInputMask=ss({mask:"(999) 999-9999"})}feedbackFormData(n){console.log(n.value);var d;d=1==n.value.requestRespond?"Yes":"No",this.spinner.show(),console.log(n.value),n.value.firstName=this.firstNameInput.nativeElement.value,n.value.lastName=this.lastNameInput.nativeElement.value,n.value.email=this.emailInput.nativeElement.value,n.value.phoneNumber=this.phoneInput.nativeElement.value,n.value.comments=this.commentsInput.nativeElement.value,this._apiCallServices.feedbackFormApi(n.value.firstName,n.value.lastName,n.value.phoneNumber,n.value.email,n.value.comments,d).subscribe(_=>{console.log(_),"success"==_.status?(setTimeout(()=>{this.spinner.hide()},1e3),this._toast.success({detail:"THANK YOU",summary:"Feedback successfully submitted",position:"br"}),setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3)):("error"==_.status||"timeout"==_.status)&&(alert(_.message),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3))},_=>{var T="",P=[];""==n.value.firstName?P.push("First Name"):""==n.value.lastName?P.push("Last Name"):""==n.value.email?P.push("Email"):""==n.value.phoneNumber?P.push("Phone Number"):""==n.value.comments?P.push("Tell us about your experience"):T="Unable to submit. Please re-enter the details manually, in the form. Avoid selecting from pre filled options.",T=0==P.length?"Unable to submit. Maybe enter the details manually in the webform instead of Pre-filled options. or please try after sometime! ":"Unable to submit. Please re-enter "+P+", and try again. Try to enter the details manually.",alert(T),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3)},()=>console.log("FEEDBACK FORM SUMBITTED SUCCESSFULLY"))}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(bd),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(Mf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-feedback"]],viewQuery:function(d,_){if(1&d&&(t.\u0275\u0275viewQuery(Kx,5),t.\u0275\u0275viewQuery(Qx,5),t.\u0275\u0275viewQuery(xb,5),t.\u0275\u0275viewQuery(wb,5),t.\u0275\u0275viewQuery(Eb,5)),2&d){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.firstNameInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.lastNameInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.emailInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.phoneInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.commentsInput=T.first)}},decls:86,vars:8,consts:[[1,"intro"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-8","col-12"],[1,"first-section"],[1,"row","justify-content-center","align-items-center"],[1,"col-lg-10","col-md-12","col-12"],["novalidate","",1,"needs-validation",3,"ngSubmit"],["feedbackForm","ngForm"],[1,"row"],[1,"col-lg-6","col-md-6","col-12"],[1,"col-lg-6","col-md-6","col-6"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","placeholder","First Name","name","firstName","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstNameRef","ngModel","firstNameInput",""],["for","floatingInput"],["type","text","id","floatingInput","placeholder","Last Name","name","lastName","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastNameRef","ngModel","lastNameInput",""],["type","tel","id","floatingInput","placeholder","Phone Number","name","phoneNumber","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["phoneNumberRef","ngModel","phoneInput",""],["type","email","id","floatingInput","placeholder","Email","name","email","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["emailRef","ngModel","emailInput",""],[1,"col-lg-12","col-12"],["placeholder","Leave a comment here","name","comments","ngModel","","required","",1,"form-control",2,"height","200px",3,"ngModel","ngModelChange"],["commentsRef","ngModel","commentsInput",""],["for","floatingTextarea"],[1,"mt-4","form-check"],["type","checkbox","name","requestRespond",1,"form-check-input",3,"ngModel","ngModelChange"],["for","exampleCheck1",1,"form-check-label"],[1,"mt-4"],["type","submit","id","button-vary1",1,"btn","btn-danger","px-5","py-3",3,"disabled"],[1,"second-section","bg-light"],[1,"col-lg-10","col-md-12","col-12","py-5"],[1,"header"],[1,"third-section"],[1,"col-lg-8","pb-5"],[1,"row","justify-content-center","text-center"],[1,"col-lg-8"],[1,"anchor-para"],["href","questions-about-selling-your-home","id","button-vary1","target","_blank",1,"btn","btn-dark","px-5","py-3","mt-4"]],template:function(d,_){if(1&d){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1"),t.\u0275\u0275text(6,"Give Us Your Feedback!"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"h3"),t.\u0275\u0275text(8,"Help us grow by sharing your feedback. We value your input as we strive to continuously improve and learn. Complete our quick form today!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(9,"section",4)(10,"div",1)(11,"div",5)(12,"div",6)(13,"form",7,8),t.\u0275\u0275listener("ngSubmit",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(14);return t.\u0275\u0275resetView(_.feedbackFormData(B))}),t.\u0275\u0275elementStart(15,"div",9)(16,"div",10)(17,"div",9)(18,"div",11)(19,"div",12)(20,"input",13,14),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.firstName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"label",15),t.\u0275\u0275text(24,"First name*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(25,"div",11)(26,"div",12)(27,"input",16,17),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.lastName=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"label",15),t.\u0275\u0275text(31,"Last name*"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(32,"div",10)(33,"div",9)(34,"div",10)(35,"div",12)(36,"input",18,19),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.phoneNumber=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"label",15),t.\u0275\u0275text(40,"Phone number*"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(41,"div",10)(42,"div",12)(43,"input",20,21),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.email=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"label",15),t.\u0275\u0275text(47,"Email*"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(48,"div",22)(49,"div",12)(50,"textarea",23,24),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.comments=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"label",25),t.\u0275\u0275text(54,"Tell us about your experience*"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(55,"div",26)(56,"input",27),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.requestRespond=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(57,"label",28),t.\u0275\u0275text(58,"Check this box, if you like us to respond by email. "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(59,"div",29)(60,"button",30),t.\u0275\u0275text(61,"Submit Feedback"),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(62,"section",31)(63,"div",1)(64,"div",2)(65,"div",32)(66,"div",33),t.\u0275\u0275element(67,"hr"),t.\u0275\u0275elementStart(68,"h1"),t.\u0275\u0275text(69,"We value your feedback as it plays a vital role in improving our services. Your insights and suggestions are invaluable to us in our continuous efforts to provide you with an exceptional experience. "),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(70,"hr"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(71,"section",34)(72,"div",1)(73,"div",2)(74,"div",35)(75,"div",33)(76,"h2"),t.\u0275\u0275text(77,"Get answers to commonly asked questions."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(78,"div",36)(79,"div",37)(80,"div",38)(81,"p"),t.\u0275\u0275text(82,"Explore our FAQ page for answers to the most popular questions we\u2019ve received over the past 25\u202fyears. It\u2019s a valuable resource to find the information you may be looking for."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(83,"a",39),t.\u0275\u0275text(84,"FAQs"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(85,"app-footer")}if(2&d){const T=t.\u0275\u0275reference(14);t.\u0275\u0275advance(20),t.\u0275\u0275property("ngModel",_.formData.firstName),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.lastName),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngModel",_.formData.phoneNumber)("inputMask",_.phoneNumberInputMask),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.email),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.comments),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",_.formData.requestRespond),t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",!T.form.valid)}},dependencies:[cp,ep,wd,Df,ng,dp,lp,Ed,Gy,Qn,wn],styles:['.intro[_ngcontent-%COMP%]{color:#fff;padding:140px 0;background-image:url(https://exprealty.com/wp-content/uploads/First-Time-Home-Buyers-Step-by-Step-Guide.jpg);position:relative;background-size:cover;background-repeat:no-repeat;background-position:center bottom;z-index:0}.intro[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;background:linear-gradient(90deg,rgba(162,75,75,.84) 19.27%,rgba(217,217,217,0) 100%);z-index:-1}.first-section[_ngcontent-%COMP%]{padding:100px 0}.second-section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:1px solid red!important}.third-section[_ngcontent-%COMP%]{background-color:#a81c1c;padding:100px 0;color:#fff}.third-section[_ngcontent-%COMP%]   .anchor-para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#ffdd05!important}.third-section[_ngcontent-%COMP%]   .anchor-para[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']})}return l})();const Cb=["firstNameInput"],ew=["lastNameInput"],Ow=["emailInput"],tw=["phoneInput"],nw=["citiesLikeToBuyInput"],Z0=["propertyCriteriaInput"],Wy=["returnLokkingInput"],iw=["handlePropertiesPerMonthInput"];function rw(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"option",60),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&l){const n=a.$implicit;t.\u0275\u0275property("value",n.label)("selected",1==n.status),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.label,"")}}function Sb(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"option",60),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&l){const n=a.$implicit;t.\u0275\u0275property("value",n.label)("selected",1==n.status),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.label,"")}}let Pf=(()=>{class l{constructor(n,d,_,T,P){this.route=n,this.spinner=d,this.http=_,this._toast=T,this._apiCallServices=P,this.formData={firstName:"",lastName:"",phoneNumber:"",email:"",citiesLikeToBuy:"",propertyCriteria:"",returnLokking:"",handlePropertiesPerMonth:"",buyAndHold:""},this.phoneNumberInputMask=ss({mask:"(999) 999-9999"}),this.ngmodalData={},this.selectedTimeToCloseDeal="",this.selectedCloseOnNextDeal="",this.timeToCloseOnDeal=[{id:1,label:"15-30 days",status:!0},{id:2,label:"30-60 days",status:!1},{id:3,label:"60-90 days",status:!1},{id:4,label:"90 days",status:!1}],this.closeOnNextDeal=[{id:1,label:"ASAP",status:!0},{id:2,label:"1 months",status:!1},{id:3,label:"3 months",status:!1},{id:4,label:"6+ months",status:!1}],this.buyholdOrfixdeals=[],this.purchasePropertes=[],this.otherServicesCanHelp=[]}ngOnInit(){}selectChangeHandler1(n){this.selectedTimeToCloseDeal=n.target.value}selectChangeHandler2(n){this.selectedCloseOnNextDeal=n.target.value}investorSignupFormData(n){this.spinner.show(),this.buyholdOrfixdeals=[],this.purchasePropertes=[],this.otherServicesCanHelp=[],console.log(n.value),console.log(this.selectedTimeToCloseDeal),""==this.selectedTimeToCloseDeal&&(this.selectedTimeToCloseDeal="15-30 days"),console.log(this.selectedCloseOnNextDeal),""==this.selectedCloseOnNextDeal&&(this.selectedCloseOnNextDeal="ASAP"),1==n.value.buyAndHold&&this.buyholdOrfixdeals.push("Buy and Hold"),0==n.value.buyAndHold&&this.buyholdOrfixdeals.filter(d=>"Buy and Hold"!==d),1==n.value.fixAndFlip&&this.buyholdOrfixdeals.push("Fix Deals"),0==n.value.fixAndFlip&&this.buyholdOrfixdeals.filter(d=>"Fix Deals"!==d),this.buyholdOrfixdeals.join(" , "),console.log(this.buyholdOrfixdeals.join(" , ")),1==n.value.liquid&&this.purchasePropertes.push("Liquid"),0==n.value.liquid&&this.purchasePropertes.filter(d=>"Liquid"!==d),1==n.value.borrowCapital&&this.purchasePropertes.push("Borrow Capital"),0==n.value.borrowCapital&&this.purchasePropertes.filter(d=>"Borrow Capital"!==d),this.purchasePropertes.join(" , "),console.log(this.purchasePropertes.join(" , ")),1==n.value.findQualifiedContractor&&this.otherServicesCanHelp.push("Find you a qualified contractor"),0==n.value.findQualifiedContractor&&this.otherServicesCanHelp.filter(d=>"Find you a qualified contractor"!==d),1==n.value.introduceGreatLawyer&&this.otherServicesCanHelp.push("Introduce you to a great Real Estate Lawyer"),0==n.value.introduceGreatLawyer&&this.otherServicesCanHelp.filter(d=>"Introduce you to a great Real Estate Lawyer"!==d),1==n.value.introduceGreatAgent&&this.otherServicesCanHelp.push("Introduce you to a great Real Estate agent"),0==n.value.introduceGreatAgent&&this.otherServicesCanHelp.filter(d=>"Introduce you to a great Real Estate agent"!==d),1==n.value.introduceMortageSpecialist&&this.otherServicesCanHelp.push("Introduce you to a mortgage specialist"),0==n.value.introduceMortageSpecialist&&this.otherServicesCanHelp.filter(d=>"Introduce you to a mortgage specialist"!==d),this.otherServicesCanHelp.join(" , "),console.log(this.otherServicesCanHelp.join(" , ")),n.value.firstName=this.firstNameInput.nativeElement.value,n.value.lastName=this.lastNameInput.nativeElement.value,n.value.email=this.emailInput.nativeElement.value,n.value.phoneNumber=this.phoneInput.nativeElement.value,n.value.citiesLikeToBuy=this.citiesLikeToBuyInput.nativeElement.value,n.value.propertyCriteria=this.propertyCriteriaInputInput.nativeElement.value,n.value.returnLokking=this.returnLokkingInput.nativeElement.value,n.value.handlePropertiesPerMonth=this.handlePropertiesPerMonthInput.nativeElement.value,this._apiCallServices.investorFormApi(n.value.firstName,n.value.lastName,n.value.phoneNumber,n.value.email,this.buyholdOrfixdeals.join(" , "),n.value.citiesLikeToBuy,this.purchasePropertes.join(" , "),n.value.propertyCriteria,n.value.returnLokking,this.selectedTimeToCloseDeal,n.value.handlePropertiesPerMonth,this.selectedCloseOnNextDeal,this.otherServicesCanHelp.join(" , ")).subscribe(d=>{console.log(d),"success"==d.status?(setTimeout(()=>{this.spinner.hide()},1e3),this._toast.success({detail:"THANK YOU",summary:"Form successfully submitted",position:"br"}),setTimeout(()=>{this.spinner.hide(),window.location.reload()},3e3)):("error"==d.status||"timeout"==d.status)&&(alert(d.message),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},3e3))},d=>{var _="",T=[];""==n.value.firstName?T.push("First Name"):""==n.value.lastName?T.push("Last Name"):""==n.value.email?T.push("Email"):""==n.value.phoneNumber?T.push("Phone Number"):""==n.value.citiesLikeToBuy?T.push("What cities do you like to buy in?"):""==n.value.propertyCriteria?T.push("What types of property criteria do you require?"):""==n.value.returnLokking?T.push("What type of return are you typically looking? (What is your buy formula?)"):""==n.value.handlePropertiesPerMonth?T.push("How many properties per month can you handle?"):_="Unable to submit. Please re-enter the details manually, in the form. Avoid selecting from pre filled options.",_=0==T.length?"Unable to submit. Maybe enter the details manually in the webform instead of Pre-filled options. or please try after sometime! ":"Unable to submit. Please re-enter "+T+", and try again. Try to enter the details manually.",alert(_),location,setTimeout(()=>{this.spinner.hide(),window.location.reload()},1e3)},()=>console.log("INVESTOR SINGUP FORM SUMBITTED SUCCESSFULLY"))}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr),t.\u0275\u0275directiveInject(bd),t.\u0275\u0275directiveInject(Jh),t.\u0275\u0275directiveInject(Mf))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-investor-signup"]],viewQuery:function(d,_){if(1&d&&(t.\u0275\u0275viewQuery(Cb,5),t.\u0275\u0275viewQuery(ew,5),t.\u0275\u0275viewQuery(Ow,5),t.\u0275\u0275viewQuery(tw,5),t.\u0275\u0275viewQuery(nw,5),t.\u0275\u0275viewQuery(Z0,5),t.\u0275\u0275viewQuery(Wy,5),t.\u0275\u0275viewQuery(iw,5)),2&d){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.firstNameInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.lastNameInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.emailInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.phoneInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.citiesLikeToBuyInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.propertyCriteriaInputInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.returnLokkingInput=T.first),t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(_.handlePropertiesPerMonthInput=T.first)}},decls:145,vars:12,consts:[[1,"intro"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-8","col-md-8","col-12"],[1,"first-section"],[1,"row","justify-content-center","align-items-center"],[1,"col-lg-10","col-md-12","col-12"],[1,"pb-4"],["novalidate","",1,"needs-validation",3,"ngSubmit"],["investorForm","ngForm"],[1,"row"],[1,"col-lg-12","col-md-12","col-12"],[1,"col-lg-6","col-md-6","col-6"],[1,"form-group","mb-4"],["for","exampleInputEmail1"],["type","text","name","firstName","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstNameRef","ngModel","firstNameInput",""],["type","text","name","lastName","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastNameRef","ngModel","lastNameInput",""],[1,"col-lg-6","col-md-6","col-12"],["type","tel","name","phoneNumber","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","inputMask","ngModelChange"],["phoneNumberRef","ngModel","phoneInput",""],["type","email","name","email","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["emailRef","ngModel","emailInput",""],[1,"col-lg-12","col-12"],[1,"form-floating","mb-4"],[1,"form-check"],["type","checkbox","id","flexCheckDefault1","name","buyAndHold","value","Buy and Hold","ngModel","",1,"form-check-input"],["for","flexCheckDefault1",1,"form-check-label"],["type","checkbox","name","fixAndFlip","value","Fix and Flip","ngModel","","id","flexCheckChecked2",1,"form-check-input"],["for","flexCheckChecked2",1,"form-check-label"],["type","checkbox","id","flexCheckDefault3","name","liquid","value","liquid","ngModel","",1,"form-check-input"],["for","flexCheckDefault3",1,"form-check-label"],["type","checkbox","id","flexCheckDefault4","name","borrowCapital","value","borrowCapital","ngModel","",1,"form-check-input"],["for","flexCheckChecked4",1,"form-check-label"],["for","exampleFormControlInput1"],["type","text","name","citiesLikeToBuy","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["citiesLikeToBuyRef","ngModel","citiesLikeToBuyInput",""],["type","text","name","propertyCriteria","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["propertyCriteriaRef","ngModel","propertyCriteriaInput",""],["id","emailHelp",1,"form-text","text-muted"],["type","text","name","returnLokking","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["returnLokkingRef","ngModel","returnLokkingInput",""],[1,"col-lg-6","col-12"],["for","exampleFormControlSelect1"],["name","serviceReq","id","floatingSelect","aria-label","Floating label select example","required","",1,"form-control",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["type","text","name","handlePropertiesPerMonth","autocomplete","new-password","ngModel","","required","",1,"form-control",3,"ngModel","ngModelChange"],["handlePropertiesPerMonthRef","ngModel","handlePropertiesPerMonthInput",""],[1,"col-12"],["type","checkbox","id","flexCheckDefault5","name","findQualifiedContractor","value","findQualifiedContractor","ngModel","",1,"form-check-input"],["for","flexCheckDefault5",1,"form-check-label"],["type","checkbox","id","flexCheckDefault6","name","introduceGreatLawyer","value","introduceGreatLawyer","ngModel","",1,"form-check-input"],["for","flexCheckChecked6",1,"form-check-label"],["type","checkbox","id","flexCheckDefault7","name","introduceGreatAgent","value","introduceGreatAgent","ngModel","",1,"form-check-input"],["for","flexCheckChecked7",1,"form-check-label"],["type","checkbox","id","flexCheckDefault8","name","introduceMortageSpecialist","value","introduceMortageSpecialist","ngModel","",1,"form-check-input"],["for","flexCheckChecked8",1,"form-check-label"],[1,"mt-4"],["type","submit","id","button-vary1",1,"btn","btn-danger","px-5","py-3",3,"disabled"],[3,"value","selected"]],template:function(d,_){if(1&d){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275elementStart(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1"),t.\u0275\u0275text(6,"Investor Sign Up"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"h3"),t.\u0275\u0275text(8,"Calling All Cash Buyers, Fix and Flippers and Real Estate Investors!"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(9,"section",4)(10,"div",1)(11,"div",5)(12,"div",6)(13,"h4",7),t.\u0275\u0275text(14,"Thank you for your interest in our off-market property deals. Give us your information and we\u2019ll start sending you properties in the areas you\u2019re interested in."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"form",8,9),t.\u0275\u0275listener("ngSubmit",function(){t.\u0275\u0275restoreView(T);const B=t.\u0275\u0275reference(16);return t.\u0275\u0275resetView(_.investorSignupFormData(B))}),t.\u0275\u0275elementStart(17,"div",10)(18,"div",11)(19,"div",10)(20,"div",12)(21,"div",13)(22,"label",14),t.\u0275\u0275text(23,"First name*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"input",15,16),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.firstName=B}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(27,"div",12)(28,"div",13)(29,"label",14),t.\u0275\u0275text(30,"Last name*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"input",17,18),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.lastName=B}),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(34,"div",11)(35,"div",10)(36,"div",19)(37,"div",13)(38,"label",14),t.\u0275\u0275text(39,"Phone number*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"input",20,21),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.phoneNumber=B}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(43,"div",19)(44,"div",13)(45,"label",14),t.\u0275\u0275text(46,"Email*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"input",22,23),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.email=B}),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(50,"div",24)(51,"div",25)(52,"p"),t.\u0275\u0275text(53,"Are you looking for buy and hold or fix and flip deals?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(54,"div",26),t.\u0275\u0275element(55,"input",27),t.\u0275\u0275elementStart(56,"label",28),t.\u0275\u0275text(57," Buy and Hold "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(58,"div",26),t.\u0275\u0275element(59,"input",29),t.\u0275\u0275elementStart(60,"label",30),t.\u0275\u0275text(61," Fix and Flip "),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(62,"div",24)(63,"div",25)(64,"p"),t.\u0275\u0275text(65,"Do you purchase properties with liquid funds or do you borrow capital?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(66,"div",26),t.\u0275\u0275element(67,"input",31),t.\u0275\u0275elementStart(68,"label",32),t.\u0275\u0275text(69," Liquid "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(70,"div",26),t.\u0275\u0275element(71,"input",33),t.\u0275\u0275elementStart(72,"label",34),t.\u0275\u0275text(73," Borrow Capital "),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(74,"div",24)(75,"div",13)(76,"label",35),t.\u0275\u0275text(77,"What cities do you like to buy in?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(78,"input",36,37),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.citiesLikeToBuy=B}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(81,"div",24)(82,"div",25)(83,"div",13)(84,"label",35),t.\u0275\u0275text(85,"What types of property criteria do you require?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(86,"input",38,39),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.propertyCriteria=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(89,"small",40),t.\u0275\u0275text(90,"Example: Detached homes, 2 car garage only etc."),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(91,"div",24)(92,"div",13)(93,"label",35),t.\u0275\u0275text(94,"What type of return are you typically looking? (What is your buy formula?)*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"input",41,42),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.returnLokking=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(98,"small",40),t.\u0275\u0275text(99,"Example: 85% ARV - Repairs = Purchase price"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(100,"div",43)(101,"div",13)(102,"label",44),t.\u0275\u0275text(103,"How much time do you require to close on deals?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(104,"select",45),t.\u0275\u0275listener("change",function(B){return _.selectChangeHandler1(B)}),t.\u0275\u0275template(105,rw,2,3,"option",46),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(106,"div",43)(107,"div",13)(108,"label",35),t.\u0275\u0275text(109,"How many properties per month can you handle?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(110,"input",47,48),t.\u0275\u0275listener("ngModelChange",function(B){return _.formData.handlePropertiesPerMonth=B}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(113,"small",40),t.\u0275\u0275text(114,"Please enter a number from 0 to 100."),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(115,"div",49)(116,"div",13)(117,"label",44),t.\u0275\u0275text(118,"When are you looking to close on your next deal?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(119,"select",45),t.\u0275\u0275listener("change",function(B){return _.selectChangeHandler2(B)}),t.\u0275\u0275template(120,Sb,2,3,"option",46),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(121,"div",24)(122,"div",25)(123,"p"),t.\u0275\u0275text(124,"What other services can I help you with?*"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(125,"div",26),t.\u0275\u0275element(126,"input",50),t.\u0275\u0275elementStart(127,"label",51),t.\u0275\u0275text(128," Find you a qualified contractor "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(129,"div",26),t.\u0275\u0275element(130,"input",52),t.\u0275\u0275elementStart(131,"label",53),t.\u0275\u0275text(132," Introduce you to a great Real Estate Lawyer "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(133,"div",26),t.\u0275\u0275element(134,"input",54),t.\u0275\u0275elementStart(135,"label",55),t.\u0275\u0275text(136," Introduce you to a great Real Estate agent "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(137,"div",26),t.\u0275\u0275element(138,"input",56),t.\u0275\u0275elementStart(139,"label",57),t.\u0275\u0275text(140," Introduce you to a mortgage specialist "),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(141,"div",58)(142,"button",59),t.\u0275\u0275text(143,"Submit Feedback"),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275element(144,"app-footer")}if(2&d){const T=t.\u0275\u0275reference(16);t.\u0275\u0275advance(24),t.\u0275\u0275property("ngModel",_.formData.firstName),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.lastName),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngModel",_.formData.phoneNumber)("inputMask",_.phoneNumberInputMask),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngModel",_.formData.email),t.\u0275\u0275advance(31),t.\u0275\u0275property("ngModel",_.formData.citiesLikeToBuy),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngModel",_.formData.propertyCriteria),t.\u0275\u0275advance(9),t.\u0275\u0275property("ngModel",_.formData.returnLokking),t.\u0275\u0275advance(10),t.\u0275\u0275property("ngForOf",_.timeToCloseOnDeal),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngModel",_.formData.handlePropertiesPerMonth),t.\u0275\u0275advance(10),t.\u0275\u0275property("ngForOf",_.closeOnNextDeal),t.\u0275\u0275advance(22),t.\u0275\u0275property("disabled",!T.form.valid)}},dependencies:[bo,cp,F0,pv,ep,wd,Df,ng,dp,lp,Ed,Gy,Qn,wn],styles:['.intro[_ngcontent-%COMP%]{color:#fff;padding:140px 0;background-image:url(investor.add570b4931fcfb4.jpg);position:relative;background-size:cover;background-repeat:no-repeat;background-position:center center;z-index:0}.intro[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;background:linear-gradient(90deg,rgba(162,75,75,.84) 19.27%,rgba(217,217,217,0) 100%);z-index:-1}.first-section[_ngcontent-%COMP%]{padding:100px 0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:10px}']})}return l})();function Tb(l,a){if(1&l&&(t.\u0275\u0275elementStart(0,"section",7)(1,"div",2)(2,"div",8)(3,"div",9)(4,"div",10),t.\u0275\u0275element(5,"img",11),t.\u0275\u0275elementStart(6,"div",12)(7,"div",13)(8,"h4"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(10,"div",14)(11,"h2",15),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"p"),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"p"),t.\u0275\u0275text(16,"Contact us today "),t.\u0275\u0275elementStart(17,"a",16),t.\u0275\u0275text(18,"1 (888) 986-9883"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(19," ."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"p"),t.\u0275\u0275text(21,'People say "I need to sell my house" for any number of reasons, including:'),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"ul")(23,"li")(24,"p"),t.\u0275\u0275text(25,"Structural issues"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"li")(27,"p"),t.\u0275\u0275text(28,"Facing foreclosure"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"li")(30,"p"),t.\u0275\u0275text(31,"Relocation or job transfer"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(32,"li")(33,"p"),t.\u0275\u0275text(34,"Undesirable neighborhoods"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(35,"li")(36,"p"),t.\u0275\u0275text(37,"Divorce"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(38,"li")(39,"p"),t.\u0275\u0275text(40,"Need for cosmetic fix up"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(41,"li")(42,"p"),t.\u0275\u0275text(43,"Retirement or downsizing"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(44,"li")(45,"p"),t.\u0275\u0275text(46,"Death of a loved one"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(47,"li")(48,"p"),t.\u0275\u0275text(49,"Liquidating assets to pay bills"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(50,"li")(51,"p"),t.\u0275\u0275text(52,"Inheriting a property you can\u2019t keep"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(53,"li")(54,"p"),t.\u0275\u0275text(55,"Tired of living in an ugly house"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(56,"li")(57,"p"),t.\u0275\u0275text(58,"Job loss"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(59,"li")(60,"p"),t.\u0275\u0275text(61,"Troublesome mortgage terms and More"),t.\u0275\u0275elementEnd()()()()()()()),2&l){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("src",n.onSearchCityFound[0].coverPhoto,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(n.onSearchCityFound[0].name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("Sell Your House Fast in ",n.cityParams,", Ontario, CA"),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("It doesn't matter what type of ugly home you have, Michael the Home Buyer\xae would like to make a no obligation cash offer to purchase your home for cash. Whether your home is cosmetically ugly, has ugly structural or repair issues, or has you captive in an ugly situation, you can count on Michael the Home Buyer to come to your rescue with a fast and fair cash offer. We\u2019re buying homes in ",n.cityParams,", Ontario and surrounding areas. ")}}function Y0(l,a){1&l&&(t.\u0275\u0275elementStart(0,"section",7)(1,"div",2)(2,"div",17)(3,"div",18),t.\u0275\u0275element(4,"img",19),t.\u0275\u0275elementStart(5,"h2",15),t.\u0275\u0275text(6,"Something went wrong!"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p"),t.\u0275\u0275text(8,"Please refresh the page or "),t.\u0275\u0275elementStart(9,"a",20),t.\u0275\u0275text(10,"click here "),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(11," to go home."),t.\u0275\u0275elementEnd()()()()())}const ow=[{path:"",component:ar},{path:"how-does-it-work",component:$x},{path:"locations",component:xv},{path:"location/:id",component:(()=>{class l{constructor(n,d){this.route=n,this.spinner=d,this.cityParams="",this.citiesData=[{id:1,name:"Bancroft",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:2,name:"Barrie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:3,name:"Belleville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:4,name:"Brampton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:5,name:"Brantford",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:6,name:"Brockville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:7,name:"Burlington",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:8,name:"Cambridge",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:9,name:"Chatham",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:10,name:"Chatham-Kent",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:11,name:"Cornwall",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:12,name:"Elliot Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:13,name:"Etobicoke",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:14,name:"Fort Erie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:15,name:"Fort Frances",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:16,name:"Gananoque",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:17,name:"Guelph",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:18,name:"Hamilton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:19,name:"Iroquois Falls",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:20,name:"Kapuskasing",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:21,name:"Kawartha Lakes",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:22,name:"Kenora",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:23,name:"Kingston",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:24,name:"Kirkland Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:25,name:"Kitchener",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:26,name:"Laurentian Hills",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:27,name:"London",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:28,name:"Midland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:29,name:"Mississauga",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:30,name:"Moose Factory",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:31,name:"Moosonee",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:32,name:"Niagara Falls",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:33,name:"Niagara-on-the-Lake",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:34,name:"North Bay",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:35,name:"North York",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:36,name:"Oakville",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:37,name:"Orillia",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:38,name:"Oshawa",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:39,name:"Ottawa",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:40,name:"Parry Sound",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:41,name:"Perth",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:42,name:"Peterborough",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:43,name:"Picton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:44,name:"Port Colborne",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:45,name:"Saint Catharines",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:46,name:"Saint Thomas",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:47,name:"Sarnia-Clearwater",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:48,name:"Sault Sainte Marie",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:49,name:"Scarborough",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:50,name:"Simcoe",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:51,name:"Stratford",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:52,name:"Sudbury",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:53,name:"Temiskaming Shores",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:54,name:"Thorold",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:55,name:"Thunder Bay",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:56,name:"Timmins",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:57,name:"Toronto",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:58,name:"Trenton",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:59,name:"Waterloo",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:60,name:"Welland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:61,name:"West Nipissing",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:62,name:"Windsor",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:63,name:"Woodstock",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:64,name:"York",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:64,name:"Brant",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:65,name:"Clarence-Rockland",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:66,name:"Dryden",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:67,name:"Greater Sudbury",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:68,name:"Haldimand County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:69,name:"Leamington",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:70,name:"Markham",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:71,name:"Norfolk County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:72,name:"Owen Sound",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:73,name:"Pembroke",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:74,name:"Pickering",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:75,name:"Prince Edward County",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:76,name:"Quinte West",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:77,name:"Richmond Hill",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:78,name:"Sarnia",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:79,name:"St. Catharines",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:80,name:"St. Thomas",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:81,name:"Vaughan",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."},{id:82,name:"Woodstock",providence:"Ontario",country:"Canada",coverPhoto:"https://upload.wikimedia.org/wikipedia/commons/b/b5/Toronto_August_2017.jpg",desc:"It doesn\u2019t matter what type of ugly home you have, we would like to make a no obligation cash offer to purchase your home for cash."}],this.onSearchCityFound=[],this.isFound="false"}ngOnInit(){this.sub=this.route.params.subscribe(n=>{var _=this.processSlug(n.id),T=this.removeHyphens(_);this.cityParams=this.capitalize(T)}),this.getDetails(this.cityParams)}getDetails(n){if(this.spinner.show(),""!=n){for(var d=0;d<this.citiesData.length;d++)this.citiesData[d].name==n&&(this.onSearchCityFound.push(this.citiesData[d]),this.isFound="true",console.log(this.onSearchCityFound),console.log(this.onSearchCityFound.length)),setTimeout(()=>{this.spinner.hide()},1e3);"true"!=this.isFound&&(this.isFound="false",this.onSearchCityFound.length=0,setTimeout(()=>{this.spinner.hide()},1e3))}else this.onSearchCityFound.length=0,this.isFound="false",setTimeout(()=>{this.spinner.hide()},1e3)}capitalize(n){return n.toLowerCase().split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}removeHyphens(n){return n.split("-").join(" ")}processSlug(n){return n.replace(/-/g," ")}static#e=this.\u0275fac=function(d){return new(d||l)(t.\u0275\u0275directiveInject(Ao),t.\u0275\u0275directiveInject(fr))};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-location-deatails"]],decls:15,vars:2,consts:[["class","first-section",4,"ngIf"],[1,"second-section","bg-light"],[1,"container"],[1,"row","justify-content-center","align-items-center","text-center"],[1,"col-lg-10","col-md-12","col-12","py-5"],[1,"header"],[1,"fw-bold"],[1,"first-section"],[1,"row"],[1,"col-lg-4","d-none","d-lg-block"],[1,"img-container"],["width","100%","alt","...",1,"card-img-top",3,"src"],[1,"overlay"],[1,"centered"],[1,"col-lg-8","col-md-12","col-12"],[1,"pb-4"],["href","tel:18889869883"],[1,"row","justify-content-center","align-items-center"],[1,"col-lg-8","col-md-12","col-12","text-center"],["src","https://cdn.dribbble.com/users/992274/screenshots/7392790/media/95483df50a0a3324c4cf9ccb1094b825.jpg","width","200","alt",""],["href",""]],template:function(d,_){1&d&&(t.\u0275\u0275element(0,"app-navbar"),t.\u0275\u0275template(1,Tb,62,4,"section",0),t.\u0275\u0275template(2,Y0,12,0,"section",0),t.\u0275\u0275elementStart(3,"section",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),t.\u0275\u0275element(8,"hr"),t.\u0275\u0275elementStart(9,"h1"),t.\u0275\u0275text(10,"Micheal the Home Buyer\xae "),t.\u0275\u0275elementStart(11,"span",6),t.\u0275\u0275text(12,"has been Canada's #1 Cash Home Buyer Since 2014."),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(13,"hr"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(14,"app-footer")),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","true"==_.isFound),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","false"==_.isFound))},dependencies:[cn,Qn,wn],styles:[".first-section[_ngcontent-%COMP%]{padding:100px 0}.second-section[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:1px solid red!important}.img-container[_ngcontent-%COMP%]{position:relative}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(50%)}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ff00004d;z-index:1}.centered[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;color:#a81c1c!important}.first-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return l})()},{path:"questions-about-selling-your-home",component:e0},{path:"contact",component:Ux},{path:"about",component:yr},{path:"selling-your-house",component:Hx},{path:"selling-your-house/i-need-to-sell-my-house-fast",component:wv},{path:"selling-your-house/experience-and-trust",component:ob},{path:"selling-your-house/personal-touch",component:sb},{path:"selling-your-house/reviews",component:U0},{path:"mobile-tos",component:ab},{path:"privacy-policy",component:lb},{path:"terms-of-use",component:H0},{path:"home-buyers-still-open",component:H0},{path:"micheal-the-home-buyer-vs-traditional-realtors",component:bb},{path:"micheal-the-home-buyer-vs-online-buyers",component:Zx},{path:"micheal-the-home-buyer-vs-local-flippers",component:Yx},{path:"feedback",component:Jx},{path:"thank-you",component:Xx},{path:"investor-sign-up",component:Pf}];let X0=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:l});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[Nt.forRoot(ow),Nt]})}return l})(),K0=(()=>{class l{constructor(){this.title="appName"}static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["app-root"]],decls:17,vars:0,consts:[[1,""],["type","ball-scale-multiple"],["type","checkbox","id","click"],["for","click"],[1,"fab","fa-facebook-messenger"],[1,"fas","fa-times"],[1,"wrapper"],[1,"head-text"],["src","https://miro.medium.com/v2/resize:fit:512/1*nZ9VwHTLxAfNCuCjYAkajg.png","width","15","alt",""],[1,"chat-box"],["src","https://mhbadvisor.netlify.app/","frameborder","0"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"main")(1,"div",0),t.\u0275\u0275element(2,"lib-ng-toast")(3,"router-outlet")(4,"ngx-spinner",1),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div"),t.\u0275\u0275element(6,"input",2),t.\u0275\u0275elementStart(7,"label",3),t.\u0275\u0275element(8,"i",4)(9,"i",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",6)(11,"div",7)(12,"p"),t.\u0275\u0275element(13,"img",8),t.\u0275\u0275text(14," Chat with us - Online"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div",9),t.\u0275\u0275element(16,"iframe",10),t.\u0275\u0275elementEnd()()())},dependencies:[ff,fu,c1],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap";@import"https://fonts.googleapis.com/css2?family=Oswald:wght@400&display=swap";@import"https://fonts.googleapis.com/css2?family=Spectral:wght@400&display=swap";@import"https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap";@import"https://fonts.googleapis.com/css2?family=Merriweather&display=swap";@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:IBM Plex Sans,sans-serif}body[_ngcontent-%COMP%]{overflow:hidden;background:#E3F2FD}label[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:20px;height:55px;width:55px;background:#a81c1c;text-align:center;line-height:55px;border-radius:50px;font-size:30px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .4s ease}label[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{opacity:0;pointer-events:none}#click[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{opacity:1;pointer-events:auto;transform:translate(-50%,-50%) rotate(180deg)}#click[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]   i.fab[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transform:translate(-50%,-50%) rotate(180deg)}.wrapper[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:0;max-width:400px;background:#fff;border-radius:20px;box-shadow:0 0 8px #0000001a;opacity:0;pointer-events:none;transition:all .6s cubic-bezier(.68,-.55,.265,1.55)}#click[_ngcontent-%COMP%]:checked ~ .wrapper[_ngcontent-%COMP%]{opacity:1;bottom:85px;pointer-events:auto}.wrapper[_ngcontent-%COMP%]   .head-text[_ngcontent-%COMP%]{line-height:60px;color:#fff;border-radius:20px 20px 0 0;padding:0 20px;font-weight:500;background:#a81c1c}.wrapper[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{width:100%}.chat-box[_ngcontent-%COMP%]   .desc-text[_ngcontent-%COMP%]{color:#515365;text-align:center;line-height:25px;font-size:17px;font-weight:500}.chat-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:10px 15px;margin:20px 0;border-radius:5px;border:1px solid lightgray}.chat-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{height:50px;width:100%;margin-top:20px}.chat-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:last-child{margin-bottom:15px}form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:20px;border:1px solid lightgray;outline:none;border-radius:5px;font-size:16px;transition:all .3s ease}form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4070f4}form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:silver;transition:all .3s ease}form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus::placeholder{color:#d3d3d3}.chat-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;outline:none;cursor:pointer;color:#fff;font-size:18px;font-weight:500;background:#4070F4;transition:all .3s ease}.chat-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.97)}#click[_ngcontent-%COMP%]{display:none}iframe[_ngcontent-%COMP%]{height:60vh;width:400px}@media only screen and (max-width: 600px){iframe[_ngcontent-%COMP%]{height:500px;width:300px}}@media only screen and (max-width: 280px){iframe[_ngcontent-%COMP%]{height:450px;width:243px}}#hubspot-messages-iframe-container[_ngcontent-%COMP%]{display:initial!important;z-index:2147483647;position:fixed!important;bottom:0!important}#hubspot-messages-iframe-container.widget-align-right[_ngcontent-%COMP%]{right:0!important}#hubspot-messages-iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:initial!important;width:100%!important;height:100%!important;border:none!important;position:absolute!important;bottom:0!important;right:0!important;background:transparent!important}']})}return l})(),sw=(()=>{class l{static#e=this.\u0275fac=function(d){return new(d||l)};static#t=this.\u0275mod=t.\u0275\u0275defineNgModule({type:l,bootstrap:[K0]});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({providers:[l1],imports:[Mr,X0,l1,Px,Hg,_d,mb,Wb,On.GooglePlaceModule,Rx.forRoot({inputSelector:"input",isAsync:!0})]})}return l})();ol().bootstrapModule(sw).catch(l=>console.error(l))},90:function(_i){typeof self<"u"&&self,_i.exports=function(){"use strict";var gn={8741:function(Pt,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var ge=!(typeof window>"u"||!window.document||!window.document.createElement);p.default=ge},3976:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var Ee=ge(2839);p.default={_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:function(){},onincomplete:function(){},oncleared:function(){},repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:function(){},onBeforeMask:null,onBeforePaste:function(Ge,Je){return"function"==typeof Je.onBeforeMask?Je.onBeforeMask.call(this,Ge,Je):Ge},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:function(){},skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],ignorables:[Ee.keys.Backspace,Ee.keys.Tab,Ee.keys.Pause,Ee.keys.Escape,Ee.keys.PageUp,Ee.keys.PageDown,Ee.keys.End,Ee.keys.Home,Ee.keys.ArrowLeft,Ee.keys.ArrowUp,Ee.keys.ArrowRight,Ee.keys.ArrowDown,Ee.keys.Insert,Ee.keys.Delete,Ee.keys.ContextMenu,Ee.keys.F1,Ee.keys.F2,Ee.keys.F3,Ee.keys.F4,Ee.keys.F5,Ee.keys.F6,Ee.keys.F7,Ee.keys.F8,Ee.keys.F9,Ee.keys.F10,Ee.keys.F11,Ee.keys.F12,Ee.keys.Process,Ee.keys.Unidentified,Ee.keys.Shift,Ee.keys.Control,Ee.keys.Alt,Ee.keys.Tab,Ee.keys.AltGraph,Ee.keys.CapsLock],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0,usePrototypeDefinitions:!0,validationEventTimeOut:3e3,substitutes:{}}},7392:function(Pt,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,p.default={9:{validator:"[0-9\uff10-\uff19]",definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",definitionSymbol:"*"},"*":{validator:"[0-9\uff10-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]"}}},253:function(Pt,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(ge,Ee,Le){if(void 0===Le)return ge.__data?ge.__data[Ee]:null;ge.__data=ge.__data||{},ge.__data[Ee]=Le}},3776:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.Event=void 0,p.off=function(pe,te){var W,ue;return ye(this[0])&&pe&&(W=this[0].eventRegistry,ue=this[0],pe.split(" ").forEach(function(ne){var G=et(ne.split("."),2);(function(J,Y){var le,Me,K=[];if(J.length>0)if(void 0===te)for(le=0,Me=W[J][Y].length;le<Me;le++)K.push({ev:J,namespace:Y&&Y.length>0?Y:"global",handler:W[J][Y][le]});else K.push({ev:J,namespace:Y&&Y.length>0?Y:"global",handler:te});else if(Y.length>0)for(var ce in W)for(var _e in W[ce])if(_e===Y)if(void 0===te)for(le=0,Me=W[ce][_e].length;le<Me;le++)K.push({ev:ce,namespace:_e,handler:W[ce][_e][le]});else K.push({ev:ce,namespace:_e,handler:te});return K})(G[0],G[1]).forEach(function(J){!function(Me,K,ce){if(Me in W==1)if(ue.removeEventListener?ue.removeEventListener(Me,ce,!1):ue.detachEvent&&ue.detachEvent("on".concat(Me),ce),"global"===K)for(var _e in W[Me])W[Me][_e].splice(W[Me][_e].indexOf(ce),1);else W[Me][K].splice(W[Me][K].indexOf(ce),1)}(J.ev,J.namespace,J.handler)})})),this},p.on=function(pe,te){if(ye(this[0])){var W=this[0].eventRegistry,ue=this[0];pe.split(" ").forEach(function(ne){var le,Me,G=et(ne.split("."),2),Y=G[1];le=G[0],Me=void 0===Y?"global":Y,ue.addEventListener?ue.addEventListener(le,te,!1):ue.attachEvent&&ue.attachEvent("on".concat(le),te),W[le]=W[le]||{},W[le][Me]=W[le][Me]||[],W[le][Me].push(te)})}return this},p.trigger=function(pe){var te=arguments;if(ye(this[0]))for(var W=this[0].eventRegistry,ue=this[0],ne="string"==typeof pe?pe.split(" "):[pe.type],G=0;G<ne.length;G++){var J=ne[G].split("."),Y=J[0],le=J[1]||"global";if(void 0!==document&&"global"===le){var Me,K={bubbles:!0,cancelable:!0,composed:!0,detail:arguments[1]};if(document.createEvent){try{"input"===Y?(K.inputType="insertText",Me=new InputEvent(Y,K)):Me=new CustomEvent(Y,K)}catch{(Me=document.createEvent("CustomEvent")).initCustomEvent(Y,K.bubbles,K.cancelable,K.detail)}pe.type&&(0,Le.default)(Me,pe),ue.dispatchEvent(Me)}else(Me=document.createEventObject()).eventType=Y,Me.detail=arguments[1],pe.type&&(0,Le.default)(Me,pe),ue.fireEvent("on"+Me.eventType,Me)}else if(void 0!==W[Y]){arguments[0]=arguments[0].type?arguments[0]:Je.default.Event(arguments[0]),arguments[0].detail=arguments.slice(1);var ce=W[Y];("global"===le?Object.values(ce).flat():ce[le]).forEach(function(_e){return _e.apply(ue,te)})}}return this};var Ee,Le=De(ge(600)),Ge=De(ge(9380)),Je=De(ge(4963)),ot=De(ge(8741));function et(pe,te){return function(W){if(Array.isArray(W))return W}(pe)||function(W,ue){var ne=null==W?null:typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(null!=ne){var G,J,Y,le,Me=[],K=!0,ce=!1;try{if(Y=(ne=ne.call(W)).next,0===ue){if(Object(ne)!==ne)return;K=!1}else for(;!(K=(G=Y.call(ne)).done)&&(Me.push(G.value),Me.length!==ue);K=!0);}catch(_e){ce=!0,J=_e}finally{try{if(!K&&null!=ne.return&&(le=ne.return(),Object(le)!==le))return}finally{if(ce)throw J}}return Me}}(pe,te)||function(W,ue){if(W){if("string"==typeof W)return Oe(W,ue);var ne=Object.prototype.toString.call(W).slice(8,-1);if("Object"===ne&&W.constructor&&(ne=W.constructor.name),"Map"===ne||"Set"===ne)return Array.from(W);if("Arguments"===ne||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return Oe(W,ue)}}(pe,te)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(pe,te){(null==te||te>pe.length)&&(te=pe.length);for(var W=0,ue=new Array(te);W<te;W++)ue[W]=pe[W];return ue}function De(pe){return pe&&pe.__esModule?pe:{default:pe}}function ye(pe){return pe instanceof Element}p.Event=Ee,"function"==typeof Ge.default.CustomEvent?p.Event=Ee=Ge.default.CustomEvent:ot.default&&(p.Event=Ee=function(pe,te){te=te||{bubbles:!1,cancelable:!1,composed:!0,detail:void 0};var W=document.createEvent("CustomEvent");return W.initCustomEvent(pe,te.bubbles,te.cancelable,te.detail),W},Ee.prototype=Ge.default.Event.prototype)},600:function(Pt,p){function ge(Ee){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Le){return typeof Le}:function(Le){return Le&&"function"==typeof Symbol&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le})(Ee)}Object.defineProperty(p,"__esModule",{value:!0}),p.default=function Ee(){var Le,Ge,Je,ot,et,Oe,De=arguments[0]||{},ye=1,pe=arguments.length,te=!1;for("boolean"==typeof De&&(te=De,De=arguments[ye]||{},ye++),"object"!==ge(De)&&"function"!=typeof De&&(De={});ye<pe;ye++)if(null!=(Le=arguments[ye]))for(Ge in Le)Je=De[Ge],De!==(ot=Le[Ge])&&(te&&ot&&("[object Object]"===Object.prototype.toString.call(ot)||(et=Array.isArray(ot)))?(et?(et=!1,Oe=Je&&Array.isArray(Je)?Je:[]):Oe=Je&&"[object Object]"===Object.prototype.toString.call(Je)?Je:{},De[Ge]=Ee(te,Oe,ot)):void 0!==ot&&(De[Ge]=ot));return De}},4963:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var Ee=ot(ge(600)),Le=ot(ge(9380)),Ge=ot(ge(253)),Je=ge(3776);function ot(ye){return ye&&ye.__esModule?ye:{default:ye}}var et=Le.default.document;function Oe(ye){return ye instanceof Oe?ye:this instanceof Oe?void(null!=ye&&ye!==Le.default&&(this[0]=ye.nodeName?ye:void 0!==ye[0]&&ye[0].nodeName?ye[0]:et.querySelector(ye),null!=this[0]&&(this[0].eventRegistry=this[0].eventRegistry||{}))):new Oe(ye)}Oe.prototype={on:Je.on,off:Je.off,trigger:Je.trigger},Oe.extend=Ee.default,Oe.data=Ge.default,Oe.Event=Je.Event,p.default=Oe},9845:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.mobile=p.iphone=p.ie=void 0;var Ee,Le=(Ee=ge(9380))&&Ee.__esModule?Ee:{default:Ee},Ge=Le.default.navigator&&Le.default.navigator.userAgent||"",Je=Ge.indexOf("MSIE ")>0||Ge.indexOf("Trident/")>0,ot=navigator.userAgentData&&navigator.userAgentData.mobile||Le.default.navigator&&Le.default.navigator.maxTouchPoints||"ontouchstart"in Le.default,et=/iphone/i.test(Ge);p.iphone=et,p.mobile=ot,p.ie=Je},7184:function(Pt,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(Ee){return Ee.replace(ge,"\\$1")};var ge=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim")},6030:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.EventHandlers=void 0;var Ee=ge(8711),Le=ge(2839),Ge=ge(9845),Je=ge(7215),ot=ge(7760),et=ge(4713);function De(pe,te){(null==te||te>pe.length)&&(te=pe.length);for(var W=0,ue=new Array(te);W<te;W++)ue[W]=pe[W];return ue}var ye={keyEvent:function(pe,te,W,ue,ne){var G=this.inputmask,J=G.opts,le=G.maskset,Me=this,K=(0,G.dependencyLib)(Me),ce=pe.key,_e=Ee.caret.call(G,Me),qe=J.onKeyDown.call(this,pe,Ee.getBuffer.call(G),_e,J);if(void 0!==qe)return qe;if(ce===Le.keys.Backspace||ce===Le.keys.Delete||Ge.iphone&&ce===Le.keys.BACKSPACE_SAFARI||pe.ctrlKey&&ce===Le.keys.x&&!("oncut"in Me))pe.preventDefault(),Je.handleRemove.call(G,Me,ce,_e),(0,ot.writeBuffer)(Me,Ee.getBuffer.call(G,!0),le.p,pe,Me.inputmask._valueGet()!==Ee.getBuffer.call(G).join(""));else if(ce===Le.keys.End||ce===Le.keys.PageDown){pe.preventDefault();var Be=Ee.seekNext.call(G,Ee.getLastValidPosition.call(G));Ee.caret.call(G,Me,pe.shiftKey?_e.begin:Be,Be,!0)}else ce===Le.keys.Home&&!pe.shiftKey||ce===Le.keys.PageUp?(pe.preventDefault(),Ee.caret.call(G,Me,0,pe.shiftKey?_e.begin:0,!0)):J.undoOnEscape&&ce===Le.keys.Escape&&!0!==pe.altKey?((0,ot.checkVal)(Me,!0,!1,G.undoValue.split("")),K.trigger("click")):ce!==Le.keys.Insert||pe.shiftKey||pe.ctrlKey||void 0!==G.userOptions.insertMode?!0===J.tabThrough&&ce===Le.keys.Tab?!0===pe.shiftKey?(_e.end=Ee.seekPrevious.call(G,_e.end,!0),!0===et.getTest.call(G,_e.end-1).match.static&&_e.end--,_e.begin=Ee.seekPrevious.call(G,_e.end,!0),_e.begin>=0&&_e.end>0&&(pe.preventDefault(),Ee.caret.call(G,Me,_e.begin,_e.end))):(_e.begin=Ee.seekNext.call(G,_e.begin,!0),_e.end=Ee.seekNext.call(G,_e.begin,!0),_e.end<le.maskLength&&_e.end--,_e.begin<=le.maskLength&&(pe.preventDefault(),Ee.caret.call(G,Me,_e.begin,_e.end))):pe.shiftKey||J.insertModeVisual&&!1===J.insertMode&&(ce===Le.keys.ArrowRight?setTimeout(function(){var at=Ee.caret.call(G,Me);Ee.caret.call(G,Me,at.begin)},0):ce===Le.keys.ArrowLeft&&setTimeout(function(){var at=Ee.translatePosition.call(G,Me.inputmask.caretPos.begin);Ee.translatePosition.call(G,Me.inputmask.caretPos.end),Ee.caret.call(G,Me,G.isRTL?at+(at===le.maskLength?0:1):at-(0===at?0:1))},0)):Je.isSelection.call(G,_e)?J.insertMode=!J.insertMode:(J.insertMode=!J.insertMode,Ee.caret.call(G,Me,_e.begin,_e.begin));return G.isComposing=ce==Le.keys.Process||ce==Le.keys.Unidentified,G.ignorable=J.ignorables.includes(ce),ye.keypressEvent.call(this,pe,te,W,ue,ne)},keypressEvent:function(pe,te,W,ue,ne){var G=this.inputmask||this,J=G.opts,le=G.maskset,Me=G.el,K=(0,G.dependencyLib)(Me),ce=pe.key;if(!0===te||pe.ctrlKey&&pe.altKey||!(pe.ctrlKey||pe.metaKey||G.ignorable)){if(ce){var _e,qe=te?{begin:ne,end:ne}:Ee.caret.call(G,Me);ce=J.substitutes[ce]||ce,le.writeOutBuffer=!0;var Be=Je.isValid.call(G,qe,ce,ue,void 0,void 0,void 0,te);if(!1!==Be&&(Ee.resetMaskSet.call(G,!0),_e=void 0!==Be.caret?Be.caret:Ee.seekNext.call(G,Be.pos.begin?Be.pos.begin:Be.pos),le.p=_e),_e=J.numericInput&&void 0===Be.caret?Ee.seekPrevious.call(G,_e):_e,!1!==W&&(setTimeout(function(){J.onKeyValidation.call(Me,ce,Be)},0),le.writeOutBuffer&&!1!==Be)){var at=Ee.getBuffer.call(G);(0,ot.writeBuffer)(Me,at,_e,pe,!0!==te)}if(pe.preventDefault(),te)return!1!==Be&&(Be.forwardPosition=_e),Be}}else ce===Le.keys.Enter&&G.undoValue!==G._valueGet(!0)&&(G.undoValue=G._valueGet(!0),setTimeout(function(){K.trigger("change")},0))},pasteEvent:function(pe){var te,W=this.inputmask,ue=W.opts,ne=W._valueGet(!0),G=Ee.caret.call(W,this);W.isRTL&&(te=G.end,G.end=Ee.translatePosition.call(W,G.begin),G.begin=Ee.translatePosition.call(W,te));var J=ne.substr(0,G.begin),Y=ne.substr(G.end,ne.length);if(J==(W.isRTL?Ee.getBufferTemplate.call(W).slice().reverse():Ee.getBufferTemplate.call(W)).slice(0,G.begin).join("")&&(J=""),Y==(W.isRTL?Ee.getBufferTemplate.call(W).slice().reverse():Ee.getBufferTemplate.call(W)).slice(G.end).join("")&&(Y=""),window.clipboardData&&window.clipboardData.getData)ne=J+window.clipboardData.getData("Text")+Y;else{if(!pe.clipboardData||!pe.clipboardData.getData)return!0;ne=J+pe.clipboardData.getData("text/plain")+Y}var le=ne;if(W.isRTL){le=le.split("");var Me,K=function Oe(pe,te){var W=typeof Symbol<"u"&&pe[Symbol.iterator]||pe["@@iterator"];if(!W){if(Array.isArray(pe)||(W=function(le,Me){if(le){if("string"==typeof le)return De(le,void 0);var K=Object.prototype.toString.call(le).slice(8,-1);if("Object"===K&&le.constructor&&(K=le.constructor.name),"Map"===K||"Set"===K)return Array.from(le);if("Arguments"===K||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return De(le,void 0)}}(pe))||te&&pe&&"number"==typeof pe.length){W&&(pe=W);var ue=0,ne=function(){};return{s:ne,n:function(){return ue>=pe.length?{done:!0}:{done:!1,value:pe[ue++]}},e:function(le){throw le},f:ne}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var G,J=!0,Y=!1;return{s:function(){W=W.call(pe)},n:function(){var le=W.next();return J=le.done,le},e:function(le){Y=!0,G=le},f:function(){try{J||null==W.return||W.return()}finally{if(Y)throw G}}}}(Ee.getBufferTemplate.call(W));try{for(K.s();!(Me=K.n()).done;)le[0]===Me.value&&le.shift()}catch(_e){K.e(_e)}finally{K.f()}le=le.join("")}if("function"==typeof ue.onBeforePaste){if(!1===(le=ue.onBeforePaste.call(W,le,ue)))return!1;le||(le=ne)}(0,ot.checkVal)(this,!0,!1,le.toString().split(""),pe),pe.preventDefault()},inputFallBackEvent:function(pe){var ne,te=this.inputmask,W=te.opts,ue=te.dependencyLib,G=this,J=G.inputmask._valueGet(!0),Y=(te.isRTL?Ee.getBuffer.call(te).slice().reverse():Ee.getBuffer.call(te)).join(""),le=Ee.caret.call(te,G,void 0,void 0,!0);if(Y!==J){if(ne=function(K,ce,_e){for(var qe,Be,at,Ze=K.substr(0,_e.begin).split(""),Fe=K.substr(_e.begin).split(""),ze=ce.substr(0,_e.begin).split(""),Et=ce.substr(_e.begin).split(""),Ot=Ze.length>=ze.length?Ze.length:ze.length,ke=Fe.length>=Et.length?Fe.length:Et.length,Ne="",Ye=[],Ke="~";Ze.length<Ot;)Ze.push(Ke);for(;ze.length<Ot;)ze.push(Ke);for(;Fe.length<ke;)Fe.unshift(Ke);for(;Et.length<ke;)Et.unshift(Ke);var it=Ze.concat(Fe),lt=ze.concat(Et);for(Be=0,qe=it.length;Be<qe;Be++)switch(at=et.getPlaceholder.call(te,Ee.translatePosition.call(te,Be)),Ne){case"insertText":lt[Be-1]===it[Be]&&_e.begin==it.length-1&&Ye.push(it[Be]),Be=qe;break;case"insertReplacementText":case"deleteContentBackward":it[Be]===Ke?_e.end++:Be=qe;break;default:it[Be]!==lt[Be]&&(it[Be+1]!==Ke&&it[Be+1]!==at&&void 0!==it[Be+1]||(lt[Be]!==at||lt[Be+1]!==Ke)&&lt[Be]!==Ke?lt[Be+1]===Ke&&lt[Be]===it[Be+1]?(Ne="insertText",Ye.push(it[Be]),_e.begin--,_e.end--):it[Be]!==at&&it[Be]!==Ke&&(it[Be+1]===Ke||lt[Be]!==it[Be]&&lt[Be+1]===it[Be+1])?(Ne="insertReplacementText",Ye.push(it[Be]),_e.begin--):it[Be]===Ke?(Ne="deleteContentBackward",(Ee.isMask.call(te,Ee.translatePosition.call(te,Be),!0)||lt[Be]===W.radixPoint)&&_e.end++):Be=qe:(Ne="insertText",Ye.push(it[Be]),_e.begin--,_e.end--))}return{action:Ne,data:Ye,caret:_e}}(J,Y,le),(G.inputmask.shadowRoot||G.ownerDocument).activeElement!==G&&G.focus(),(0,ot.writeBuffer)(G,Ee.getBuffer.call(te)),Ee.caret.call(te,G,le.begin,le.end,!0),!Ge.mobile&&te.skipNextInsert&&"insertText"===pe.inputType&&"insertText"===ne.action&&te.isComposing)return!1;switch(te.skipNextInsert=!("insertCompositionText"!==pe.inputType||"insertText"!==ne.action||!te.isComposing),ne.action){case"insertText":case"insertReplacementText":ne.data.forEach(function(K,ce){var _e=new ue.Event("keypress");_e.key=K,te.ignorable=!1,ye.keypressEvent.call(G,_e)}),setTimeout(function(){te.$el.trigger("keyup")},0);break;case"deleteContentBackward":var Me=new ue.Event("keydown");Me.key=Le.keys.Backspace,ye.keyEvent.call(G,Me);break;default:(0,ot.applyInputValue)(G,J),Ee.caret.call(te,G,le.begin,le.end,!0)}pe.preventDefault()}},setValueEvent:function(pe){var te=this.inputmask,W=this,ue=pe&&pe.detail?pe.detail[0]:arguments[1];void 0===ue&&(ue=W.inputmask._valueGet(!0)),(0,ot.applyInputValue)(W,ue),(pe.detail&&void 0!==pe.detail[1]||void 0!==arguments[2])&&Ee.caret.call(te,W,pe.detail?pe.detail[1]:arguments[2])},focusEvent:function(pe){var te=this.inputmask,W=te.opts,ue=te?._valueGet();W.showMaskOnFocus&&ue!==Ee.getBuffer.call(te).join("")&&(0,ot.writeBuffer)(this,Ee.getBuffer.call(te),Ee.seekNext.call(te,Ee.getLastValidPosition.call(te))),!0!==W.positionCaretOnTab||!1!==te.mouseEnter||Je.isComplete.call(te,Ee.getBuffer.call(te))&&-1!==Ee.getLastValidPosition.call(te)||ye.clickEvent.apply(this,[pe,!0]),te.undoValue=te?._valueGet(!0)},invalidEvent:function(pe){this.inputmask.validationEvent=!0},mouseleaveEvent:function(){var pe=this.inputmask,te=pe.opts,W=this;pe.mouseEnter=!1,te.clearMaskOnLostFocus&&(W.inputmask.shadowRoot||W.ownerDocument).activeElement!==W&&(0,ot.HandleNativePlaceholder)(W,pe.originalPlaceholder)},clickEvent:function(pe,te){var W=this.inputmask;W.clicked++;var ue=this;if((ue.inputmask.shadowRoot||ue.ownerDocument).activeElement===ue){var ne=Ee.determineNewCaretPosition.call(W,Ee.caret.call(W,ue),te);void 0!==ne&&Ee.caret.call(W,ue,ne)}},cutEvent:function(pe){var te=this.inputmask,W=te.maskset,ne=Ee.caret.call(te,this),G=te.isRTL?Ee.getBuffer.call(te).slice(ne.end,ne.begin):Ee.getBuffer.call(te).slice(ne.begin,ne.end),J=te.isRTL?G.reverse().join(""):G.join("");window.navigator.clipboard?window.navigator.clipboard.writeText(J):window.clipboardData&&window.clipboardData.getData&&window.clipboardData.setData("Text",J),Je.handleRemove.call(te,this,Le.keys.Delete,ne),(0,ot.writeBuffer)(this,Ee.getBuffer.call(te),W.p,pe,te.undoValue!==te._valueGet(!0))},blurEvent:function(pe){var te=this.inputmask,W=te.opts,ue=te.dependencyLib;te.clicked=0;var ne=ue(this),G=this;if(G.inputmask){(0,ot.HandleNativePlaceholder)(G,te.originalPlaceholder);var J=G.inputmask._valueGet(),Y=Ee.getBuffer.call(te).slice();""!==J&&(W.clearMaskOnLostFocus&&(-1===Ee.getLastValidPosition.call(te)&&J===Ee.getBufferTemplate.call(te).join("")?Y=[]:ot.clearOptionalTail.call(te,Y)),!1===Je.isComplete.call(te,Y)&&(setTimeout(function(){ne.trigger("incomplete")},0),W.clearIncomplete&&(Ee.resetMaskSet.call(te),Y=W.clearMaskOnLostFocus?[]:Ee.getBufferTemplate.call(te).slice())),(0,ot.writeBuffer)(G,Y,void 0,pe)),te.undoValue!==te._valueGet(!0)&&(te.undoValue=te._valueGet(!0),ne.trigger("change"))}},mouseenterEvent:function(){var pe=this.inputmask,te=pe.opts.showMaskOnHover,W=this;if(pe.mouseEnter=!0,(W.inputmask.shadowRoot||W.ownerDocument).activeElement!==W){var ue=(pe.isRTL?Ee.getBufferTemplate.call(pe).slice().reverse():Ee.getBufferTemplate.call(pe)).join("");te&&(0,ot.HandleNativePlaceholder)(W,ue)}},submitEvent:function(){var pe=this.inputmask,te=pe.opts;pe.undoValue!==pe._valueGet(!0)&&pe.$el.trigger("change"),-1===Ee.getLastValidPosition.call(pe)&&pe._valueGet&&pe._valueGet()===Ee.getBufferTemplate.call(pe).join("")&&pe._valueSet(""),te.clearIncomplete&&!1===Je.isComplete.call(pe,Ee.getBuffer.call(pe))&&pe._valueSet(""),te.removeMaskOnSubmit&&(pe._valueSet(pe.unmaskedvalue(),!0),setTimeout(function(){(0,ot.writeBuffer)(pe.el,Ee.getBuffer.call(pe))},0))},resetEvent:function(){var pe=this.inputmask;pe.refreshValue=!0,setTimeout(function(){(0,ot.applyInputValue)(pe.el,pe._valueGet(!0))},0)}};p.EventHandlers=ye},9716:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.EventRuler=void 0;var Ee,Le=(Ee=ge(2394))&&Ee.__esModule?Ee:{default:Ee},Ge=ge(2839),Je=ge(8711),ot=ge(7760),et={on:function(Oe,De,ye){var pe=Oe.inputmask.dependencyLib,te=function(W){W.originalEvent&&(arguments[0]=W=W.originalEvent||W);var ue,ne=this,G=ne.inputmask,J=G?G.opts:void 0;if(void 0===G&&"FORM"!==this.nodeName){var Y=pe.data(ne,"_inputmask_opts");pe(ne).off(),Y&&new Le.default(Y).mask(ne)}else{if(["submit","reset","setvalue"].includes(W.type)||"FORM"===this.nodeName||!(ne.disabled||ne.readOnly&&!("keydown"===W.type&&W.ctrlKey&&W.key===Ge.keys.c||!1===J.tabThrough&&W.key===Ge.keys.Tab))){switch(W.type){case"input":if(!0===G.skipInputEvent)return G.skipInputEvent=!1,W.preventDefault();break;case"click":case"focus":return G.validationEvent?(G.validationEvent=!1,Oe.blur(),(0,ot.HandleNativePlaceholder)(Oe,(G.isRTL?Je.getBufferTemplate.call(G).slice().reverse():Je.getBufferTemplate.call(G)).join("")),setTimeout(function(){Oe.focus()},J.validationEventTimeOut),!1):(ue=arguments,void setTimeout(function(){Oe.inputmask&&ye.apply(ne,ue)},0))}var le=ye.apply(ne,arguments);return!1===le&&(W.preventDefault(),W.stopPropagation()),le}W.preventDefault()}};["submit","reset"].includes(De)?(te=te.bind(Oe),null!==Oe.form&&pe(Oe.form).on(De,te)):pe(Oe).on(De,te),Oe.inputmask.events[De]=Oe.inputmask.events[De]||[],Oe.inputmask.events[De].push(te)},off:function(Oe,De){if(Oe.inputmask&&Oe.inputmask.events){var ye=Oe.inputmask.dependencyLib,pe=Oe.inputmask.events;for(var te in De&&((pe=[])[De]=Oe.inputmask.events[De]),pe){for(var W=pe[te];W.length>0;){var ue=W.pop();["submit","reset"].includes(te)?null!==Oe.form&&ye(Oe.form).off(te,ue):ye(Oe).off(te,ue)}delete Oe.inputmask.events[te]}}}};p.EventRuler=et},219:function(Pt,p,ge){var Ee=pe(ge(2394)),Le=ge(2839),Ge=pe(ge(7184)),Je=ge(8711),ot=ge(4713);function Oe(Fe,ze){(null==ze||ze>Fe.length)&&(ze=Fe.length);for(var Et=0,Ot=new Array(ze);Et<ze;Et++)Ot[Et]=Fe[Et];return Ot}function De(Fe){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ze){return typeof ze}:function(ze){return ze&&"function"==typeof Symbol&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(Fe)}function ye(Fe,ze){for(var Et=0;Et<ze.length;Et++){var Ot=ze[Et];Ot.enumerable=Ot.enumerable||!1,Ot.configurable=!0,"value"in Ot&&(Ot.writable=!0),Object.defineProperty(Fe,(void 0,Ne=function(Ye,Ke){if("object"!==De(Ye)||null===Ye)return Ye;var it=Ye[Symbol.toPrimitive];if(void 0!==it){var lt=it.call(Ye,"string");if("object"!==De(lt))return lt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ye)}(Ot.key),"symbol"===De(Ne)?Ne:String(Ne)),Ot)}var Ne}function pe(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}var te=Ee.default.dependencyLib,W=function(){function Fe(ke,Ne,Ye){(function(Ke,it){if(!(Ke instanceof it))throw new TypeError("Cannot call a class as a function")})(this,Fe),this.mask=ke,this.format=Ne,this.opts=Ye,this._date=new Date(1,0,1),this.initDateObject(ke,this.opts)}var ze,Et;return ze=Fe,(Et=[{key:"date",get:function(){return void 0===this._date&&(this._date=new Date(1,0,1),this.initDateObject(void 0,this.opts)),this._date}},{key:"initDateObject",value:function(ke,Ne){var Ye;for(K(Ne).lastIndex=0;Ye=K(Ne).exec(this.format);){var Ke=new RegExp("\\d+$").exec(Ye[0]),it=Ke?Ye[0][0]+"x":Ye[0],lt=void 0;if(void 0!==ke){if(Ke){var It=K(Ne).lastIndex,Wt=Ze(Ye.index,Ne);K(Ne).lastIndex=It,lt=ke.slice(0,ke.indexOf(Wt.nextMatch[0]))}else lt=ke.slice(0,G[it]&&G[it][4]||it.length);ke=ke.slice(lt.length)}Object.prototype.hasOwnProperty.call(G,it)&&this.setValue(this,lt,it,G[it][2],G[it][1])}}},{key:"setValue",value:function(ke,Ne,Ye,Ke,it){if(void 0!==Ne&&(ke[Ke]="ampm"===Ke?Ne:Ne.replace(/[^0-9]/g,"0"),ke["raw"+Ke]=Ne.replace(/\s/g,"_")),void 0!==it){var lt=ke[Ke];("day"===Ke&&29===parseInt(lt)||"month"===Ke&&2===parseInt(lt))&&(29!==parseInt(ke.day)||2!==parseInt(ke.month)||""!==ke.year&&void 0!==ke.year||ke._date.setFullYear(2012,1,29)),"day"===Ke&&(ne=!0,0===parseInt(lt)&&(lt=1)),"month"===Ke&&(ne=!0),"year"===Ke&&(ne=!0,lt.length<4&&(lt=qe(lt,4,!0))),""===lt||isNaN(lt)||it.call(ke._date,lt),"ampm"===Ke&&it.call(ke._date,lt)}}},{key:"reset",value:function(){this._date=new Date(1,0,1)}},{key:"reInit",value:function(){this._date=void 0}}])&&ye(ze.prototype,Et),Object.defineProperty(ze,"prototype",{writable:!1}),Fe}(),ue=(new Date).getFullYear(),ne=!1,G={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return qe(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",function(Fe){var ze=Fe?parseInt(Fe):0;return ze>0&&ze--,Date.prototype.setMonth.call(this,ze)},"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",function(Fe){var ze=Fe?parseInt(Fe):0;return ze>0&&ze--,Date.prototype.setMonth.call(this,ze)},"month",function(){return qe(Date.prototype.getMonth.call(this)+1,2)}],mmm:[""],mmmm:[""],yy:["[0-9]{2}",Date.prototype.setFullYear,"year",function(){return qe(Date.prototype.getFullYear.call(this),2)}],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return qe(Date.prototype.getFullYear.call(this),4)}],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return qe(Date.prototype.getHours.call(this),2)}],hx:[function(Fe){return"[0-9]{".concat(Fe,"}")},Date.prototype.setHours,"hours",function(Fe){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return qe(Date.prototype.getHours.call(this),2)}],Hx:[function(Fe){return"[0-9]{".concat(Fe,"}")},Date.prototype.setHours,"hours",function(Fe){return function(){return qe(Date.prototype.getHours.call(this),Fe)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return qe(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return qe(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return qe(Date.prototype.getMilliseconds.call(this),3)},3],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return qe(Date.prototype.getMilliseconds.call(this),2)},2],t:["[ap]",Y,"ampm",le,1],tt:["[ap]m",Y,"ampm",le,2],T:["[AP]",Y,"ampm",le,1],TT:["[AP]M",Y,"ampm",le,2],Z:[".*",void 0,"Z",function(){var Fe=this.toString().match(/\((.+)\)/)[1];return Fe.includes(" ")&&(Fe=(Fe=Fe.replace("-"," ").toUpperCase()).split(" ").map(function(ze){return function et(Fe,ze){return function(Et){if(Array.isArray(Et))return Et}(Fe)||function(Et,Ot){var ke=null==Et?null:typeof Symbol<"u"&&Et[Symbol.iterator]||Et["@@iterator"];if(null!=ke){var Ne,Ye,Ke,it,lt=[],It=!0,Wt=!1;try{if(Ke=(ke=ke.call(Et)).next,0===Ot){if(Object(ke)!==ke)return;It=!1}else for(;!(It=(Ne=Ke.call(ke)).done)&&(lt.push(Ne.value),lt.length!==Ot);It=!0);}catch(ct){Wt=!0,Ye=ct}finally{try{if(!It&&null!=ke.return&&(it=ke.return(),Object(it)!==it))return}finally{if(Wt)throw Ye}}return lt}}(Fe,ze)||function(Et,Ot){if(Et){if("string"==typeof Et)return Oe(Et,Ot);var ke=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===ke&&Et.constructor&&(ke=Et.constructor.name),"Map"===ke||"Set"===ke)return Array.from(Et);if("Arguments"===ke||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ke))return Oe(Et,Ot)}}(Fe,ze)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ze,1)[0]}).join("")),Fe}],o:[""],S:[""]},J={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function Y(Fe){var ze=this.getHours();Fe.toLowerCase().includes("p")?this.setHours(ze+12):Fe.toLowerCase().includes("a")&&ze>=12&&this.setHours(ze-12)}function le(){var Fe=this.getHours();return(Fe=Fe||12)>=12?"PM":"AM"}function Me(Fe){var ze=new RegExp("\\d+$").exec(Fe[0]);if(ze&&void 0!==ze[0]){var Et=G[Fe[0][0]+"x"].slice("");return Et[0]=Et[0](ze[0]),Et[3]=Et[3](ze[0]),Et}if(G[Fe[0]])return G[Fe[0]]}function K(Fe){if(!Fe.tokenizer){var ze=[],Et=[];for(var Ot in G)if(/\.*x$/.test(Ot)){var ke=Ot[0]+"\\d+";-1===Et.indexOf(ke)&&Et.push(ke)}else-1===ze.indexOf(Ot[0])&&ze.push(Ot[0]);Fe.tokenizer="("+(Et.length>0?Et.join("|")+"|":"")+ze.join("+|")+")+?|.",Fe.tokenizer=new RegExp(Fe.tokenizer,"g")}return Fe.tokenizer}function ce(Fe,ze,Et){if(!ne)return!0;if(void 0===Fe.rawday||!isFinite(Fe.rawday)&&new Date(Fe.date.getFullYear(),isFinite(Fe.rawmonth)?Fe.month:Fe.date.getMonth()+1,0).getDate()>=Fe.day||"29"==Fe.day&&(!isFinite(Fe.rawyear)||void 0===Fe.rawyear||""===Fe.rawyear)||new Date(Fe.date.getFullYear(),isFinite(Fe.rawmonth)?Fe.month:Fe.date.getMonth()+1,0).getDate()>=Fe.day)return ze;if("29"==Fe.day){var Ot=Ze(ze.pos,Et);if("yyyy"===Ot.targetMatch[0]&&ze.pos-Ot.targetMatchIndex==2)return ze.remove=ze.pos+1,ze}else if("02"==Fe.month&&"30"==Fe.day&&void 0!==ze.c)return Fe.day="03",Fe.date.setDate(3),Fe.date.setMonth(1),ze.insert=[{pos:ze.pos,c:"0"},{pos:ze.pos+1,c:ze.c}],ze.caret=Je.seekNext.call(this,ze.pos+1),ze;return!1}function _e(Fe,ze,Et,Ot){var ke,Ne,Ye="";for(K(Et).lastIndex=0;ke=K(Et).exec(Fe);)if(void 0===ze)if(Ne=Me(ke))Ye+="("+Ne[0]+")";else switch(ke[0]){case"[":Ye+="(";break;case"]":Ye+=")?";break;default:Ye+=(0,Ge.default)(ke[0])}else(Ne=Me(ke))?Ye+=!0!==Ot&&Ne[3]?Ne[3].call(ze.date):Ne[2]?ze["raw"+Ne[2]]:ke[0]:Ye+=ke[0];return Ye}function qe(Fe,ze,Et){for(Fe=String(Fe),ze=ze||2;Fe.length<ze;)Fe=Et?Fe+"0":"0"+Fe;return Fe}function Be(Fe,ze,Et){return"string"==typeof Fe?new W(Fe,ze,Et):Fe&&"object"===De(Fe)&&Object.prototype.hasOwnProperty.call(Fe,"date")?Fe:void 0}function at(Fe,ze){return _e(ze.inputFormat,{date:Fe},ze)}function Ze(Fe,ze){var Et,Ot,ke=0,Ne=0;for(K(ze).lastIndex=0;Ot=K(ze).exec(ze.inputFormat);){var Ye=new RegExp("\\d+$").exec(Ot[0]);if((ke+=Ne=Ye?parseInt(Ye[0]):Ot[0].length)>=Fe+1){Et=Ot,Ot=K(ze).exec(ze.inputFormat);break}}return{targetMatchIndex:ke-Ne,nextMatch:Ot,targetMatch:Et}}Ee.default.extendAliases({datetime:{mask:function(Fe){return Fe.numericInput=!1,G.S=Fe.i18n.ordinalSuffix.join("|"),Fe.inputFormat=J[Fe.inputFormat]||Fe.inputFormat,Fe.displayFormat=J[Fe.displayFormat]||Fe.displayFormat||Fe.inputFormat,Fe.outputFormat=J[Fe.outputFormat]||Fe.outputFormat||Fe.inputFormat,Fe.placeholder=""!==Fe.placeholder?Fe.placeholder:Fe.inputFormat.replace(/[[\]]/,""),Fe.regex=_e(Fe.inputFormat,void 0,Fe),Fe.min=Be(Fe.min,Fe.inputFormat,Fe),Fe.max=Be(Fe.max,Fe.inputFormat,Fe),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:null,outputFormat:null,min:null,max:null,skipOptionalPartCharacter:"",i18n:{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]},preValidation:function(Fe,ze,Et,Ot,ke,Ne,Ye,Ke){if(Ke)return!0;if(isNaN(Et)&&Fe[ze]!==Et){var it=Ze(ze,ke);if(it.nextMatch&&it.nextMatch[0]===Et&&it.targetMatch[0].length>1&&new RegExp(G[it.targetMatch[0]][0]).test("0"+Fe[ze-1]))return Fe[ze]=Fe[ze-1],Fe[ze-1]="0",{fuzzy:!0,buffer:Fe,refreshFromBuffer:{start:ze-1,end:ze+1},pos:ze+1}}return!0},postValidation:function(Fe,ze,Et,Ot,ke,Ne,Ye,Ke){var it,lt;if(Ye)return!0;if(!1===Ot&&(((it=Ze(ze+1,ke)).targetMatch&&it.targetMatchIndex===ze&&it.targetMatch[0].length>1&&void 0!==G[it.targetMatch[0]]||(it=Ze(ze+2,ke)).targetMatch&&it.targetMatchIndex===ze+1&&it.targetMatch[0].length>1&&void 0!==G[it.targetMatch[0]])&&(lt=G[it.targetMatch[0]][0]),void 0!==lt&&(void 0!==Ne.validPositions[ze+1]&&new RegExp(lt).test(Et+"0")?(Fe[ze]=Et,Fe[ze+1]="0",Ot={pos:ze+2,caret:ze}):new RegExp(lt).test("0"+Et)&&(Fe[ze]="0",Fe[ze+1]=Et,Ot={pos:ze+2})),!1===Ot))return Ot;if(Ot.fuzzy&&(Fe=Ot.buffer,ze=Ot.pos),(it=Ze(ze,ke)).targetMatch&&it.targetMatch[0]&&void 0!==G[it.targetMatch[0]]){var It=G[it.targetMatch[0]];lt=It[0];var Wt=Fe.slice(it.targetMatchIndex,it.targetMatchIndex+it.targetMatch[0].length);if(!1===new RegExp(lt).test(Wt.join(""))&&2===it.targetMatch[0].length&&Ne.validPositions[it.targetMatchIndex]&&Ne.validPositions[it.targetMatchIndex+1]&&(Ne.validPositions[it.targetMatchIndex+1].input="0"),"year"==It[2])for(var ct=ot.getMaskTemplate.call(this,!1,1,void 0,!0),Rt=ze+1;Rt<Fe.length;Rt++)Fe[Rt]=ct[Rt],delete Ne.validPositions[Rt]}var sn=Ot,_n=Be(Fe.join(""),ke.inputFormat,ke);return sn&&!isNaN(_n.date.getTime())&&(ke.prefillYear&&(sn=function(tn,Ln,vi){if(tn.year!==tn.rawyear){var hn=ue.toString(),An=tn.rawyear.replace(/[^0-9]/g,""),In=hn.slice(0,An.length),Cn=hn.slice(An.length);if(2===An.length&&An===In){var bi=new Date(ue,tn.month-1,tn.day);tn.day==bi.getDate()&&(!vi.max||vi.max.date.getTime()>=bi.getTime())&&(tn.date.setFullYear(ue),tn.year=hn,Ln.insert=[{pos:Ln.pos+1,c:Cn[0]},{pos:Ln.pos+2,c:Cn[1]}])}}return Ln}(_n,sn,ke)),sn=function(tn,Ln,vi,hn,An){if(!Ln)return Ln;if(Ln&&vi.min&&!isNaN(vi.min.date.getTime())){var In;for(tn.reset(),K(vi).lastIndex=0;In=K(vi).exec(vi.inputFormat);){var Cn;if((Cn=Me(In))&&Cn[3]){for(var bi=Cn[1],cr=tn[Cn[2]],$i=vi.min[Cn[2]],qo=vi.max?vi.max[Cn[2]]:$i,Qi=[],Si=!1,ur=0;ur<$i.length;ur++)void 0!==hn.validPositions[ur+In.index]||Si?(Qi[ur]=cr[ur],Si=Si||cr[ur]>$i[ur]):(Qi[ur]=$i[ur],"year"===Cn[2]&&cr.length-1==ur&&$i!=qo&&(Qi=(parseInt(Qi.join(""))+1).toString().split("")),"ampm"===Cn[2]&&$i!=qo&&vi.min.date.getTime()>tn.date.getTime()&&(Qi[ur]=qo[ur]));bi.call(tn._date,Qi.join(""))}}Ln=vi.min.date.getTime()<=tn.date.getTime(),tn.reInit()}return Ln&&vi.max&&(isNaN(vi.max.date.getTime())||(Ln=vi.max.date.getTime()>=tn.date.getTime())),Ln}(_n,sn=ce.call(this,_n,sn,ke),ke,Ne)),void 0!==ze&&sn&&Ot.pos!==ze?{buffer:_e(ke.inputFormat,_n,ke).split(""),refreshFromBuffer:{start:ze,end:Ot.pos},pos:Ot.caret||Ot.pos}:sn},onKeyDown:function(Fe,ze,Et,Ot){Fe.ctrlKey&&Fe.key===Le.keys.ArrowRight&&(this.inputmask._valueSet(at(new Date,Ot)),te(this).trigger("setvalue"))},onUnMask:function(Fe,ze,Et){return ze&&_e(Et.outputFormat,Be(Fe,Et.inputFormat,Et),Et,!0)},casing:function(Fe,ze,Et,Ot){return 0==ze.nativeDef.indexOf("[ap]")?Fe.toLowerCase():0==ze.nativeDef.indexOf("[AP]")?Fe.toUpperCase():Fe},onBeforeMask:function(Fe,ze){return"[object Date]"===Object.prototype.toString.call(Fe)&&(Fe=at(Fe,ze)),Fe},insertMode:!1,insertModeVisual:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric",prefillYear:!0}})},3851:function(Pt,p,ge){var Ee,Le=(Ee=ge(2394))&&Ee.__esModule?Ee:{default:Ee},Ge=ge(8711),Je=ge(4713);Le.default.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});var ot=new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]");function et(Oe,De,ye,pe,te){return ye-1>-1&&"."!==De.buffer[ye-1]?(Oe=De.buffer[ye-1]+Oe,Oe=ye-2>-1&&"."!==De.buffer[ye-2]?De.buffer[ye-2]+Oe:"0"+Oe):Oe="00"+Oe,ot.test(Oe)}Le.default.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)://.*",autoUnmask:!1,keepStatic:!1,tabThrough:!0},ip:{mask:"i{1,3}.j{1,3}.k{1,3}.l{1,3}",definitions:{i:{validator:et},j:{validator:et},k:{validator:et},l:{validator:et}},onUnMask:function(Oe,De,ye){return Oe},inputmode:"decimal",substitutes:{",":"."}},email:{mask:function(Oe){var De=Oe.separator,ye=Oe.quantifier,pe="*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",te=pe;if(De)for(var W=0;W<ye;W++)te+="[".concat(De).concat(pe,"]");return te},greedy:!1,casing:"lower",separator:null,quantifier:5,skipOptionalPartCharacter:"",onBeforePaste:function(Oe,De){return(Oe=Oe.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9\uff11-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function(Oe,De,ye){return Oe},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function(Oe,De,ye,pe,te,W,ue){var ne=Je.getMaskTemplate.call(this,!0,Ge.getLastValidPosition.call(this),!0,!0);return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(ne.join(""))}}})},207:function(Pt,p,ge){var Ee=ot(ge(2394)),Le=ot(ge(7184)),Ge=ge(8711),Je=ge(2839);function ot(W){return W&&W.__esModule?W:{default:W}}var et=Ee.default.dependencyLib;function Oe(W,ue){for(var ne="",G=0;G<W.length;G++)Ee.default.prototype.definitions[W.charAt(G)]||ue.definitions[W.charAt(G)]||ue.optionalmarker[0]===W.charAt(G)||ue.optionalmarker[1]===W.charAt(G)||ue.quantifiermarker[0]===W.charAt(G)||ue.quantifiermarker[1]===W.charAt(G)||ue.groupmarker[0]===W.charAt(G)||ue.groupmarker[1]===W.charAt(G)||ue.alternatormarker===W.charAt(G)?ne+="\\"+W.charAt(G):ne+=W.charAt(G);return ne}function De(W,ue,ne,G){if(W.length>0&&ue>0&&(!ne.digitsOptional||G)){var J=W.indexOf(ne.radixPoint),Y=!1;ne.negationSymbol.back===W[W.length-1]&&(Y=!0,W.length--),-1===J&&(W.push(ne.radixPoint),J=W.length-1);for(var le=1;le<=ue;le++)isFinite(W[J+le])||(W[J+le]="0")}return Y&&W.push(ne.negationSymbol.back),W}function ye(W,ue){var ne=0;for(var G in"+"===W&&(ne=Ge.seekNext.call(this,ue.validPositions.length-1)),ue.tests)if((G=parseInt(G))>=ne)for(var J=0,Y=ue.tests[G].length;J<Y;J++)if((void 0===ue.validPositions[G]||"-"===W)&&ue.tests[G][J].match.def===W)return G+(void 0!==ue.validPositions[G]&&"-"!==W?1:0);return ne}function pe(W,ue){for(var ne=-1,G=0,J=ue.validPositions.length;G<J;G++){var Y=ue.validPositions[G];if(Y&&Y.match.def===W){ne=G;break}}return ne}function te(W,ue,ne,G,J){var Y=ue.buffer?ue.buffer.indexOf(J.radixPoint):-1,le=(-1!==Y||G&&J.jitMasking)&&new RegExp(J.definitions[9].validator).test(W);return J._radixDance&&-1!==Y&&le&&null==ue.validPositions[Y]?{insert:{pos:Y===ne?Y+1:Y,c:J.radixPoint},pos:ne}:le}Ee.default.extendAliases({numeric:{mask:function(W){W.repeat=0,W.groupSeparator===W.radixPoint&&W.digits&&"0"!==W.digits&&(W.groupSeparator="."===W.radixPoint?",":","===W.radixPoint?".":"")," "===W.groupSeparator&&(W.skipOptionalPartCharacter=void 0),W.placeholder.length>1&&(W.placeholder=W.placeholder.charAt(0)),"radixFocus"===W.positionCaretOnClick&&""===W.placeholder&&(W.positionCaretOnClick="lvp");var ue="0",ne=W.radixPoint;!0===W.numericInput&&void 0===W.__financeInput?(ue="1",W.positionCaretOnClick="radixFocus"===W.positionCaretOnClick?"lvp":W.positionCaretOnClick,W.digitsOptional=!1,isNaN(W.digits)&&(W.digits=2),W._radixDance=!1,ne=","===W.radixPoint?"?":"!",""!==W.radixPoint&&void 0===W.definitions[ne]&&(W.definitions[ne]={},W.definitions[ne].validator="["+W.radixPoint+"]",W.definitions[ne].placeholder=W.radixPoint,W.definitions[ne].static=!0,W.definitions[ne].generated=!0)):(W.__financeInput=!1,W.numericInput=!0);var G,le,J="[+]";if(J+=Oe(W.prefix,W),""!==W.groupSeparator?(void 0===W.definitions[W.groupSeparator]&&(W.definitions[W.groupSeparator]={},W.definitions[W.groupSeparator].validator="["+W.groupSeparator+"]",W.definitions[W.groupSeparator].placeholder=W.groupSeparator,W.definitions[W.groupSeparator].static=!0,W.definitions[W.groupSeparator].generated=!0),J+=W._mask(W)):J+="9{+}",void 0!==W.digits&&0!==W.digits){var Y=W.digits.toString().split(",");isFinite(Y[0])&&Y[1]&&isFinite(Y[1])?J+=ne+ue+"{"+W.digits+"}":(isNaN(W.digits)||parseInt(W.digits)>0)&&(W.digitsOptional||W.jitMasking?(G=J+ne+ue+"{0,"+W.digits+"}",W.keepStatic=!0):J+=ne+ue+"{"+W.digits+"}")}else W.inputmode="numeric";return J+=Oe(W.suffix,W),J+="[-]",G&&(J=[G+Oe(W.suffix,W)+"[-]",J]),W.greedy=!1,void 0===(le=W).parseMinMaxOptions&&(null!==le.min&&(le.min=le.min.toString().replace(new RegExp((0,Le.default)(le.groupSeparator),"g"),""),","===le.radixPoint&&(le.min=le.min.replace(le.radixPoint,".")),le.min=isFinite(le.min)?parseFloat(le.min):NaN,isNaN(le.min)&&(le.min=Number.MIN_VALUE)),null!==le.max&&(le.max=le.max.toString().replace(new RegExp((0,Le.default)(le.groupSeparator),"g"),""),","===le.radixPoint&&(le.max=le.max.replace(le.radixPoint,".")),le.max=isFinite(le.max)?parseFloat(le.max):NaN,isNaN(le.max)&&(le.max=Number.MAX_VALUE)),le.parseMinMaxOptions="done"),""!==W.radixPoint&&W.substituteRadixPoint&&(W.substitutes["."==W.radixPoint?",":"."]=W.radixPoint),J},_mask:function(W){return"("+W.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,SetMaxOnOverflow:!1,step:1,inputType:"text",unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"decimal",shortcuts:{k:"1000",m:"1000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",usePrototypeDefinitions:!1,stripLeadingZeroes:!0,substituteRadixPoint:!0,definitions:{0:{validator:te},1:{validator:te,definitionSymbol:"9"},9:{validator:"[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]",definitionSymbol:"*"},"+":{validator:function(W,ue,ne,G,J){return J.allowMinus&&("-"===W||W===J.negationSymbol.front)}},"-":{validator:function(W,ue,ne,G,J){return J.allowMinus&&W===J.negationSymbol.back}}},preValidation:function(W,ue,ne,G,J,Y,le,Me){if(!1!==J.__financeInput&&ne===J.radixPoint)return!1;var at,Ze,Fe,ze,Et,K=W.indexOf(J.radixPoint),ce=ue;if(at=ue,Ze=ne,Fe=K,ze=Y,(Et=J)._radixDance&&Et.numericInput&&Ze!==Et.negationSymbol.back&&at<=Fe&&(Fe>0||Ze==Et.radixPoint)&&(void 0===ze.validPositions[at-1]||ze.validPositions[at-1].input!==Et.negationSymbol.back)&&(at-=1),ue=at,"-"===ne||ne===J.negationSymbol.front){if(!0!==J.allowMinus)return!1;var _e=!1,qe=pe("+",Y),Be=pe("-",Y);return-1!==qe&&(_e=[qe,Be]),!1!==_e?{remove:_e,caret:ce-J.negationSymbol.back.length}:{insert:[{pos:ye.call(this,"+",Y),c:J.negationSymbol.front,fromIsValid:!0},{pos:ye.call(this,"-",Y),c:J.negationSymbol.back,fromIsValid:void 0}],caret:ce+J.negationSymbol.back.length}}if(ne===J.groupSeparator)return{caret:ce};if(Me)return!0;if(-1!==K&&!0===J._radixDance&&!1===G&&ne===J.radixPoint&&void 0!==J.digits&&(isNaN(J.digits)||parseInt(J.digits)>0)&&K!==ue)return{caret:J._radixDance&&ue===K-1?K+1:K};if(!1===J.__financeInput)if(G){if(J.digitsOptional)return{rewritePosition:le.end};if(!J.digitsOptional){if(le.begin>K&&le.end<=K)return ne===J.radixPoint?{insert:{pos:K+1,c:"0",fromIsValid:!0},rewritePosition:K}:{rewritePosition:K+1};if(le.begin<K)return{rewritePosition:le.begin-1}}}else if(!J.showMaskOnHover&&!J.showMaskOnFocus&&!J.digitsOptional&&J.digits>0&&""===this.__valueGet.call(this.el))return{rewritePosition:K};return{rewritePosition:ue}},postValidation:function(W,ue,ne,G,J,Y,le){if(!1===G)return G;if(le)return!0;if(null!==J.min||null!==J.max){var Me=J.onUnMask(W.slice().reverse().join(""),void 0,et.extend({},J,{unmaskAsNumber:!0}));if(null!==J.min&&Me<J.min&&(Me.toString().length>J.min.toString().length||Me<0))return!1;if(null!==J.max&&Me>J.max)return!!J.SetMaxOnOverflow&&{refreshFromBuffer:!0,buffer:De(J.max.toString().replace(".",J.radixPoint).split(""),J.digits,J).reverse()}}return G},onUnMask:function(W,ue,ne){if(""===ue&&!0===ne.nullable)return ue;var G=W.replace(ne.prefix,"");return G=(G=G.replace(ne.suffix,"")).replace(new RegExp((0,Le.default)(ne.groupSeparator),"g"),""),""!==ne.placeholder.charAt(0)&&(G=G.replace(new RegExp(ne.placeholder.charAt(0),"g"),"0")),ne.unmaskAsNumber?(""!==ne.radixPoint&&-1!==G.indexOf(ne.radixPoint)&&(G=G.replace(Le.default.call(this,ne.radixPoint),".")),G=(G=G.replace(new RegExp("^"+(0,Le.default)(ne.negationSymbol.front)),"-")).replace(new RegExp((0,Le.default)(ne.negationSymbol.back)+"$"),""),Number(G)):G},isComplete:function(W,ue){var ne=(ue.numericInput?W.slice().reverse():W).join("");return ne=(ne=(ne=(ne=(ne=ne.replace(new RegExp("^"+(0,Le.default)(ue.negationSymbol.front)),"-")).replace(new RegExp((0,Le.default)(ue.negationSymbol.back)+"$"),"")).replace(ue.prefix,"")).replace(ue.suffix,"")).replace(new RegExp((0,Le.default)(ue.groupSeparator)+"([0-9]{3})","g"),"$1"),","===ue.radixPoint&&(ne=ne.replace((0,Le.default)(ue.radixPoint),".")),isFinite(ne)},onBeforeMask:function(W,ue){var ne=ue.radixPoint||",";isFinite(ue.digits)&&(ue.digits=parseInt(ue.digits)),"number"!=typeof W&&"number"!==ue.inputType||""===ne||(W=W.toString().replace(".",ne));var G="-"===W.charAt(0)||W.charAt(0)===ue.negationSymbol.front,J=W.split(ne),Y=J[0].replace(/[^\-0-9]/g,""),le=J.length>1?J[1].replace(/[^0-9]/g,""):"",Me=J.length>1;W=Y+(""!==le?ne+le:le);var K=0;if(""!==ne&&(K=ue.digitsOptional?ue.digits<le.length?ue.digits:le.length:ue.digits,""!==le||!ue.digitsOptional)){var ce=Math.pow(10,K||1);W=W.replace((0,Le.default)(ne),"."),isNaN(parseFloat(W))||(W=(ue.roundingFN(parseFloat(W)*ce)/ce).toFixed(K)),W=W.toString().replace(".",ne)}if(0===ue.digits&&-1!==W.indexOf(ne)&&(W=W.substring(0,W.indexOf(ne))),null!==ue.min||null!==ue.max){var _e=W.toString().replace(ne,".");null!==ue.min&&_e<ue.min?W=ue.min.toString().replace(".",ne):null!==ue.max&&_e>ue.max&&(W=ue.max.toString().replace(".",ne))}return G&&"-"!==W.charAt(0)&&(W="-"+W),De(W.toString().split(""),K,ue,Me).join("")},onBeforeWrite:function(W,ue,ne,G){function J(at,Ze){if(!1!==G.__financeInput||Ze){var Fe=at.indexOf(G.radixPoint);-1!==Fe&&at.splice(Fe,1)}if(""!==G.groupSeparator)for(;-1!==(Fe=at.indexOf(G.groupSeparator));)at.splice(Fe,1);return at}var Y,le,at,Ze,Fe,ze,Et;if(G.stripLeadingZeroes&&(at=ue,Ze=G,Et=!1,(ze=(Fe=new RegExp("(^"+(""!==Ze.negationSymbol.front?(0,Le.default)(Ze.negationSymbol.front)+"?":"")+(0,Le.default)(Ze.prefix)+")(.*)("+(0,Le.default)(Ze.suffix)+(""!=Ze.negationSymbol.back?(0,Le.default)(Ze.negationSymbol.back)+"?":"")+"$)").exec(at.slice().reverse().join("")))?Fe[2]:"")&&(ze=ze.split(Ze.radixPoint.charAt(0))[0],Et=new RegExp("^[0"+Ze.groupSeparator+"]*").exec(ze)),le=!(!Et||!(Et[0].length>1||Et[0].length>0&&Et[0].length<ze.length))&&Et))for(var Me=ue.join("").lastIndexOf(le[0].split("").reverse().join(""))-(le[0]==le.input?0:1),ce=le[0].length-(le[0]==le.input?1:0);ce>0;ce--)delete this.maskset.validPositions[Me+ce],delete ue[Me+ce];if(W)switch(W.type){case"blur":case"checkval":if(null!==G.min){var _e=G.onUnMask(ue.slice().reverse().join(""),void 0,et.extend({},G,{unmaskAsNumber:!0}));if(null!==G.min&&_e<G.min)return{refreshFromBuffer:!0,buffer:De(G.min.toString().replace(".",G.radixPoint).split(""),G.digits,G).reverse()}}if(ue[ue.length-1]===G.negationSymbol.front){var qe=new RegExp("(^"+(""!=G.negationSymbol.front?(0,Le.default)(G.negationSymbol.front)+"?":"")+(0,Le.default)(G.prefix)+")(.*)("+(0,Le.default)(G.suffix)+(""!=G.negationSymbol.back?(0,Le.default)(G.negationSymbol.back)+"?":"")+"$)").exec(J(ue.slice(),!0).reverse().join(""));0==(qe?qe[2]:"")&&(Y={refreshFromBuffer:!0,buffer:[0]})}else""!==G.radixPoint&&ue.indexOf(G.radixPoint)===G.suffix.length&&(Y&&Y.buffer?Y.buffer.splice(0,1+G.suffix.length):(ue.splice(0,1+G.suffix.length),Y={refreshFromBuffer:!0,buffer:J(ue)}));if(G.enforceDigitsOnBlur){var Be=(Y=Y||{})&&Y.buffer||ue.slice().reverse();Y.refreshFromBuffer=!0,Y.buffer=De(Be,G.digits,G,!0).reverse()}}return Y},onKeyDown:function(W,ue,ne,G){var J,le,Y=et(this);if(3!=W.location&&(le=G.shortcuts&&G.shortcuts[W.key])&&le.length>1)return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())*parseInt(le)),Y.trigger("setvalue"),!1;if(W.ctrlKey)switch(W.key){case Je.keys.ArrowUp:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(G.step)),Y.trigger("setvalue"),!1;case Je.keys.ArrowDown:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(G.step)),Y.trigger("setvalue"),!1}if(!W.shiftKey&&(W.key===Je.keys.Delete||W.key===Je.keys.Backspace||W.key===Je.keys.BACKSPACE_SAFARI)&&ne.begin!==ue.length){if(ue[W.key===Je.keys.Delete?ne.begin-1:ne.end]===G.negationSymbol.front)return J=ue.slice().reverse(),""!==G.negationSymbol.front&&J.shift(),""!==G.negationSymbol.back&&J.pop(),Y.trigger("setvalue",[J.join(""),ne.begin]),!1;if(!0===G._radixDance){var K=ue.indexOf(G.radixPoint);if(G.digitsOptional){if(0===K)return(J=ue.slice().reverse()).pop(),Y.trigger("setvalue",[J.join(""),ne.begin>=J.length?J.length:ne.begin]),!1}else if(-1!==K&&(ne.begin<K||ne.end<K||W.key===Je.keys.Delete&&(ne.begin===K||ne.begin-1===K))){var ce=void 0;return ne.begin===ne.end&&(W.key===Je.keys.Backspace||W.key===Je.keys.BACKSPACE_SAFARI?ne.begin++:W.key===Je.keys.Delete&&ne.begin-1===K&&(ce=et.extend({},ne),ne.begin--,ne.end--)),(J=ue.slice().reverse()).splice(J.length-ne.begin,ne.begin-ne.end+1),J=De(J,G.digits,G).join(""),ce&&(ne=ce),Y.trigger("setvalue",[J,ne.begin>=J.length?K+1:ne.begin]),!1}}}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",inputmode:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function(W){return"("+W.groupSeparator+"99){*|1}("+W.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}})},9380:function(Pt,p,ge){var Ee;Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var Le=((Ee=ge(8741))&&Ee.__esModule?Ee:{default:Ee}).default?window:{};p.default=Le},7760:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.HandleNativePlaceholder=function(te,W){var ue=te?te.inputmask:this;if(ot.ie){if(te.inputmask._valueGet()!==W&&(te.placeholder!==W||""===te.placeholder)){var ne=Ge.getBuffer.call(ue).slice(),G=te.inputmask._valueGet();if(G!==W){var J=Ge.getLastValidPosition.call(ue);-1===J&&G===Ge.getBufferTemplate.call(ue).join("")?ne=[]:-1!==J&&De.call(ue,ne),pe(te,ne)}}}else te.placeholder!==W&&(te.placeholder=W,""===te.placeholder&&te.removeAttribute("placeholder"))},p.applyInputValue=Oe,p.checkVal=ye,p.clearOptionalTail=De,p.unmaskedvalue=function(te){var W=te?te.inputmask:this,ue=W.opts,ne=W.maskset;if(te){if(void 0===te.inputmask)return te.value;te.inputmask&&te.inputmask.refreshValue&&Oe(te,te.inputmask._valueGet(!0))}for(var G=[],J=ne.validPositions,Y=0,le=J.length;Y<le;Y++)J[Y]&&J[Y].match&&(1!=J[Y].match.static||Array.isArray(ne.metadata)&&!0!==J[Y].generatedInput)&&G.push(J[Y].input);var Me=0===G.length?"":(W.isRTL?G.reverse():G).join("");if("function"==typeof ue.onUnMask){var K=(W.isRTL?Ge.getBuffer.call(W).slice().reverse():Ge.getBuffer.call(W)).join("");Me=ue.onUnMask.call(W,K,Me,ue)}return Me},p.writeBuffer=pe;var Ee=ge(2839),Le=ge(4713),Ge=ge(8711),Je=ge(7215),ot=ge(9845),et=ge(6030);function Oe(te,W){var ue=te?te.inputmask:this,ne=ue.opts;te.inputmask.refreshValue=!1,"function"==typeof ne.onBeforeMask&&(W=ne.onBeforeMask.call(ue,W,ne)||W),ye(te,!0,!1,W=(W||"").toString().split("")),ue.undoValue=ue._valueGet(!0),(ne.clearMaskOnLostFocus||ne.clearIncomplete)&&te.inputmask._valueGet()===Ge.getBufferTemplate.call(ue).join("")&&-1===Ge.getLastValidPosition.call(ue)&&te.inputmask._valueSet("")}function De(te){te.length=0;for(var W,ue=Le.getMaskTemplate.call(this,!0,0,!0,void 0,!0);void 0!==(W=ue.shift());)te.push(W);return te}function ye(te,W,ue,ne,G){var J=te?te.inputmask:this,Y=J.maskset,le=J.opts,Me=J.dependencyLib,K=ne.slice(),ce="",_e=-1,qe=void 0,Be=le.skipOptionalPartCharacter;le.skipOptionalPartCharacter="",Ge.resetMaskSet.call(J),Y.tests={},_e=le.radixPoint?Ge.determineNewCaretPosition.call(J,{begin:0,end:0},!1,!1===le.__financeInput?"radixFocus":void 0).begin:0,Y.p=_e,J.caretPos={begin:_e};var at=[],Ze=J.caretPos;if(K.forEach(function(Ne,Ye){if(void 0!==Ne){var Ke=new Me.Event("_checkval");Ke.key=Ne,ce+=Ne;var it=Ge.getLastValidPosition.call(J,void 0,!0);!function(lt,It){for(var Wt=Le.getMaskTemplate.call(J,!0,0).slice(lt,Ge.seekNext.call(J,lt,!1,!1)).join("").replace(/'/g,""),ct=Wt.indexOf(It);ct>0&&" "===Wt[ct-1];)ct--;var Rt=0===ct&&!Ge.isMask.call(J,lt)&&(Le.getTest.call(J,lt).match.nativeDef===It.charAt(0)||!0===Le.getTest.call(J,lt).match.static&&Le.getTest.call(J,lt).match.nativeDef==="'"+It.charAt(0)||" "===Le.getTest.call(J,lt).match.nativeDef&&(Le.getTest.call(J,lt+1).match.nativeDef===It.charAt(0)||!0===Le.getTest.call(J,lt+1).match.static&&Le.getTest.call(J,lt+1).match.nativeDef==="'"+It.charAt(0)));if(!Rt&&ct>0&&!Ge.isMask.call(J,lt,!1,!0)){var sn=Ge.seekNext.call(J,lt);J.caretPos.begin<sn&&(J.caretPos={begin:sn})}return Rt}(_e,ce)?(qe=et.EventHandlers.keypressEvent.call(J,Ke,!0,!1,ue,J.caretPos.begin))&&(_e=J.caretPos.begin+1,ce=""):qe=et.EventHandlers.keypressEvent.call(J,Ke,!0,!1,ue,it+1),qe?(void 0!==qe.pos&&Y.validPositions[qe.pos]&&!0===Y.validPositions[qe.pos].match.static&&void 0===Y.validPositions[qe.pos].alternation&&(at.push(qe.pos),J.isRTL||(qe.forwardPosition=qe.pos+1)),pe.call(J,void 0,Ge.getBuffer.call(J),qe.forwardPosition,Ke,!1),J.caretPos={begin:qe.forwardPosition,end:qe.forwardPosition},Ze=J.caretPos):void 0===Y.validPositions[Ye]&&K[Ye]===Le.getPlaceholder.call(J,Ye)&&Ge.isMask.call(J,Ye,!0)?J.caretPos.begin++:J.caretPos=Ze}}),at.length>0){var Fe,ze,Et=Ge.seekNext.call(J,-1,void 0,!1);if(!Je.isComplete.call(J,Ge.getBuffer.call(J))&&at.length<=Et||Je.isComplete.call(J,Ge.getBuffer.call(J))&&at.length>0&&at.length!==Et&&0===at[0])for(var Ot=Et;void 0!==(Fe=at.shift());){var ke=new Me.Event("_checkval");if((ze=Y.validPositions[Fe]).generatedInput=!0,ke.key=ze.input,(qe=et.EventHandlers.keypressEvent.call(J,ke,!0,!1,ue,Ot))&&void 0!==qe.pos&&qe.pos!==Fe&&Y.validPositions[qe.pos]&&!0===Y.validPositions[qe.pos].match.static)at.push(qe.pos);else if(!qe)break;Ot++}}W&&pe.call(J,te,Ge.getBuffer.call(J),qe?qe.forwardPosition:J.caretPos.begin,G||new Me.Event("checkval"),G&&("input"===G.type&&J.undoValue!==Ge.getBuffer.call(J).join("")||"paste"===G.type)),le.skipOptionalPartCharacter=Be}function pe(te,W,ue,ne,G){var J=te?te.inputmask:this,Y=J.opts,le=J.dependencyLib;if(ne&&"function"==typeof Y.onBeforeWrite){var Me=Y.onBeforeWrite.call(J,ne,W,ue,Y);if(Me){if(Me.refreshFromBuffer){var K=Me.refreshFromBuffer;Je.refreshFromBuffer.call(J,!0===K?K:K.start,K.end,Me.buffer||W),W=Ge.getBuffer.call(J,!0)}void 0!==ue&&(ue=void 0!==Me.caret?Me.caret:ue)}}if(void 0!==te&&(te.inputmask._valueSet(W.join("")),void 0===ue||void 0!==ne&&"blur"===ne.type||Ge.caret.call(J,te,ue,void 0,void 0,void 0!==ne&&"keydown"===ne.type&&(ne.key===Ee.keys.Delete||ne.key===Ee.keys.Backspace)),!0===G)){var ce=le(te),_e=te.inputmask._valueGet();te.inputmask.skipInputEvent=!0,ce.trigger("input"),setTimeout(function(){_e===Ge.getBufferTemplate.call(J).join("")?ce.trigger("cleared"):!0===Je.isComplete.call(J,W)&&ce.trigger("complete")},0)}}},2394:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var Ee=ge(157),Le=ne(ge(4963)),Ge=ne(ge(9380)),Je=ge(2391),ot=ge(4713),et=ge(8711),Oe=ge(7215),De=ge(7760),ye=ge(9716),pe=ne(ge(7392)),te=ne(ge(3976)),W=ne(ge(8741));function ue(K){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce})(K)}function ne(K){return K&&K.__esModule?K:{default:K}}var G=Ge.default.document,J="_inputmask_opts";function Y(K,ce,_e){if(W.default){if(!(this instanceof Y))return new Y(K,ce,_e);this.dependencyLib=Le.default,this.el=void 0,this.events={},this.maskset=void 0,!0!==_e&&("[object Object]"===Object.prototype.toString.call(K)?ce=K:(ce=ce||{},K&&(ce.alias=K)),this.opts=Le.default.extend(!0,{},this.defaults,ce),this.noMasksCache=ce&&void 0!==ce.definitions,this.userOptions=ce||{},le(this.opts.alias,ce,this.opts)),this.refreshValue=!1,this.undoValue=void 0,this.$el=void 0,this.skipInputEvent=!1,this.validationEvent=!1,this.ignorable=!1,this.mouseEnter=!1,this.clicked=0,this.originalPlaceholder=void 0,this.isComposing=!1,this.hasAlternator=!1}}function le(K,ce,_e){var qe=Y.prototype.aliases[K];return qe?(qe.alias&&le(qe.alias,void 0,_e),Le.default.extend(!0,_e,qe),Le.default.extend(!0,_e,ce),!0):(null===_e.mask&&(_e.mask=K),!1)}Y.prototype={dataAttribute:"data-inputmask",defaults:te.default,definitions:pe.default,aliases:{},masksCache:{},get isRTL(){return this.opts.isRTL||this.opts.numericInput},mask:function(K){var ce=this;return"string"==typeof K&&(K=G.getElementById(K)||G.querySelectorAll(K)),(K=K.nodeName?[K]:Array.isArray(K)?K:[].slice.call(K)).forEach(function(_e,qe){var Be=Le.default.extend(!0,{},ce.opts);if(function(Ze,Fe,ze,Et){function Ot(lt,It){null!==(It=void 0!==It?It:Ze.getAttribute(""===Et?lt:Et+"-"+lt))&&("string"==typeof It&&(0===lt.indexOf("on")?It=Ge.default[It]:"false"===It?It=!1:"true"===It&&(It=!0)),ze[lt]=It)}if(!0===Fe.importDataAttributes){var ke,Ne,Ye,Ke,it=Ze.getAttribute(Et);if(it&&""!==it&&(it=it.replace(/'/g,'"'),Ne=JSON.parse("{"+it+"}")),Ne)for(Ke in Ye=void 0,Ne)if("alias"===Ke.toLowerCase()){Ye=Ne[Ke];break}for(ke in Ot("alias",Ye),ze.alias&&le(ze.alias,ze,Fe),Fe){if(Ne)for(Ke in Ye=void 0,Ne)if(Ke.toLowerCase()===ke.toLowerCase()){Ye=Ne[Ke];break}Ot(ke,Ye)}}return Le.default.extend(!0,Fe,ze),("rtl"===Ze.dir||Fe.rightAlign)&&(Ze.style.textAlign="right"),("rtl"===Ze.dir||Fe.numericInput)&&(Ze.dir="ltr",Ze.removeAttribute("dir"),Fe.isRTL=!0),Object.keys(ze).length}(_e,Be,Le.default.extend(!0,{},ce.userOptions),ce.dataAttribute)){var at=(0,Je.generateMaskSet)(Be,ce.noMasksCache);void 0!==at&&(void 0!==_e.inputmask&&(_e.inputmask.opts.autoUnmask=!0,_e.inputmask.remove()),_e.inputmask=new Y(void 0,void 0,!0),_e.inputmask.opts=Be,_e.inputmask.noMasksCache=ce.noMasksCache,_e.inputmask.userOptions=Le.default.extend(!0,{},ce.userOptions),_e.inputmask.el=_e,_e.inputmask.$el=(0,Le.default)(_e),_e.inputmask.maskset=at,Le.default.data(_e,J,ce.userOptions),Ee.mask.call(_e.inputmask))}}),K&&K[0]&&K[0].inputmask||this},option:function(K,ce){return"string"==typeof K?this.opts[K]:"object"===ue(K)?(Le.default.extend(this.userOptions,K),this.el&&!0!==ce&&this.mask(this.el),this):void 0},unmaskedvalue:function(K){if(this.maskset=this.maskset||(0,Je.generateMaskSet)(this.opts,this.noMasksCache),void 0===this.el||void 0!==K){var ce=("function"==typeof this.opts.onBeforeMask&&this.opts.onBeforeMask.call(this,K,this.opts)||K).split("");De.checkVal.call(this,void 0,!1,!1,ce),"function"==typeof this.opts.onBeforeWrite&&this.opts.onBeforeWrite.call(this,void 0,et.getBuffer.call(this),0,this.opts)}return De.unmaskedvalue.call(this,this.el)},remove:function(){if(this.el){Le.default.data(this.el,J,null);var K=this.opts.autoUnmask?(0,De.unmaskedvalue)(this.el):this._valueGet(this.opts.autoUnmask);K!==et.getBufferTemplate.call(this).join("")?this._valueSet(K,this.opts.autoUnmask):this._valueSet(""),ye.EventRuler.off(this.el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el),"value")&&this.__valueGet&&Object.defineProperty(this.el,"value",{get:this.__valueGet,set:this.__valueSet,configurable:!0}):G.__lookupGetter__&&this.el.__lookupGetter__("value")&&this.__valueGet&&(this.el.__defineGetter__("value",this.__valueGet),this.el.__defineSetter__("value",this.__valueSet)),this.el.inputmask=void 0}return this.el},getemptymask:function(){return this.maskset=this.maskset||(0,Je.generateMaskSet)(this.opts,this.noMasksCache),(this.isRTL?et.getBufferTemplate.call(this).reverse():et.getBufferTemplate.call(this)).join("")},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||(0,Je.generateMaskSet)(this.opts,this.noMasksCache),Oe.isComplete.call(this,et.getBuffer.call(this))},getmetadata:function(){if(this.maskset=this.maskset||(0,Je.generateMaskSet)(this.opts,this.noMasksCache),Array.isArray(this.maskset.metadata)){var K=ot.getMaskTemplate.call(this,!0,0,!1).join("");return this.maskset.metadata.forEach(function(ce){return ce.mask!==K||(K=ce,!1)}),K}return this.maskset.metadata},isValid:function(K){if(this.maskset=this.maskset||(0,Je.generateMaskSet)(this.opts,this.noMasksCache),K){var ce=("function"==typeof this.opts.onBeforeMask&&this.opts.onBeforeMask.call(this,K,this.opts)||K).split("");De.checkVal.call(this,void 0,!0,!1,ce)}else K=this.isRTL?et.getBuffer.call(this).slice().reverse().join(""):et.getBuffer.call(this).join("");for(var _e=et.getBuffer.call(this),qe=et.determineLastRequiredPosition.call(this),Be=_e.length-1;Be>qe&&!et.isMask.call(this,Be);Be--);return _e.splice(qe,Be+1-qe),Oe.isComplete.call(this,_e)&&K===(this.isRTL?et.getBuffer.call(this).slice().reverse().join(""):et.getBuffer.call(this).join(""))},format:function(K,ce){this.maskset=this.maskset||(0,Je.generateMaskSet)(this.opts,this.noMasksCache);var _e=("function"==typeof this.opts.onBeforeMask&&this.opts.onBeforeMask.call(this,K,this.opts)||K).split("");De.checkVal.call(this,void 0,!0,!1,_e);var qe=this.isRTL?et.getBuffer.call(this).slice().reverse().join(""):et.getBuffer.call(this).join("");return ce?{value:qe,metadata:this.getmetadata()}:qe},setValue:function(K){this.el&&(0,Le.default)(this.el).trigger("setvalue",[K])},analyseMask:Je.analyseMask},Y.extendDefaults=function(K){Le.default.extend(!0,Y.prototype.defaults,K)},Y.extendDefinitions=function(K){Le.default.extend(!0,Y.prototype.definitions,K)},Y.extendAliases=function(K){Le.default.extend(!0,Y.prototype.aliases,K)},Y.format=function(K,ce,_e){return Y(ce).format(K,_e)},Y.unmask=function(K,ce){return Y(ce).unmaskedvalue(K)},Y.isValid=function(K,ce){return Y(ce).isValid(K)},Y.remove=function(K){"string"==typeof K&&(K=G.getElementById(K)||G.querySelectorAll(K)),(K=K.nodeName?[K]:K).forEach(function(ce){ce.inputmask&&ce.inputmask.remove()})},Y.setValue=function(K,ce){"string"==typeof K&&(K=G.getElementById(K)||G.querySelectorAll(K)),(K=K.nodeName?[K]:K).forEach(function(_e){_e.inputmask?_e.inputmask.setValue(ce):(0,Le.default)(_e).trigger("setvalue",[ce])})},Y.dependencyLib=Le.default,Ge.default.Inputmask=Y,p.default=Y},5296:function(Pt,p,ge){function Ee(G){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(G)}var Le=W(ge(9380)),Ge=W(ge(2394)),Je=W(ge(8741));function Oe(G){var J="function"==typeof Map?new Map:void 0;return Oe=function(Y){if(null===Y||-1===Function.toString.call(Y).indexOf("[native code]"))return Y;if("function"!=typeof Y)throw new TypeError("Super expression must either be null or a function");if(void 0!==J){if(J.has(Y))return J.get(Y);J.set(Y,Me)}function Me(){return De(Y,arguments,te(this).constructor)}return Me.prototype=Object.create(Y.prototype,{constructor:{value:Me,enumerable:!1,writable:!0,configurable:!0}}),pe(Me,Y)},Oe(G)}function De(G,J,Y){return(De=ye()?Reflect.construct.bind():function(le,Me,K){var ce=[null];ce.push.apply(ce,Me);var _e=new(Function.bind.apply(le,ce));return K&&pe(_e,K.prototype),_e}).apply(null,arguments)}function ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pe(G,J){return(pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Y,le){return Y.__proto__=le,Y})(G,J)}function te(G){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(J){return J.__proto__||Object.getPrototypeOf(J)})(G)}function W(G){return G&&G.__esModule?G:{default:G}}var ue=Le.default.document;if(Je.default&&ue&&ue.head&&ue.head.attachShadow&&Le.default.customElements&&void 0===Le.default.customElements.get("input-mask")){var ne=function(G){!function(ce,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(_e&&_e.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),_e&&pe(ce,_e)}(K,G);var J,Me=function et(G){var J=ye();return function(){var Y,le=te(G);if(J){var Me=te(this).constructor;Y=Reflect.construct(le,arguments,Me)}else Y=le.apply(this,arguments);return function(K,ce){if(ce&&("object"===Ee(ce)||"function"==typeof ce))return ce;if(void 0!==ce)throw new TypeError("Derived constructors may only return object or undefined");return function(_e){if(void 0===_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}(K)}(this,Y)}}(K);function K(){var ce;!function(Fe,ze){if(!(Fe instanceof ze))throw new TypeError("Cannot call a class as a function")}(this,K);var _e=(ce=Me.call(this)).getAttributeNames(),qe=ce.attachShadow({mode:"closed"}),Be=ue.createElement("input");for(var at in Be.type="text",qe.appendChild(Be),_e)Object.prototype.hasOwnProperty.call(_e,at)&&Be.setAttribute(_e[at],ce.getAttribute(_e[at]));var Ze=new Ge.default;return Ze.dataAttribute="",Ze.mask(Be),Be.inputmask.shadowRoot=qe,ce}return J=K,Object.defineProperty(J,"prototype",{writable:!1}),J}(Oe(HTMLElement));Le.default.customElements.define("input-mask",ne)}},2839:function(Pt,p){function ge(ot,et){return function(Oe){if(Array.isArray(Oe))return Oe}(ot)||function(Oe,De){var ye=null==Oe?null:typeof Symbol<"u"&&Oe[Symbol.iterator]||Oe["@@iterator"];if(null!=ye){var pe,te,W,ue,ne=[],G=!0,J=!1;try{if(W=(ye=ye.call(Oe)).next,0===De){if(Object(ye)!==ye)return;G=!1}else for(;!(G=(pe=W.call(ye)).done)&&(ne.push(pe.value),ne.length!==De);G=!0);}catch(Y){J=!0,te=Y}finally{try{if(!G&&null!=ye.return&&(ue=ye.return(),Object(ue)!==ue))return}finally{if(J)throw te}}return ne}}(ot,et)||function(Oe,De){if(Oe){if("string"==typeof Oe)return Ee(Oe,De);var ye=Object.prototype.toString.call(Oe).slice(8,-1);if("Object"===ye&&Oe.constructor&&(ye=Oe.constructor.name),"Map"===ye||"Set"===ye)return Array.from(Oe);if("Arguments"===ye||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye))return Ee(Oe,De)}}(ot,et)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(ot,et){(null==et||et>ot.length)&&(et=ot.length);for(var Oe=0,De=new Array(et);Oe<et;Oe++)De[Oe]=ot[Oe];return De}Object.defineProperty(p,"__esModule",{value:!0}),p.keys=p.keyCode=void 0,p.toKey=function(ot,et){return Ge[ot]||(et?String.fromCharCode(ot):String.fromCharCode(ot).toLowerCase())},p.toKeyCode=function(ot){return Le[ot]};var Le={AltGraph:18,ArrowDown:40,ArrowLeft:37,ArrowRight:39,ArrowUp:38,Backspace:8,BACKSPACE_SAFARI:127,CapsLock:20,Delete:46,End:35,Enter:13,Escape:27,Home:36,Insert:45,PageDown:34,PageUp:33,Space:32,Tab:9,c:67,x:88,z:90,Shift:16,Control:17,Alt:18,Pause:19,Meta_LEFT:91,Meta_RIGHT:92,ContextMenu:93,Process:229,Unidentified:229,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};p.keyCode=Le;var Ge=Object.entries(Le).reduce(function(ot,et){var Oe=ge(et,2),ye=Oe[1];return ot[ye]=void 0===ot[ye]?Oe[0]:ot[ye],ot},{}),Je=Object.entries(Le).reduce(function(ot,et){var De=ge(et,2)[0];return ot[De]="Space"===De?" ":De,ot},{});p.keys=Je},2391:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.analyseMask=function(Oe,De,ye){var pe,te,W,ue,ne,G,J=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,Y=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,le=!1,Me=new Le.default,K=[],ce=[],_e=!1;function qe(Wt,ct,Rt){var sn=Wt.matches[(Rt=void 0!==Rt?Rt:Wt.matches.length)-1];if(De){if(0===ct.indexOf("[")||le&&/\\d|\\s|\\w|\\p/i.test(ct)||"."===ct){var _n=ye.casing?"i":"";/^\\p\{.*}$/i.test(ct)&&(_n+="u"),Wt.matches.splice(Rt++,0,{fn:new RegExp(ct,_n),static:!1,optionality:!1,newBlockMarker:void 0===sn?"master":sn.def!==ct,casing:null,def:ct,placeholder:void 0,nativeDef:ct})}else le&&(ct=ct[ct.length-1]),ct.split("").forEach(function(Ln,vi){sn=Wt.matches[Rt-1],Wt.matches.splice(Rt++,0,{fn:/[a-z]/i.test(ye.staticDefinitionSymbol||Ln)?new RegExp("["+(ye.staticDefinitionSymbol||Ln)+"]",ye.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===sn?"master":sn.def!==Ln&&!0!==sn.static,casing:null,def:ye.staticDefinitionSymbol||Ln,placeholder:void 0!==ye.staticDefinitionSymbol?Ln:void 0,nativeDef:(le?"'":"")+Ln})});le=!1}else{var tn=ye.definitions&&ye.definitions[ct]||ye.usePrototypeDefinitions&&Ge.default.prototype.definitions[ct];tn&&!le?Wt.matches.splice(Rt++,0,{fn:tn.validator?"string"==typeof tn.validator?new RegExp(tn.validator,ye.casing?"i":""):new function(){this.test=tn.validator}:new RegExp("."),static:tn.static||!1,optionality:tn.optional||!1,defOptionality:tn.optional||!1,newBlockMarker:void 0===sn||tn.optional?"master":sn.def!==(tn.definitionSymbol||ct),casing:tn.casing,def:tn.definitionSymbol||ct,placeholder:tn.placeholder,nativeDef:ct,generated:tn.generated}):(Wt.matches.splice(Rt++,0,{fn:/[a-z]/i.test(ye.staticDefinitionSymbol||ct)?new RegExp("["+(ye.staticDefinitionSymbol||ct)+"]",ye.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===sn?"master":sn.def!==ct&&!0!==sn.static,casing:null,def:ye.staticDefinitionSymbol||ct,placeholder:void 0!==ye.staticDefinitionSymbol?ct:void 0,nativeDef:(le?"'":"")+ct}),le=!1)}}function Be(){if(K.length>0){if(qe(ue=K[K.length-1],te),ue.isAlternator){ne=K.pop();for(var Wt=0;Wt<ne.matches.length;Wt++)ne.matches[Wt].isGroup&&(ne.matches[Wt].isGroup=!1);K.length>0?(ue=K[K.length-1]).matches.push(ne):Me.matches.push(ne)}}else qe(Me,te)}function at(Wt){var ct=new Le.default(!0);return ct.openGroup=!1,ct.matches=Wt,ct}function Ze(){if((W=K.pop()).openGroup=!1,void 0!==W)if(K.length>0){if((ue=K[K.length-1]).matches.push(W),ue.isAlternator){for(var Wt=(ne=K.pop()).matches[0].matches?ne.matches[0].matches.length:1,ct=0;ct<ne.matches.length;ct++)ne.matches[ct].isGroup=!1,ne.matches[ct].alternatorGroup=!1,null===ye.keepStatic&&Wt<(ne.matches[ct].matches?ne.matches[ct].matches.length:1)&&(ye.keepStatic=!0),Wt=ne.matches[ct].matches?ne.matches[ct].matches.length:1;K.length>0?(ue=K[K.length-1]).matches.push(ne):Me.matches.push(ne)}}else Me.matches.push(W);else Be()}function Fe(Wt){var ct=Wt.pop();return ct.isQuantifier&&(ct=at([Wt.pop(),ct])),ct}for(De&&(ye.optionalmarker[0]=void 0,ye.optionalmarker[1]=void 0);pe=De?Y.exec(Oe):J.exec(Oe);){if(te=pe[0],De){switch(te.charAt(0)){case"?":te="{0,1}";break;case"+":case"*":te="{"+te+"}";break;case"|":if(0===K.length){var ze=at(Me.matches);ze.openGroup=!0,K.push(ze),Me.matches=[],_e=!0}}switch(te){case"\\d":te="[0-9]";break;case"\\p":te+=Y.exec(Oe)[0],te+=Y.exec(Oe)[0]}}if(le)Be();else switch(te.charAt(0)){case"$":case"^":De||Be();break;case ye.escapeChar:le=!0,De&&Be();break;case ye.optionalmarker[1]:case ye.groupmarker[1]:Ze();break;case ye.optionalmarker[0]:K.push(new Le.default(!1,!0));break;case ye.groupmarker[0]:K.push(new Le.default(!0));break;case ye.quantifiermarker[0]:var Et=new Le.default(!1,!1,!0),Ot=(te=te.replace(/[{}?]/g,"")).split("|"),ke=Ot[0].split(","),Ne=isNaN(ke[0])?ke[0]:parseInt(ke[0]),Ye=1===ke.length?Ne:isNaN(ke[1])?ke[1]:parseInt(ke[1]),Ke=isNaN(Ot[1])?Ot[1]:parseInt(Ot[1]);"*"!==Ne&&"+"!==Ne||(Ne="*"===Ye?0:1),Et.quantifier={min:Ne,max:Ye,jit:Ke};var it=K.length>0?K[K.length-1].matches:Me.matches;(pe=it.pop()).isGroup||(pe=at([pe])),it.push(pe),it.push(Et);break;case ye.alternatormarker:if(K.length>0){var lt=(ue=K[K.length-1]).matches[ue.matches.length-1];G=ue.openGroup&&(void 0===lt.matches||!1===lt.isGroup&&!1===lt.isAlternator)?K.pop():Fe(ue.matches)}else G=Fe(Me.matches);if(G.isAlternator)K.push(G);else if(G.alternatorGroup?(ne=K.pop(),G.alternatorGroup=!1):ne=new Le.default(!1,!1,!1,!0),ne.matches.push(G),K.push(ne),G.openGroup){G.openGroup=!1;var It=new Le.default(!0);It.alternatorGroup=!0,K.push(It)}break;default:Be()}}for(_e&&Ze();K.length>0;)W=K.pop(),Me.matches.push(W);return Me.matches.length>0&&(function Wt(ct){ct&&ct.matches&&ct.matches.forEach(function(Rt,sn){var _n=ct.matches[sn+1];(void 0===_n||void 0===_n.matches||!1===_n.isQuantifier)&&Rt&&Rt.isGroup&&(Rt.isGroup=!1,De||(qe(Rt,ye.groupmarker[0],0),!0!==Rt.openGroup&&qe(Rt,ye.groupmarker[1]))),Wt(Rt)})}(Me),ce.push(Me)),(ye.numericInput||ye.isRTL)&&function Wt(ct){for(var Rt in ct.matches=ct.matches.reverse(),ct.matches)if(Object.prototype.hasOwnProperty.call(ct.matches,Rt)){var sn=parseInt(Rt);if(ct.matches[Rt].isQuantifier&&ct.matches[sn+1]&&ct.matches[sn+1].isGroup){var _n=ct.matches[Rt];ct.matches.splice(Rt,1),ct.matches.splice(sn+1,0,_n)}ct.matches[Rt]=void 0!==ct.matches[Rt].matches?Wt(ct.matches[Rt]):((tn=ct.matches[Rt])===ye.optionalmarker[0]?tn=ye.optionalmarker[1]:tn===ye.optionalmarker[1]?tn=ye.optionalmarker[0]:tn===ye.groupmarker[0]?tn=ye.groupmarker[1]:tn===ye.groupmarker[1]&&(tn=ye.groupmarker[0]),tn)}var tn;return ct}(ce[0]),ce},p.generateMaskSet=function(Oe,De){var ye;function te(ue,ne,G){var J,Y,le=!1;return null!==ue&&""!==ue||((le=null!==G.regex)?ue=(ue=G.regex).replace(/^(\^)(.*)(\$)$/,"$2"):(le=!0,ue=".*")),1===ue.length&&!1===G.greedy&&0!==G.repeat&&(G.placeholder=""),ue=function pe(ue,ne){var G=ne.repeat,J=ne.groupmarker,Y=ne.quantifiermarker;if((G>0||"*"===G||"+"===G)&&(ue=J[0]+ue+J[1]+Y[0]+("*"===G?0:"+"===G?1:G)+","+G+Y[1]),!0===ne.keepStatic){var K=ue.match(new RegExp("(.)\\[([^\\]]*)\\]","g"));K&&K.forEach(function(ce,_e){var Ze,qe=function(ze){if(Array.isArray(ze))return ze}(Ze=ce.split("["))||function(ze,Et){var Ot=null==ze?null:typeof Symbol<"u"&&ze[Symbol.iterator]||ze["@@iterator"];if(null!=Ot){var ke,Ne,Ye,Ke,it=[],lt=!0,It=!1;try{for(Ye=(Ot=Ot.call(ze)).next;!(lt=(ke=Ye.call(Ot)).done)&&(it.push(ke.value),2!==it.length);lt=!0);}catch(Wt){It=!0,Ne=Wt}finally{try{if(!lt&&null!=Ot.return&&(Ke=Ot.return(),Object(Ke)!==Ke))return}finally{if(It)throw Ne}}return it}}(Ze)||function(ze,Et){if(ze){if("string"==typeof ze)return ot(ze,2);var Ot=Object.prototype.toString.call(ze).slice(8,-1);if("Object"===Ot&&ze.constructor&&(Ot=ze.constructor.name),"Map"===Ot||"Set"===Ot)return Array.from(ze);if("Arguments"===Ot||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ot))return ot(ze,2)}}(Ze)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),Be=qe[0],at=qe[1];at=at.replace("]",""),ue=ue.replace(new RegExp("".concat((0,Je.default)(Be),"\\[").concat((0,Je.default)(at),"\\]")),Be.charAt(0)===at.charAt(0)?"(".concat(Be,"|").concat(Be).concat(at,")"):"".concat(Be,"[").concat(at,"]"))})}return ue}(ue,G),Y=le?"regex_"+G.regex:G.numericInput?ue.split("").reverse().join(""):ue,null!==G.keepStatic&&(Y="ks_"+G.keepStatic+Y),void 0===Ge.default.prototype.masksCache[Y]||!0===De?(J={mask:ue,maskToken:Ge.default.prototype.analyseMask(ue,le,G),validPositions:[],_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:ne,maskLength:void 0,jitOffset:{}},!0!==De&&(Ge.default.prototype.masksCache[Y]=J,J=Ee.default.extend(!0,{},Ge.default.prototype.masksCache[Y]))):J=Ee.default.extend(!0,{},Ge.default.prototype.masksCache[Y]),J}if("function"==typeof Oe.mask&&(Oe.mask=Oe.mask(Oe)),Array.isArray(Oe.mask)){if(Oe.mask.length>1){null===Oe.keepStatic&&(Oe.keepStatic=!0);var W=Oe.groupmarker[0];return(Oe.isRTL?Oe.mask.reverse():Oe.mask).forEach(function(ue){W.length>1&&(W+=Oe.alternatormarker),W+=void 0!==ue.mask&&"function"!=typeof ue.mask?ue.mask:ue}),te(W+=Oe.groupmarker[1],Oe.mask,Oe)}Oe.mask=Oe.mask.pop()}return ye=te(Oe.mask&&void 0!==Oe.mask.mask&&"function"!=typeof Oe.mask.mask?Oe.mask.mask:Oe.mask,Oe.mask,Oe),null===Oe.keepStatic&&(Oe.keepStatic=!1),ye};var Ee=et(ge(4963)),Le=et(ge(9695)),Ge=et(ge(2394)),Je=et(ge(7184));function ot(Oe,De){(null==De||De>Oe.length)&&(De=Oe.length);for(var ye=0,pe=new Array(De);ye<De;ye++)pe[ye]=Oe[ye];return pe}function et(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}},157:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.mask=function(){var De=this,ye=this.opts,pe=this.el,te=this.dependencyLib;Je.EventRuler.off(pe);var W=function(G,J){"textarea"!==G.tagName.toLowerCase()&&J.ignorables.push(Ee.keys.Enter);var Y=G.getAttribute("type"),le="input"===G.tagName.toLowerCase()&&J.supportsInputType.includes(Y)||G.isContentEditable||"textarea"===G.tagName.toLowerCase();if(!le)if("input"===G.tagName.toLowerCase()){var Me=document.createElement("input");Me.setAttribute("type",Y),le="text"===Me.type,Me=null}else le="partial";return!1!==le?function(K){var ce,_e;function qe(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==Le.getLastValidPosition.call(De)||!0!==J.nullable?(this.inputmask.shadowRoot||this.ownerDocument).activeElement===this&&J.clearMaskOnLostFocus?(De.isRTL?Ge.clearOptionalTail.call(De,Le.getBuffer.call(De).slice()).reverse():Ge.clearOptionalTail.call(De,Le.getBuffer.call(De).slice())).join(""):ce.call(this):"":ce.call(this)}function Be(Ze){_e.call(this,Ze),this.inputmask&&(0,Ge.applyInputValue)(this,Ze)}if(!K.inputmask.__valueGet){if(!0!==J.noValuePatching){if(Object.getOwnPropertyDescriptor){var at=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(K),"value"):void 0;at&&at.get&&at.set?(ce=at.get,_e=at.set,Object.defineProperty(K,"value",{get:qe,set:Be,configurable:!0})):"input"!==K.tagName.toLowerCase()&&(ce=function(){return this.textContent},_e=function(Ze){this.textContent=Ze},Object.defineProperty(K,"value",{get:qe,set:Be,configurable:!0}))}else document.__lookupGetter__&&K.__lookupGetter__("value")&&(ce=K.__lookupGetter__("value"),_e=K.__lookupSetter__("value"),K.__defineGetter__("value",qe),K.__defineSetter__("value",Be));K.inputmask.__valueGet=ce,K.inputmask.__valueSet=_e}K.inputmask._valueGet=function(Ze){return De.isRTL&&!0!==Ze?ce.call(this.el).split("").reverse().join(""):ce.call(this.el)},K.inputmask._valueSet=function(Ze,Fe){_e.call(this.el,null==Ze?"":!0!==Fe&&De.isRTL?Ze.split("").reverse().join(""):Ze)},void 0===ce&&(ce=function(){return this.value},_e=function(Ze){this.value=Ze},function(Ze){if(te.valHooks&&(void 0===te.valHooks[Ze]||!0!==te.valHooks[Ze].inputmaskpatch)){var Fe=te.valHooks[Ze]&&te.valHooks[Ze].get?te.valHooks[Ze].get:function(Et){return Et.value},ze=te.valHooks[Ze]&&te.valHooks[Ze].set?te.valHooks[Ze].set:function(Et,Ot){return Et.value=Ot,Et};te.valHooks[Ze]={get:function(Et){if(Et.inputmask){if(Et.inputmask.opts.autoUnmask)return Et.inputmask.unmaskedvalue();var Ot=Fe(Et);return-1!==Le.getLastValidPosition.call(De,void 0,void 0,Et.inputmask.maskset.validPositions)||!0!==J.nullable?Ot:""}return Fe(Et)},set:function(Et,Ot){var ke=ze(Et,Ot);return Et.inputmask&&(0,Ge.applyInputValue)(Et,Ot),ke},inputmaskpatch:!0}}}(K.type),Je.EventRuler.on(K,"mouseenter",function(){var Fe=this,ze=Fe.inputmask._valueGet(!0);ze!=(Fe.inputmask.isRTL?Le.getBuffer.call(Fe.inputmask).slice().reverse():Le.getBuffer.call(Fe.inputmask)).join("")&&(0,Ge.applyInputValue)(Fe,ze)}))}}(G):G.inputmask=void 0,le}(pe,ye);if(!1!==W){De.originalPlaceholder=pe.placeholder,De.maxLength=void 0!==pe?pe.maxLength:void 0,-1===De.maxLength&&(De.maxLength=void 0),"inputMode"in pe&&null===pe.getAttribute("inputmode")&&(pe.inputMode=ye.inputmode,pe.setAttribute("inputmode",ye.inputmode)),!0===W&&(ye.showMaskOnFocus=ye.showMaskOnFocus&&-1===["cc-number","cc-exp"].indexOf(pe.autocomplete),ot.iphone&&(ye.insertModeVisual=!1,pe.setAttribute("autocorrect","off")),Je.EventRuler.on(pe,"submit",Oe.EventHandlers.submitEvent),Je.EventRuler.on(pe,"reset",Oe.EventHandlers.resetEvent),Je.EventRuler.on(pe,"blur",Oe.EventHandlers.blurEvent),Je.EventRuler.on(pe,"focus",Oe.EventHandlers.focusEvent),Je.EventRuler.on(pe,"invalid",Oe.EventHandlers.invalidEvent),Je.EventRuler.on(pe,"click",Oe.EventHandlers.clickEvent),Je.EventRuler.on(pe,"mouseleave",Oe.EventHandlers.mouseleaveEvent),Je.EventRuler.on(pe,"mouseenter",Oe.EventHandlers.mouseenterEvent),Je.EventRuler.on(pe,"paste",Oe.EventHandlers.pasteEvent),Je.EventRuler.on(pe,"cut",Oe.EventHandlers.cutEvent),Je.EventRuler.on(pe,"complete",ye.oncomplete),Je.EventRuler.on(pe,"incomplete",ye.onincomplete),Je.EventRuler.on(pe,"cleared",ye.oncleared),!0!==ye.inputEventOnly&&Je.EventRuler.on(pe,"keydown",Oe.EventHandlers.keyEvent),(ot.mobile||ye.inputEventOnly)&&pe.removeAttribute("maxLength"),Je.EventRuler.on(pe,"input",Oe.EventHandlers.inputFallBackEvent)),Je.EventRuler.on(pe,"setvalue",Oe.EventHandlers.setValueEvent),Le.getBufferTemplate.call(De).join(""),De.undoValue=De._valueGet(!0);var ue=(pe.inputmask.shadowRoot||pe.ownerDocument).activeElement;if(""!==pe.inputmask._valueGet(!0)||!1===ye.clearMaskOnLostFocus||ue===pe){(0,Ge.applyInputValue)(pe,pe.inputmask._valueGet(!0),ye);var ne=Le.getBuffer.call(De).slice();!1===et.isComplete.call(De,ne)&&ye.clearIncomplete&&Le.resetMaskSet.call(De),ye.clearMaskOnLostFocus&&ue!==pe&&(-1===Le.getLastValidPosition.call(De)?ne=[]:Ge.clearOptionalTail.call(De,ne)),(!1===ye.clearMaskOnLostFocus||ye.showMaskOnFocus&&ue===pe||""!==pe.inputmask._valueGet(!0))&&(0,Ge.writeBuffer)(pe,ne),ue===pe&&Le.caret.call(De,pe,Le.seekNext.call(De,Le.getLastValidPosition.call(De)))}}};var Ee=ge(2839),Le=ge(8711),Ge=ge(7760),Je=ge(9716),ot=ge(9845),et=ge(7215),Oe=ge(6030)},9695:function(Pt,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(ge,Ee,Le,Ge){this.matches=[],this.openGroup=ge||!1,this.alternatorGroup=!1,this.isGroup=ge||!1,this.isOptional=Ee||!1,this.isQuantifier=Le||!1,this.isAlternator=Ge||!1,this.quantifier={min:1,max:1}}},3194:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(Pt,p){if(null==this)throw new TypeError('"this" is null or not defined');var ge=Object(this),Ee=ge.length>>>0;if(0===Ee)return!1;for(var Le=0|p,Ge=Math.max(Le>=0?Le:Ee-Math.abs(Le),0);Ge<Ee;){if(ge[Ge]===Pt)return!0;Ge++}return!1}})},9302:function(){var Pt=Function.bind.call(Function.call,Array.prototype.reduce),p=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),ge=Function.bind.call(Function.call,Array.prototype.concat),Ee=Object.keys;Object.entries||(Object.entries=function(Le){return Pt(Ee(Le),function(Ge,Je){return ge(Ge,"string"==typeof Je&&p(Le,Je)?[[Je,Le[Je]]]:[])},[])})},7149:function(){function Pt(p){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge})(p)}"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===Pt("test".__proto__)?function(p){return p.__proto__}:function(p){return p.constructor.prototype})},4013:function(){String.prototype.includes||(String.prototype.includes=function(Pt,p){return"number"!=typeof p&&(p=0),!(p+Pt.length>this.length)&&-1!==this.indexOf(Pt,p)})},8711:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.caret=function(De,ye,pe,te,W){var ue,ne=this,G=this.opts;if(void 0===ye)return"selectionStart"in De&&"selectionEnd"in De?(ye=De.selectionStart,pe=De.selectionEnd):window.getSelection?(ue=window.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==De&&ue.commonAncestorContainer!==De||(ye=ue.startOffset,pe=ue.endOffset):document.selection&&document.selection.createRange&&(pe=(ye=0-(ue=document.selection.createRange()).duplicate().moveStart("character",-De.inputmask._valueGet().length))+ue.text.length),{begin:te?ye:Oe.call(ne,ye),end:te?pe:Oe.call(ne,pe)};if(Array.isArray(ye)&&(pe=ne.isRTL?ye[0]:ye[1],ye=ne.isRTL?ye[1]:ye[0]),void 0!==ye.begin&&(pe=ne.isRTL?ye.begin:ye.end,ye=ne.isRTL?ye.end:ye.begin),"number"==typeof ye){ye=te?ye:Oe.call(ne,ye),pe="number"==typeof(pe=te?pe:Oe.call(ne,pe))?pe:ye;var J=parseInt(((De.ownerDocument.defaultView||window).getComputedStyle?(De.ownerDocument.defaultView||window).getComputedStyle(De,null):De.currentStyle).fontSize)*pe;if(De.scrollLeft=J>De.scrollWidth?J:0,De.inputmask.caretPos={begin:ye,end:pe},G.insertModeVisual&&!1===G.insertMode&&ye===pe&&(W||pe++),De===(De.inputmask.shadowRoot||De.ownerDocument).activeElement)if("setSelectionRange"in De)De.setSelectionRange(ye,pe);else if(window.getSelection){if(ue=document.createRange(),null==De.firstChild){var Y=document.createTextNode("");De.appendChild(Y)}ue.setStart(De.firstChild,ye<De.inputmask._valueGet().length?ye:De.inputmask._valueGet().length),ue.setEnd(De.firstChild,pe<De.inputmask._valueGet().length?pe:De.inputmask._valueGet().length),ue.collapse(!0);var le=window.getSelection();le.removeAllRanges(),le.addRange(ue)}else De.createTextRange&&((ue=De.createTextRange()).collapse(!0),ue.moveEnd("character",pe),ue.moveStart("character",ye),ue.select())}},p.determineLastRequiredPosition=function(De){var ye,pe,te=this,W=te.maskset,ue=te.dependencyLib,ne=Ee.getMaskTemplate.call(te,!0,Je.call(te),!0,!0),G=ne.length,J=Je.call(te),Y={},le=W.validPositions[J],Me=void 0!==le?le.locator.slice():void 0;for(ye=J+1;ye<ne.length;ye++)Me=(pe=Ee.getTestTemplate.call(te,ye,Me,ye-1)).locator.slice(),Y[ye]=ue.extend(!0,{},pe);var K=le&&void 0!==le.alternation?le.locator[le.alternation]:void 0;for(ye=G-1;ye>J&&((pe=Y[ye]).match.optionality||pe.match.optionalQuantifier&&pe.match.newBlockMarker||K&&(K!==Y[ye].locator[le.alternation]&&1!=pe.match.static||!0===pe.match.static&&pe.locator[le.alternation]&&Le.checkAlternationMatch.call(te,pe.locator[le.alternation].toString().split(","),K.toString().split(","))&&""!==Ee.getTests.call(te,ye)[0].def))&&ne[ye]===Ee.getPlaceholder.call(te,ye,pe.match);ye--)G--;return De?{l:G,def:Y[G]?Y[G].match:void 0}:G},p.determineNewCaretPosition=function(De,ye,pe){var te=this,W=te.maskset,ue=te.opts;if(ye&&(te.isRTL?De.end=De.begin:De.begin=De.end),De.begin===De.end){switch(pe=pe||ue.positionCaretOnClick){case"none":break;case"select":De={begin:0,end:Ge.call(te).length};break;case"ignore":De.end=De.begin=et.call(te,Je.call(te));break;case"radixFocus":if(te.clicked>1&&0==W.validPositions.length)break;if(function(_e){if(""!==ue.radixPoint&&0!==ue.digits){var qe=W.validPositions;if(void 0===qe[_e]||qe[_e].input===Ee.getPlaceholder.call(te,_e)){if(_e<et.call(te,-1))return!0;var Be=Ge.call(te).indexOf(ue.radixPoint);if(-1!==Be){for(var at=0,Ze=qe.length;at<Ze;at++)if(qe[at]&&Be<at&&qe[at].input!==Ee.getPlaceholder.call(te,at))return!1;return!0}}}return!1}(De.begin)){var ne=Ge.call(te).join("").indexOf(ue.radixPoint);De.end=De.begin=ue.numericInput?et.call(te,ne):ne;break}default:var G=De.begin,J=Je.call(te,G,!0),Y=et.call(te,-1!==J||ot.call(te,0)?J:-1);if(G<=Y)De.end=De.begin=ot.call(te,G,!1,!0)?G:et.call(te,G);else{var le=W.validPositions[J],Me=Ee.getTestTemplate.call(te,Y,le?le.match.locator:void 0,le),K=Ee.getPlaceholder.call(te,Y,Me.match);if(""!==K&&Ge.call(te)[Y]!==K&&!0!==Me.match.optionalQuantifier&&!0!==Me.match.newBlockMarker||!ot.call(te,Y,ue.keepStatic,!0)&&Me.match.def===K){var ce=et.call(te,Y);(G>=ce||G===Y)&&(Y=ce)}De.end=De.begin=Y}}return De}},p.getBuffer=Ge,p.getBufferTemplate=function(){var De=this.maskset;return void 0===De._buffer&&(De._buffer=Ee.getMaskTemplate.call(this,!1,1),void 0===De.buffer&&(De.buffer=De._buffer.slice())),De._buffer},p.getLastValidPosition=Je,p.isMask=ot,p.resetMaskSet=function(De){var ye=this.maskset;ye.buffer=void 0,!0!==De&&(ye.validPositions=[],ye.p=0)},p.seekNext=et,p.seekPrevious=function(De,ye){var te=De-1;if(De<=0)return 0;for(;te>0&&(!0===ye&&(!0!==Ee.getTest.call(this,te).match.newBlockMarker||!ot.call(this,te,void 0,!0))||!0!==ye&&!ot.call(this,te,void 0,!0));)te--;return te},p.translatePosition=Oe;var Ee=ge(4713),Le=ge(7215);function Ge(De){var pe=this.maskset;return void 0!==pe.buffer&&!0!==De||(pe.buffer=Ee.getMaskTemplate.call(this,!0,Je.call(this),!0),void 0===pe._buffer&&(pe._buffer=pe.buffer.slice())),pe.buffer}function Je(De,ye,pe){var W=-1,ue=-1,ne=pe||this.maskset.validPositions;void 0===De&&(De=-1);for(var G=0,J=ne.length;G<J;G++)ne[G]&&(ye||!0!==ne[G].generatedInput)&&(G<=De&&(W=G),G>=De&&(ue=G));return-1===W||W==De?ue:-1==ue||De-W<ue-De?W:ue}function ot(De,ye,pe){var te=this,W=this.maskset,ue=Ee.getTestTemplate.call(te,De).match;if(""===ue.def&&(ue=Ee.getTest.call(te,De).match),!0!==ue.static)return ue.fn;if(!0===pe&&void 0!==W.validPositions[De]&&!0!==W.validPositions[De].generatedInput)return!0;if(!0!==ye&&De>-1){if(pe){var ne=Ee.getTests.call(te,De);return ne.length>1+(""===ne[ne.length-1].match.def?1:0)}var G=Ee.determineTestTemplate.call(te,De,Ee.getTests.call(te,De)),J=Ee.getPlaceholder.call(te,De,G.match);return G.match.def!==J}return!1}function et(De,ye,pe){void 0===pe&&(pe=!0);for(var W=De+1;""!==Ee.getTest.call(this,W).match.def&&(!0===ye&&(!0!==Ee.getTest.call(this,W).match.newBlockMarker||!ot.call(this,W,void 0,!0))||!0!==ye&&!ot.call(this,W,void 0,pe));)W++;return W}function Oe(De){var ye=this.opts;return!this.isRTL||"number"!=typeof De||ye.greedy&&""===ye.placeholder||!this.el||(De=this._valueGet().length-De)<0&&(De=0),De}},4713:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.determineTestTemplate=Oe,p.getDecisionTaker=Je,p.getMaskTemplate=function(te,W,ue,ne,G){var J=this,Y=this.opts,le=this.maskset,Me=Y.greedy;G&&Y.greedy&&(Y.greedy=!1,J.maskset.tests={}),W=W||0;var K,ce,_e,qe,Be=[],at=0;do{if(!0===te&&le.validPositions[at])ce=(_e=G&&le.validPositions[at].match.optionality&&void 0===le.validPositions[at+1]&&(!0===le.validPositions[at].generatedInput||le.validPositions[at].input==Y.skipOptionalPartCharacter&&at>0)?Oe.call(J,at,pe.call(J,at,K,at-1)):le.validPositions[at]).match,K=_e.locator.slice(),Be.push(!0===ue?_e.input:!1===ue?ce.nativeDef:ot.call(J,at,ce));else{ce=(_e=et.call(J,at,K,at-1)).match,K=_e.locator.slice();var Ze=!0!==ne&&(!1!==Y.jitMasking?Y.jitMasking:ce.jit);(qe=(qe&&ce.static&&ce.def!==Y.groupSeparator&&null===ce.fn||le.validPositions[at-1]&&ce.static&&ce.def!==Y.groupSeparator&&null===ce.fn)&&le.tests[at])||!1===Ze||void 0===Ze||"number"==typeof Ze&&isFinite(Ze)&&Ze>at?Be.push(!1===ue?ce.nativeDef:ot.call(J,Be.length,ce)):qe=!1}at++}while(!0!==ce.static||""!==ce.def||W>at);return""===Be[Be.length-1]&&Be.pop(),!1===ue&&void 0!==le.maskLength||(le.maskLength=at-1),Y.greedy=Me,Be},p.getPlaceholder=ot,p.getTest=De,p.getTestTemplate=et,p.getTests=pe,p.isSubsetOf=ye;var Ee,Le=(Ee=ge(2394))&&Ee.__esModule?Ee:{default:Ee};function Ge(te,W){var ue=(null!=te.alternation?te.mloc[Je(te)]:te.locator).join("");if(""!==ue)for(;ue.length<W;)ue+="0";return ue}function Je(te){var W=te.locator[te.alternation];return"string"==typeof W&&W.length>0&&(W=W.split(",")[0]),void 0!==W?W.toString():""}function ot(te,W,ue){var ne=this.opts,G=this.maskset;if(void 0!==(W=W||De.call(this,te).match).placeholder||!0===ue)return"function"==typeof W.placeholder?W.placeholder(ne):W.placeholder;if(!0===W.static){if(te>-1&&void 0===G.validPositions[te]){var J,Y=pe.call(this,te),le=[];if(Y.length>1+(""===Y[Y.length-1].match.def?1:0))for(var Me=0;Me<Y.length;Me++)if(""!==Y[Me].match.def&&!0!==Y[Me].match.optionality&&!0!==Y[Me].match.optionalQuantifier&&(!0===Y[Me].match.static||void 0===J||!1!==Y[Me].match.fn.test(J.match.def,G,te,!0,ne))&&(le.push(Y[Me]),!0===Y[Me].match.static&&(J=Y[Me]),le.length>1&&/[0-9a-bA-Z]/.test(le[0].match.def)))return ne.placeholder.charAt(te%ne.placeholder.length)}return W.def}return ne.placeholder.charAt(te%ne.placeholder.length)}function et(te,W,ue){return this.maskset.validPositions[te]||Oe.call(this,te,pe.call(this,te,W&&W.slice(),ue))}function Oe(te,W){var qe,Be,at,Ze,J,Y,le,ue=this.opts,ne=0,G=(qe=te,at=0,Ze=!1,(Be=W).forEach(function(Fe){Fe.match.optionality&&(0!==at&&at!==Fe.match.optionality&&(Ze=!0),(0===at||at>Fe.match.optionality)&&(at=Fe.match.optionality))}),at&&(0==qe||1==Be.length?at=0:Ze||(at=0)),at),Me=Ge(De.call(this,te=te>0?te-1:0));ue.greedy&&W.length>1&&""===W[W.length-1].match.def&&(ne=1);for(var K=0;K<W.length-ne;K++){var ce=W[K];J=Ge(ce,Me.length);var _e=Math.abs(J-Me);(void 0===Y||""!==J&&_e<Y||le&&!ue.greedy&&le.match.optionality&&le.match.optionality-G>0&&"master"===le.match.newBlockMarker&&(!ce.match.optionality||ce.match.optionality-G<1||!ce.match.newBlockMarker)||le&&!ue.greedy&&le.match.optionalQuantifier&&!ce.match.optionalQuantifier)&&(Y=_e,le=ce)}return le}function De(te,W){var ue=this.maskset;return ue.validPositions[te]?ue.validPositions[te]:(W||pe.call(this,te))[0]}function ye(te,W,ue){function ne(G){for(var J,Y=[],le=-1,Me=0,K=G.length;Me<K;Me++)if("-"===G.charAt(Me))for(J=G.charCodeAt(Me+1);++le<J;)Y.push(String.fromCharCode(le));else le=G.charCodeAt(Me),Y.push(G.charAt(Me));return Y.join("")}return te.match.def===W.match.nativeDef||!(!(ue.regex||te.match.fn instanceof RegExp&&W.match.fn instanceof RegExp)||!0===te.match.static||!0===W.match.static)&&-1!==ne(W.match.fn.toString().replace(/[[\]/]/g,"")).indexOf(ne(te.match.fn.toString().replace(/[[\]/]/g,"")))}function pe(te,W,ue){var ne,G,Ne,Ye,Ke,it,J=this,Y=this.dependencyLib,le=this.maskset,Me=this.opts,K=this.el,ce=le.maskToken,_e=W?ue:0,qe=W?W.slice():[0],Be=[],at=!1,Ze=W?W.join(""):"";function Fe(Ne,Ye,Ke,it){function lt(ct,Rt,sn){function _n(hn,An){var In=0===An.matches.indexOf(hn);return In||An.matches.every(function(Cn,bi){return!0===Cn.isQuantifier?In=_n(hn,An.matches[bi-1]):Object.prototype.hasOwnProperty.call(Cn,"matches")&&(In=_n(hn,Cn)),!In}),In}function tn(hn,An,In){var Cn,bi;return(le.tests[hn]||le.validPositions[hn])&&(le.tests[hn]||[le.validPositions[hn]]).every(function($i,qo){if($i.mloc[An])return Cn=$i,!1;var Qi=void 0!==In?In:$i.alternation,Si=void 0!==$i.locator[Qi]?$i.locator[Qi].toString().indexOf(An):-1;return(void 0===bi||Si<bi)&&-1!==Si&&(Cn=$i,bi=Si),!0}),Cn?(Cn.mloc[An]||Cn.mloc[Cn.locator[Cn.alternation]]||Cn.locator).slice((void 0!==In?In:Cn.alternation)+1):void 0!==In?tn(hn,An):void 0}function Ln(hn,An){var In=hn.alternation,Cn=void 0===An||In===An.alternation&&-1===hn.locator[In].toString().indexOf(An.locator[In]);if(!Cn&&In>An.alternation)for(var bi=An.alternation;bi<In;bi++)if(hn.locator[bi]!==An.locator[bi]){In=bi,Cn=!0;break}if(Cn){hn.mloc=hn.mloc||{};var cr=hn.locator[In];if(void 0!==cr){if("string"==typeof cr&&(cr=cr.split(",")[0]),void 0===hn.mloc[cr]&&(hn.mloc[cr]=hn.locator.slice()),void 0!==An){for(var $i in An.mloc)"string"==typeof $i&&($i=$i.split(",")[0]),void 0===hn.mloc[$i]&&(hn.mloc[$i]=An.mloc[$i]);hn.locator[In]=Object.keys(hn.mloc).join(",")}return!0}hn.alternation=void 0}return!1}function vi(hn,An){if(hn.locator.length!==An.locator.length)return!1;for(var In=hn.alternation+1;In<hn.locator.length;In++)if(hn.locator[In]!==An.locator[In])return!1;return!0}if(_e>te+Me._maxTestPos)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+le.mask;if(_e===te&&void 0===ct.matches){if(Be.push({match:ct,locator:Rt.reverse(),cd:Ze,mloc:{}}),!ct.optionality||void 0!==sn||!(Me.definitions&&Me.definitions[ct.nativeDef]&&Me.definitions[ct.nativeDef].optional||Le.default.prototype.definitions[ct.nativeDef]&&Le.default.prototype.definitions[ct.nativeDef].optional))return!0;at=!0,_e=te}else if(void 0!==ct.matches){if(ct.isGroup&&sn!==ct)return function(){if(ct=lt(Ne.matches[Ne.matches.indexOf(ct)+1],Rt,sn))return!0}();if(ct.isOptional)return function(){var hn=ct,An=Be.length;if(ct=Fe(ct,Ye,Rt,sn),Be.length>0){if(Be.forEach(function(In,Cn){Cn>=An&&(In.match.optionality=In.match.optionality?In.match.optionality+1:1)}),ne=Be[Be.length-1].match,void 0!==sn||!_n(ne,hn))return ct;at=!0,_e=te}}();if(ct.isAlternator)return function(){J.hasAlternator=!0;var hn,An,In,Cn=ct,bi=[],cr=Be.slice(),$i=Rt.length,qo=!1,Qi=Ye.length>0?Ye.shift():-1;if(-1===Qi||"string"==typeof Qi){var Si,ur=_e,ir=Ye.slice(),Bt=[];if("string"==typeof Qi)Bt=Qi.split(",");else for(Si=0;Si<Cn.matches.length;Si++)Bt.push(Si.toString());if(void 0!==le.excludes[te]){for(var Vn=Bt.slice(),ma=0,_r=le.excludes[te].length;ma<_r;ma++){var Br=le.excludes[te][ma].toString().split(":");Rt.length==Br[1]&&Bt.splice(Bt.indexOf(Br[0]),1)}0===Bt.length&&(delete le.excludes[te],Bt=Vn)}(!0===Me.keepStatic||isFinite(parseInt(Me.keepStatic))&&ur>=Me.keepStatic)&&(Bt=Bt.slice(0,1));for(var Oo=0;Oo<Bt.length;Oo++){Si=parseInt(Bt[Oo]),Be=[],Ye="string"==typeof Qi&&tn(_e,Si,$i)||ir.slice();var si=Cn.matches[Si];if(si&&lt(si,[Si].concat(Rt),sn))ct=!0;else if(0===Oo&&(qo=!0),si&&si.matches&&si.matches.length>Cn.matches[0].matches.length)break;hn=Be.slice(),_e=ur,Be=[];for(var ga=0;ga<hn.length;ga++){var ri=hn[ga],Pe=!1;ri.match.jit=ri.match.jit||qo,ri.alternation=ri.alternation||$i,Ln(ri);for(var ee=0;ee<bi.length;ee++){var re=bi[ee];if("string"!=typeof Qi||void 0!==ri.alternation&&Bt.includes(ri.locator[ri.alternation].toString())){if(ri.match.nativeDef===re.match.nativeDef){Pe=!0,Ln(re,ri);break}if(ye(ri,re,Me)){Ln(ri,re)&&(Pe=!0,bi.splice(bi.indexOf(re),0,ri));break}if(ye(re,ri,Me)){Ln(re,ri);break}if(In=re,!0===(An=ri).match.static&&!0!==In.match.static&&In.match.fn.test(An.match.def,le,te,!1,Me,!1)){vi(ri,re)||void 0!==K.inputmask.userOptions.keepStatic?Ln(ri,re)&&(Pe=!0,bi.splice(bi.indexOf(re),0,ri)):Me.keepStatic=!0;break}}}Pe||bi.push(ri)}}Be=cr.concat(bi),_e=te,at=Be.length>0,ct=bi.length>0,Ye=ir.slice()}else ct=lt(Cn.matches[Qi]||Ne.matches[Qi],[Qi].concat(Rt),sn);if(ct)return!0}();if(ct.isQuantifier&&sn!==Ne.matches[Ne.matches.indexOf(ct)-1])return function(){for(var hn=ct,An=!1,In=Ye.length>0?Ye.shift():0;In<(isNaN(hn.quantifier.max)?In+1:hn.quantifier.max)&&_e<=te;In++){var Cn=Ne.matches[Ne.matches.indexOf(hn)-1];if(ct=lt(Cn,[In].concat(Rt),Cn)){if(Be.forEach(function(bi,cr){(ne=ze(Cn,bi.match)?bi.match:Be[Be.length-1].match).optionalQuantifier=In>=hn.quantifier.min,ne.jit=(In+1)*(Cn.matches.indexOf(ne)+1)>hn.quantifier.jit,ne.optionalQuantifier&&_n(ne,Cn)&&(at=!0,_e=te,Me.greedy&&null==le.validPositions[te-1]&&In>hn.quantifier.min&&-1!=["*","+"].indexOf(hn.quantifier.max)&&(Be.pop(),Ze=void 0),An=!0,ct=!1),!An&&ne.jit&&(le.jitOffset[te]=Cn.matches.length-Cn.matches.indexOf(ne))}),An)break;return!0}}}();if(ct=Fe(ct,Ye,Rt,sn))return!0}else _e++}for(var It=Ye.length>0?Ye.shift():0;It<Ne.matches.length;It++)if(!0!==Ne.matches[It].isQuantifier){var Wt=lt(Ne.matches[It],[It].concat(Ke),it);if(Wt&&_e===te)return Wt;if(_e>te)break}}function ze(Ne,Ye){var Ke=-1!=Ne.matches.indexOf(Ye);return Ke||Ne.matches.forEach(function(it,lt){void 0===it.matches||Ke||(Ke=ze(it,Ye))}),Ke}if(te>-1){if(void 0===W){for(var Et,Ot=te-1;void 0===(Et=le.validPositions[Ot]||le.tests[Ot])&&Ot>-1;)Ot--;void 0!==Et&&Ot>-1&&(Ne=Ot,Ye=Et,it=[],Array.isArray(Ye)||(Ye=[Ye]),Ye.length>0&&(void 0===Ye[0].alternation||!0===Me.keepStatic?0===(it=Oe.call(J,Ne,Ye.slice()).locator.slice()).length&&(it=Ye[0].locator.slice()):Ye.forEach(function(lt){""!==lt.def&&(0===it.length?(Ke=lt.alternation,it=lt.locator.slice()):lt.locator[Ke]&&-1===it[Ke].toString().indexOf(lt.locator[Ke])&&(it[Ke]+=","+lt.locator[Ke]))})),Ze=(qe=it).join(""),_e=Ot)}if(le.tests[te]&&le.tests[te][0].cd===Ze)return le.tests[te];for(var ke=qe.shift();ke<ce.length&&!(Fe(ce[ke],qe,[ke])&&_e===te||_e>te);ke++);}return(0===Be.length||at)&&Be.push({match:{fn:null,static:!0,optionality:!1,casing:null,def:"",placeholder:""},locator:[],mloc:{},cd:Ze}),void 0!==W&&le.tests[te]?G=Y.extend(!0,[],Be):(le.tests[te]=Y.extend(!0,[],Be),G=le.tests[te]),Be.forEach(function(Ne){Ne.match.optionality=Ne.match.defOptionality||!1}),G}},7215:function(Pt,p,ge){Object.defineProperty(p,"__esModule",{value:!0}),p.alternate=ot,p.checkAlternationMatch=function(ne,G,J){for(var Y,le=this.opts.greedy?G:G.slice(0,1),Me=!1,K=void 0!==J?J.split(","):[],ce=0;ce<K.length;ce++)-1!==(Y=ne.indexOf(K[ce]))&&ne.splice(Y,1);for(var _e=0;_e<ne.length;_e++)if(le.includes(ne[_e])){Me=!0;break}return Me},p.handleRemove=function(ne,G,J,Y,le){var Me=this,K=this.maskset,ce=this.opts;if((ce.numericInput||Me.isRTL)&&(G===Le.keys.Backspace?G=Le.keys.Delete:G===Le.keys.Delete&&(G=Le.keys.Backspace),Me.isRTL)){var _e=J.end;J.end=J.begin,J.begin=_e}var qe,Be=Ge.getLastValidPosition.call(Me,void 0,!0);if(J.end>=Ge.getBuffer.call(Me).length&&Be>=J.end&&(J.end=Be+1),G===Le.keys.Backspace?J.end-J.begin<1&&(J.begin=Ge.seekPrevious.call(Me,J.begin)):G===Le.keys.Delete&&J.begin===J.end&&(J.end=Ge.isMask.call(Me,J.end,!0,!0)?J.end+1:Ge.seekNext.call(Me,J.end)+1),!1!==(qe=ue.call(Me,J))){if(!0!==Y&&!1!==ce.keepStatic||null!==ce.regex&&-1!==Ee.getTest.call(Me,J.begin).match.def.indexOf("|")){var at=ot.call(Me,!0);at&&(void 0!==at.caret||(at.pos?Ge.seekNext.call(Me,at.pos.begin?at.pos.begin:at.pos):Ge.getLastValidPosition.call(Me,-1,!0)))}!0!==Y&&(K.p=G===Le.keys.Delete?J.begin+qe:J.begin,K.p=Ge.determineNewCaretPosition.call(Me,{begin:K.p,end:K.p},!1,!1===ce.insertMode&&G===Le.keys.Backspace?"none":void 0).begin)}},p.isComplete=Oe,p.isSelection=De,p.isValid=ye,p.refreshFromBuffer=te,p.revalidateMask=ue;var Ee=ge(4713),Le=ge(2839),Ge=ge(8711),Je=ge(6030);function ot(ne,G,J,Y,le,Me){var K,ce,_e,qe,Be,at,Ze,Fe,Et,Ot,ke=this,Ne=this.dependencyLib,Ye=this.opts,Ke=ke.maskset,it=Ne.extend(!0,[],Ke.validPositions),lt=Ne.extend(!0,{},Ke.tests),It=!1,Wt=!1,ct=void 0!==le?le:Ge.getLastValidPosition.call(ke);if(Me&&(Et=Me.begin,Ot=Me.end,Me.begin>Me.end&&(Et=Me.end,Ot=Me.begin)),-1===ct&&void 0===le)ce=(qe=Ee.getTest.call(ke,K=0)).alternation;else for(;ct>=0;ct--)if((_e=Ke.validPositions[ct])&&void 0!==_e.alternation){if(ct<=(ne||0)&&qe&&qe.locator[_e.alternation]!==_e.locator[_e.alternation])break;ce=Ke.validPositions[K=ct].alternation,qe=_e}if(void 0!==ce){Ze=parseInt(K),Ke.excludes[Ze]=Ke.excludes[Ze]||[],!0!==ne&&Ke.excludes[Ze].push((0,Ee.getDecisionTaker)(qe)+":"+qe.alternation);var Rt=[],sn=-1;for(Be=Ze;Be<Ge.getLastValidPosition.call(ke,void 0,!0)+1;Be++)-1===sn&&ne<=Be&&void 0!==G&&(Rt.push(G),sn=Rt.length-1),(at=Ke.validPositions[Be])&&!0!==at.generatedInput&&(void 0===Me||Be<Et||Be>=Ot)&&Rt.push(at.input),delete Ke.validPositions[Be];for(-1===sn&&void 0!==G&&(Rt.push(G),sn=Rt.length-1);void 0!==Ke.excludes[Ze]&&Ke.excludes[Ze].length<10;){for(Ke.tests={},Ge.resetMaskSet.call(ke,!0),It=!0,Be=0;Be<Rt.length&&(Fe=It.caret||Ge.getLastValidPosition.call(ke,void 0,!0)+1,It=ye.call(ke,Fe,Rt[Be],!1,Y,!0));Be++)Be===sn&&(Wt=It),1==ne&&It&&(Wt={caretPos:Be});if(It)break;if(Ge.resetMaskSet.call(ke),qe=Ee.getTest.call(ke,Ze),Ke.validPositions=Ne.extend(!0,[],it),Ke.tests=Ne.extend(!0,{},lt),!Ke.excludes[Ze]){Wt=ot.call(ke,ne,G,J,Y,Ze-1,Me);break}var _n=(0,Ee.getDecisionTaker)(qe);if(-1!==Ke.excludes[Ze].indexOf(_n+":"+qe.alternation)){Wt=ot.call(ke,ne,G,J,Y,Ze-1,Me);break}for(Ke.excludes[Ze].push(_n+":"+qe.alternation),Be=Ze;Be<Ge.getLastValidPosition.call(ke,void 0,!0)+1;Be++)delete Ke.validPositions[Be]}}return Wt&&!1===Ye.keepStatic||delete Ke.excludes[Ze],Wt}function et(ne,G,J){var Y=this.opts,le=this.maskset;switch(Y.casing||G.casing){case"upper":ne=ne.toUpperCase();break;case"lower":ne=ne.toLowerCase();break;case"title":var Me=le.validPositions[J-1];ne=0===J||Me&&Me.input===String.fromCharCode(Le.keyCode.Space)?ne.toUpperCase():ne.toLowerCase();break;default:if("function"==typeof Y.casing){var K=Array.prototype.slice.call(arguments);K.push(le.validPositions),ne=Y.casing.apply(this,K)}}return ne}function Oe(ne){var G=this,J=this.opts,Y=this.maskset;if("function"==typeof J.isComplete)return J.isComplete(ne,J);if("*"!==J.repeat){var le=!1,Me=Ge.determineLastRequiredPosition.call(G,!0),K=Ge.seekPrevious.call(G,Me.l);if(void 0===Me.def||Me.def.newBlockMarker||Me.def.optionality||Me.def.optionalQuantifier){le=!0;for(var ce=0;ce<=K;ce++){var _e=Ee.getTestTemplate.call(G,ce).match;if(!0!==_e.static&&void 0===Y.validPositions[ce]&&!0!==_e.optionality&&!0!==_e.optionalQuantifier||!0===_e.static&&ne[ce]!==Ee.getPlaceholder.call(G,ce,_e)){le=!1;break}}}return le}}function De(ne){var G=this.opts.insertMode?0:1;return this.isRTL?ne.begin-ne.end>G:ne.end-ne.begin>G}function ye(ne,G,J,Y,le,Me,K){var ce=this,_e=this.dependencyLib,qe=this.opts,Be=ce.maskset;J=!0===J;var at=ne;function Ze(It){if(void 0!==It){if(void 0!==It.remove&&(Array.isArray(It.remove)||(It.remove=[It.remove]),It.remove.sort(function(ct,Rt){return ce.isRTL?ct.pos-Rt.pos:Rt.pos-ct.pos}).forEach(function(ct){ue.call(ce,{begin:ct,end:ct+1})}),It.remove=void 0),void 0!==It.insert&&(Array.isArray(It.insert)||(It.insert=[It.insert]),It.insert.sort(function(ct,Rt){return ce.isRTL?Rt.pos-ct.pos:ct.pos-Rt.pos}).forEach(function(ct){""!==ct.c&&ye.call(ce,ct.pos,ct.c,void 0===ct.strict||ct.strict,void 0!==ct.fromIsValid?ct.fromIsValid:Y)}),It.insert=void 0),It.refreshFromBuffer&&It.buffer){var Wt=It.refreshFromBuffer;te.call(ce,!0===Wt?Wt:Wt.start,Wt.end,It.buffer),It.refreshFromBuffer=void 0}void 0!==It.rewritePosition&&(at=It.rewritePosition,It=!0)}return It}function Fe(It,Wt,ct){var Rt=!1;return Ee.getTests.call(ce,It).every(function(sn,_n){var tn=sn.match;if(Ge.getBuffer.call(ce,!0),!1!==(Rt=(!tn.jit||void 0!==Be.validPositions[Ge.seekPrevious.call(ce,It)])&&(null!=tn.fn?tn.fn.test(Wt,Be,It,ct,qe,De.call(ce,ne)):(Wt===tn.def||Wt===qe.skipOptionalPartCharacter)&&""!==tn.def&&{c:Ee.getPlaceholder.call(ce,It,tn,!0)||tn.def,pos:It}))){var Ln=void 0!==Rt.c?Rt.c:Wt,vi=It;return Ln=Ln===qe.skipOptionalPartCharacter&&!0===tn.static?Ee.getPlaceholder.call(ce,It,tn,!0)||tn.def:Ln,!0!==(Rt=Ze(Rt))&&void 0!==Rt.pos&&Rt.pos!==It&&(vi=Rt.pos),!0!==Rt&&void 0===Rt.pos&&void 0===Rt.c||!1===ue.call(ce,ne,_e.extend({},sn,{input:et.call(ce,Ln,tn,vi)}),Y,vi)&&(Rt=!1),!1}return!0}),Rt}void 0!==ne.begin&&(at=ce.isRTL?ne.end:ne.begin);var ze=!0,Et=_e.extend(!0,{},Be.validPositions);if(!1===qe.keepStatic&&void 0!==Be.excludes[at]&&!0!==le&&!0!==Y)for(var Ot=at;Ot<(ce.isRTL?ne.begin:ne.end);Ot++)void 0!==Be.excludes[Ot]&&(Be.excludes[Ot]=void 0,delete Be.tests[Ot]);if("function"==typeof qe.preValidation&&!0!==Y&&!0!==Me&&(ze=Ze(ze=qe.preValidation.call(ce,Ge.getBuffer.call(ce),at,G,De.call(ce,ne),qe,Be,ne,J||le))),!0===ze){if(ze=Fe(at,G,J),(!J||!0===Y)&&!1===ze&&!0!==Me){var ke=Be.validPositions[at];if(!ke||!0!==ke.match.static||ke.match.def!==G&&G!==qe.skipOptionalPartCharacter){if(qe.insertMode||void 0===Be.validPositions[Ge.seekNext.call(ce,at)]||ne.end>at){var Ne=!1;if(Be.jitOffset[at]&&void 0===Be.validPositions[Ge.seekNext.call(ce,at)]&&!1!==(ze=ye.call(ce,at+Be.jitOffset[at],G,!0,!0))&&(!0!==le&&(ze.caret=at),Ne=!0),ne.end>at&&(Be.validPositions[at]=void 0),!Ne&&!Ge.isMask.call(ce,at,qe.keepStatic&&0===at))for(var Ye=at+1,Ke=Ge.seekNext.call(ce,at,!1,0!==at);Ye<=Ke;Ye++)if(!1!==(ze=Fe(Ye,G,J))){ze=W.call(ce,at,void 0!==ze.pos?ze.pos:Ye)||ze,at=Ye;break}}}else ze={caret:Ge.seekNext.call(ce,at)}}ce.hasAlternator&&!0!==le&&!J&&(!1===ze&&qe.keepStatic&&(Oe.call(ce,Ge.getBuffer.call(ce))||0===at)?ze=ot.call(ce,at,G,J,Y,void 0,ne):(De.call(ce,ne)&&Be.tests[at]&&Be.tests[at].length>1&&qe.keepStatic||1==ze&&!0!==qe.numericInput&&Be.tests[at]&&Be.tests[at].length>1&&Ge.getLastValidPosition.call(ce,void 0,!0)>at)&&(ze=ot.call(ce,!0))),!0===ze&&(ze={pos:at})}if("function"==typeof qe.postValidation&&!0!==Y&&!0!==Me){var it=qe.postValidation.call(ce,Ge.getBuffer.call(ce,!0),void 0!==ne.begin?ce.isRTL?ne.end:ne.begin:ne,G,ze,qe,Be,J,K);void 0!==it&&(ze=!0===it?ze:it)}ze&&void 0===ze.pos&&(ze.pos=at),!1===ze||!0===Me?(Ge.resetMaskSet.call(ce,!0),Be.validPositions=_e.extend(!0,[],Et)):W.call(ce,void 0,at,!0);var lt=Ze(ze);return void 0!==ce.maxLength&&Ge.getBuffer.call(ce).length>ce.maxLength&&!Y&&(Ge.resetMaskSet.call(ce,!0),Be.validPositions=_e.extend(!0,[],Et),lt=!1),lt}function pe(ne,G,J){for(var Y=this.maskset,le=!1,Me=Ee.getTests.call(this,ne),K=0;K<Me.length;K++){if(Me[K].match&&(Me[K].match.nativeDef===G.match[J.shiftPositions?"def":"nativeDef"]&&(!J.shiftPositions||!G.match.static)||Me[K].match.nativeDef===G.match.nativeDef||J.regex&&!Me[K].match.static&&Me[K].match.fn.test(G.input,Y,ne,!1,J))){le=!0;break}if(Me[K].match&&Me[K].match.def===G.match.nativeDef){le=void 0;break}}return!1===le&&void 0!==Y.jitOffset[ne]&&(le=pe.call(this,ne+Y.jitOffset[ne],G,J)),le}function te(ne,G,J){var Y,le,Me=this,K=this.maskset,ce=this.opts,_e=this.dependencyLib,qe=ce.skipOptionalPartCharacter,Be=Me.isRTL?J.slice().reverse():J;if(ce.skipOptionalPartCharacter="",!0===ne)Ge.resetMaskSet.call(Me),K.tests={},ne=0,G=J.length,le=Ge.determineNewCaretPosition.call(Me,{begin:0,end:0},!1).begin;else{for(Y=ne;Y<G;Y++)delete K.validPositions[Y];le=ne}var at=new _e.Event("keypress");for(Y=ne;Y<G;Y++){at.key=Be[Y].toString(),Me.ignorable=!1;var Ze=Je.EventHandlers.keypressEvent.call(Me,at,!0,!1,!1,le);!1!==Ze&&void 0!==Ze&&(le=Ze.forwardPosition)}ce.skipOptionalPartCharacter=qe}function W(ne,G,J){var Y=this,le=this.maskset,Me=this.dependencyLib;if(void 0===ne)for(ne=G-1;ne>0&&!le.validPositions[ne];ne--);for(var K=ne;K<G;K++)if(void 0===le.validPositions[K]&&!Ge.isMask.call(Y,K,!1)&&(0==K?Ee.getTest.call(Y,K):le.validPositions[K-1])){var ce=Ee.getTests.call(Y,K).slice();""===ce[ce.length-1].match.def&&ce.pop();var _e,qe=Ee.determineTestTemplate.call(Y,K,ce);if(qe&&(!0!==qe.match.jit||"master"===qe.match.newBlockMarker&&(_e=le.validPositions[K+1])&&!0===_e.match.optionalQuantifier)&&((qe=Me.extend({},qe,{input:Ee.getPlaceholder.call(Y,K,qe.match,!0)||qe.match.def})).generatedInput=!0,ue.call(Y,K,qe,!0),!0!==J)){var Be=le.validPositions[G].input;return le.validPositions[G]=void 0,ye.call(Y,G,Be,!0,!0)}}}function ue(ne,G,J,Y){var le=this,Me=this.maskset,K=this.opts,ce=this.dependencyLib;var it,lt,It,Wt,qe=0,Be=void 0!==ne.begin?ne.begin:ne,at=void 0!==ne.end?ne.end:ne,Ze=!0;if(ne.begin>ne.end&&(Be=ne.end,at=ne.begin),Y=void 0!==Y?Y:Be,void 0===J&&(Be!==at||K.insertMode&&void 0!==Me.validPositions[Y]||void 0===G||G.match.optionalQuantifier||G.match.optionality)){var Fe,ze=ce.extend(!0,{},Me.validPositions),Et=Ge.getLastValidPosition.call(le,void 0,!0);for(Me.p=Be,Fe=Et;Fe>=Be;Fe--)delete Me.validPositions[Fe],void 0===G&&delete Me.tests[Fe+1];var Ot,ke,Ne=Y,Ye=Ne;for(G&&(Me.validPositions[Y]=ce.extend(!0,{},G),Ye++,Ne++),Fe=G?at:at-1;Fe<=Et;Fe++){if(void 0!==(Ot=ze[Fe])&&!0!==Ot.generatedInput&&(Fe>=at||Fe>=Be&&(It={begin:Be,end:at},Wt=void 0,void 0!==(Wt=(lt=ze)[it=Fe])&&!0===Wt.match.static&&!0!==Wt.match.optionality&&(void 0===lt[0]||void 0===lt[0].alternation)&&(It.begin<=it-1?lt[it-1]&&!0===lt[it-1].match.static&&lt[it-1]:lt[it-1])&&(It.end>it+1?lt[it+1]&&!0===lt[it+1].match.static&&lt[it+1]:lt[it+1])))){for(;""!==Ee.getTest.call(le,Ye).match.def;){if(!1!==(ke=pe.call(le,Ye,Ot,K))||"+"===Ot.match.def){"+"===Ot.match.def&&Ge.getBuffer.call(le,!0);var Ke=ye.call(le,Ye,Ot.input,"+"!==Ot.match.def,!0);if(Ne=(Ke.pos||Ye)+1,!(Ze=!1!==Ke)&&ke)break}else Ze=!1;if(Ze){void 0===G&&Ot.match.static&&Fe===ne.begin&&qe++;break}if(!Ze&&Ge.getBuffer.call(le),Ye>Me.maskLength)break;Ye++}""==Ee.getTest.call(le,Ye).match.def&&(Ze=!1),Ye=Ne}if(!Ze)break}if(!Ze)return Me.validPositions=ce.extend(!0,[],ze),Ge.resetMaskSet.call(le,!0),!1}else G&&Ee.getTest.call(le,Y).match.cd===G.match.cd&&(Me.validPositions[Y]=ce.extend(!0,{},G));return Ge.resetMaskSet.call(le,!0),qe}}},ut={};function t(Pt){var p=ut[Pt];if(void 0!==p)return p.exports;var ge=ut[Pt]={exports:{}};return gn[Pt](ge,ge.exports,t),ge.exports}var en={};return function(){var Pt,p=en;Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0,t(7149),t(3194),t(9302),t(4013),t(3851),t(219),t(207),t(5296);var ge=((Pt=t(2394))&&Pt.__esModule?Pt:{default:Pt}).default;p.default=ge}(),en}()},898:function(_i){_i.exports=function(){"use strict";var gn,ut,t;function en(p,ge){if(gn)if(ut){var Ee="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+gn+")(sharedChunk); ("+ut+")(sharedChunk); self.onerror = null;",Le={};gn(Le),t=ge(Le),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(t.workerUrl=window.URL.createObjectURL(new Blob([Ee],{type:"text/javascript"})))}else ut=ge;else gn=ge}return en(0,function(p){var ge=typeof self<"u"?self:{},Ee="2.15.0";let Le;const Ge={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Le){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Le=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):i}catch{Le=i}}return Le},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ge.API_URL)return null;try{const i=new URL(Ge.API_URL);return"api.mapbox.cn"===i.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===i.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Je={supported:!1,testSupport:function(i){!Oe&&et&&(De?ye(i):ot=i)}};let ot,et,Oe=!1,De=!1;function ye(i){const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,et),i.isContextLost())return;Je.supported=!0}catch{}i.deleteTexture(e),Oe=!0}ge.document&&(et=ge.document.createElement("img"),et.onload=function(){ot&&ye(ot),ot=null,De=!0},et.onerror=function(){Oe=!0,ot=null},et.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const pe="01";function te(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var W=ue;function ue(i,e,r,u){this.cx=3*i,this.bx=3*(r-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(u-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=e,this.p2x=r,this.p2y=u}ue.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,e){if(void 0===e&&(e=1e-6),i<0)return 0;if(i>1)return 1;for(var r=i,u=0;u<8;u++){var m=this.sampleCurveX(r)-i;if(Math.abs(m)<e)return r;var v=this.sampleCurveDerivativeX(r);if(Math.abs(v)<1e-6)break;r-=m/v}var x=0,C=1;for(r=i,u=0;u<20&&(m=this.sampleCurveX(r),!(Math.abs(m-i)<e));u++)i>m?x=r:C=r,r=.5*(C-x)+x;return r},solve:function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))}};var ne=te(W),G=J;function J(i,e){this.x=i,this.y=e}J.prototype={clone:function(){return new J(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,e){return this.clone()._rotateAround(i,e)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var e=i.x-this.x,r=i.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,e){return Math.atan2(this.x*e-this.y*i,this.x*i+this.y*e)},_matMult:function(i){var e=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=e,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var e=Math.cos(i),r=Math.sin(i),u=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=u,this},_rotateAround:function(i,e){var r=Math.cos(i),u=Math.sin(i),m=e.y+u*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-u*(this.y-e.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J.convert=function(i){return i instanceof J?i:Array.isArray(i)?new J(i[0],i[1]):i};var Y=te(G);const le=Math.PI/180,Me=180/Math.PI;function K(i){return i*le}function ce(i){return i*Me}const _e=[[0,0],[1,0],[1,1],[0,1]];function qe(i){if(i<=0)return 0;if(i>=1)return 1;const e=i*i,r=e*i;return 4*(i<.5?r:3*(i-e)+r-.75)}function Be(i,e,r,u){const m=new ne(i,e,r,u);return function(v){return m.solve(v)}}const at=Be(.25,.1,.25,1);function Ze(i,e,r){return Math.min(r,Math.max(e,i))}function Fe(i,e,r){return(r=Ze((r-i)/(e-i),0,1))*r*(3-2*r)}function ze(i,e,r){const u=r-e,m=((i-e)%u+u)%u+e;return m===e?r:m}function Et(i,e,r){if(!i.length)return r(null,[]);let u=i.length;const m=new Array(i.length);let v=null;i.forEach((x,C)=>{e(x,(I,D)=>{I&&(v=I),m[C]=D,0==--u&&r(v,m)})})}function Ot(i){const e=[];for(const r in i)e.push(i[r]);return e}function ke(i,...e){for(const r of e)for(const u in r)i[u]=r[u];return i}let Ne=1;function Ye(){return Ne++}function Ke(){return function i(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function it(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function lt(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function It(i,e){i.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function Wt(i,e){return-1!==i.indexOf(e,i.length-e.length)}function ct(i,e,r){const u={};for(const m in i)u[m]=e.call(r||this,i[m],m,i);return u}function Rt(i,e,r){const u={};for(const m in i)e.call(r||this,i[m],m,i)&&(u[m]=i[m]);return u}function sn(i){return Array.isArray(i)?i.map(sn):"object"==typeof i&&i?ct(i,sn):i}const _n={};function tn(i){_n[i]||(typeof console<"u"&&console.warn(i),_n[i]=!0)}function Ln(i,e,r){return(r.y-i.y)*(e.x-i.x)>(e.y-i.y)*(r.x-i.x)}function vi(i){let e=0;for(let r,u,m=0,v=i.length,x=v-1;m<v;x=m++)r=i[m],u=i[x],e+=(u.x-r.x)*(r.y+u.y);return e}function hn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function An(i){const e={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,u,m,v)=>{const x=m||v;return e[u]=!x||x.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let In=null;function Cn(i){if(null==In){const e=i.navigator?i.navigator.userAgent:null;In=!!i.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return In}function bi(i){try{const e=ge[i];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function cr(i,e){return[i[4*e],i[4*e+1],i[4*e+2],i[4*e+3]]}const $i="mapbox-tiles";let Si,ur,qo=500,Qi=50;function ir(){try{return ge.caches}catch{}}function Bt(){ir()&&!Si&&(Si=ge.caches.open($i))}function Vn(i){const e=i.indexOf("?");if(e<0)return i;const u=function(m){const v=m.indexOf("?");return v>0?m.slice(v+1).split("&"):[]}(i).filter(m=>{const v=m.split("=");return"language"===v[0]||"worldview"===v[0]});return u.length?`${i.slice(0,e)}?${u.join("&")}`:i.slice(0,e)}let ma=1/0;const _r={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(_r);class Br extends Error{constructor(e,r,u){401===r&&pt(u)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Oo=hn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===ge.location.protocol?ge.parent:ge).location.href,si=function(i,e){if(!(/^file:/.test(r=i.url)||/^file:/.test(Oo())&&!/^\w+:/.test(r))){if(ge.fetch&&ge.Request&&ge.AbortController&&ge.Request.prototype.hasOwnProperty("signal"))return function(u,m){const v=new ge.AbortController,x=new ge.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Oo(),referrerPolicy:u.referrerPolicy,signal:v.signal});let C=!1,I=!1;const D=(R=x.url).indexOf("sku=")>0&&pt(R);var R;"json"===u.type&&x.headers.set("Accept","application/json");const N=(H,$,Q)=>{if(I)return;if(H&&"SecurityError"!==H.message&&tn(H.toString()),$&&Q)return z($);const ae=Date.now();ge.fetch(x).then(be=>{if(be.ok){const Re=D?be.clone():null;return z(be,Re,ae)}return m(new Br(be.statusText,be.status,u.url))}).catch(be=>{"AbortError"!==be.name&&m(new Error(`${be.message} ${u.url}`))})},z=(H,$,Q)=>{("arrayBuffer"===u.type?H.arrayBuffer():"json"===u.type?H.json():H.text()).then(ae=>{I||($&&Q&&function(be,Re,xe){if(Bt(),!Si)return;const Ae={status:Re.status,statusText:Re.statusText,headers:new ge.Headers};Re.headers.forEach((_t,ft)=>Ae.headers.set(ft,_t));const Ve=An(Re.headers.get("Cache-Control")||"");if(Ve["no-store"])return;Ve["max-age"]&&Ae.headers.set("Expires",new Date(xe+1e3*Ve["max-age"]).toUTCString());const je=Ae.headers.get("Expires");je&&(new Date(je).getTime()-xe<42e4||function(_t,ft){if(void 0===ur)try{new Response(new ReadableStream),ur=!0}catch{ur=!1}ur?ft(_t.body):_t.blob().then(ft)}(Re,_t=>{const ft=new ge.Response(_t,Ae);Bt(),Si&&Si.then(St=>St.put(Vn(be.url),ft)).catch(St=>tn(St.message))}))}(x,$,Q),C=!0,m(null,ae,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(ae=>{I||m(new Error(ae.message))})};return D?function(H,$){if(Bt(),!Si)return $(null);const Q=Vn(H.url);Si.then(ae=>{ae.match(Q).then(be=>{const Re=function(xe){if(!xe)return!1;const Ae=new Date(xe.headers.get("Expires")||0),Ve=An(xe.headers.get("Cache-Control")||"");return Ae>Date.now()&&!Ve["no-cache"]}(be);ae.delete(Q),Re&&ae.put(Q,be.clone()),$(null,be,Re)}).catch($)}).catch($)}(x,N):N(null,null),{cancel:()=>{I=!0,C||v.abort()}}}(i,e);if(hn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e,void 0,!0)}var r;return function(u,m){const v=new ge.XMLHttpRequest;v.open(u.method||"GET",u.url,!0),"arrayBuffer"===u.type&&(v.responseType="arraybuffer");for(const x in u.headers)v.setRequestHeader(x,u.headers[x]);return"json"===u.type&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials="include"===u.credentials,v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||0===v.status)&&null!==v.response){let x=v.response;if("json"===u.type)try{x=JSON.parse(v.response)}catch(C){return m(C)}m(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else m(new Br(v.statusText,v.status,u.url))},v.send(u.body),{cancel:()=>v.abort()}}(i,e)},ga=function(i,e){return si(ke(i,{type:"arrayBuffer"}),e)};function ri(i){const e=ge.document.createElement("a");return e.href=i,e.protocol===ge.document.location.protocol&&e.host===ge.document.location.host}const Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ee,re;ee=[],re=0;const Te=function(i,e){if(Je.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),re>=Ge.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:i,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return ee.push(v),v}re++;let r=!1;const u=()=>{if(!r)for(r=!0,re--;ee.length&&re<Ge.MAX_PARALLEL_IMAGE_REQUESTS;){const v=ee.shift(),{requestParameters:x,callback:C,cancelled:I}=v;I||(v.cancel=Te(x,C).cancel)}},m=ga(i,(v,x,C,I)=>{u(),v?e(v):x&&(ge.createImageBitmap?function(D,R){const N=new ge.Blob([new Uint8Array(D)],{type:"image/png"});ge.createImageBitmap(N).then(z=>{R(null,z)}).catch(z=>{R(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(D,R)=>e(D,R,C,I)):function(D,R){const N=new ge.Image,z=ge.URL;N.onload=()=>{R(null,N),z.revokeObjectURL(N.src),N.onload=null,ge.requestAnimationFrame(()=>{N.src=Pe})},N.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new ge.Blob([new Uint8Array(D)],{type:"image/png"});N.src=D.byteLength?z.createObjectURL(H):Pe}(x,(D,R)=>e(D,R,C,I)))});return{cancel:()=>{m.cancel(),u()}}},Ue="NO_ACCESS_TOKEN";function Qe(i){return 0===i.indexOf("mapbox:")}function pt(i){return Ge.API_URL_REGEX.test(i)}function dt(i){return Ge.API_CDN_URL_REGEX.test(i)}function Xe(i){return Ge.API_STYLE_REGEX.test(i)&&!yt(i)}function yt(i){return Ge.API_SPRITE_REGEX.test(i)}const Qt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Vt(i){const e=i.match(Qt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function $t(i){const e=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${e}`}const Wn="mapbox.eventData";function Xn(i){if(!i)return null;const e=i.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(ge.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Un{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Xn(Ge.ACCESS_TOKEN);let u="";return u=r&&r.u?ge.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(m,v)=>String.fromCharCode(Number("0x"+v)))):Ge.ACCESS_TOKEN||"",e?`${Wn}.${e}:${u}`:`${Wn}:${u}`}fetchEventData(){const e=bi("localStorage"),r=this.getStorageKey(),u=this.getStorageKey("uuid");if(e)try{const m=ge.localStorage.getItem(r);m&&(this.eventData=JSON.parse(m));const v=ge.localStorage.getItem(u);v&&(this.anonId=v)}catch{tn("Unable to read from LocalStorage")}}saveEventData(){const e=bi("localStorage"),r=this.getStorageKey(),u=this.getStorageKey("uuid");if(e)try{ge.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&ge.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{tn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,u,m){if(!Ge.EVENTS_URL)return;const v=Vt(Ge.EVENTS_URL);v.params.push(`access_token=${m||Ge.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(e).toISOString()},C=r?ke(x,r):x,I={url:$t(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([C])};var R;this.pendingRequest=(R=D=>{this.pendingRequest=null,u(D),this.saveEventData(),this.processRequests(m)},si(ke(I,{method:"POST"}),R))}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const Kn=new class extends Un{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,e){Ge.EVENTS_URL&&Ge.ACCESS_TOKEN&&Array.isArray(i)&&i.some(r=>Qe(r)||pt(r))&&this.queueRequest(Date.now(),e)}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Xn(Ge.ACCESS_TOKEN),r=e?e.u:Ge.ACCESS_TOKEN;let u=r!==this.eventData.tokenU;lt(this.anonId)||(this.anonId=Ke(),u=!0);const m=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),x=new Date(m),C=(m-this.eventData.lastSuccess)/864e5;u=u||C>=1||C<-1||v.getDate()!==x.getDate()}else u=!0;u?this.postEvent(m,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Ee,skuId:pe,"enabled.telemetry":!1,userId:this.anonId},v=>{v||(this.eventData.lastSuccess=m,this.eventData.tokenU=r)},i):this.processRequests()}},ai=Kn.postTurnstileEvent.bind(Kn),dr=new class extends Un{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,e,r,u){this.skuToken=e,this.errorCb=u,Ge.EVENTS_URL&&(r||Ge.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},r):this.errorCb(new Error(Ue)))}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),lt(this.anonId)||(this.anonId=Ke()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Ee,skuId:pe,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):e&&(this.success[e]=!0)},i))}},Cr=dr.postMapLoadEvent.bind(dr),Ji=new class extends Un{constructor(){super("gljs.performance")}postPerformanceEvent(i,e){Ge.EVENTS_URL&&(i||Ge.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},i)}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,performanceData:r}=this.queue.shift(),u=function(m){const v=ge.performance.getEntriesByType("resource"),x=ge.performance.getEntriesByType("mark"),C=function(z){const H={};if(z)for(const $ in z)if("other"!==$)for(const Q of z[$]){const ae=`${$}ResolveRangeMin`,be=`${$}ResolveRangeMax`,Re=`${$}RequestCount`,xe=`${$}RequestCachedCount`;H[ae]=Math.min(H[ae]||1/0,Q.startTime),H[be]=Math.max(H[be]||-1/0,Q.responseEnd);const Ae=Ve=>{void 0===H[Ve]&&(H[Ve]=0),++H[Ve]};void 0!==Q.transferSize&&0===Q.transferSize&&Ae(xe),Ae(Re)}return H}(function(z,H){const $={};if(z)for(const Q of z){const ae=H(Q);void 0===$[ae]&&($[ae]=[]),$[ae].push(Q)}return $}(v,Dl)),I=ge.devicePixelRatio,D=ge.navigator.connection||ge.navigator.mozConnection||ge.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},N=(z,H,$)=>{null!=$&&z.push({name:H,value:$.toString()})};for(const z in C)N(R.counters,z,C[z]);if(m.interactionRange[0]!==1/0&&m.interactionRange[1]!==-1/0&&(N(R.counters,"interactionRangeMin",m.interactionRange[0]),N(R.counters,"interactionRangeMax",m.interactionRange[1])),x)for(const z of Object.keys(bs)){const H=bs[z],$=x.find(Q=>Q.name===H);$&&N(R.counters,H,$.startTime)}return N(R.counters,"visibilityHidden",m.visibilityHidden),N(R.attributes,"style",function(z){if(z)for(const H of z){const $=H.name.split("?")[0];if(Xe($)){const Q=$.split("/").slice(-2);if(2===Q.length)return`mapbox://styles/${Q[0]}/${Q[1]}`}}}(v)),N(R.attributes,"terrainEnabled",m.terrainEnabled?"true":"false"),N(R.attributes,"fogEnabled",m.fogEnabled?"true":"false"),N(R.attributes,"projection",m.projection),N(R.attributes,"zoom",m.zoom),N(R.metadata,"devicePixelRatio",I),N(R.metadata,"connectionEffectiveType",D?D.effectiveType:void 0),N(R.metadata,"navigatorUserAgent",ge.navigator.userAgent),N(R.metadata,"screenWidth",ge.screen.width),N(R.metadata,"screenHeight",ge.screen.height),N(R.metadata,"windowWidth",ge.innerWidth),N(R.metadata,"windowHeight",ge.innerHeight),N(R.metadata,"mapWidth",m.width/I),N(R.metadata,"mapHeight",m.height/I),N(R.metadata,"webglRenderer",m.renderer),N(R.metadata,"webglVendor",m.vendor),N(R.metadata,"sdkVersion",Ee),N(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(r);for(const m of u.metadata);for(const m of u.counters);for(const m of u.attributes);this.postEvent(e,u,()=>{},i)}},Ii=Ji.postPerformanceEvent.bind(Ji),qr=new class extends Un{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,e,r,u){if(!Ge.API_URL||!Ge.SESSION_PATH)return;const m=Vt(Ge.API_URL+Ge.SESSION_PATH);m.params.push(`sku=${e||""}`),m.params.push(`access_token=${u||Ge.ACCESS_TOKEN||""}`);const v={url:$t(m),headers:{"Content-Type":"text/plain"}};var C;this.pendingRequest=(C=x=>{this.pendingRequest=null,r(x),this.saveEventData(),this.processRequests(u)},si(ke(v,{method:"GET"}),C))}getSessionAPI(i,e,r,u){this.skuToken=e,this.errorCb=u,Ge.SESSION_PATH&&Ge.API_URL&&(r||Ge.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},r):this.errorCb(new Error(Ue)))}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,u=>{u?this.errorCb(u):e&&(this.success[e]=!0)},i)}},rr=qr.getSessionAPI.bind(qr),Jn=new Set,bs={create:"create",load:"load",fullLoad:"fullLoad"},Dd={mark(i){ge.performance.mark(i)},measure(i,e,r){ge.performance.measure(i,e,r)}};function Dl(i){const e=i.name.split("?")[0];return dt(e)&&e.includes("mapbox-gl.js")?"javascript":dt(e)&&e.includes("mapbox-gl.css")?"css":Ge.API_FONTS_REGEX.test(e)?"fontRange":yt(e)?"sprite":Xe(e)?"style":Ge.API_TILEJSON_REGEX.test(e)?"tilejson":"other"}const Ti=ge.performance;function xs(i){const e=i?i.url.toString():void 0;return Ti.getEntriesByName(e)}let Ls,xu,wu,ws;const ya={now:()=>void 0!==wu?wu:ge.performance.now(),setNow(i){wu=i},restoreNow(){wu=void 0},frame(i){const e=ge.requestAnimationFrame(i);return{cancel:()=>ge.cancelAnimationFrame(e)}},getImageData(i,e=0){const{width:r,height:u}=i;ws||(ws=ge.document.createElement("canvas"));const m=ws.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return(r>ws.width||u>ws.height)&&(ws.width=r,ws.height=u),m.clearRect(-e,-e,r+2*e,u+2*e),m.drawImage(i,0,0,r,u),m.getImageData(-e,-e,r+2*e,u+2*e)},resolveURL:i=>(Ls||(Ls=ge.document.createElement("a")),Ls.href=i,Ls.href),get devicePixelRatio(){return ge.devicePixelRatio},get prefersReducedMotion(){return!!ge.matchMedia&&(null==xu&&(xu=ge.matchMedia("(prefers-reduced-motion: reduce)")),xu.matches)}};function Eu(i,e,r){r[i]&&-1!==r[i].indexOf(e)||(r[i]=r[i]||[],r[i].push(e))}function kl(i,e,r){if(r&&r[i]){const u=r[i].indexOf(e);-1!==u&&r[i].splice(u,1)}}class _a{constructor(e,r={}){ke(this,r),this.type=e}}class Fs extends _a{constructor(e,r={}){super("error",ke({error:e},r))}}class Cu{on(e,r){return this._listeners=this._listeners||{},Eu(e,r,this._listeners),this}off(e,r){return kl(e,r,this._listeners),kl(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Eu(e,r,this._oneTimeListeners),this):new Promise(u=>this.once(e,u))}fire(e,r){"string"==typeof e&&(e=new _a(e,r||{}));const u=e.type;if(this.listens(u)){e.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const C of m)C.call(this,e);const v=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const C of v)kl(u,C,this._oneTimeListeners),C.call(this,e);const x=this._eventedParent;x&&(ke(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),x.fire(e))}else e instanceof Fs&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var Tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ui(i,...e){for(const r of e)for(const u in r)i[u]=r[u];return i}function xi(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function ki(i){if(Array.isArray(i))return i.map(ki);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const r in i)e[r]=ki(i[r]);return e}return xi(i)}class Al extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var vr=Al;class Su{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[u,m]of r)this.bindings[u]=m}concat(e){return new Su(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var pp=Su;const bo={kind:"null"},on={kind:"number"},qt={kind:"string"},cn={kind:"boolean"},Ai={kind:"color"},Sr={kind:"object"},zn={kind:"value"},Gi={kind:"collator"},Ns={kind:"formatted"},nr={kind:"resolvedImage"};function Ro(i,e){return{kind:"array",itemType:i,N:e}}function Wi(i){if("array"===i.kind){const e=Wi(i.itemType);return"number"==typeof i.N?`array<${e}, ${i.N}>`:"value"===i.itemType.kind?"array":`array<${e}>`}return i.kind}const li=[bo,on,qt,cn,Ai,Ns,Sr,Ro(zn),nr];function as(i,e){if("error"===e.kind)return null;if("array"===i.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!as(i.itemType,e.itemType))&&("number"!=typeof i.N||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if("value"===i.kind)for(const r of li)if(!as(r,e))return null}return`Expected ${Wi(i)} but found ${Wi(e)} instead.`}function Ja(i,e){return e.some(r=>r.kind===i.kind)}function Tu(i,e){return e.some(r=>"null"===r?null===i:"array"===r?Array.isArray(i):"object"===r?i&&!Array.isArray(i)&&"object"==typeof i:r===typeof i)}var Zr,to={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function va(i){return(i=Math.round(i))<0?0:i>255?255:i}function Bs(i){return va("%"===i[i.length-1]?parseFloat(i)/100*255:parseInt(i))}function Zo(i){return(e="%"===i[i.length-1]?parseFloat(i)/100:parseFloat(i))<0?0:e>1?1:e;var e}function zs(i,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?i+(e-i)*r*6:2*r<1?e:3*r<2?i+(e-i)*(2/3-r)*6:i}try{Zr={}.parseCSSColor=function(i){var e,r=i.replace(/ /g,"").toLowerCase();if(r in to)return to[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=r.indexOf("("),m=r.indexOf(")");if(-1!==u&&m+1===r.length){var v=r.substr(0,u),x=r.substr(u+1,m-(u+1)).split(","),C=1;switch(v){case"rgba":if(4!==x.length)return null;C=Zo(x.pop());case"rgb":return 3!==x.length?null:[Bs(x[0]),Bs(x[1]),Bs(x[2]),C];case"hsla":if(4!==x.length)return null;C=Zo(x.pop());case"hsl":if(3!==x.length)return null;var I=(parseFloat(x[0])%360+360)%360/360,D=Zo(x[1]),R=Zo(x[2]),N=R<=.5?R*(D+1):R+D-R*D,z=2*R-N;return[va(255*zs(z,N,I+1/3)),va(255*zs(z,N,I)),va(255*zs(z,N,I-1/3)),C];default:return null}}return null}}catch{}class xo{constructor(e,r,u,m=1){this.r=e,this.g=r,this.b=u,this.a=m}static parse(e){if(!e)return;if(e instanceof xo)return e;if("string"!=typeof e)return;const r=Zr(e);return r?new xo(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,u,m]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(u)},${m})`}toArray(){const{r:e,g:r,b:u,a:m}=this;return 0===m?[0,0,0,0]:[255*e/m,255*r/m,255*u/m,m]}toArray01(){const{r:e,g:r,b:u,a:m}=this;return 0===m?[0,0,0,0]:[e/m,r/m,u/m,m]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:u,a:m}=this;return[e,r,u,m]}}xo.black=new xo(0,0,0,1),xo.white=new xo(1,1,1,1),xo.transparent=new xo(0,0,0,0),xo.red=new xo(1,0,0,1),xo.blue=new xo(0,0,1,1);var ei=xo;class Rf{constructor(e,r,u){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mu{constructor(e,r,u,m,v){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=u,this.fontStack=m,this.textColor=v}}class wo{constructor(e){this.sections=e}static fromString(e){return new wo([new Mu(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof wo?e:wo.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const u={};r.fontStack&&(u["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(u["font-scale"]=r.scale),r.textColor&&(u["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(u)}return e}}class Eo{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Eo({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Iu(i,e,r,u){return"number"==typeof i&&i>=0&&i<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:`Invalid rgba value [${[i,e,r,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof u?[i,e,r,u]:[i,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function js(i){if(null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i||i instanceof ei||i instanceof Rf||i instanceof wo||i instanceof Eo)return!0;if(Array.isArray(i)){for(const e of i)if(!js(e))return!1;return!0}if("object"==typeof i){for(const e in i)if(!js(i[e]))return!1;return!0}return!1}function wi(i){if(null===i)return bo;if("string"==typeof i)return qt;if("boolean"==typeof i)return cn;if("number"==typeof i)return on;if(i instanceof ei)return Ai;if(i instanceof Rf)return Gi;if(i instanceof wo)return Ns;if(i instanceof Eo)return nr;if(Array.isArray(i)){const e=i.length;let r;for(const u of i){const m=wi(u);if(r){if(r===m)continue;r=zn;break}r=m}return Ro(r||zn,e)}return Sr}function kd(i){const e=typeof i;return null===i?"":"string"===e||"number"===e||"boolean"===e?String(i):i instanceof ei||i instanceof wo||i instanceof Eo?i.toString():JSON.stringify(i)}class Co{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(2!==e.length)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!js(e[1]))return r.error("invalid value");const u=e[1];let m=wi(u);const v=r.expectedType;return"array"!==m.kind||0!==m.N||!v||"array"!==v.kind||"number"==typeof v.N&&0!==v.N||(m=v),new Co(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ei?["rgba"].concat(this.value.toArray()):this.value instanceof wo?this.value.serialize():this.value}}var no=Co,Ur=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const Pl={string:qt,number:on,boolean:cn,object:Sr};class Ol{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let u,m=1;const v=e[0];if("array"===v){let C,I;if(e.length>2){const D=e[1];if("string"!=typeof D||!(D in Pl)||"object"===D)return r.error('The item type argument of "array" must be one of string, number, boolean',1);C=Pl[D],m++}else C=zn;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);I=e[2],m++}u=Ro(C,I)}else u=Pl[v];const x=[];for(;m<e.length;m++){const C=r.parse(e[m],m,zn);if(!C)return null;x.push(C)}return new Ol(u,x)}evaluate(e){for(let r=0;r<this.args.length;r++){const u=this.args[r].evaluate(e);if(!as(this.type,wi(u)))return u;if(r===this.args.length-1)throw new Ur(`Expected value to be of type ${Wi(this.type)}, but found ${Wi(wi(u))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if("array"===e.kind){const u=e.itemType;if("string"===u.kind||"number"===u.kind||"boolean"===u.kind){r.push(u.kind);const m=e.N;("number"==typeof m||this.args.length>1)&&r.push(m)}}return r.concat(this.args.map(u=>u.serialize()))}}var zr=Ol;class el{constructor(e){this.type=Ns,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const u=e[1];if(!Array.isArray(u)&&"object"==typeof u)return r.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=e.length-1;++x){const C=e[x];if(v&&"object"==typeof C&&!Array.isArray(C)){v=!1;let I=null;if(C["font-scale"]&&(I=r.parse(C["font-scale"],1,on),!I))return null;let D=null;if(C["text-font"]&&(D=r.parse(C["text-font"],1,Ro(qt)),!D))return null;let R=null;if(C["text-color"]&&(R=r.parse(C["text-color"],1,Ai),!R))return null;const N=m[m.length-1];N.scale=I,N.font=D,N.textColor=R}else{const I=r.parse(e[x],1,zn);if(!I)return null;const D=I.type.kind;if("string"!==D&&"value"!==D&&"null"!==D&&"resolvedImage"!==D)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new el(m)}evaluate(e){return new wo(this.sections.map(r=>{const u=r.content.evaluate(e);return wi(u)===nr?new Mu("",u,null,null,null):new Mu(kd(u),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const u={};r.scale&&(u["font-scale"]=r.scale.serialize()),r.font&&(u["text-font"]=r.font.serialize()),r.textColor&&(u["text-color"]=r.textColor.serialize()),e.push(u)}return e}}class fp{constructor(e){this.type=nr,this.input=e}static parse(e,r){if(2!==e.length)return r.error("Expected two arguments.");const u=r.parse(e[1],1,qt);return u?new fp(u):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),u=Eo.fromString(r);return u&&e.availableImages&&(u.available=e.availableImages.indexOf(r)>-1),u}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const mp={"to-boolean":cn,"to-color":Ai,"to-number":on,"to-string":qt};class Du{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const u=e[0];if(("to-boolean"===u||"to-string"===u)&&2!==e.length)return r.error("Expected one argument.");const m=mp[u],v=[];for(let x=1;x<e.length;x++){const C=r.parse(e[x],x,zn);if(!C)return null;v.push(C)}return new Du(m,v)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let r,u;for(const m of this.args){if(r=m.evaluate(e),u=null,r instanceof ei)return r;if("string"==typeof r){const v=e.parseColor(r);if(v)return v}else if(Array.isArray(r)&&(u=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Iu(r[0],r[1],r[2],r[3]),!u))return new ei(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Ur(u||`Could not parse color from value '${"string"==typeof r?r:String(JSON.stringify(r))}'`)}if("number"===this.type.kind){let r=null;for(const u of this.args){if(r=u.evaluate(e),null===r)return 0;const m=Number(r);if(!isNaN(m))return m}throw new Ur(`Could not convert ${JSON.stringify(r)} to number.`)}return"formatted"===this.type.kind?wo.fromString(kd(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Eo.fromString(kd(this.args[0].evaluate(e))):kd(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new el([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new fp(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Ad=Du;const tl=["Unknown","Point","LineString","Polygon"];var ku=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?tl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-i[0])+this.featureDistanceData.bearing[1]*(u*e-i[1])}return 0}parseColor(i){let e=this._parseColorCache[i];return e||(e=this._parseColorCache[i]=ei.parse(i)),e}};class Rl{constructor(e,r,u,m){this.name=e,this.type=r,this._evaluate=u,this.args=m}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const u=e[0],m=Rl.definitions[u];if(!m)return r.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,C=x.filter(([D])=>!Array.isArray(D)||D.length===e.length-1);let I=null;for(const[D,R]of C){I=new Fd(r.registry,r.path,null,r.scope);const N=[];let z=!1;for(let H=1;H<e.length;H++){const $=e[H],Q=Array.isArray(D)?D[H-1]:D.type,ae=I.parse($,1+N.length,Q);if(!ae){z=!0;break}N.push(ae)}if(!z)if(Array.isArray(D)&&D.length!==N.length)I.error(`Expected ${D.length} arguments, but found ${N.length} instead.`);else{for(let H=0;H<N.length;H++){const $=Array.isArray(D)?D[H]:D.type,Q=N[H];I.concat(H+1).checkSubtype($,Q.type)}if(0===I.errors.length)return new Rl(u,v,R,N)}}if(1===C.length)r.errors.push(...I.errors);else{const D=(C.length?C:x).map(([N])=>{return z=N,Array.isArray(z)?`(${z.map(Wi).join(", ")})`:`(${Wi(z.type)}...)`;var z}).join(" | "),R=[];for(let N=1;N<e.length;N++){const z=r.parse(e[N],1+R.length);if(!z)return null;R.push(Wi(z.type))}r.error(`Expected arguments of type ${D}, but found (${R.join(", ")}) instead.`)}return null}static register(e,r){Rl.definitions=r;for(const u in r)e[u]=Rl}}var nl=Rl;class Pd{constructor(e,r,u){this.type=Gi,this.locale=u,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(2!==e.length)return r.error("Expected one argument.");const u=e[1];if("object"!=typeof u||Array.isArray(u))return r.error("Collator options argument must be an object.");const m=r.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,cn);if(!m)return null;const v=r.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,cn);if(!v)return null;let x=null;return u.locale&&(x=r.parse(u.locale,1,qt),!x)?null:new Pd(m,v,x)}evaluate(e){return new Rf(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const il=8192;function Lf(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function Au(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function gp(i,e){const r=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,m=Math.pow(2,e.z);return[Math.round(r*m*il),Math.round(u*m*il)]}function Yy(i,e,r){const u=i[0]-e[0],m=i[1]-e[1],v=i[0]-r[0],x=i[1]-r[1];return u*x-v*m==0&&u*v<=0&&m*x<=0}function Ff(i,e){let r=!1;for(let x=0,C=e.length;x<C;x++){const I=e[x];for(let D=0,R=I.length;D<R-1;D++){if(Yy(i,I[D],I[D+1]))return!1;(m=I[D])[1]>(u=i)[1]!=(v=I[D+1])[1]>u[1]&&u[0]<(v[0]-m[0])*(u[1]-m[1])/(v[1]-m[1])+m[0]&&(r=!r)}}var u,m,v;return r}function Od(i,e){for(let r=0;r<e.length;r++)if(Ff(i,e[r]))return!0;return!1}function Rd(i,e,r,u){const m=u[0]-r[0],v=u[1]-r[1],x=(i[0]-r[0])*v-m*(i[1]-r[1]),C=(e[0]-r[0])*v-m*(e[1]-r[1]);return x>0&&C<0||x<0&&C>0}function wc(i,e,r){for(const D of r)for(let R=0;R<D.length-1;++R)if((C=[(x=D[R+1])[0]-(v=D[R])[0],x[1]-v[1]])[0]*(I=[(m=e)[0]-(u=i)[0],m[1]-u[1]])[1]-C[1]*I[0]!=0&&Rd(u,m,v,x)&&Rd(v,x,u,m))return!0;var u,m,v,x,C,I;return!1}function Li(i,e){for(let r=0;r<i.length;++r)if(!Ff(i[r],e))return!1;for(let r=0;r<i.length-1;++r)if(wc(i[r],i[r+1],e))return!1;return!0}function Ev(i,e){for(let r=0;r<e.length;r++)if(Li(i,e[r]))return!0;return!1}function Vs(i,e,r){const u=[];for(let m=0;m<i.length;m++){const v=[];for(let x=0;x<i[m].length;x++){const C=gp(i[m][x],r);Lf(e,C),v.push(C)}u.push(v)}return u}function Nf(i,e,r){const u=[];for(let m=0;m<i.length;m++){const v=Vs(i[m],e,r);u.push(v)}return u}function Ll(i,e,r,u){if(i[0]<r[0]||i[0]>r[2]){const m=.5*u;let v=i[0]-r[0]>m?-u:r[0]-i[0]>m?u:0;0===v&&(v=i[0]-r[2]>m?-u:r[2]-i[0]>m?u:0),i[0]+=v}Lf(e,i)}function Bf(i,e,r,u){const m=Math.pow(2,u.z)*il,v=[u.x*il,u.y*il],x=[];if(!i)return x;for(const C of i)for(const I of C){const D=[I.x+v[0],I.y+v[1]];Ll(D,e,r,m),x.push(D)}return x}function yp(i,e,r,u){const m=Math.pow(2,u.z)*il,v=[u.x*il,u.y*il],x=[];if(!i)return x;for(const I of i){const D=[];for(const R of I){const N=[R.x+v[0],R.y+v[1]];Lf(e,N),D.push(N)}x.push(D)}if(e[2]-e[0]<=m/2){(C=e)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of x)for(const D of I)Ll(D,e,r,m)}var C;return x}class Ec{constructor(e,r){this.type=cn,this.geojson=e,this.geometries=r}static parse(e,r){if(2!==e.length)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(js(e[1])){const u=e[1];if("FeatureCollection"===u.type)for(let m=0;m<u.features.length;++m){const v=u.features[m].geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new Ec(u,u.features[m].geometry)}else if("Feature"===u.type){const m=u.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Ec(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new Ec(u,u)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(r,u){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(!x)return!1;if("Polygon"===u.type){const C=Vs(u.coordinates,v,x),I=Bf(r.geometry(),m,v,x);if(!Au(m,v))return!1;for(const D of I)if(!Ff(D,C))return!1}if("MultiPolygon"===u.type){const C=Nf(u.coordinates,v,x),I=Bf(r.geometry(),m,v,x);if(!Au(m,v))return!1;for(const D of I)if(!Od(D,C))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(r,u){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(!x)return!1;if("Polygon"===u.type){const C=Vs(u.coordinates,v,x),I=yp(r.geometry(),m,v,x);if(!Au(m,v))return!1;for(const D of I)if(!Li(D,C))return!1}if("MultiPolygon"===u.type){const C=Nf(u.coordinates,v,x),I=yp(r.geometry(),m,v,x);if(!Au(m,v))return!1;for(const D of I)if(!Ev(D,C))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Pu=Ec;function Us(i){if(i instanceof nl&&("get"===i.name&&1===i.args.length||"feature-state"===i.name||"has"===i.name&&1===i.args.length||"properties"===i.name||"geometry-type"===i.name||"id"===i.name||/^filter-/.test(i.name))||i instanceof Pu)return!1;let e=!0;return i.eachChild(r=>{e&&!Us(r)&&(e=!1)}),e}function ba(i){if(i instanceof nl&&"feature-state"===i.name)return!1;let e=!0;return i.eachChild(r=>{e&&!ba(r)&&(e=!1)}),e}function ls(i,e){if(i instanceof nl&&e.indexOf(i.name)>=0)return!1;let r=!0;return i.eachChild(u=>{r&&!ls(u,e)&&(r=!1)}),r}class Ld{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(2!==e.length||"string"!=typeof e[1])return r.error("'var' expression requires exactly one string literal argument.");const u=e[1];return r.scope.has(u)?new Ld(u,r.scope.get(u)):r.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Yo=Ld;class Ou{constructor(e,r=[],u,m=new pp,v=[]){this.registry=e,this.path=r,this.key=r.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=v,this.expectedType=u}parse(e,r,u,m,v={}){return r?this.concat(r,u,m)._parse(e,v):this._parse(e,v)}_parse(e,r){function u(m,v,x){return"assert"===x?new zr(v,[m]):"coerce"===x?new Ad(v,[m]):m}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=e[0];if("string"!=typeof m)return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(e,this);if(!x)return null;if(this.expectedType){const C=this.expectedType,I=x.type;if("string"!==C.kind&&"number"!==C.kind&&"boolean"!==C.kind&&"object"!==C.kind&&"array"!==C.kind||"value"!==I.kind)if("color"!==C.kind&&"formatted"!==C.kind&&"resolvedImage"!==C.kind||"value"!==I.kind&&"string"!==I.kind){if(this.checkSubtype(C,I))return null}else x=u(x,C,r.typeAnnotation||"coerce");else x=u(x,C,r.typeAnnotation||"assert")}if(!(x instanceof no)&&"resolvedImage"!==x.type.kind&&Hr(x)){const C=new ku;try{x=new no(x.type,x.evaluate(C))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,u){const m="number"==typeof e?this.path.concat(e):this.path,v=u?this.scope.concat(u):this.scope;return new Ou(this.registry,m,r||null,v,this.errors)}error(e,...r){const u=`${this.key}${r.map(m=>`[${m}]`).join("")}`;this.errors.push(new vr(u,e))}checkSubtype(e,r){const u=as(e,r);return u&&this.error(u),u}}var Fd=Ou;function Hr(i){if(i instanceof Yo)return Hr(i.boundExpression);if(i instanceof nl&&"error"===i.name||i instanceof Pd||i instanceof Pu)return!1;const e=i instanceof Ad||i instanceof zr;let r=!0;return i.eachChild(u=>{r=e?r&&Hr(u):r&&u instanceof no}),!!r&&Us(i)&&ls(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Nd(i,e){const r=i.length-1;let u,m,v=0,x=r,C=0;for(;v<=x;)if(C=Math.floor((v+x)/2),u=i[C],m=i[C+1],u<=e){if(C===r||e<m)return C;v=C+1}else{if(!(u>e))throw new Ur("Input is not a number.");x=C-1}return 0}class Fl{constructor(e,r,u){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[m,v]of u)this.labels.push(m),this.outputs.push(v)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const u=r.parse(e[1],1,on);if(!u)return null;const m=[];let v=null;r.expectedType&&"value"!==r.expectedType.kind&&(v=r.expectedType);for(let x=1;x<e.length;x+=2){const C=1===x?-1/0:e[x],I=e[x+1],D=x,R=x+1;if("number"!=typeof C)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(m.length&&m[m.length-1][0]>=C)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const N=r.parse(I,R,v);if(!N)return null;v=v||N.type,m.push([C,N])}return new Fl(v,u,m)}evaluate(e){const r=this.labels,u=this.outputs;if(1===r.length)return u[0].evaluate(e);const m=this.input.evaluate(e);if(m<=r[0])return u[0].evaluate(e);const v=r.length;return m>=r[v-1]?u[v-1].evaluate(e):u[Nd(r,m)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var Lo=Fl;function Ei(i,e,r){return i*(1-r)+e*r}var Cc=Object.freeze({__proto__:null,array:function(i,e,r){return i.map((u,m)=>Ei(u,e[m],r))},color:function(i,e,r){return new ei(Ei(i.r,e.r,r),Ei(i.g,e.g,r),Ei(i.b,e.b,r),Ei(i.a,e.a,r))},number:Ei});const Nl=.95047,ho=1.08883,ug=4/29,Hs=6/29,_p=3*Hs*Hs,rl=Hs*Hs*Hs,zf=Math.PI/180,jf=180/Math.PI;function ti(i){return i>rl?Math.pow(i,1/3):i/_p+ug}function mr(i){return i>Hs?i*i*i:_p*(i-ug)}function dg(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function vp(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function hg(i){const e=vp(i.r),r=vp(i.g),u=vp(i.b),m=ti((.4124564*e+.3575761*r+.1804375*u)/Nl),v=ti((.2126729*e+.7151522*r+.072175*u)/1);return{l:116*v-16,a:500*(m-v),b:200*(v-ti((.0193339*e+.119192*r+.9503041*u)/ho)),alpha:i.a}}function pg(i){let e=(i.l+16)/116,r=isNaN(i.a)?e:e+i.a/500,u=isNaN(i.b)?e:e-i.b/200;return e=1*mr(e),r=Nl*mr(r),u=ho*mr(u),new ei(dg(3.2404542*r-1.5371385*e-.4985314*u),dg(-.969266*r+1.8760108*e+.041556*u),dg(.0556434*r-.2040259*e+1.0572252*u),i.alpha)}function fg(i,e,r){const u=e-i;return i+r*(u>180||u<-180?u-360*Math.round(u/360):u)}const Ru={forward:hg,reverse:pg,interpolate:function(i,e,r){return{l:Ei(i.l,e.l,r),a:Ei(i.a,e.a,r),b:Ei(i.b,e.b,r),alpha:Ei(i.alpha,e.alpha,r)}}},Bl={forward:function(i){const{l:e,a:r,b:u}=hg(i),m=Math.atan2(u,r)*jf;return{h:m<0?m+360:m,c:Math.sqrt(r*r+u*u),l:e,alpha:i.a}},reverse:function(i){const e=i.h*zf,r=i.c;return pg({l:i.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:i.alpha})},interpolate:function(i,e,r){return{h:fg(i.h,e.h,r),c:Ei(i.c,e.c,r),l:Ei(i.l,e.l,r),alpha:Ei(i.alpha,e.alpha,r)}}};var Zt=Object.freeze({__proto__:null,hcl:Bl,lab:Ru});class Ci{constructor(e,r,u,m,v){this.type=e,this.operator=r,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[x,C]of v)this.labels.push(x),this.outputs.push(C)}static interpolationFactor(e,r,u,m){let v=0;if("exponential"===e.name)v=bp(r,e.base,u,m);else if("linear"===e.name)v=bp(r,1,u,m);else if("cubic-bezier"===e.name){const x=e.controlPoints;v=new ne(x[0],x[1],x[2],x[3]).solve(bp(r,1,u,m))}return v}static parse(e,r){let[u,m,v,...x]=e;if(!Array.isArray(m)||0===m.length)return r.error("Expected an interpolation type expression.",1);if("linear"===m[0])m={name:"linear"};else if("exponential"===m[0]){const D=m[1];if("number"!=typeof D)return r.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:D}}else{if("cubic-bezier"!==m[0])return r.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const D=m.slice(1);if(4!==D.length||D.some(R=>"number"!=typeof R||R<0||R>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:D}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(v=r.parse(v,2,on),!v)return null;const C=[];let I=null;"interpolate-hcl"===u||"interpolate-lab"===u?I=Ai:r.expectedType&&"value"!==r.expectedType.kind&&(I=r.expectedType);for(let D=0;D<x.length;D+=2){const R=x[D],N=x[D+1],z=D+3,H=D+4;if("number"!=typeof R)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(C.length&&C[C.length-1][0]>=R)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const $=r.parse(N,H,I);if(!$)return null;I=I||$.type,C.push([R,$])}return"number"===I.kind||"color"===I.kind||"array"===I.kind&&"number"===I.itemType.kind&&"number"==typeof I.N?new Ci(I,u,m,v,C):r.error(`Type ${Wi(I)} is not interpolatable.`)}evaluate(e){const r=this.labels,u=this.outputs;if(1===r.length)return u[0].evaluate(e);const m=this.input.evaluate(e);if(m<=r[0])return u[0].evaluate(e);const v=r.length;if(m>=r[v-1])return u[v-1].evaluate(e);const x=Nd(r,m),C=Ci.interpolationFactor(this.interpolation,m,r[x],r[x+1]),I=u[x].evaluate(e),D=u[x+1].evaluate(e);return"interpolate"===this.operator?Cc[this.type.kind.toLowerCase()](I,D,C):"interpolate-hcl"===this.operator?Bl.reverse(Bl.interpolate(Bl.forward(I),Bl.forward(D),C)):Ru.reverse(Ru.interpolate(Ru.forward(I),Ru.forward(D),C))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let u=0;u<this.labels.length;u++)r.push(this.labels[u],this.outputs[u].serialize());return r}}function bp(i,e,r,u){const m=u-r,v=i-r;return 0===m?0:1===e?v/m:(Math.pow(e,v)-1)/(Math.pow(e,m)-1)}var cs=Ci;class jr{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let u=null;const m=r.expectedType;m&&"value"!==m.kind&&(u=m);const v=[];for(const C of e.slice(1)){const I=r.parse(C,1+v.length,u,void 0,{typeAnnotation:"omit"});if(!I)return null;u=u||I.type,v.push(I)}const x=m&&v.some(C=>as(m,C.type));return new jr(x?zn:u,v)}evaluate(e){let r,u=null,m=0;for(const v of this.args){if(m++,u=v.evaluate(e),u&&u instanceof Eo&&!u.available&&(r||(r=u),u=null,m===this.args.length))return r;if(null!==u)break}return u}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Bd=jr;class $s{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const u=[];for(let v=1;v<e.length-1;v+=2){const x=e[v];if("string"!=typeof x)return r.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return r.error("Variable names must contain only alphanumeric characters or '_'.",v);const C=r.parse(e[v+1],v+1);if(!C)return null;u.push([x,C])}const m=r.parse(e[e.length-1],e.length-1,r.expectedType,u);return m?new $s(u,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,u]of this.bindings)e.push(r,u.serialize());return e.push(this.result.serialize()),e}}var So=$s;class zd{constructor(e,r,u){this.type=e,this.index=r,this.input=u}static parse(e,r){if(3!==e.length)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const u=r.parse(e[1],1,on),m=r.parse(e[2],2,Ro(r.expectedType||zn));return u&&m?new zd(m.type.itemType,u,m):null}evaluate(e){const r=this.index.evaluate(e),u=this.input.evaluate(e);if(r<0)throw new Ur(`Array index out of bounds: ${r} < 0.`);if(r>=u.length)throw new Ur(`Array index out of bounds: ${r} > ${u.length-1}.`);if(r!==Math.floor(r))throw new Ur(`Array index must be an integer, but found ${r} instead.`);return u[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Vf=zd;class jd{constructor(e,r){this.type=cn,this.needle=e,this.haystack=r}static parse(e,r){if(3!==e.length)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const u=r.parse(e[1],1,zn),m=r.parse(e[2],2,zn);return u&&m?Ja(u.type,[cn,qt,on,bo,zn])?new jd(u,m):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(u.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),u=this.haystack.evaluate(e);if(null==u)return!1;if(!Tu(r,["boolean","string","number","null"]))throw new Ur(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(wi(r))} instead.`);if(!Tu(u,["string","array"]))throw new Ur(`Expected second argument to be of type array or string, but found ${Wi(wi(u))} instead.`);return u.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Vd=jd;class Lu{constructor(e,r,u){this.type=on,this.needle=e,this.haystack=r,this.fromIndex=u}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const u=r.parse(e[1],1,zn),m=r.parse(e[2],2,zn);if(!u||!m)return null;if(!Ja(u.type,[cn,qt,on,bo,zn]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(u.type)} instead`);if(4===e.length){const v=r.parse(e[3],3,on);return v?new Lu(u,m,v):null}return new Lu(u,m)}evaluate(e){const r=this.needle.evaluate(e),u=this.haystack.evaluate(e);if(!Tu(r,["boolean","string","number","null"]))throw new Ur(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(wi(r))} instead.`);if(!Tu(u,["string","array"]))throw new Ur(`Expected second argument to be of type array or string, but found ${Wi(wi(u))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(e);return u.indexOf(r,m)}return u.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var To=Lu;class Es{constructor(e,r,u,m,v,x){this.inputType=e,this.type=r,this.input=u,this.cases=m,this.outputs=v,this.otherwise=x}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let u,m;r.expectedType&&"value"!==r.expectedType.kind&&(m=r.expectedType);const v={},x=[];for(let D=2;D<e.length-1;D+=2){let R=e[D];const N=e[D+1];Array.isArray(R)||(R=[R]);const z=r.concat(D);if(0===R.length)return z.error("Expected at least one branch label.");for(const $ of R){if("number"!=typeof $&&"string"!=typeof $)return z.error("Branch labels must be numbers or strings.");if("number"==typeof $&&Math.abs($)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof $&&Math.floor($)!==$)return z.error("Numeric branch labels must be integer values.");if(u){if(z.checkSubtype(u,wi($)))return null}else u=wi($);if(void 0!==v[String($)])return z.error("Branch labels must be unique.");v[String($)]=x.length}const H=r.parse(N,D,m);if(!H)return null;m=m||H.type,x.push(H)}const C=r.parse(e[1],1,zn);if(!C)return null;const I=r.parse(e[e.length-1],e.length-1,m);return I?"value"!==C.type.kind&&r.concat(1).checkSubtype(u,C.type)?null:new Es(u,m,C,v,x,I):null}evaluate(e){const r=this.input.evaluate(e);return(wi(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),u=[],m={};for(const x of r){const C=m[this.cases[x]];void 0===C?(m[this.cases[x]]=u.length,u.push([this.cases[x],[x]])):u[C][1].push(x)}const v=x=>"number"===this.inputType.kind?Number(x):x;for(const[x,C]of u)e.push(1===C.length?v(C[0]):C.map(v)),e.push(this.outputs[x].serialize());return e.push(this.otherwise.serialize()),e}}var xp=Es;class zl{constructor(e,r,u){this.type=e,this.branches=r,this.otherwise=u}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let u;r.expectedType&&"value"!==r.expectedType.kind&&(u=r.expectedType);const m=[];for(let x=1;x<e.length-1;x+=2){const C=r.parse(e[x],x,cn);if(!C)return null;const I=r.parse(e[x+1],x+1,u);if(!I)return null;m.push([C,I]),u=u||I.type}const v=r.parse(e[e.length-1],e.length-1,u);return v?new zl(u,m,v):null}evaluate(e){for(const[r,u]of this.branches)if(r.evaluate(e))return u.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,u]of this.branches)e(r),e(u);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var xa=zl;class Ud{constructor(e,r,u,m){this.type=e,this.input=r,this.beginIndex=u,this.endIndex=m}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const u=r.parse(e[1],1,zn),m=r.parse(e[2],2,on);if(!u||!m)return null;if(!Ja(u.type,[Ro(zn),qt,zn]))return r.error(`Expected first argument to be of type array or string, but found ${Wi(u.type)} instead`);if(4===e.length){const v=r.parse(e[3],3,on);return v?new Ud(u.type,u,m,v):null}return new Ud(u.type,u,m)}evaluate(e){const r=this.input.evaluate(e),u=this.beginIndex.evaluate(e);if(!Tu(r,["string","array"]))throw new Ur(`Expected first argument to be of type array or string, but found ${Wi(wi(r))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(e);return r.slice(u,m)}return r.slice(u)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Uf=Ud;function wp(i,e){return"=="===i||"!="===i?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function mg(i,e,r,u){return 0===u.compare(e,r)}function jl(i,e,r){const u="=="!==i&&"!="!==i;return class Rw{constructor(v,x,C){this.type=cn,this.lhs=v,this.rhs=x,this.collator=C,this.hasUntypedArgument="value"===v.type.kind||"value"===x.type.kind}static parse(v,x){if(3!==v.length&&4!==v.length)return x.error("Expected two or three arguments.");const C=v[0];let I=x.parse(v[1],1,zn);if(!I)return null;if(!wp(C,I.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${Wi(I.type)}'.`);let D=x.parse(v[2],2,zn);if(!D)return null;if(!wp(C,D.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${Wi(D.type)}'.`);if(I.type.kind!==D.type.kind&&"value"!==I.type.kind&&"value"!==D.type.kind)return x.error(`Cannot compare types '${Wi(I.type)}' and '${Wi(D.type)}'.`);u&&("value"===I.type.kind&&"value"!==D.type.kind?I=new zr(D.type,[I]):"value"!==I.type.kind&&"value"===D.type.kind&&(D=new zr(I.type,[D])));let R=null;if(4===v.length){if("string"!==I.type.kind&&"string"!==D.type.kind&&"value"!==I.type.kind&&"value"!==D.type.kind)return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(v[3],3,Gi),!R)return null}return new Rw(I,D,R)}evaluate(v){const x=this.lhs.evaluate(v),C=this.rhs.evaluate(v);if(u&&this.hasUntypedArgument){const I=wi(x),D=wi(C);if(I.kind!==D.kind||"string"!==I.kind&&"number"!==I.kind)throw new Ur(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const I=wi(x),D=wi(C);if("string"!==I.kind||"string"!==D.kind)return e(v,x,C)}return this.collator?r(v,x,C,this.collator.evaluate(v)):e(v,x,C)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[i];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const Hf=jl("==",function(i,e,r){return e===r},mg),gg=jl("!=",function(i,e,r){return e!==r},function(i,e,r,u){return!mg(0,e,r,u)}),$f=jl("<",function(i,e,r){return e<r},function(i,e,r,u){return u.compare(e,r)<0}),yg=jl(">",function(i,e,r){return e>r},function(i,e,r,u){return u.compare(e,r)>0}),_g=jl("<=",function(i,e,r){return e<=r},function(i,e,r,u){return u.compare(e,r)<=0}),Hd=jl(">=",function(i,e,r){return e>=r},function(i,e,r,u){return u.compare(e,r)>=0});class Fu{constructor(e,r,u,m,v,x){this.type=qt,this.number=e,this.locale=r,this.currency=u,this.unit=m,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(e,r){if(3!==e.length)return r.error("Expected two arguments.");const u=r.parse(e[1],1,on);if(!u)return null;const m=e[2];if("object"!=typeof m||Array.isArray(m))return r.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=r.parse(m.locale,1,qt),!v))return null;let x=null;if(m.currency&&(x=r.parse(m.currency,1,qt),!x))return null;let C=null;if(m.unit&&(C=r.parse(m.unit,1,qt),!C))return null;let I=null;if(m["min-fraction-digits"]&&(I=r.parse(m["min-fraction-digits"],1,on),!I))return null;let D=null;return m["max-fraction-digits"]&&(D=r.parse(m["max-fraction-digits"],1,on),!D)?null:new Fu(u,v,x,C,I,D)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Sc{constructor(e){this.type=on,this.input=e}static parse(e,r){if(2!==e.length)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const u=r.parse(e[1],1);return u?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?r.error(`Expected argument of type string or array, but found ${Wi(u.type)} instead.`):new Sc(u):null}evaluate(e){const r=this.input.evaluate(e);if("string"==typeof r||Array.isArray(r))return r.length;throw new Ur(`Expected value to be of type string or array, but found ${Wi(wi(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const Gf={"==":Hf,"!=":gg,">":yg,"<":$f,">=":Hd,"<=":_g,array:zr,at:Vf,boolean:zr,case:xa,coalesce:Bd,collator:Pd,format:el,image:fp,in:Vd,"index-of":To,interpolate:cs,"interpolate-hcl":cs,"interpolate-lab":cs,length:Sc,let:So,literal:no,match:xp,number:zr,"number-format":Fu,object:zr,slice:Uf,step:Lo,string:zr,"to-boolean":Ad,"to-color":Ad,"to-number":Ad,"to-string":Ad,var:Yo,within:Pu};function Wf(i,[e,r,u,m]){e=e.evaluate(i),r=r.evaluate(i),u=u.evaluate(i);const v=m?m.evaluate(i):1,x=Iu(e,r,u,v);if(x)throw new Ur(x);return new ei(e/255*v,r/255*v,u/255*v,v)}function Gs(i,e){return i in e}function Ep(i,e){const r=e[i];return void 0===r?null:r}function Cs(i){return{type:i}}nl.register(Gf,{error:[{kind:"error"},[qt],(i,[e])=>{throw new Ur(e.evaluate(i))}],typeof:[qt,[zn],(i,[e])=>Wi(wi(e.evaluate(i)))],"to-rgba":[Ro(on,4),[Ai],(i,[e])=>e.evaluate(i).toArray()],rgb:[Ai,[on,on,on],Wf],rgba:[Ai,[on,on,on,on],Wf],has:{type:cn,overloads:[[[qt],(i,[e])=>Gs(e.evaluate(i),i.properties())],[[qt,Sr],(i,[e,r])=>Gs(e.evaluate(i),r.evaluate(i))]]},get:{type:zn,overloads:[[[qt],(i,[e])=>Ep(e.evaluate(i),i.properties())],[[qt,Sr],(i,[e,r])=>Ep(e.evaluate(i),r.evaluate(i))]]},"feature-state":[zn,[qt],(i,[e])=>Ep(e.evaluate(i),i.featureState||{})],properties:[Sr,[],i=>i.properties()],"geometry-type":[qt,[],i=>i.geometryType()],id:[zn,[],i=>i.id()],zoom:[on,[],i=>i.globals.zoom],pitch:[on,[],i=>i.globals.pitch||0],"distance-from-center":[on,[],i=>i.distanceFromCenter()],"heatmap-density":[on,[],i=>i.globals.heatmapDensity||0],"line-progress":[on,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[on,[],i=>i.globals.skyRadialProgress||0],accumulated:[zn,[],i=>void 0===i.globals.accumulated?null:i.globals.accumulated],"+":[on,Cs(on),(i,e)=>{let r=0;for(const u of e)r+=u.evaluate(i);return r}],"*":[on,Cs(on),(i,e)=>{let r=1;for(const u of e)r*=u.evaluate(i);return r}],"-":{type:on,overloads:[[[on,on],(i,[e,r])=>e.evaluate(i)-r.evaluate(i)],[[on],(i,[e])=>-e.evaluate(i)]]},"/":[on,[on,on],(i,[e,r])=>e.evaluate(i)/r.evaluate(i)],"%":[on,[on,on],(i,[e,r])=>e.evaluate(i)%r.evaluate(i)],ln2:[on,[],()=>Math.LN2],pi:[on,[],()=>Math.PI],e:[on,[],()=>Math.E],"^":[on,[on,on],(i,[e,r])=>Math.pow(e.evaluate(i),r.evaluate(i))],sqrt:[on,[on],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[on,[on],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[on,[on],(i,[e])=>Math.log(e.evaluate(i))],log2:[on,[on],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[on,[on],(i,[e])=>Math.sin(e.evaluate(i))],cos:[on,[on],(i,[e])=>Math.cos(e.evaluate(i))],tan:[on,[on],(i,[e])=>Math.tan(e.evaluate(i))],asin:[on,[on],(i,[e])=>Math.asin(e.evaluate(i))],acos:[on,[on],(i,[e])=>Math.acos(e.evaluate(i))],atan:[on,[on],(i,[e])=>Math.atan(e.evaluate(i))],min:[on,Cs(on),(i,e)=>Math.min(...e.map(r=>r.evaluate(i)))],max:[on,Cs(on),(i,e)=>Math.max(...e.map(r=>r.evaluate(i)))],abs:[on,[on],(i,[e])=>Math.abs(e.evaluate(i))],round:[on,[on],(i,[e])=>{const r=e.evaluate(i);return r<0?-Math.round(-r):Math.round(r)}],floor:[on,[on],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[on,[on],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[cn,[qt,zn],(i,[e,r])=>i.properties()[e.value]===r.value],"filter-id-==":[cn,[zn],(i,[e])=>i.id()===e.value],"filter-type-==":[cn,[qt],(i,[e])=>i.geometryType()===e.value],"filter-<":[cn,[qt,zn],(i,[e,r])=>{const u=i.properties()[e.value],m=r.value;return typeof u==typeof m&&u<m}],"filter-id-<":[cn,[zn],(i,[e])=>{const r=i.id(),u=e.value;return typeof r==typeof u&&r<u}],"filter->":[cn,[qt,zn],(i,[e,r])=>{const u=i.properties()[e.value],m=r.value;return typeof u==typeof m&&u>m}],"filter-id->":[cn,[zn],(i,[e])=>{const r=i.id(),u=e.value;return typeof r==typeof u&&r>u}],"filter-<=":[cn,[qt,zn],(i,[e,r])=>{const u=i.properties()[e.value],m=r.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[cn,[zn],(i,[e])=>{const r=i.id(),u=e.value;return typeof r==typeof u&&r<=u}],"filter->=":[cn,[qt,zn],(i,[e,r])=>{const u=i.properties()[e.value],m=r.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[cn,[zn],(i,[e])=>{const r=i.id(),u=e.value;return typeof r==typeof u&&r>=u}],"filter-has":[cn,[zn],(i,[e])=>e.value in i.properties()],"filter-has-id":[cn,[],i=>null!==i.id()&&void 0!==i.id()],"filter-type-in":[cn,[Ro(qt)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[cn,[Ro(zn)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[cn,[qt,Ro(zn)],(i,[e,r])=>r.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[cn,[qt,Ro(zn)],(i,[e,r])=>function(u,m,v,x){for(;v<=x;){const C=v+x>>1;if(m[C]===u)return!0;m[C]>u?x=C-1:v=C+1}return!1}(i.properties()[e.value],r.value,0,r.value.length-1)],all:{type:cn,overloads:[[[cn,cn],(i,[e,r])=>e.evaluate(i)&&r.evaluate(i)],[Cs(cn),(i,e)=>{for(const r of e)if(!r.evaluate(i))return!1;return!0}]]},any:{type:cn,overloads:[[[cn,cn],(i,[e,r])=>e.evaluate(i)||r.evaluate(i)],[Cs(cn),(i,e)=>{for(const r of e)if(r.evaluate(i))return!0;return!1}]]},"!":[cn,[cn],(i,[e])=>!e.evaluate(i)],"is-supported-script":[cn,[qt],(i,[e])=>{const r=i.globals&&i.globals.isSupportedScript;return!r||r(e.evaluate(i))}],upcase:[qt,[qt],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[qt,[qt],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[qt,Cs(zn),(i,e)=>e.map(r=>kd(r.evaluate(i))).join("")],"resolved-locale":[qt,[Gi],(i,[e])=>e.evaluate(i).resolvedLocale()]});var Yr=Gf;function Vl(i){return{result:"success",value:i}}function er(i){return{result:"error",value:i}}function Tc(i){return"data-driven"===i["property-type"]}function Nu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Ul(i){return!!i.expression&&i.expression.interpolated}function di(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":null===i?"null":typeof i}function Bu(i){return"object"==typeof i&&null!==i&&!Array.isArray(i)}function zu(i){return i}function Hl(i,e){const r="color"===e.type,u=i.stops&&"object"==typeof i.stops[0][0],m=u||!(u||void 0!==i.property),v=i.type||(Ul(e)?"exponential":"interval");if(r&&((i=ui({},i)).stops&&(i.stops=i.stops.map(D=>[D[0],ei.parse(D[1])])),i.default=ei.parse(i.default?i.default:e.default)),i.colorSpace&&"rgb"!==i.colorSpace&&!Zt[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let x,C,I;if("exponential"===v)x=qs;else if("interval"===v)x=Mc;else if("categorical"===v){x=ju,C=Object.create(null);for(const D of i.stops)C[D[0]]=D[1];I=typeof i.stops[0][0]}else{if("identity"!==v)throw new Error(`Unknown function type "${v}"`);x=qf}if(u){const D={},R=[];for(let H=0;H<i.stops.length;H++){const $=i.stops[H],Q=$[0].zoom;void 0===D[Q]&&(D[Q]={zoom:Q,type:i.type,property:i.property,default:i.default,stops:[]},R.push(Q)),D[Q].stops.push([$[0].value,$[1]])}const N=[];for(const H of R)N.push([D[H].zoom,Hl(D[H],e)]);const z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:cs.interpolationFactor.bind(void 0,z),zoomStops:N.map(H=>H[0]),evaluate:({zoom:H},$)=>qs({stops:N,base:i.base},e,H).evaluate(H,$)}}if(m){const D="exponential"===v?{name:"exponential",base:void 0!==i.base?i.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:cs.interpolationFactor.bind(void 0,D),zoomStops:i.stops.map(R=>R[0]),evaluate:({zoom:R})=>x(i,e,R,C,I)}}return{kind:"source",evaluate(D,R){const N=R&&R.properties?R.properties[i.property]:void 0;return void 0===N?Ws(i.default,e.default):x(i,e,N,C,I)}}}function Ws(i,e,r){return void 0!==i?i:void 0!==e?e:void 0!==r?r:void 0}function ju(i,e,r,u,m){return Ws(typeof r===m?u[r]:void 0,i.default,e.default)}function Mc(i,e,r){if("number"!==di(r))return Ws(i.default,e.default);const u=i.stops.length;if(1===u||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[u-1][0])return i.stops[u-1][1];const m=Nd(i.stops.map(v=>v[0]),r);return i.stops[m][1]}function qs(i,e,r){const u=void 0!==i.base?i.base:1;if("number"!==di(r))return Ws(i.default,e.default);const m=i.stops.length;if(1===m||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[m-1][0])return i.stops[m-1][1];const v=Nd(i.stops.map(R=>R[0]),r),x=function(R,N,z,H){const $=H-z,Q=R-z;return 0===$?0:1===N?Q/$:(Math.pow(N,Q)-1)/(Math.pow(N,$)-1)}(r,u,i.stops[v][0],i.stops[v+1][0]),C=i.stops[v][1],I=i.stops[v+1][1];let D=Cc[e.type]||zu;if(i.colorSpace&&"rgb"!==i.colorSpace){const R=Zt[i.colorSpace];D=(N,z)=>R.reverse(R.interpolate(R.forward(N),R.forward(z),x))}return"function"==typeof C.evaluate?{evaluate(...R){const N=C.evaluate.apply(void 0,R),z=I.evaluate.apply(void 0,R);if(void 0!==N&&void 0!==z)return D(N,z,x)}}:D(C,I,x)}function qf(i,e,r){return"color"===e.type?r=ei.parse(r):"formatted"===e.type?r=wo.fromString(r.toString()):"resolvedImage"===e.type?r=Eo.fromString(r.toString()):di(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Ws(r,i.default,e.default)}class us{constructor(e,r){var u;this.expression=e,this._warningHistory={},this._evaluator=new ku,this._defaultValue=r?"color"===(u=r).type&&(Bu(u.default)||Array.isArray(u.default))?new ei(0,0,0,0):"color"===u.type?ei.parse(u.default)||null:void 0===u.default?null:u.default:null,this._enumValues=r&&"enum"===r.type?r.values:null}evaluateWithoutErrorHandling(e,r,u,m,v,x,C,I){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=u,this._evaluator.canonical=m||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,u,m,v,x,C,I){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=I||null;try{const D=this.expression.evaluate(this._evaluator);if(null==D||"number"==typeof D&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Ur(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function Xo(i){return Array.isArray(i)&&i.length>0&&"string"==typeof i[0]&&i[0]in Yr}function $l(i,e){const r=new Fd(Yr,[],e?function(m){const v={color:Ai,string:qt,number:on,enum:qt,boolean:cn,formatted:Ns,resolvedImage:nr};return"array"===m.type?Ro(v[m.value]||zn,m.length):v[m.type]}(e):void 0),u=r.parse(i,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return u?Vl(new us(u,e)):er(r.errors)}class Cp{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent="constant"!==e&&!ba(r.expression)}evaluateWithoutErrorHandling(e,r,u,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(e,r,u,m,v,x)}evaluate(e,r,u,m,v,x){return this._styleExpression.evaluate(e,r,u,m,v,x)}}class Ss{constructor(e,r,u,m){this.kind=e,this.zoomStops=u,this._styleExpression=r,this.isStateDependent="camera"!==e&&!ba(r.expression),this.interpolationType=m}evaluateWithoutErrorHandling(e,r,u,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(e,r,u,m,v,x)}evaluate(e,r,u,m,v,x){return this._styleExpression.evaluate(e,r,u,m,v,x)}interpolationFactor(e,r,u){return this.interpolationType?cs.interpolationFactor(this.interpolationType,e,r,u):0}}function Ic(i,e){if("error"===(i=$l(i,e)).result)return i;const r=i.value.expression,u=Us(r);if(!u&&!Tc(e))return er([new vr("","data expressions not supported")]);const m=ls(r,["zoom","pitch","distance-from-center"]);if(!m&&!Nu(e))return er([new vr("","zoom expressions not supported")]);const v=Vu(r);return v||m?v instanceof vr?er([v]):v instanceof cs&&!Ul(e)?er([new vr("",'"interpolate" expressions cannot be used with this property')]):Vl(v?new Ss(u?"camera":"composite",i.value,v.labels,v instanceof cs?v.interpolation:void 0):new Cp(u?"constant":"source",i.value)):er([new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Dc{constructor(e,r){this._parameters=e,this._specification=r,ui(this,Hl(this._parameters,this._specification))}static deserialize(e){return new Dc(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Vu(i){let e=null;if(i instanceof So)e=Vu(i.result);else if(i instanceof Bd){for(const r of i.args)if(e=Vu(r),e)break}else(i instanceof Lo||i instanceof cs)&&i.input instanceof nl&&"zoom"===i.input.name&&(e=i);return e instanceof vr||i.eachChild(r=>{const u=Vu(r);u instanceof vr?e=u:!e&&u?e=new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&u&&e!==u&&(e=new vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class pn{constructor(e,r,u,m){this.message=(e?`${e}: `:"")+u,m&&(this.identifier=m),null!=r&&r.__line__&&(this.line=r.__line__)}}function Zs(i){const e=i.key,r=i.value,u=i.valueSpec||{},m=i.objectElementValidators||{},v=i.style,x=i.styleSpec;let C=[];const I=di(r);if("object"!==I)return[new pn(e,r,`object expected, ${I} found`)];for(const D in r){const R=D.split(".")[0];let N;m[R]?N=m[R]:u[R]?N=Mr:m["*"]?N=m["*"]:u["*"]&&(N=Mr),N?C=C.concat(N({key:(e&&`${e}.`)+D,value:r[D],valueSpec:u[R]||u["*"],style:v,styleSpec:x,object:r,objectKey:D},r)):C.push(new pn(e,r[D],`unknown property "${D}"`))}for(const D in u)m[D]||u[D].required&&void 0===u[D].default&&void 0===r[D]&&C.push(new pn(e,r,`missing required property "${D}"`));return C}function $d(i){const e=i.value,r=i.valueSpec,u=i.style,m=i.styleSpec,v=i.key,x=i.arrayElementValidator||Mr;if("array"!==di(e))return[new pn(v,e,`array expected, ${di(e)} found`)];if(r.length&&e.length!==r.length)return[new pn(v,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new pn(v,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let C={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};m.$version<7&&(C.function=r.function),"object"===di(r.value)&&(C=r.value);let I=[];for(let D=0;D<e.length;D++)I=I.concat(x({array:e,arrayIndex:D,value:e[D],valueSpec:C,style:u,styleSpec:m,key:`${v}[${D}]`}));return I}function kc(i){const e=i.key,r=i.value,u=i.valueSpec;let m=di(r);if("number"===m&&r!=r&&(m="NaN"),"number"!==m)return[new pn(e,r,`number expected, ${m} found`)];if("minimum"in u){let v=u.minimum;if("array"===di(u.minimum)&&(v=u.minimum[i.arrayIndex]),r<v)return[new pn(e,r,`${r} is less than the minimum value ${v}`)]}if("maximum"in u){let v=u.maximum;if("array"===di(u.maximum)&&(v=u.maximum[i.arrayIndex]),r>v)return[new pn(e,r,`${r} is greater than the maximum value ${v}`)]}return[]}function Gl(i){const e=i.valueSpec,r=xi(i.value.type);let u,m,v,x={};const C="categorical"!==r&&void 0===i.value.property,I=!C,D="array"===di(i.value.stops)&&"array"===di(i.value.stops[0])&&"object"===di(i.value.stops[0][0]),R=Zs({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(H){if("identity"===r)return[new pn(H.key,H.value,'identity function may not have a "stops" property')];let $=[];const Q=H.value;return $=$.concat($d({key:H.key,value:Q,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:N})),"array"===di(Q)&&0===Q.length&&$.push(new pn(H.key,Q,"array must have at least one stop")),$},default:function(H){return Mr({key:H.key,value:H.value,valueSpec:e,style:H.style,styleSpec:H.styleSpec})}}});return"identity"===r&&C&&R.push(new pn(i.key,i.value,'missing required property "property"')),"identity"===r||i.value.stops||R.push(new pn(i.key,i.value,'missing required property "stops"')),"exponential"===r&&i.valueSpec.expression&&!Ul(i.valueSpec)&&R.push(new pn(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(I&&!Tc(i.valueSpec)?R.push(new pn(i.key,i.value,"property functions not supported")):C&&!Nu(i.valueSpec)&&R.push(new pn(i.key,i.value,"zoom functions not supported"))),"categorical"!==r&&!D||void 0!==i.value.property||R.push(new pn(i.key,i.value,'"property" property is required')),R;function N(H){let $=[];const Q=H.value,ae=H.key;if("array"!==di(Q))return[new pn(ae,Q,`array expected, ${di(Q)} found`)];if(2!==Q.length)return[new pn(ae,Q,`array length 2 expected, length ${Q.length} found`)];if(D){if("object"!==di(Q[0]))return[new pn(ae,Q,`object expected, ${di(Q[0])} found`)];if(void 0===Q[0].zoom)return[new pn(ae,Q,"object stop key must have zoom")];if(void 0===Q[0].value)return[new pn(ae,Q,"object stop key must have value")];const be=xi(Q[0].zoom);if("number"!=typeof be)return[new pn(ae,Q[0].zoom,"stop zoom values must be numbers")];if(v&&v>be)return[new pn(ae,Q[0].zoom,"stop zoom values must appear in ascending order")];be!==v&&(v=be,m=void 0,x={}),$=$.concat(Zs({key:`${ae}[0]`,value:Q[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:kc,value:z}}))}else $=$.concat(z({key:`${ae}[0]`,value:Q[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},Q));return Xo(ki(Q[1]))?$.concat([new pn(`${ae}[1]`,Q[1],"expressions are not allowed in function stops.")]):$.concat(Mr({key:`${ae}[1]`,value:Q[1],valueSpec:e,style:H.style,styleSpec:H.styleSpec}))}function z(H,$){const Q=di(H.value),ae=xi(H.value),be=null!==H.value?H.value:$;if(u){if(Q!==u)return[new pn(H.key,be,`${Q} stop domain type must match previous stop domain type ${u}`)]}else u=Q;if("number"!==Q&&"string"!==Q&&"boolean"!==Q&&"number"!=typeof ae&&"string"!=typeof ae&&"boolean"!=typeof ae)return[new pn(H.key,be,"stop domain value must be a number, string, or boolean")];if("number"!==Q&&"categorical"!==r){let Re=`number expected, ${Q} found`;return Tc(e)&&void 0===r&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new pn(H.key,be,Re)]}return"categorical"!==r||"number"!==Q||"number"==typeof ae&&isFinite(ae)&&Math.floor(ae)===ae?"categorical"!==r&&"number"===Q&&"number"==typeof ae&&"number"==typeof m&&void 0!==m&&ae<m?[new pn(H.key,be,"stop domain values must appear in ascending order")]:(m=ae,"categorical"===r&&ae in x?[new pn(H.key,be,"stop domain values must be unique")]:(x[ae]=!0,[])):[new pn(H.key,be,`integer expected, found ${String(ae)}`)]}}function Tr(i){const e=("property"===i.expressionContext?Ic:$l)(ki(i.value),i.valueSpec);if("error"===e.result)return e.value.map(u=>new pn(`${i.key}${u.key}`,i.value,u.message));const r=e.value.expression||e.value._styleExpression.expression;if("property"===i.expressionContext&&"text-font"===i.propertyKey&&!r.outputDefined())return[new pn(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===i.expressionContext&&"layout"===i.propertyType&&!ba(r))return[new pn(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===i.expressionContext)return Ac(r,i);if(i.expressionContext&&0===i.expressionContext.indexOf("cluster")){if(!ls(r,["zoom","feature-state"]))return[new pn(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===i.expressionContext&&!Us(r))return[new pn(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ac(i,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const m of e.valueSpec.expression.parameters)r.delete(m);if(0===r.size)return[];const u=[];return i instanceof nl&&r.has(i.name)?[new pn(e.key,e.value,`["${i.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(i.eachChild(m=>{u.push(...Ac(m,e))}),u)}function Pc(i){const e=i.key,r=i.value,u=i.valueSpec,m=[];return Array.isArray(u.values)?-1===u.values.indexOf(xi(r))&&m.push(new pn(e,r,`expected one of [${u.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(u.values).indexOf(xi(r))&&m.push(new pn(e,r,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(r)} found`)),m}function Wl(i){if(!0===i||!1===i)return!0;if(!Array.isArray(i)||0===i.length)return!1;switch(i[0]){case"has":return i.length>=2&&"$id"!==i[1]&&"$type"!==i[1];case"in":return i.length>=3&&("string"!=typeof i[1]||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==i.length||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!Wl(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function ql(i,e="fill"){if(null==i)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Wl(i)||(i=Yl(i));const r=i;let u=!0;try{u=function(D){if(!Ys(D))return D;let R=ki(D);return Oc(R),R=Zl(R),R}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const m=Tt[`filter_${e}`],v=$l(u,m);let x=null;if("error"===v.result)throw new Error(v.value.map(D=>`${D.key}: ${D.message}`).join(", "));x=(D,R,N)=>v.value.evaluate(D,R,{},N);let C=null,I=null;if(u!==r){const D=$l(r,m);if("error"===D.result)throw new Error(D.value.map(R=>`${R.key}: ${R.message}`).join(", "));C=(R,N,z,H,$)=>D.value.evaluate(R,N,{},z,void 0,void 0,H,$),I=!Us(D.value.expression)}return{filter:x,dynamicFilter:C||void 0,needGeometry:Uu(u),needFeature:!!I}}function Zl(i){if(!Array.isArray(i))return i;const e=function(r){if(Sp.has(r[0]))for(let u=1;u<r.length;u++)if(Ys(r[u]))return!0;return r}(i);return!0===e?e:e.map(r=>Zl(r))}function Oc(i){let e=!1;const r=[];if("case"===i[0]){for(let u=1;u<i.length-1;u+=2)e=e||Ys(i[u]),r.push(i[u+1]);r.push(i[i.length-1])}else if("match"===i[0]){e=e||Ys(i[1]);for(let u=2;u<i.length-1;u+=2)r.push(i[u+1]);r.push(i[i.length-1])}else if("step"===i[0]){e=e||Ys(i[1]);for(let u=1;u<i.length-1;u+=2)r.push(i[u+1])}e&&(i.length=0,i.push("any",...r));for(let u=1;u<i.length;u++)Oc(i[u])}function Ys(i){if(!Array.isArray(i))return!1;if("pitch"===(e=i[0])||"distance-from-center"===e)return!0;var e;for(let r=1;r<i.length;r++)if(Ys(i[r]))return!0;return!1}const Sp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Zf(i,e){return i<e?-1:i>e?1:0}function Uu(i){if(!Array.isArray(i))return!1;if("within"===i[0])return!0;for(let e=1;e<i.length;e++)if(Uu(i[e]))return!0;return!1}function Yl(i){if(!i)return!0;const e=i[0];return i.length<=1?"any"!==e:"=="===e?ds(i[1],i[2],"=="):"!="===e?Lc(ds(i[1],i[2],"==")):"<"===e||">"===e||"<="===e||">="===e?ds(i[1],i[2],e):"any"===e?(r=i.slice(1),["any"].concat(r.map(Yl))):"all"===e?["all"].concat(i.slice(1).map(Yl)):"none"===e?["all"].concat(i.slice(1).map(Yl).map(Lc)):"in"===e?Gd(i[1],i.slice(2)):"!in"===e?Lc(Gd(i[1],i.slice(2))):"has"===e?Rc(i[1]):"!has"===e?Lc(Rc(i[1])):"within"!==e||i;var r}function ds(i,e,r){switch(i){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,i,e]}}function Gd(i,e){if(0===e.length)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",i,["literal",e.sort(Zf)]]:["filter-in-small",i,["literal",e]]}}function Rc(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Lc(i){return["!",i]}function Fc(i){return Wl(ki(i.value))?Tr(ui({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):wa(i)}function wa(i){const e=i.value,r=i.key;if("array"!==di(e))return[new pn(r,e,`array expected, ${di(e)} found`)];const u=i.styleSpec;let m,v=[];if(e.length<1)return[new pn(r,e,"filter array must have at least 1 element")];switch(v=v.concat(Pc({key:`${r}[0]`,value:e[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),xi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===xi(e[1])&&v.push(new pn(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&v.push(new pn(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(m=di(e[1]),"string"!==m&&v.push(new pn(`${r}[1]`,e[1],`string expected, ${m} found`)));for(let x=2;x<e.length;x++)m=di(e[x]),"$type"===xi(e[1])?v=v.concat(Pc({key:`${r}[${x}]`,value:e[x],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==m&&"number"!==m&&"boolean"!==m&&v.push(new pn(`${r}[${x}]`,e[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<e.length;x++)v=v.concat(wa({key:`${r}[${x}]`,value:e[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":m=di(e[1]),2!==e.length?v.push(new pn(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==m&&v.push(new pn(`${r}[1]`,e[1],`string expected, ${m} found`));break;case"within":m=di(e[1]),2!==e.length?v.push(new pn(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==m&&v.push(new pn(`${r}[1]`,e[1],`object expected, ${m} found`))}return v}function Wd(i,e){const r=i.key,u=i.style,m=i.styleSpec,v=i.value,x=i.objectKey,C=m[`${e}_${i.layerType}`];if(!C)return[];const I=x.match(/^(.*)-transition$/);if("paint"===e&&I&&C[I[1]]&&C[I[1]].transition)return Mr({key:r,value:v,valueSpec:m.transition,style:u,styleSpec:m});const D=i.valueSpec||C[x];if(!D)return[new pn(r,v,`unknown property "${x}"`)];let R;if("string"===di(v)&&Tc(D)&&!D.tokens&&(R=/^{([^}]+)}$/.exec(v))){const z=`\`{ "type": "identity", "property": ${R?JSON.stringify(R[1]):'"_"'} }\``;return[new pn(r,v,`"${x}" does not support interpolation syntax\nUse an identity property function instead: ${z}.`)]}const N=[];return"symbol"===i.layerType&&("text-field"===x&&u&&!u.glyphs&&N.push(new pn(r,v,'use of "text-field" requires a style "glyphs" property')),"text-font"===x&&Bu(ki(v))&&"identity"===xi(v.type)&&N.push(new pn(r,v,'"text-font" does not support identity functions'))),N.concat(Mr({key:i.key,value:v,valueSpec:D,style:u,styleSpec:m,expressionContext:"property",propertyType:e,propertyKey:x}))}function vg(i){return Wd(i,"paint")}function Hu(i){return Wd(i,"layout")}function Yf(i){let e=[];const r=i.value,u=i.key,m=i.style,v=i.styleSpec;r.type||r.ref||e.push(new pn(u,r,'either "type" or "ref" is required'));let x=xi(r.type);const C=xi(r.ref);if(r.id){const I=xi(r.id);for(let D=0;D<i.arrayIndex;D++){const R=m.layers[D];xi(R.id)===I&&e.push(new pn(u,r.id,`duplicate layer id "${r.id}", previously used at line ${R.id.__line__}`))}}if("ref"in r){let I;["type","source","source-layer","filter","layout"].forEach(D=>{D in r&&e.push(new pn(u,r[D],`"${D}" is prohibited for ref layers`))}),m.layers.forEach(D=>{xi(D.id)===C&&(I=D)}),I?I.ref?e.push(new pn(u,r.ref,"ref cannot reference another ref layer")):x=xi(I.type):"string"==typeof C&&e.push(new pn(u,r.ref,`ref layer "${C}" not found`))}else if("background"!==x&&"sky"!==x)if(r.source){const I=m.sources&&m.sources[r.source],D=I&&xi(I.type);I?"vector"===D&&"raster"===x?e.push(new pn(u,r.source,`layer "${r.id}" requires a raster source`)):"raster"===D&&"raster"!==x?e.push(new pn(u,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==D||r["source-layer"]?"raster-dem"===D&&"hillshade"!==x?e.push(new pn(u,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==x||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===D&&I.lineMetrics||e.push(new pn(u,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new pn(u,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new pn(u,r.source,`source "${r.source}" not found`))}else e.push(new pn(u,r,'missing required property "source"'));return e=e.concat(Zs({key:u,value:r,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mr({key:`${u}.type`,value:r.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,object:r,objectKey:"type"}),filter:I=>Fc(ui({layerType:x},I)),layout:I=>Zs({layer:r,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>Hu(ui({layerType:x},D))}}),paint:I=>Zs({layer:r,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>vg(ui({layerType:x},D))}})}})),e}function Ea(i){const e=i.value,r=i.key,u=di(e);return"string"!==u?[new pn(r,e,`string expected, ${u} found`)]:[]}const Tp={promoteId:function({key:i,value:e}){if("string"===di(e))return Ea({key:i,value:e});{const r=[];for(const u in e)r.push(...Ea({key:`${i}.${u}`,value:e[u]}));return r}}};function Xf(i){const e=i.value,r=i.key,u=i.styleSpec,m=i.style;if(!e.type)return[new pn(r,e,'"type" is required')];const v=xi(e.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=Zs({key:r,value:e,valueSpec:u[`source_${v.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:Tp}),x;case"geojson":if(x=Zs({key:r,value:e,valueSpec:u.source_geojson,style:m,styleSpec:u,objectElementValidators:Tp}),e.cluster)for(const C in e.clusterProperties){const[I,D]=e.clusterProperties[C],R="string"==typeof I?[I,["accumulated"],["get",C]]:I;x.push(...Tr({key:`${r}.${C}.map`,value:D,expressionContext:"cluster-map"})),x.push(...Tr({key:`${r}.${C}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return x;case"video":return Zs({key:r,value:e,valueSpec:u.source_video,style:m,styleSpec:u});case"image":return Zs({key:r,value:e,valueSpec:u.source_image,style:m,styleSpec:u});case"canvas":return[new pn(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pc({key:`${r}.type`,value:e.type,valueSpec:{values:$u(u)},style:m,styleSpec:u})}}function $u(i){return i.source.reduce((e,r)=>{const u=i[r];return"enum"===u.type.type&&(e=e.concat(Object.keys(u.type.values))),e},[])}function ol(i){const e=i.value,r=i.styleSpec,u=r.light,m=i.style;let v=[];const x=di(e);if(void 0===e)return v;if("object"!==x)return v=v.concat([new pn("light",e,`object expected, ${x} found`)]),v;for(const C in e){const I=C.match(/^(.*)-transition$/);v=v.concat(I&&u[I[1]]&&u[I[1]].transition?Mr({key:C,value:e[C],valueSpec:r.transition,style:m,styleSpec:r}):u[C]?Mr({key:C,value:e[C],valueSpec:u[C],style:m,styleSpec:r}):[new pn(C,e[C],`unknown property "${C}"`)])}return v}function qd(i){const e=i.value,r=i.key,u=i.style,m=i.styleSpec,v=m.terrain;let x=[];const C=di(e);if(void 0===e)return x;if("object"!==C)return x=x.concat([new pn("terrain",e,`object expected, ${C} found`)]),x;for(const I in e){const D=I.match(/^(.*)-transition$/);x=x.concat(D&&v[D[1]]&&v[D[1]].transition?Mr({key:I,value:e[I],valueSpec:m.transition,style:u,styleSpec:m}):v[I]?Mr({key:I,value:e[I],valueSpec:v[I],style:u,styleSpec:m}):[new pn(I,e[I],`unknown property "${I}"`)])}if(e.source){const I=u.sources&&u.sources[e.source],D=I&&xi(I.type);I?"raster-dem"!==D&&x.push(new pn(r,e.source,`terrain cannot be used with a source of type ${String(D)}, it only be used with a "raster-dem" source type`)):x.push(new pn(r,e.source,`source "${e.source}" not found`))}else x.push(new pn(r,e,'terrain is missing required property "source"'));return x}function Zd(i){const e=i.value,r=i.style,u=i.styleSpec,m=u.fog;let v=[];const x=di(e);if(void 0===e)return v;if("object"!==x)return v=v.concat([new pn("fog",e,`object expected, ${x} found`)]),v;for(const C in e){const I=C.match(/^(.*)-transition$/);v=v.concat(I&&m[I[1]]&&m[I[1]].transition?Mr({key:C,value:e[C],valueSpec:u.transition,style:r,styleSpec:u}):m[C]?Mr({key:C,value:e[C],valueSpec:m[C],style:r,styleSpec:u}):[new pn(C,e[C],`unknown property "${C}"`)])}return v}const Yd={"*":()=>[],array:$d,boolean:function(i){const e=i.value,r=i.key,u=di(e);return"boolean"!==u?[new pn(r,e,`boolean expected, ${u} found`)]:[]},number:kc,color:function(i){const e=i.key,r=i.value,u=di(r);return"string"!==u?[new pn(e,r,`color expected, ${u} found`)]:null===Zr(r)?[new pn(e,r,`color expected, "${r}" found`)]:[]},enum:Pc,filter:Fc,function:Gl,layer:Yf,object:Zs,source:Xf,light:ol,terrain:qd,fog:Zd,string:Ea,formatted:function(i){return 0===Ea(i).length?[]:Tr(i)},resolvedImage:function(i){return 0===Ea(i).length?[]:Tr(i)},projection:function(i){const e=i.value,r=i.styleSpec,u=r.projection,m=i.style;let v=[];const x=di(e);if("object"===x)for(const C in e)v=v.concat(Mr({key:C,value:e[C],valueSpec:u[C],style:m,styleSpec:r}));else"string"!==x&&(v=v.concat([new pn("projection",e,`object or string expected, ${x} found`)]));return v}};function Mr(i){const e=i.value,r=i.valueSpec,u=i.styleSpec;return r.expression&&Bu(xi(e))?Gl(i):r.expression&&Xo(ki(e))?Tr(i):r.type&&Yd[r.type]?Yd[r.type](i):Zs(ui({},i,{valueSpec:r.type?u[r.type]:r}))}function Xy(i){const e=i.value,r=i.key,u=Ea(i);return u.length||(-1===e.indexOf("{fontstack}")&&u.push(new pn(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&u.push(new pn(r,e,'"glyphs" url must include a "{range}" token'))),u}function Mp(i,e=Tt){return Fo(Mr({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,objectElementValidators:{glyphs:Xy,"*":()=>[]}}))}const Kf=i=>Fo(vg(i)),bg=i=>Fo(Hu(i));function Fo(i){return i.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function Gu(i,e){let r=!1;if(e&&e.length)for(const u of e)i.fire(new Fs(new Error(u.message))),r=!0;return r}var Ko=Mo,po=3;function Mo(i,e,r){var u=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var m=new Int32Array(this.arrayBuffer);i=m[0],this.d=(e=m[1])+2*(r=m[2]);for(var v=0;v<this.d*this.d;v++){var x=m[po+v],C=m[po+v+1];u.push(x===C?null:m.subarray(x,C))}var I=m[po+u.length+1];this.keys=m.subarray(m[po+u.length],I),this.bboxes=m.subarray(I),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var D=0;D<this.d*this.d;D++)u.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=i,this.padding=r,this.scale=e/i,this.uid=0;var R=r/e*i;this.min=-R,this.max=i+R}Mo.prototype.insert=function(i,e,r,u,m){this._forEachCell(e,r,u,m,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(u),this.bboxes.push(m)},Mo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Mo.prototype._insertCell=function(i,e,r,u,m,v){this.cells[m].push(v)},Mo.prototype.query=function(i,e,r,u,m){var v=this.min,x=this.max;if(i<=v&&e<=v&&x<=r&&x<=u&&!m)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(i,e,r,u,this._queryCell,C,{},m),C},Mo.prototype._queryCell=function(i,e,r,u,m,v,x,C){var I=this.cells[m];if(null!==I)for(var D=this.keys,R=this.bboxes,N=0;N<I.length;N++){var z=I[N];if(void 0===x[z]){var H=4*z;(C?C(R[H+0],R[H+1],R[H+2],R[H+3]):i<=R[H+2]&&e<=R[H+3]&&r>=R[H+0]&&u>=R[H+1])?(x[z]=!0,v.push(D[z])):x[z]=!1}}},Mo.prototype._forEachCell=function(i,e,r,u,m,v,x,C){for(var I=this._convertToCellCoord(i),D=this._convertToCellCoord(e),R=this._convertToCellCoord(r),N=this._convertToCellCoord(u),z=I;z<=R;z++)for(var H=D;H<=N;H++){var $=this.d*H+z;if((!C||C(this._convertFromCellCoord(z),this._convertFromCellCoord(H),this._convertFromCellCoord(z+1),this._convertFromCellCoord(H+1)))&&m.call(this,i,e,r,u,$,v,x,C))return}},Mo.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},Mo.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},Mo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,e=po+this.cells.length+1+1,r=0,u=0;u<this.cells.length;u++)r+=this.cells[u].length;var m=new Int32Array(e+r+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var v=e,x=0;x<i.length;x++){var C=i[x];m[po+x]=v,m.set(C,v),v+=C.length}return m[po+i.length]=v,m.set(this.keys,v),m[po+i.length+1]=v+=this.keys.length,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer};var No=te(Ko);const Xl={};function fn(i,e,r={}){Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),Xl[e]={klass:i,omit:r.omit||[]}}fn(Object,"Object"),No.serialize=function(i,e){const r=i.toArrayBuffer();return e&&e.push(r),{buffer:r}},No.deserialize=function(i){return new No(i.buffer)},Object.defineProperty(No,"name",{value:"Grid"}),fn(No,"Grid"),fn(ei,"Color"),fn(Error,"Error"),fn(Br,"AJAXError"),fn(Eo,"ResolvedImage"),fn(Dc,"StylePropertyFunction"),fn(us,"StyleExpression",{omit:["_evaluator"]}),fn(Ss,"ZoomDependentExpression"),fn(Cp,"ZoomConstantExpression"),fn(nl,"CompoundExpression",{omit:["_evaluate"]});for(const i in Yr)Xl[Yr[i]._classRegistryKey]||fn(Yr[i],`Expression${i}`);function Ca(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&"ArrayBuffer"===i.constructor.name)}function Ip(i){return ge.ImageBitmap&&i instanceof ge.ImageBitmap}function zi(i,e){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(Ca(i)||Ip(i))return e&&e.push(i),i;if(ArrayBuffer.isView(i)){const r=i;return e&&e.push(r.buffer),r}if(i instanceof ge.ImageData)return e&&e.push(i.data.buffer),i;if(Array.isArray(i)){const r=[];for(const u of i)r.push(zi(u,e));return r}if("object"==typeof i){const r=i.constructor,u=r._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const m=r.serialize?r.serialize(i,e):{};if(!r.serialize){for(const v in i)i.hasOwnProperty(v)&&(Xl[u].omit.indexOf(v)>=0||(m[v]=zi(i[v],e)));i instanceof Error&&(m.message=i.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(m.$name=u),m}throw new Error("can't serialize object of type "+typeof i)}function Nc(i){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||Ca(i)||Ip(i)||ArrayBuffer.isView(i)||i instanceof ge.ImageData)return i;if(Array.isArray(i))return i.map(Nc);if("object"==typeof i){const e=i.$name||"Object",{klass:r}=Xl[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(i);const u=Object.create(r.prototype);for(const m of Object.keys(i))"$name"!==m&&(u[m]=Nc(i[m]));return u}throw new Error("can't deserialize object of type "+typeof i)}const dn={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Bc(i){for(const e of i)if(Dp(e.charCodeAt(0)))return!0;return!1}function Ky(i){for(const e of i)if(!xg(e.charCodeAt(0)))return!1;return!0}function xg(i){return!(dn.Arabic(i)||dn["Arabic Supplement"](i)||dn["Arabic Extended-A"](i)||dn["Arabic Presentation Forms-A"](i)||dn["Arabic Presentation Forms-B"](i))}function Dp(i){return!(746!==i&&747!==i&&(i<4352||!(dn["Bopomofo Extended"](i)||dn.Bopomofo(i)||dn["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||dn["CJK Compatibility Ideographs"](i)||dn["CJK Compatibility"](i)||dn["CJK Radicals Supplement"](i)||dn["CJK Strokes"](i)||!(!dn["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||12336===i)||dn["CJK Unified Ideographs Extension A"](i)||dn["CJK Unified Ideographs"](i)||dn["Enclosed CJK Letters and Months"](i)||dn["Hangul Compatibility Jamo"](i)||dn["Hangul Jamo Extended-A"](i)||dn["Hangul Jamo Extended-B"](i)||dn["Hangul Jamo"](i)||dn["Hangul Syllables"](i)||dn.Hiragana(i)||dn["Ideographic Description Characters"](i)||dn.Kanbun(i)||dn["Kangxi Radicals"](i)||dn["Katakana Phonetic Extensions"](i)||dn.Katakana(i)&&12540!==i||!(!dn["Halfwidth and Fullwidth Forms"](i)||65288===i||65289===i||65293===i||i>=65306&&i<=65310||65339===i||65341===i||65343===i||i>=65371&&i<=65503||65507===i||i>=65512&&i<=65519)||!(!dn["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||dn["Unified Canadian Aboriginal Syllabics"](i)||dn["Unified Canadian Aboriginal Syllabics Extended"](i)||dn["Vertical Forms"](i)||dn["Yijing Hexagram Symbols"](i)||dn["Yi Syllables"](i)||dn["Yi Radicals"](i))))}function wg(i){return!(Dp(i)||(e=i,dn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||dn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||dn["Letterlike Symbols"](e)||dn["Number Forms"](e)||dn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||dn["Control Pictures"](e)&&9251!==e||dn["Optical Character Recognition"](e)||dn["Enclosed Alphanumerics"](e)||dn["Geometric Shapes"](e)||dn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||dn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||dn["CJK Symbols and Punctuation"](e)||dn.Katakana(e)||dn["Private Use Area"](e)||dn["CJK Compatibility Forms"](e)||dn["Small Form Variants"](e)||dn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function $r(i){return i>=1424&&i<=2303||dn["Arabic Presentation Forms-A"](i)||dn["Arabic Presentation Forms-B"](i)}function Cv(i,e){return!(!e&&$r(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||dn.Khmer(i))}function Sv(i){for(const e of i)if($r(e.charCodeAt(0)))return!0;return!1}const Vr="deferred",Wu="loading",sl="loaded";let zc=null,g="unavailable",o=null;const f=function(i){i&&"string"==typeof i&&i.indexOf("NetworkError")>-1&&(g="error"),zc&&zc(i)};function b(){E.fire(new _a("pluginStateChange",{pluginStatus:g,pluginURL:o}))}const E=new Cu,S=function(){return g},k=function(){if(g!==Vr||!o)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");g=Wu,b(),o&&ga({url:o},i=>{i?f(i):(g=sl,b())})},O={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>g===sl||null!=O.applyArabicShaping,isLoading:()=>g===Wu,setState(i){g=i.pluginStatus,o=i.pluginURL},isParsed:()=>null!=O.applyArabicShaping&&null!=O.processBidirectionalText&&null!=O.processStyledBidirectionalText,getPluginURL:()=>o};class F{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,u){for(const m of r)if(!Cv(m.charCodeAt(0),u))return!1;return!0}(e,O.isLoaded())}}class V{constructor(e,r){this.property=e,this.value=r,this.expression=function(u,m){if(Bu(u))return new Dc(u,m);if(Xo(u)){const v=Ic(u,m);if("error"===v.result)throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=u;return"string"==typeof u&&"color"===m.type&&(v=ei.parse(u)),{kind:"constant",evaluate:()=>v}}}(void 0===r?e.specification.default:r,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,r,u){return this.property.possiblyEvaluate(this,e,r,u)}}class U{constructor(e){this.property=e,this.value=new V(e,void 0)}transitioned(e,r){return new oe(this.property,this.value,r,ke({},e.transition,this.transition),e.now)}untransitioned(){return new oe(this.property,this.value,null,{},0)}}class q{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return sn(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new U(this._values[e].property)),this._values[e].value=new V(this._values[e].property,null===r?void 0:sn(r))}getTransition(e){return sn(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new U(this._values[e].property)),this._values[e].transition=sn(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const u=this.getValue(r);void 0!==u&&(e[r]=u);const m=this.getTransition(r);void 0!==m&&(e[`${r}-transition`]=m)}return e}transitioned(e,r){const u=new he(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(e,r._values[m]);return u}untransitioned(){const e=new he(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class oe{constructor(e,r,u,m,v){const x=m.delay||0,C=m.duration||0;v=v||0,this.property=e,this.value=r,this.begin=v+x,this.end=this.begin+C,e.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(e,r,u){const m=e.now||0,v=this.value.possiblyEvaluate(e,r,u),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(e,r,u);{const C=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(e,r,u),v,qe(C))}}return v}}class he{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,u){const m=new ve(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(e,r,u);return m}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class me{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return sn(this._values[e].value)}setValue(e,r){this._values[e]=new V(this._values[e].property,null===r?void 0:sn(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const u=this.getValue(r);void 0!==u&&(e[r]=u)}return e}possiblyEvaluate(e,r,u){const m=new ve(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(e,r,u);return m}}class fe{constructor(e,r,u){this.property=e,this.value=r,this.parameters=u}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,r,u,m){return this.property.evaluate(this.value,this.parameters,e,r,u,m)}}class ve{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class X{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,u){const m=Cc[this.specification.type];return m?m(e,r,u):e}}class de{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,u,m){return new fe(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(r,null,{},u,m)}:e.expression,r)}interpolate(e,r,u){if("constant"!==e.value.kind||"constant"!==r.value.kind)return e;if(void 0===e.value.value||void 0===r.value.value)return new fe(this,{kind:"constant",value:void 0},e.parameters);const m=Cc[this.specification.type];return m?new fe(this,{kind:"constant",value:m(e.value.value,r.value.value,u)},e.parameters):e}evaluate(e,r,u,m,v,x){return"constant"===e.kind?e.value:e.evaluate(r,u,m,v,x)}}class we{constructor(e){this.specification=e}possiblyEvaluate(e,r,u,m){return!!e.expression.evaluate(r,null,{},u,m)}interpolate(){return!1}}class Ce{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new F(0,{});for(const u in e){const m=e[u];m.specification.overridable&&this.overridableProperties.push(u);const v=this.defaultPropertyValues[u]=new V(m,void 0),x=this.defaultTransitionablePropertyValues[u]=new U(m);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=v.possiblyEvaluate(r)}}}function He(i,e){return 256*(i=Ze(Math.floor(i),0,255))+Ze(Math.floor(e),0,255)}fn(de,"DataDrivenProperty"),fn(X,"DataConstantProperty"),fn(we,"ColorRampProperty");const We={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $e{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class st{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function nt(i,e=1){let r=0,u=0;return{members:i.map(m=>{const v=We[m.type].BYTES_PER_ELEMENT,x=r=gt(r,Math.max(e,v)),C=m.components||1;return u=Math.max(u,v),r+=v*C,{name:m.name,type:m.type,components:C,offset:x}}),size:gt(r,Math.max(u,e)),alignment:e}}function gt(i,e){return Math.ceil(i/e)*e}class Ut extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const u=this.length;return this.resize(u+1),this.emplace(u,e,r)}emplace(e,r,u){const m=2*e;return this.int16[m+0]=r,this.int16[m+1]=u,e}}Ut.prototype.bytesPerElement=4,fn(Ut,"StructArrayLayout2i4");class ht extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,u)}emplace(e,r,u,m){const v=3*e;return this.int16[v+0]=r,this.int16[v+1]=u,this.int16[v+2]=m,e}}ht.prototype.bytesPerElement=6,fn(ht,"StructArrayLayout3i6");class Dt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,u,m)}emplace(e,r,u,m,v){const x=4*e;return this.int16[x+0]=r,this.int16[x+1]=u,this.int16[x+2]=m,this.int16[x+3]=v,e}}Dt.prototype.bytesPerElement=8,fn(Dt,"StructArrayLayout4i8");class wt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x,C){const I=this.length;return this.resize(I+1),this.emplace(I,e,r,u,m,v,x,C)}emplace(e,r,u,m,v,x,C,I){const D=6*e,R=12*e,N=3*e;return this.int16[D+0]=r,this.int16[D+1]=u,this.uint8[R+4]=m,this.uint8[R+5]=v,this.uint8[R+6]=x,this.uint8[R+7]=C,this.float32[N+2]=I,e}}wt.prototype.bytesPerElement=12,fn(wt,"StructArrayLayout2i4ub1f12");class zt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,u,m)}emplace(e,r,u,m,v){const x=4*e;return this.float32[x+0]=r,this.float32[x+1]=u,this.float32[x+2]=m,this.float32[x+3]=v,e}}zt.prototype.bytesPerElement=16,fn(zt,"StructArrayLayout4f16");class mt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,u,m,v)}emplace(e,r,u,m,v,x){const C=6*e,I=3*e;return this.uint16[C+0]=r,this.uint16[C+1]=u,this.uint16[C+2]=m,this.uint16[C+3]=v,this.float32[I+2]=x,e}}mt.prototype.bytesPerElement=12,fn(mt,"StructArrayLayout4ui1f12");class Mt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,u,m)}emplace(e,r,u,m,v){const x=4*e;return this.uint16[x+0]=r,this.uint16[x+1]=u,this.uint16[x+2]=m,this.uint16[x+3]=v,e}}Mt.prototype.bytesPerElement=8,fn(Mt,"StructArrayLayout4ui8");class jt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,r,u,m,v,x)}emplace(e,r,u,m,v,x,C){const I=6*e;return this.int16[I+0]=r,this.int16[I+1]=u,this.int16[I+2]=m,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=C,e}}jt.prototype.bytesPerElement=12,fn(jt,"StructArrayLayout6i12");class Lt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x,C,I,D,R,N,z){const H=this.length;return this.resize(H+1),this.emplace(H,e,r,u,m,v,x,C,I,D,R,N,z)}emplace(e,r,u,m,v,x,C,I,D,R,N,z,H){const $=12*e;return this.int16[$+0]=r,this.int16[$+1]=u,this.int16[$+2]=m,this.int16[$+3]=v,this.uint16[$+4]=x,this.uint16[$+5]=C,this.uint16[$+6]=I,this.uint16[$+7]=D,this.int16[$+8]=R,this.int16[$+9]=N,this.int16[$+10]=z,this.int16[$+11]=H,e}}Lt.prototype.bytesPerElement=24,fn(Lt,"StructArrayLayout4i4ui4i24");class Yt extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,r,u,m,v,x)}emplace(e,r,u,m,v,x,C){const I=10*e,D=5*e;return this.int16[I+0]=r,this.int16[I+1]=u,this.int16[I+2]=m,this.float32[D+2]=v,this.float32[D+3]=x,this.float32[D+4]=C,e}}Yt.prototype.bytesPerElement=20,fn(Yt,"StructArrayLayout3i3f20");class En extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}En.prototype.bytesPerElement=4,fn(En,"StructArrayLayout1ul4");class Fn extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x,C,I,D,R,N,z,H){const $=this.length;return this.resize($+1),this.emplace($,e,r,u,m,v,x,C,I,D,R,N,z,H)}emplace(e,r,u,m,v,x,C,I,D,R,N,z,H,$){const Q=20*e,ae=10*e;return this.int16[Q+0]=r,this.int16[Q+1]=u,this.int16[Q+2]=m,this.int16[Q+3]=v,this.int16[Q+4]=x,this.float32[ae+3]=C,this.float32[ae+4]=I,this.float32[ae+5]=D,this.float32[ae+6]=R,this.int16[Q+14]=N,this.uint32[ae+8]=z,this.uint16[Q+18]=H,this.uint16[Q+19]=$,e}}Fn.prototype.bytesPerElement=40,fn(Fn,"StructArrayLayout5i4f1i1ul2ui40");class yn extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x,C){const I=this.length;return this.resize(I+1),this.emplace(I,e,r,u,m,v,x,C)}emplace(e,r,u,m,v,x,C,I){const D=8*e;return this.int16[D+0]=r,this.int16[D+1]=u,this.int16[D+2]=m,this.int16[D+4]=v,this.int16[D+5]=x,this.int16[D+6]=C,this.int16[D+7]=I,e}}yn.prototype.bytesPerElement=16,fn(yn,"StructArrayLayout3i2i2i16");class Dn extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,u,m,v)}emplace(e,r,u,m,v,x){const C=4*e,I=8*e;return this.float32[C+0]=r,this.float32[C+1]=u,this.float32[C+2]=m,this.int16[I+6]=v,this.int16[I+7]=x,e}}Dn.prototype.bytesPerElement=16,fn(Dn,"StructArrayLayout2f1f2i16");class oi extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,u,m)}emplace(e,r,u,m,v){const x=12*e,C=3*e;return this.uint8[x+0]=r,this.uint8[x+1]=u,this.float32[C+1]=m,this.float32[C+2]=v,e}}oi.prototype.bytesPerElement=12,fn(oi,"StructArrayLayout2ub2f12");class ii extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,u)}emplace(e,r,u,m){const v=3*e;return this.float32[v+0]=r,this.float32[v+1]=u,this.float32[v+2]=m,e}}ii.prototype.bytesPerElement=12,fn(ii,"StructArrayLayout3f12");class bn extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,u)}emplace(e,r,u,m){const v=3*e;return this.uint16[v+0]=r,this.uint16[v+1]=u,this.uint16[v+2]=m,e}}bn.prototype.bytesPerElement=6,fn(bn,"StructArrayLayout3ui6");class Pi extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae,be,Re,xe,Ae,Ve){const je=this.length;return this.resize(je+1),this.emplace(je,e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae,be,Re,xe,Ae,Ve)}emplace(e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae,be,Re,xe,Ae,Ve,je){const _t=30*e,ft=15*e,St=60*e;return this.int16[_t+0]=r,this.int16[_t+1]=u,this.int16[_t+2]=m,this.float32[ft+2]=v,this.float32[ft+3]=x,this.uint16[_t+8]=C,this.uint16[_t+9]=I,this.uint32[ft+5]=D,this.uint32[ft+6]=R,this.uint32[ft+7]=N,this.uint16[_t+16]=z,this.uint16[_t+17]=H,this.uint16[_t+18]=$,this.float32[ft+10]=Q,this.float32[ft+11]=ae,this.uint8[St+48]=be,this.uint8[St+49]=Re,this.uint8[St+50]=xe,this.uint32[ft+13]=Ae,this.int16[_t+28]=Ve,this.uint8[St+58]=je,e}}Pi.prototype.bytesPerElement=60,fn(Pi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class qi extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae,be,Re,xe,Ae,Ve,je,_t,ft,St,Ht,bt,At,kt,Nt){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae,be,Re,xe,Ae,Ve,je,_t,ft,St,Ht,bt,At,kt,Nt)}emplace(e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae,be,Re,xe,Ae,Ve,je,_t,ft,St,Ht,bt,At,kt,Nt,Gt){const Ct=38*e,an=19*e;return this.int16[Ct+0]=r,this.int16[Ct+1]=u,this.int16[Ct+2]=m,this.float32[an+2]=v,this.float32[an+3]=x,this.int16[Ct+8]=C,this.int16[Ct+9]=I,this.int16[Ct+10]=D,this.int16[Ct+11]=R,this.int16[Ct+12]=N,this.int16[Ct+13]=z,this.uint16[Ct+14]=H,this.uint16[Ct+15]=$,this.uint16[Ct+16]=Q,this.uint16[Ct+17]=ae,this.uint16[Ct+18]=be,this.uint16[Ct+19]=Re,this.uint16[Ct+20]=xe,this.uint16[Ct+21]=Ae,this.uint16[Ct+22]=Ve,this.uint16[Ct+23]=je,this.uint16[Ct+24]=_t,this.uint16[Ct+25]=ft,this.uint16[Ct+26]=St,this.uint16[Ct+27]=Ht,this.uint16[Ct+28]=bt,this.uint32[an+15]=At,this.float32[an+16]=kt,this.float32[an+17]=Nt,this.float32[an+18]=Gt,e}}qi.prototype.bytesPerElement=76,fn(qi,"StructArrayLayout3i2f6i15ui1ul3f76");class Bi extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}Bi.prototype.bytesPerElement=4,fn(Bi,"StructArrayLayout1f4");class Yi extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,u,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,u,m,v)}emplace(e,r,u,m,v,x){const C=5*e;return this.float32[C+0]=r,this.float32[C+1]=u,this.float32[C+2]=m,this.float32[C+3]=v,this.float32[C+4]=x,e}}Yi.prototype.bytesPerElement=20,fn(Yi,"StructArrayLayout5f20");class io extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,u,m)}emplace(e,r,u,m,v){const x=6*e;return this.uint32[3*e+0]=r,this.uint16[x+2]=u,this.uint16[x+3]=m,this.uint16[x+4]=v,e}}io.prototype.bytesPerElement=12,fn(io,"StructArrayLayout1ul3ui12");class Xr extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const u=this.length;return this.resize(u+1),this.emplace(u,e,r)}emplace(e,r,u){const m=2*e;return this.uint16[m+0]=r,this.uint16[m+1]=u,e}}Xr.prototype.bytesPerElement=4,fn(Xr,"StructArrayLayout2ui4");class Qo extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}Qo.prototype.bytesPerElement=2,fn(Qo,"StructArrayLayout1ui2");class Ts extends st{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const u=this.length;return this.resize(u+1),this.emplace(u,e,r)}emplace(e,r,u){const m=2*e;return this.float32[m+0]=r,this.float32[m+1]=u,e}}Ts.prototype.bytesPerElement=8,fn(Ts,"StructArrayLayout2f8");class tr extends $e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}tr.prototype.size=40;class Zi extends Fn{get(e){return new tr(this,e)}}fn(Zi,"CollisionBoxArray");class Di extends $e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Di.prototype.size=60;class br extends Pi{get(e){return new Di(this,e)}}fn(br,"PlacedSymbolArray");class Io extends $e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Io.prototype.size=76;class or extends qi{get(e){return new Io(this,e)}}fn(or,"SymbolInstanceArray");class Jo extends Bi{getoffsetX(e){return this.float32[1*e+0]}}fn(Jo,"GlyphOffsetArray");class kp extends Ut{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}fn(kp,"SymbolLineVertexArray");class jc extends $e{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}jc.prototype.size=12;class Kl extends io{get(e){return new jc(this,e)}}fn(Kl,"FeatureIndexArray");class ro extends Xr{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}fn(ro,"FillExtrusionCentroidArray");const Ms=nt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Xs=nt([{name:"a_dash",components:4,type:"Uint16"}]);var Ql={exports:{}},Qf=function(i,e){var r,u,m,v,x,C,I,D;for(u=i.length-(r=3&i.length),m=e,x=3432918353,C=461845907,D=0;D<u;)I=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,m=27492+(65535&(v=5*(65535&(m=(m^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,r){case 3:I^=(255&i.charCodeAt(D+2))<<16;case 2:I^=(255&i.charCodeAt(D+1))<<8;case 1:m^=I=(65535&(I=(I=(65535&(I^=255&i.charCodeAt(D)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295}return m^=i.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0},Qy=function(i,e){for(var r,u=i.length,m=e^u,v=0;u>=4;)r=1540483477*(65535&(r=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(r>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),u-=4,++v;switch(u){case 3:m^=(255&i.charCodeAt(v+2))<<16;case 2:m^=(255&i.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&i.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};Ql.exports=Qf,Ql.exports.murmur3=Qf,Ql.exports.murmur2=Qy;var Ap=te(Ql.exports);class Vc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,u,m){this.ids.push(Tv(e)),this.positions.push(r,u,m)}getPositions(e){const r=Tv(e);let u=0,m=this.ids.length-1;for(;u<m;){const x=u+m>>1;this.ids[x]>=r?m=x:u=x+1}const v=[];for(;this.ids[u]===r;)v.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return v}static serialize(e,r){const u=new Float64Array(e.ids),m=new Uint32Array(e.positions);return Cg(u,m,0,u.length-1),r&&r.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(e){const r=new Vc;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function Tv(i){const e=+i;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ap(String(i))}function Cg(i,e,r,u){for(;r<u;){const m=i[r+u>>1];let v=r-1,x=u+1;for(;;){do{v++}while(i[v]<m);do{x--}while(i[x]>m);if(v>=x)break;ll(i,v,x),ll(e,3*v,3*x),ll(e,3*v+1,3*x+1),ll(e,3*v+2,3*x+2)}x-r<u-x?(Cg(i,e,r,x),r=x+1):(Cg(i,e,x+1,u),u=x)}}function ll(i,e,r){const u=i[e];i[e]=i[r],i[r]=u}fn(Vc,"FeaturePositionMap");class Sa{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class Jf extends Sa{constructor(e){super(e),this.current=0}set(e,r,u){this.fetchUniformLocation(e,r)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Jy extends Sa{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,u){this.fetchUniformLocation(e,r)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class Bo extends Sa{constructor(e){super(e),this.current=ei.transparent}set(e,r,u){this.fetchUniformLocation(e,r)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const em=new Float32Array(16),Sg=new Float32Array(9),e_=new Float32Array(4);function oo(i){return[He(255*i.r,255*i.g),He(255*i.b,255*i.a)]}class Ta{constructor(e,r,u){this.value=e,this.uniformNames=r.map(m=>`u_${m}`),this.type=u}setUniform(e,r,u,m,v){r.set(e,v,m.constantOr(this.value))}getBinding(e,r){return"color"===this.type?new Bo(e):new Jf(e)}}class qu{constructor(e,r){this.uniformNames=r.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,u,m,v){const x="u_pattern"===v||"u_dash"===v?this.pattern:"u_pixel_ratio"===v?this.pixelRatio:null;x&&r.set(e,v,x)}getBinding(e,r){return"u_pattern"===r||"u_dash"===r?new Jy(e):new Jf(e)}}class Ma{constructor(e,r,u,m){this.expression=e,this.type=u,this.maxValue=0,this.paintVertexAttributes=r.map(v=>({name:`a_${v}`,type:"Float32",components:"color"===u?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,r,u,m,v,x){const C=this.paintVertexArray.length,I=this.expression.evaluate(new F(0),r,{},v,m,x);this.paintVertexArray.resize(e),this._setPaintValue(C,e,I)}updatePaintArray(e,r,u,m,v){const x=this.expression.evaluate({zoom:0},u,m,void 0,v);this._setPaintValue(e,r,x)}_setPaintValue(e,r,u){if("color"===this.type){const m=oo(u);for(let v=e;v<r;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=e;m<r;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ia{constructor(e,r,u,m,v,x){this.expression=e,this.uniformNames=r.map(C=>`u_${C}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=r.map(C=>({name:`a_${C}`,type:"Float32",components:"color"===u?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(e,r,u,m,v,x){const C=this.expression.evaluate(new F(this.zoom),r,{},v,m,x),I=this.expression.evaluate(new F(this.zoom+1),r,{},v,m,x),D=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(D,e,C,I)}updatePaintArray(e,r,u,m,v){const x=this.expression.evaluate({zoom:this.zoom},u,m,void 0,v),C=this.expression.evaluate({zoom:this.zoom+1},u,m,void 0,v);this._setPaintValue(e,r,x,C)}_setPaintValue(e,r,u,m){if("color"===this.type){const v=oo(u),x=oo(m);for(let C=e;C<r;C++)this.paintVertexArray.emplace(C,v[0],v[1],x[0],x[1])}else{for(let v=e;v<r;v++)this.paintVertexArray.emplace(v,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,u,m,v){const x=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,C=Ze(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);r.set(e,v,C)}getBinding(e,r){return new Jf(e)}}class Da{constructor(e,r,u,m,v){this.expression=e,this.layerId=v,this.paintVertexAttributes=("array"===u?Xs:Ms).members;for(let x=0;x<r.length;++x);this.paintVertexArray=new m}populatePaintArray(e,r,u){const m=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(m,e,r.patterns&&r.patterns[this.layerId],u)}updatePaintArray(e,r,u,m,v,x){this._setPaintValues(e,r,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(e,r,u,m){if(!m||!u)return;const v=m[u];if(!v)return;const{tl:x,br:C,pixelRatio:I}=v;for(let D=e;D<r;D++)this.paintVertexArray.emplace(D,x[0],x[1],C[0],C[1],I)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ka{constructor(e,r,u=(()=>!0)){this.binders={},this._buffers=[];const m=[];for(const v in e.paint._values){if(!u(v))continue;const x=e.paint.get(v);if(!(x instanceof fe&&Tc(x.property.specification)))continue;const C=Tg(v,e.type),I=x.value,D=x.property.specification.type,R=!!x.property.useIntegerZoom,N="line-dasharray"===v||v.endsWith("pattern"),z="line-dasharray"===v&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==I.kind||z)if("source"===I.kind||z||N){const H=Xd(v,D,"source");this.binders[v]=N?new Da(I,C,D,H,e.id):new Ma(I,C,D,H),m.push(`/a_${v}`)}else{const H=Xd(v,D,"composite");this.binders[v]=new Ia(I,C,D,R,r,H),m.push(`/z_${v}`)}else this.binders[v]=N?new qu(I.value,C):new Ta(I.value,C,D),m.push(`/u_${v}`)}this.cacheKey=m.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof Ma||r instanceof Ia?r.maxValue:0}populatePaintArrays(e,r,u,m,v,x){for(const C in this.binders){const I=this.binders[C];(I instanceof Ma||I instanceof Ia||I instanceof Da)&&I.populatePaintArray(e,r,u,m,v,x)}}setConstantPatternPositions(e){for(const r in this.binders){const u=this.binders[r];u instanceof qu&&u.setConstantPatternPositions(e)}}updatePaintArrays(e,r,u,m,v,x){let C=!1;for(const I in e){const D=r.getPositions(I);for(const R of D){const N=u.feature(R.index);for(const z in this.binders){const H=this.binders[z];if((H instanceof Ma||H instanceof Ia||H instanceof Da)&&!0===H.expression.isStateDependent){const $=m.paint.get(z);H.expression=$.value,H.updatePaintArray(R.start,R.end,N,e[I],v,x),C=!0}}}}return C}defines(){const e=[];for(const r in this.binders){const u=this.binders[r];(u instanceof Ta||u instanceof qu)&&e.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const u=this.binders[r];if(u instanceof Ma||u instanceof Ia||u instanceof Da)for(let m=0;m<u.paintVertexAttributes.length;m++)e.push(u.paintVertexAttributes[m].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const u=this.binders[r];if(u instanceof Ta||u instanceof qu||u instanceof Ia)for(const m of u.uniformNames)e.push(m)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof Ta||m instanceof qu||m instanceof Ia)for(const v of m.uniformNames)r.push({name:v,property:u,binding:m.getBinding(e,v)})}return r}setUniforms(e,r,u,m,v){for(const{name:x,property:C,binding:I}of u)this.binders[C].setUniform(e,I,v,m.get(C),x)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof Ma||r instanceof Ia||r instanceof Da)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const u=this.binders[r];(u instanceof Ma||u instanceof Ia||u instanceof Da)&&u.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof Ma||r instanceof Ia||r instanceof Da)&&r.destroy()}}}class Aa{constructor(e,r,u=(()=>!0)){this.programConfigurations={};for(const m of e)this.programConfigurations[m.id]=new ka(m,r,u);this.needsUpload=!1,this._featureMap=new Vc,this._bufferOffset=0}populatePaintArrays(e,r,u,m,v,x,C){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(e,r,m,v,x,C);void 0!==r.id&&this._featureMap.add(r.id,u,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,u,m,v){for(const x of u)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,r,x,m,v)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const tm={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Tg(i,e){return tm[i]||[i.replace(`${e}-`,"").replace(/-/g,"_")]}const Mg={"line-pattern":{source:mt,composite:mt},"fill-pattern":{source:mt,composite:mt},"fill-extrusion-pattern":{source:mt,composite:mt},"line-dasharray":{source:Mt,composite:Mt}},Jl={color:{source:Ts,composite:zt},number:{source:Bi,composite:Ts}};function Xd(i,e,r){const u=Mg[i];return u&&u[r]||Jl[e][r]}fn(Ta,"ConstantBinder"),fn(qu,"PatternConstantBinder"),fn(Ma,"SourceExpressionBinder"),fn(Da,"PatternCompositeBinder"),fn(Ia,"CompositeExpressionBinder"),fn(ka,"ProgramConfiguration",{omit:["_buffers"]}),fn(Aa,"ProgramConfigurationSet");const Zu="-transition";class Pa extends Cu{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new me(r.layout)),r.paint)){this._transitionablePaint=new q(r.paint);for(const u in e.paint)this.setPaintProperty(u,e.paint[u],{validate:!1});for(const u in e.layout)this.setLayoutProperty(u,e.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ve(r.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,u={}){null!=r&&this._validate(bg,`layers.${this.id}.layout.${e}`,e,r,u)||("visibility"!==e?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return Wt(e,Zu)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,u={}){if(null!=r&&this._validate(Kf,`layers.${this.id}.paint.${e}`,e,r,u))return!1;if(Wt(e,Zu))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const m=this._transitionablePaint._values[e],v=m.value.isDataDriven(),x=m.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const C=this._transitionablePaint._values[e].value,I=C.isDataDriven(),D=Wt(e,"pattern")||"line-dasharray"===e;return I||v||D||this._handleOverridablePaintPropertyUpdate(e,x,C)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,u){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Rt(e,(r,u)=>!(void 0===r||"layout"===u&&!Object.keys(r).length||"paint"===u&&!Object.keys(r).length))}_validate(e,r,u,m,v={}){return(!v||!1!==v.validate)&&Gu(this,e.call(Mp,{key:r,layerType:this.type,objectKey:u,value:m,styleSpec:Tt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof fe&&Tc(r.property.specification)&&("source"===r.value.kind||"composite"===r.value.kind)&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ql(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ec=nt([{name:"a_pos",components:2,type:"Int16"}],4),t_=nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Pr{constructor(e=[]){this.segments=e}prepareSegment(e,r,u,m){let v=this.segments[this.segments.length-1];return e>Pr.MAX_VERTEX_ARRAY_LENGTH&&tn(`Max vertices per segment is ${Pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!v||v.vertexLength+e>Pr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:r.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},void 0!==m&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,u,m){return new Pr([{vertexOffset:e,primitiveOffset:r,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}Pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fn(Pr,"SegmentVector");var Sn=8192;class Do{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Fi?new Fi(e.lng,e.lat):Fi.convert(e),this}setSouthWest(e){return this._sw=e instanceof Fi?new Fi(e.lng,e.lat):Fi.convert(e),this}extend(e){const r=this._sw,u=this._ne;let m,v;if(e instanceof Fi)m=e,v=e;else{if(!(e instanceof Do))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Do.convert(e)):this.extend(Fi.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Fi.convert(e)):this;if(m=e._sw,v=e._ne,!m||!v)return this}return r||u?(r.lng=Math.min(m.lng,r.lng),r.lat=Math.min(m.lat,r.lat),u.lng=Math.max(v.lng,u.lng),u.lat=Math.max(v.lat,u.lat)):(this._sw=new Fi(m.lng,m.lat),this._ne=new Fi(v.lng,v.lat)),this}getCenter(){return new Fi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Fi(this.getWest(),this.getNorth())}getSouthEast(){return new Fi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:u}=Fi.convert(e);let m=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}static convert(e){return!e||e instanceof Do?e:new Do(e)}}var Kd=1e-6,Kr=typeof Float32Array<"u"?Float32Array:Array;function Is(){var i=new Kr(9);return Kr!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function tc(i,e,r){var u=e[0],m=e[1],v=e[2],x=e[3],C=e[4],I=e[5],D=e[6],R=e[7],N=e[8],z=r[0],H=r[1],$=r[2],Q=r[3],ae=r[4],be=r[5],Re=r[6],xe=r[7],Ae=r[8];return i[0]=z*u+H*x+$*D,i[1]=z*m+H*C+$*R,i[2]=z*v+H*I+$*N,i[3]=Q*u+ae*x+be*D,i[4]=Q*m+ae*C+be*R,i[5]=Q*v+ae*I+be*N,i[6]=Re*u+xe*x+Ae*D,i[7]=Re*m+xe*C+Ae*R,i[8]=Re*v+xe*I+Ae*N,i}function es(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Pp(i,e){var r=e[0],u=e[1],m=e[2],v=e[3],x=e[4],C=e[5],I=e[6],D=e[7],R=e[8],N=e[9],z=e[10],H=e[11],$=e[12],Q=e[13],ae=e[14],be=e[15],Re=r*C-u*x,xe=r*I-m*x,Ae=r*D-v*x,Ve=u*I-m*C,je=u*D-v*C,_t=m*D-v*I,ft=R*Q-N*$,St=R*ae-z*$,Ht=R*be-H*$,bt=N*ae-z*Q,At=N*be-H*Q,kt=z*be-H*ae,Nt=Re*kt-xe*At+Ae*bt+Ve*Ht-je*St+_t*ft;return Nt?(i[0]=(C*kt-I*At+D*bt)*(Nt=1/Nt),i[1]=(m*At-u*kt-v*bt)*Nt,i[2]=(Q*_t-ae*je+be*Ve)*Nt,i[3]=(z*je-N*_t-H*Ve)*Nt,i[4]=(I*Ht-x*kt-D*St)*Nt,i[5]=(r*kt-m*Ht+v*St)*Nt,i[6]=(ae*Ae-$*_t-be*xe)*Nt,i[7]=(R*_t-z*Ae+H*xe)*Nt,i[8]=(x*At-C*Ht+D*ft)*Nt,i[9]=(u*Ht-r*At-v*ft)*Nt,i[10]=($*je-Q*Ae+be*Re)*Nt,i[11]=(N*Ae-R*je-H*Re)*Nt,i[12]=(C*St-x*bt-I*ft)*Nt,i[13]=(r*bt-u*St+m*ft)*Nt,i[14]=(Q*xe-$*Ve-ae*Re)*Nt,i[15]=(R*Ve-N*xe+z*Re)*Nt,i):null}function nc(i,e,r){var u=e[0],m=e[1],v=e[2],x=e[3],C=e[4],I=e[5],D=e[6],R=e[7],N=e[8],z=e[9],H=e[10],$=e[11],Q=e[12],ae=e[13],be=e[14],Re=e[15],xe=r[0],Ae=r[1],Ve=r[2],je=r[3];return i[0]=xe*u+Ae*C+Ve*N+je*Q,i[1]=xe*m+Ae*I+Ve*z+je*ae,i[2]=xe*v+Ae*D+Ve*H+je*be,i[3]=xe*x+Ae*R+Ve*$+je*Re,i[4]=(xe=r[4])*u+(Ae=r[5])*C+(Ve=r[6])*N+(je=r[7])*Q,i[5]=xe*m+Ae*I+Ve*z+je*ae,i[6]=xe*v+Ae*D+Ve*H+je*be,i[7]=xe*x+Ae*R+Ve*$+je*Re,i[8]=(xe=r[8])*u+(Ae=r[9])*C+(Ve=r[10])*N+(je=r[11])*Q,i[9]=xe*m+Ae*I+Ve*z+je*ae,i[10]=xe*v+Ae*D+Ve*H+je*be,i[11]=xe*x+Ae*R+Ve*$+je*Re,i[12]=(xe=r[12])*u+(Ae=r[13])*C+(Ve=r[14])*N+(je=r[15])*Q,i[13]=xe*m+Ae*I+Ve*z+je*ae,i[14]=xe*v+Ae*D+Ve*H+je*be,i[15]=xe*x+Ae*R+Ve*$+je*Re,i}function Qd(i,e,r){var u,m,v,x,C,I,D,R,N,z,H,$,Q=r[0],ae=r[1],be=r[2];return e===i?(i[12]=e[0]*Q+e[4]*ae+e[8]*be+e[12],i[13]=e[1]*Q+e[5]*ae+e[9]*be+e[13],i[14]=e[2]*Q+e[6]*ae+e[10]*be+e[14],i[15]=e[3]*Q+e[7]*ae+e[11]*be+e[15]):(m=e[1],v=e[2],x=e[3],C=e[4],I=e[5],D=e[6],R=e[7],N=e[8],z=e[9],H=e[10],$=e[11],i[0]=u=e[0],i[1]=m,i[2]=v,i[3]=x,i[4]=C,i[5]=I,i[6]=D,i[7]=R,i[8]=N,i[9]=z,i[10]=H,i[11]=$,i[12]=u*Q+C*ae+N*be+e[12],i[13]=m*Q+I*ae+z*be+e[13],i[14]=v*Q+D*ae+H*be+e[14],i[15]=x*Q+R*ae+$*be+e[15]),i}function Oa(i,e,r){var u=r[0],m=r[1],v=r[2];return i[0]=e[0]*u,i[1]=e[1]*u,i[2]=e[2]*u,i[3]=e[3]*u,i[4]=e[4]*m,i[5]=e[5]*m,i[6]=e[6]*m,i[7]=e[7]*m,i[8]=e[8]*v,i[9]=e[9]*v,i[10]=e[10]*v,i[11]=e[11]*v,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function Jd(i,e,r){var u=Math.sin(r),m=Math.cos(r),v=e[4],x=e[5],C=e[6],I=e[7],D=e[8],R=e[9],N=e[10],z=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=v*m+D*u,i[5]=x*m+R*u,i[6]=C*m+N*u,i[7]=I*m+z*u,i[8]=D*m-v*u,i[9]=R*m-x*u,i[10]=N*m-C*u,i[11]=z*m-I*u,i}function nm(i,e,r){var u=Math.sin(r),m=Math.cos(r),v=e[0],x=e[1],C=e[2],I=e[3],D=e[8],R=e[9],N=e[10],z=e[11];return e!==i&&(i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=v*m-D*u,i[1]=x*m-R*u,i[2]=C*m-N*u,i[3]=I*m-z*u,i[8]=v*u+D*m,i[9]=x*u+R*m,i[10]=C*u+N*m,i[11]=I*u+z*m,i}function im(i,e){return i[0]=e[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Ig(i,e,r){var u,m,v,x=r[0],C=r[1],I=r[2],D=Math.hypot(x,C,I);return D<Kd?null:(x*=D=1/D,C*=D,I*=D,u=Math.sin(e),m=Math.cos(e),i[0]=x*x*(v=1-m)+m,i[1]=C*x*v+I*u,i[2]=I*x*v-C*u,i[3]=0,i[4]=x*C*v-I*u,i[5]=C*C*v+m,i[6]=I*C*v+x*u,i[7]=0,i[8]=x*I*v+C*u,i[9]=C*I*v-x*u,i[10]=I*I*v+m,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var Dg=nc;function rm(){var i=new Kr(3);return Kr!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function zo(i){var e=new Kr(3);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e}function eh(i){return Math.hypot(i[0],i[1],i[2])}function ic(i,e,r){var u=new Kr(3);return u[0]=i,u[1]=e,u[2]=r,u}function Ds(i,e,r){return i[0]=e[0]+r[0],i[1]=e[1]+r[1],i[2]=e[2]+r[2],i}function om(i,e,r){return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],i}function Uc(i,e,r){return i[0]=e[0]*r[0],i[1]=e[1]*r[1],i[2]=e[2]*r[2],i}function th(i,e,r){return i[0]=Math.min(e[0],r[0]),i[1]=Math.min(e[1],r[1]),i[2]=Math.min(e[2],r[2]),i}function Op(i,e,r){return i[0]=Math.max(e[0],r[0]),i[1]=Math.max(e[1],r[1]),i[2]=Math.max(e[2],r[2]),i}function Ks(i,e,r){return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i}function Yu(i,e,r,u){return i[0]=e[0]+r[0]*u,i[1]=e[1]+r[1]*u,i[2]=e[2]+r[2]*u,i}function so(i,e){var r=e[0],u=e[1],m=e[2],v=r*r+u*u+m*m;return v>0&&(v=1/Math.sqrt(v)),i[0]=e[0]*v,i[1]=e[1]*v,i[2]=e[2]*v,i}function Qs(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function sm(i,e,r){var u=e[0],m=e[1],v=e[2],x=r[0],C=r[1],I=r[2];return i[0]=m*I-v*C,i[1]=v*x-u*I,i[2]=u*C-m*x,i}function sr(i,e,r){var u=e[0],m=e[1],v=e[2],x=r[3]*u+r[7]*m+r[11]*v+r[15];return i[0]=(r[0]*u+r[4]*m+r[8]*v+r[12])/(x=x||1),i[1]=(r[1]*u+r[5]*m+r[9]*v+r[13])/x,i[2]=(r[2]*u+r[6]*m+r[10]*v+r[14])/x,i}function nh(i,e,r){var u=r[0],m=r[1],v=r[2],x=e[0],C=e[1],I=e[2],D=m*I-v*C,R=v*x-u*I,N=u*C-m*x,z=m*N-v*R,H=v*D-u*N,$=u*R-m*D,Q=2*r[3];return R*=Q,N*=Q,H*=2,$*=2,i[0]=x+(D*=Q)+(z*=2),i[1]=C+R+H,i[2]=I+N+$,i}var Hc,ks=om,am=Uc,ih=eh;function lm(i,e,r){return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=e[3]*r,i}function cm(i,e){var r=e[0],u=e[1],m=e[2],v=e[3],x=r*r+u*u+m*m+v*v;return x>0&&(x=1/Math.sqrt(x)),i[0]=r*x,i[1]=u*x,i[2]=m*x,i[3]=v*x,i}function rc(i,e,r){var u=e[0],m=e[1],v=e[2],x=e[3];return i[0]=r[0]*u+r[4]*m+r[8]*v+r[12]*x,i[1]=r[1]*u+r[5]*m+r[9]*v+r[13]*x,i[2]=r[2]*u+r[6]*m+r[10]*v+r[14]*x,i[3]=r[3]*u+r[7]*m+r[11]*v+r[15]*x,i}function um(){var i=new Kr(4);return Kr!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function rh(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function n_(i,e,r){r*=.5;var u=e[0],m=e[1],v=e[2],x=e[3],C=Math.sin(r),I=Math.cos(r);return i[0]=u*I+x*C,i[1]=m*I+v*C,i[2]=v*I-m*C,i[3]=x*I-u*C,i}function kg(i,e,r){r*=.5;var u=e[0],m=e[1],v=e[2],x=e[3],C=Math.sin(r),I=Math.cos(r);return i[0]=u*I-v*C,i[1]=m*I+x*C,i[2]=v*I+u*C,i[3]=x*I-m*C,i}rm(),Hc=new Kr(4),Kr!=Float32Array&&(Hc[0]=0,Hc[1]=0,Hc[2]=0,Hc[3]=0);var Xu=cm;rm(),ic(1,0,0),ic(0,1,0),um(),um(),Is();const Ag=nt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:dm}=Ag,oh=nt([{name:"a_pos_3",components:3,type:"Int16"}]);var sh=nt([{name:"a_pos",type:"Int16",components:2}]);class ah{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,u){const m=Qs(r,this.dir);if(Math.abs(m)<1e-6)return!1;const v=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/m;return u[0]=this.pos[0]+this.dir[0]*v,u[1]=this.pos[1]+this.dir[1]*v,u[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(e,r,u){if(Q=(H=this.pos)[0],ae=H[1],be=H[2],Re=($=e)[0],xe=$[1],Ae=$[2],Math.abs(Q-Re)<=Kd*Math.max(1,Math.abs(Q),Math.abs(Re))&&Math.abs(ae-xe)<=Kd*Math.max(1,Math.abs(ae),Math.abs(xe))&&Math.abs(be-Ae)<=Kd*Math.max(1,Math.abs(be),Math.abs(Ae))||0===r)return u[0]=u[1]=u[2]=0,!1;var H,$,Q,ae,be,Re,xe,Ae;const[m,v,x]=this.dir,C=this.pos[0]-e[0],I=this.pos[1]-e[1],D=this.pos[2]-e[2],R=m*m+v*v+x*x,N=2*(C*m+I*v+D*x),z=N*N-4*R*(C*C+I*I+D*D-r*r);if(z<0){const H=Math.max(-N/2,0),$=C+m*H,Q=I+v*H,ae=D+x*H,be=Math.hypot($,Q,ae);return u[0]=$*r/be,u[1]=Q*r/be,u[2]=ae*r/be,!1}{const H=(-N-Math.sqrt(z))/(2*R);if(H<0){const $=Math.hypot(C,I,D);return u[0]=C*r/$,u[1]=I*r/$,u[2]=D*r/$,!1}return u[0]=C+m*H,u[1]=I+v*H,u[2]=D+x*H,!0}}}class Rp{constructor(e,r,u,m,v){this.TL=e,this.TR=r,this.BR=u,this.BL=m,this.horizon=v}static fromInvProjectionMatrix(e,r,u){const m=[-1,1,1],v=[1,1,1],x=[1,-1,1],C=[-1,-1,1],I=sr(m,m,e),D=sr(v,v,e),R=sr(x,x,e),N=sr(C,C,e);return new Rp(I,D,R,N,r/u)}}class $c{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,u,m){const v=Math.pow(2,u),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const D=rc([],I,e),R=1/D[3]/r*v;return(N=D)[0]=(z=D)[0]*(H=[R,R,m?1/D[3]:R,R])[0],N[1]=z[1]*H[1],N[2]=z[2]*H[2],N[3]=z[3]*H[3],N;var N,z,H}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const D=so([],sm([],ks([],x[I[0]],x[I[1]]),ks([],x[I[2]],x[I[1]]))),R=-Qs(D,x[I[1]]);return D.concat(R)});return new $c(x,C)}}class jo{static fromPoints(e){const r=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const m of e)th(r,r,m),Op(u,u,m);return new jo(r,u)}static applyTransform(e,r){const u=e.getCorners();for(let m=0;m<u.length;++m)sr(u[m],u[m],r);return jo.fromPoints(u)}constructor(e,r){this.min=e,this.max=r,this.center=Ks([],Ds([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],u=zo(this.min),m=zo(this.max);for(let v=0;v<r.length;v++)u[v]=r[v]?this.min[v]:this.center[v],m[v]=r[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new jo(u,m)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let u=!0;for(let m=0;m<e.planes.length;m++){const v=e.planes[m];let x=0;for(let C=0;C<r.length;C++)x+=Qs(v,r[C])+v[3]>=0;if(0===x)return 0;x!==r.length&&(u=!1)}if(u)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let C=0;C<e.points.length;C++){const I=e.points[C][m]-this.min[m];v=Math.min(v,I),x=Math.max(x,I)}if(x<0||v>this.max[m]-this.min[m])return 0}return 1}}const Lp=5,Mv=6,hs=Sn/Math.PI/2,Fp=16383,lh=[64,32,16],Vo=-hs,ps=hs,Iv=[new jo([Vo,Vo,Vo],[ps,ps,ps]),new jo([Vo,Vo,Vo],[0,0,ps]),new jo([0,Vo,Vo],[ps,0,ps]),new jo([Vo,0,Vo],[0,ps,ps]),new jo([0,0,Vo],[ps,ps,ps])];function Ku(i){return i*hs/ph}function i_(i,e,r,u=!0){const m=Ks([],i._camera.position,i.worldSize),v=[e,r,1,1];rc(v,v,i.pixelMatrixInverse),lm(v,v,1/v[3]);const x=so([],ks([],v,m)),C=i.globeMatrix,I=[C[12],C[13],C[14]],D=ks([],I,m),R=eh(D),N=so([],D),z=i.worldSize/(2*Math.PI),H=Qs(N,x),$=Math.asin(z/R);if($<Math.acos(H)){if(!u)return null;const Ht=[],bt=[];Ks(Ht,x,R/H),so(bt,ks(bt,Ht,D)),so(x,Ds(x,D,Ks(x,bt,Math.tan($)*R)))}const Q=[];new ah(m,x).closestPointOnSphere(I,z,Q);const ae=so([],cr(C,0)),be=so([],cr(C,1)),Re=so([],cr(C,2)),xe=Qs(ae,Q),Ae=Qs(be,Q),Ve=Qs(Re,Q),je=ce(Math.asin(-Ae/z));let _t=ce(Math.atan2(xe,Ve));_t=i.center.lng+function(Ht,bt){const At=(bt-Ht+180)%360-180;return At<-180?At+360:At}(i.center.lng,_t);const ft=Js(_t),St=Ze(ea(je),0,1);return new Ju(ft,St)}class Qu{constructor(e,r,u){this.a=ks([],e,u),this.b=ks([],r,u),this.center=u;const m=so([],this.a),v=so([],this.b);this.angle=Math.acos(Qs(m,v))}}function Pg(i,e){if(0===i.angle)return null;let r;return r=0===i.a[e]?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[e]/i.a[e]/Math.sin(i.angle)-1/Math.tan(i.angle)),r<0||r>1?null:function(u,m,v,x){const C=Math.sin(v);return u*(Math.sin((1-x)*v)/C)+m*(Math.sin(x*v)/C)}(i.a[e],i.b[e],i.angle,Ze(r,0,1))+i.center[e]}function Ra(i){if(i.z<=1)return Iv[i.z+2*i.y+i.x];const e=hm(ac(i));return jo.fromPoints(e)}function oc(i,e,r){return Ks(i,i,1-r),Yu(i,i,e,r)}function Og(i,e){const r=Gc(e.zoom);if(0===r)return Ra(i);const u=ac(i),m=hm(u),v=Js(u.getWest())*e.worldSize,x=Js(u.getEast())*e.worldSize,C=ea(u.getNorth())*e.worldSize,I=ea(u.getSouth())*e.worldSize,D=[v,C,0],R=[x,C,0],N=[v,I,0],z=[x,I,0],H=Pp([],e.globeMatrix);return sr(D,D,H),sr(R,R,H),sr(N,N,H),sr(z,z,H),m[0]=oc(m[0],N,r),m[1]=oc(m[1],z,r),m[2]=oc(m[2],R,r),m[3]=oc(m[3],D,r),jo.fromPoints(m)}function Dv(i,e,r){for(const u of i)sr(u,u,e),Ks(u,u,r)}function ac({x:i,y:e,z:r}){const u=1/(1<<r),m=new Fi(na(i*u),ao((e+1)*u)),v=new Fi(na((i+1)*u),ao(e*u));return new Do(m,v)}function hm(i){const e=K(i.getNorth()),r=K(i.getSouth()),u=Math.cos(e),m=Math.cos(r),v=Math.sin(e),x=Math.sin(r),C=i.getWest(),I=i.getEast();return[ch(m,x,C),ch(m,x,I),ch(u,v,I),ch(u,v,C)]}function ch(i,e,r,u=hs){return r=K(r),[i*Math.sin(r)*u,-e*u,i*Math.cos(r)*u]}function uh(i,e,r){return ch(Math.cos(K(i)),Math.sin(K(i)),e,r)}function Np(i,e,r,u){const m=1<<r.z,v=(i/Sn+r.x)/m;return uh(ao((e/Sn+r.y)/m),na(v),u)}function Bp({min:i,max:e}){return Fp/Math.max(e[0]-i[0],e[1]-i[1],e[2]-i[2])}const r_=new Float64Array(16);function dh(i){const e=Bp(i),r=im(r_,[e,e,e]);return Qd(r,r,((u=[])[0]=-(m=i.min)[0],u[1]=-m[1],u[2]=-m[2],u));var u,m}function pm(i){const e=(u=i.min,(r=r_)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=u[0],r[13]=u[1],r[14]=u[2],r[15]=1,r);var r,u;const m=1/Bp(i);return Oa(e,e,[m,m,m])}function o_(i,e,r,u,m){const v=function(I){const D=Sn/(2*Math.PI);return I/(2*Math.PI)/D}(r),x=[i,e,-r/(2*Math.PI)],C=es(new Float64Array(16));return Qd(C,C,x),Oa(C,C,[v,v,v]),Jd(C,C,K(-m)),nm(C,C,K(-u)),C}function Gc(i){return Fe(Lp,Mv,i)}function s_(i,e){const r=uh(e.lat,e.lng);return x=(m=om([],function($){const Q=uh($._center.lat,$._center.lng);let ae=sm([],ic(0,1,0),Q);const be=Ig([],-$.angle,Q);ae=sr(ae,ae,be),Ig(be,-$._pitch,ae);const Re=so([],Q);return Ks(Re,Re,Ku($.cameraToCenterDistance/$.pixelsPerMeter)),sr(Re,Re,be),Ds([],Q,Re)}(i),r))[0],C=m[1],I=m[2],D=(v=r)[0],R=v[1],N=v[2],H=(z=Math.sqrt(x*x+C*C+I*I)*Math.sqrt(D*D+R*R+N*N))&&Qs(m,v)/z,Math.acos(Math.min(Math.max(H,-1),1));var m,v,x,C,I,D,R,N,z,H}function hh(i,e){return s_(i,e)>Math.PI/2*1.01}const ul=K(85),zp=Math.cos(ul),Rg=Math.sin(ul),ph=6371008.8,fs=2*Math.PI*ph;class lc{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new lc(ze(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,u=this.lat*r,m=e.lat*r,v=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((e.lng-this.lng)*r);return ph*Math.acos(Math.min(v,1))}toBounds(e=0){const r=360*e/40075017,u=r/Math.cos(Math.PI/180*this.lat);return new Do(new lc(this.lng-u,this.lat-r),new lc(this.lng+u,this.lat+r))}toEcef(e){const r=Ku(e);return uh(this.lat,this.lng,hs+r)}static convert(e){if(e instanceof lc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new lc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new lc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Fi=lc;function fm(i){return fs*Math.cos(i*Math.PI/180)}function Js(i){return(180+i)/360}function ea(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function ta(i,e){return i/fm(e)}function na(i){return 360*i-180}function ao(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function jp(i,e){return i*fm(ao(e))}const fo=85.051129;function Lg(i){return 1/Math.cos(i*Math.PI/180)}class Ju{constructor(e,r,u=0){this.x=+e,this.y=+r,this.z=+u}static fromLngLat(e,r=0){const u=Fi.convert(e);return new Ju(Js(u.lng),ea(u.lat),ta(r,u.lat))}toLngLat(){return new Fi(na(this.x),ao(this.y))}toAltitude(){return jp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fs*Lg(ao(this.y))}}function Vp(i,e,r,u,m,v,x,C,I){const D=(e+u)/2,R=(r+m)/2,N=new Y(D,R);C(N),function(z,H,$,Q,ae,be){const Re=$-ae,xe=Q-be;return Math.abs((Q-H)*Re-($-z)*xe)/Math.hypot(Re,xe)}(N.x,N.y,v.x,v.y,x.x,x.y)>=I?(Vp(i,e,r,D,R,v,N,C,I),Vp(i,D,R,u,m,N,x,C,I)):i.push(x)}function Uo(i,e,r){let u=i[0],m=u.x,v=u.y;e(u);const x=[u];for(let C=1;C<i.length;C++){const I=i[C],{x:D,y:R}=I;e(I),Vp(x,m,v,D,R,u,I,e,r),m=D,v=R,u=I}return x}function cc(i,e,r,u){if(u(e,r)){const m=e.add(r)._mult(.5);cc(i,e,m,u),cc(i,m,r,u)}else i.push(r)}function Fg(i,e){let r=i[0];const u=[r];for(let m=1;m<i.length;m++){const v=i[m];cc(u,r,v,e),r=v}return u}const Ng=Math.pow(2,14)-1,Or=-Ng-1;function a_(i,e){const r=Math.round(i.x*e),u=Math.round(i.y*e);return i.x=Ze(r,Or,Ng),i.y=Ze(u,Or,Ng),(r<i.x||r>i.x+1||u<i.y||u>i.y+1)&&tn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function La(i,e,r){const u=i.loadGeometry(),m=i.extent,v=Sn/m;if(e&&r&&r.projection.isReprojectedInTileSpace){const x=1<<e.z,{scale:C,x:I,y:D,projection:R}=r,N=z=>{const H=na((e.x+z.x/m)/x),$=ao((e.y+z.y/m)/x),Q=R.project(H,$);z.x=(Q.x*C-I)*m,z.y=(Q.y*C-D)*m};for(let z=0;z<u.length;z++)if(1!==i.type)u[z]=Uo(u[z],N,1);else{const H=[];for(const $ of u[z])$.x<0||$.x>=m||$.y<0||$.y>=m||(N($),H.push($));u[z]=H}}for(const x of u)for(const C of x)a_(C,v);return u}function ia(i,e){return{type:i.type,id:i.id,properties:i.properties,geometry:e?La(i):[]}}function fh(i,e,r,u,m){i.emplaceBack(2*e+(u+1)/2,2*r+(m+1)/2)}function Up(i,e,r){i.emplaceBack(e.x,e.y,e.z,16384*r[0],16384*r[1],16384*r[2])}class mh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Ut,this.indexArray=new bn,this.segments=new Pr,this.programConfigurations=new Aa(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,u,m){const v=this.layers[0],x=[];let C=null;"circle"===v.type&&(C=v.layout.get("circle-sort-key"));for(const{feature:D,id:R,index:N,sourceLayerIndex:z}of e){const H=this.layers[0]._featureFilter.needGeometry,$=ia(D,H);if(!this.layers[0]._featureFilter.filter(new F(this.zoom),$,u))continue;const Q=C?C.evaluate($,{},u):void 0,ae={id:R,properties:D.properties,type:D.type,sourceLayerIndex:z,index:N,geometry:H?$.geometry:La(D,u,m),patterns:{},sortKey:Q};x.push(ae)}C&&x.sort((D,R)=>D.sortKey-R.sortKey);let I=null;"globe"===m.projection.name&&(this.globeExtVertexArray=new jt,I=m.projection);for(const D of x){const{geometry:R,index:N,sourceLayerIndex:z}=D,H=e[N].feature;this.addFeature(D,R,N,r.availableImages,u,I),r.featureIndex.insert(H,R,N,z,this.index)}}update(e,r,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ec.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,t_.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,u,m,v,x){for(const C of r)for(const I of C){const D=I.x,R=I.y;if(D<0||D>=Sn||R<0||R>=Sn)continue;if(x){const H=x.projectTilePoint(D,R,v),$=x.upVector(v,D,R),Q=this.globeExtVertexArray;Up(Q,H,$),Up(Q,H,$),Up(Q,H,$),Up(Q,H,$)}const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),z=N.vertexLength;fh(this.layoutVertexArray,D,R,-1,-1),fh(this.layoutVertexArray,D,R,1,-1),fh(this.layoutVertexArray,D,R,1,1),fh(this.layoutVertexArray,D,R,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,u,{},m,v)}}function Bg(i,e){for(let r=0;r<i.length;r++)if(Wc(e,i[r]))return!0;for(let r=0;r<e.length;r++)if(Wc(i,e[r]))return!0;return!!c_(i,e)}function l_(i,e,r){return!!Wc(i,e)||!!gh(e,i,r)}function zg(i,e){if(1===i.length)return mm(e,i[0]);for(let r=0;r<e.length;r++){const u=e[r];for(let m=0;m<u.length;m++)if(Wc(i,u[m]))return!0}for(let r=0;r<i.length;r++)if(mm(e,i[r]))return!0;for(let r=0;r<e.length;r++)if(c_(i,e[r]))return!0;return!1}function Q0(i,e,r){if(i.length>1){if(c_(i,e))return!0;for(let u=0;u<e.length;u++)if(gh(e[u],i,r))return!0}for(let u=0;u<i.length;u++)if(gh(i[u],e,r))return!0;return!1}function c_(i,e){if(0===i.length||0===e.length)return!1;for(let r=0;r<i.length-1;r++){const u=i[r],m=i[r+1];for(let v=0;v<e.length-1;v++)if(Hp(u,m,e[v],e[v+1]))return!0}return!1}function Hp(i,e,r,u){return Ln(i,r,u)!==Ln(e,r,u)&&Ln(i,e,r)!==Ln(i,e,u)}function gh(i,e,r){const u=r*r;if(1===e.length)return i.distSqr(e[0])<u;for(let m=1;m<e.length;m++)if(ed(i,e[m-1],e[m])<u)return!0;return!1}function ed(i,e,r){const u=e.distSqr(r);if(0===u)return i.distSqr(e);const m=((i.x-e.x)*(r.x-e.x)+(i.y-e.y)*(r.y-e.y))/u;return i.distSqr(m<0?e:m>1?r:r.sub(e)._mult(m)._add(e))}function mm(i,e){let r,u,m,v=!1;for(let x=0;x<i.length;x++){r=i[x];for(let C=0,I=r.length-1;C<r.length;I=C++)u=r[C],m=r[I],u.y>e.y!=m.y>e.y&&e.x<(m.x-u.x)*(e.y-u.y)/(m.y-u.y)+u.x&&(v=!v)}return v}function Wc(i,e){let r=!1;for(let u=0,m=i.length-1;u<i.length;m=u++){const v=i[u],x=i[m];v.y>e.y!=x.y>e.y&&e.x<(x.x-v.x)*(e.y-v.y)/(x.y-v.y)+v.x&&(r=!r)}return r}function jg(i,e,r,u,m){for(const x of i)if(e<=x.x&&r<=x.y&&u>=x.x&&m>=x.y)return!0;const v=[new Y(e,r),new Y(e,m),new Y(u,m),new Y(u,r)];if(i.length>2)for(const x of v)if(Wc(i,x))return!0;for(let x=0;x<i.length-1;x++)if(u_(i[x],i[x+1],v))return!0;return!1}function u_(i,e,r){const u=r[0],m=r[2];if(i.x<u.x&&e.x<u.x||i.x>m.x&&e.x>m.x||i.y<u.y&&e.y<u.y||i.y>m.y&&e.y>m.y)return!1;const v=Ln(i,e,r[0]);return v!==Ln(i,e,r[1])||v!==Ln(i,e,r[2])||v!==Ln(i,e,r[3])}function td(i,e,r){const u=e.paint.get(i).value;return"constant"===u.kind?u.value:r.programConfigurations.get(e.id).getMaxValue(i)}function $p(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function gm(i,e,r,u,m){if(!e[0]&&!e[1])return i;const v=Y.convert(e)._mult(m);"viewport"===r&&v._rotate(-u);const x=[];for(let C=0;C<i.length;C++)x.push(i[C].sub(v));return x}function kv(i,e,r,u){const m=Y.convert(i)._mult(u);return"viewport"===e&&m._rotate(-r),m}fn(mh,"CircleBucket",{omit:["layers"]});const Vg=new Ce({"circle-sort-key":new de(Tt.layout_circle["circle-sort-key"])});var d_={paint:new Ce({"circle-radius":new de(Tt.paint_circle["circle-radius"]),"circle-color":new de(Tt.paint_circle["circle-color"]),"circle-blur":new de(Tt.paint_circle["circle-blur"]),"circle-opacity":new de(Tt.paint_circle["circle-opacity"]),"circle-translate":new X(Tt.paint_circle["circle-translate"]),"circle-translate-anchor":new X(Tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new X(Tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new X(Tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new de(Tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new de(Tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new de(Tt.paint_circle["circle-stroke-opacity"])}),layout:Vg};function yh(i,e,r,u,m,v,x,C,I){if(v&&i.queryGeometry.isAboveHorizon)return!1;v&&(I*=i.pixelToTileUnitsFactor);const D=i.tileID.canonical,R=r.projection.upVectorScale(D,r.center.lat,r.worldSize).metersToTile;for(const N of e)for(const z of N){const H=z.add(C),$=m&&r.elevation?r.elevation.exaggeration()*m.getElevationAt(H.x,H.y,!0):0,Q=r.projection.projectTilePoint(H.x,H.y,D);if($>0){const xe=r.projection.upVector(D,H.x,H.y);Q.x+=xe[0]*R*$,Q.y+=xe[1]*R*$,Q.z+=xe[2]*R*$}const ae=v?H:Ug(Q.x,Q.y,Q.z,u),be=v?i.tilespaceRays.map(xe=>J0(xe,$)):i.queryGeometry.screenGeometry,Re=rc([],[Q.x,Q.y,Q.z,1],u);if(!x&&v?I*=Re[3]/r.cameraToCenterDistance:x&&!v&&(I*=r.cameraToCenterDistance/Re[3]),v){const xe=ao((z.y/Sn+D.y)/(1<<D.z));I/=r.projection.pixelsPerMeter(xe,1)/ta(1,xe)}if(l_(be,ae,I))return!0}return!1}function Ug(i,e,r,u){const m=rc([],[i,e,r,1],u);return new Y(m[0]/m[3],m[1]/m[3])}const Hg=ic(0,0,0),_h=ic(0,0,1);function J0(i,e){const r=rm();return Hg[2]=e,i.intersectsPlane(Hg,_h,r),new Y(r[0],r[1])}class $g extends mh{}function Rr(i,{width:e,height:r},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==e*r*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(e*r*u);return i.width=e,i.height=r,i.data=m,i}function nd(i,e,r){const{width:u,height:m}=e;u===i.width&&m===i.height||(Rn(i,e,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,u),height:Math.min(i.height,m)},r),i.width=u,i.height=m,i.data=e.data)}function Rn(i,e,r,u,m,v){if(0===m.width||0===m.height)return e;if(m.width>i.width||m.height>i.height||r.x>i.width-m.width||r.y>i.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>e.width||m.height>e.height||u.x>e.width-m.width||u.y>e.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,C=e.data;for(let I=0;I<m.height;I++){const D=((r.y+I)*i.width+r.x)*v,R=((u.y+I)*e.width+u.x)*v;for(let N=0;N<m.width*v;N++)C[R+N]=x[D+N]}return e}fn($g,"HeatmapBucket",{omit:["layers"]});class lo{constructor(e,r){Rr(this,e,1,r)}resize(e){nd(this,new lo(e),1)}clone(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,u,m,v){Rn(e,r,u,m,v,1)}}class Xi{constructor(e,r){Rr(this,e,4,r)}resize(e){nd(this,new Xi(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Xi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,u,m,v){Rn(e,r,u,m,v,4)}}fn(lo,"AlphaImage"),fn(Xi,"RGBAImage");var h_={paint:new Ce({"heatmap-radius":new de(Tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new de(Tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new X(Tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new we(Tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new X(Tt.paint_heatmap["heatmap-opacity"])})};function qc(i){const e={},r=i.resolution||256,u=i.clips?i.clips.length:1,m=i.image||new Xi({width:r,height:u}),v=(x,C,I)=>{e[i.evaluationKey]=I;const D=i.expression.evaluate(e);m.data[x+C+0]=Math.floor(255*D.r/D.a),m.data[x+C+1]=Math.floor(255*D.g/D.a),m.data[x+C+2]=Math.floor(255*D.b/D.a),m.data[x+C+3]=Math.floor(255*D.a)};if(i.clips)for(let x=0,C=0;x<u;++x,C+=4*r)for(let I=0,D=0;I<r;I++,D+=4){const R=I/(r-1),{start:N,end:z}=i.clips[x];v(C,D,N*(1-R)+z*R)}else for(let x=0,C=0;x<r;x++,C+=4)v(0,C,x/(r-1));return m}var id={paint:new Ce({"hillshade-illumination-direction":new X(Tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new X(Tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new X(Tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new X(Tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new X(Tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new X(Tt.paint_hillshade["hillshade-accent-color"])})};const Av=nt([{name:"a_pos",components:2,type:"Int16"}],4),{members:p_}=Av;var Zc={exports:{}};function ym(i,e,r){r=r||2;var u,m,v,x,C,I,D,R=e&&e.length,N=R?e[0]*r:i.length,z=Gg(i,0,N,r,!0),H=[];if(!z||z.next===z.prev)return H;if(R&&(z=function(Q,ae,be,Re){var xe,Ae,Ve,je=[];for(xe=0,Ae=ae.length;xe<Ae;xe++)(Ve=Gg(Q,ae[xe]*Re,xe<Ae-1?ae[xe+1]*Re:Q.length,Re,!1))===Ve.next&&(Ve.steiner=!0),je.push(vh(Ve));for(je.sort(Ov),xe=0;xe<je.length;xe++)be=Ho(je[xe],be);return be}(i,e,z,r)),i.length>80*r){u=v=i[0],m=x=i[1];for(var $=r;$<N;$+=r)(C=i[$])<u&&(u=C),(I=i[$+1])<m&&(m=I),C>v&&(v=C),I>x&&(x=I);D=0!==(D=Math.max(v-u,x-m))?32767/D:0}return Fa(z,H,r,u,m,D,0),H}function Gg(i,e,r,u,m){var v,x;if(m===uc(i,e,r,u)>0)for(v=e;v<r;v+=u)x=Ba(v,i[v],i[v+1],x);else for(v=r-u;v>=e;v-=u)x=Ba(v,i[v],i[v+1],x);return x&&bh(x,x.next)&&(Eh(x),x=x.next),x}function rd(i,e){if(!i)return i;e||(e=i);var r,u=i;do{if(r=!1,u.steiner||!bh(u,u.next)&&0!==Ir(u.prev,u,u.next))u=u.next;else{if(Eh(u),(u=e=u.prev)===u.next)break;r=!0}}while(r||u!==e);return e}function Fa(i,e,r,u,m,v,x){if(i){!x&&v&&function(R,N,z,H){var $=R;do{0===$.z&&($.z=vm($.x,$.y,N,z,H)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next}while($!==R);$.prevZ.nextZ=null,$.prevZ=null,function(Q){var ae,be,Re,xe,Ae,Ve,je,_t,ft=1;do{for(be=Q,Q=null,Ae=null,Ve=0;be;){for(Ve++,Re=be,je=0,ae=0;ae<ft&&(je++,Re=Re.nextZ);ae++);for(_t=ft;je>0||_t>0&&Re;)0!==je&&(0===_t||!Re||be.z<=Re.z)?(xe=be,be=be.nextZ,je--):(xe=Re,Re=Re.nextZ,_t--),Ae?Ae.nextZ=xe:Q=xe,xe.prevZ=Ae,Ae=xe;be=Re}Ae.nextZ=null,ft*=2}while(Ve>1)}($)}(i,u,m,v);for(var C,I,D=i;i.prev!==i.next;)if(C=i.prev,I=i.next,v?_m(i,u,m,v):gi(i))e.push(C.i/r|0),e.push(i.i/r|0),e.push(I.i/r|0),Eh(i),i=I.next,D=I.next;else if((i=I)===D){x?1===x?Fa(i=Pv(rd(i),e,r),e,r,u,m,v,2):2===x&&Wg(i,e,r,u,m,v):Fa(rd(i),e,r,u,m,v,1);break}}}function gi(i){var e=i.prev,r=i,u=i.next;if(Ir(e,r,u)>=0)return!1;for(var m=e.x,v=r.x,x=u.x,C=e.y,I=r.y,D=u.y,R=m<v?m<x?m:x:v<x?v:x,N=C<I?C<D?C:D:I<D?I:D,z=m>v?m>x?m:x:v>x?v:x,H=C>I?C>D?C:D:I>D?I:D,$=u.next;$!==e;){if($.x>=R&&$.x<=z&&$.y>=N&&$.y<=H&&Na(m,C,v,I,x,D,$.x,$.y)&&Ir($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function _m(i,e,r,u){var m=i.prev,v=i,x=i.next;if(Ir(m,v,x)>=0)return!1;for(var C=m.x,I=v.x,D=x.x,R=m.y,N=v.y,z=x.y,H=C<I?C<D?C:D:I<D?I:D,$=R<N?R<z?R:z:N<z?N:z,Q=C>I?C>D?C:D:I>D?I:D,ae=R>N?R>z?R:z:N>z?N:z,be=vm(H,$,e,r,u),Re=vm(Q,ae,e,r,u),xe=i.prevZ,Ae=i.nextZ;xe&&xe.z>=be&&Ae&&Ae.z<=Re;){if(xe.x>=H&&xe.x<=Q&&xe.y>=$&&xe.y<=ae&&xe!==m&&xe!==x&&Na(C,R,I,N,D,z,xe.x,xe.y)&&Ir(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Ae.x>=H&&Ae.x<=Q&&Ae.y>=$&&Ae.y<=ae&&Ae!==m&&Ae!==x&&Na(C,R,I,N,D,z,Ae.x,Ae.y)&&Ir(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;xe&&xe.z>=be;){if(xe.x>=H&&xe.x<=Q&&xe.y>=$&&xe.y<=ae&&xe!==m&&xe!==x&&Na(C,R,I,N,D,z,xe.x,xe.y)&&Ir(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Ae&&Ae.z<=Re;){if(Ae.x>=H&&Ae.x<=Q&&Ae.y>=$&&Ae.y<=ae&&Ae!==m&&Ae!==x&&Na(C,R,I,N,D,z,Ae.x,Ae.y)&&Ir(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function Pv(i,e,r){var u=i;do{var m=u.prev,v=u.next.next;!bh(m,v)&&xh(m,u,u.next,v)&&Yc(m,v)&&Yc(v,m)&&(e.push(m.i/r|0),e.push(u.i/r|0),e.push(v.i/r|0),Eh(u),Eh(u.next),u=i=v),u=u.next}while(u!==i);return rd(u)}function Wg(i,e,r,u,m,v){var x=i;do{for(var C=x.next.next;C!==x.prev;){if(x.i!==C.i&&Wp(x,C)){var I=dl(x,C);return x=rd(x,x.next),I=rd(I,I.next),Fa(x,e,r,u,m,v,0),void Fa(I,e,r,u,m,v,0)}C=C.next}x=x.next}while(x!==i)}function Ov(i,e){return i.x-e.x}function Ho(i,e){var r=function(m,v){var x,C=v,I=m.x,D=m.y,R=-1/0;do{if(D<=C.y&&D>=C.next.y&&C.next.y!==C.y){var N=C.x+(D-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(N<=I&&N>R&&(R=N,x=C.x<C.next.x?C:C.next,N===I))return x}C=C.next}while(C!==v);if(!x)return null;var z,H=x,$=x.x,Q=x.y,ae=1/0;C=x;do{I>=C.x&&C.x>=$&&I!==C.x&&Na(D<Q?I:R,D,$,Q,D<Q?R:I,D,C.x,C.y)&&(z=Math.abs(D-C.y)/(I-C.x),Yc(C,m)&&(z<ae||z===ae&&(C.x>x.x||C.x===x.x&&Gp(x,C)))&&(x=C,ae=z)),C=C.next}while(C!==H);return x}(i,e);if(!r)return e;var u=dl(r,i);return rd(u,u.next),rd(r,r.next)}function Gp(i,e){return Ir(i.prev,i,e.prev)<0&&Ir(e.next,i,i.next)<0}function vm(i,e,r,u,m){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-r)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-u)*m|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function vh(i){var e=i,r=i;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==i);return r}function Na(i,e,r,u,m,v,x,C){return(m-x)*(e-C)>=(i-x)*(v-C)&&(i-x)*(u-C)>=(r-x)*(e-C)&&(r-x)*(v-C)>=(m-x)*(u-C)}function Wp(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(r,u){var m=r;do{if(m.i!==r.i&&m.next.i!==r.i&&m.i!==u.i&&m.next.i!==u.i&&xh(m,m.next,r,u))return!0;m=m.next}while(m!==r);return!1}(i,e)&&(Yc(i,e)&&Yc(e,i)&&function(r,u){var m=r,v=!1,x=(r.x+u.x)/2,C=(r.y+u.y)/2;do{m.y>C!=m.next.y>C&&m.next.y!==m.y&&x<(m.next.x-m.x)*(C-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next}while(m!==r);return v}(i,e)&&(Ir(i.prev,i,e.prev)||Ir(i,e.prev,e))||bh(i,e)&&Ir(i.prev,i,i.next)>0&&Ir(e.prev,e,e.next)>0)}function Ir(i,e,r){return(e.y-i.y)*(r.x-e.x)-(e.x-i.x)*(r.y-e.y)}function bh(i,e){return i.x===e.x&&i.y===e.y}function xh(i,e,r,u){var m=qp(Ir(i,e,r)),v=qp(Ir(i,e,u)),x=qp(Ir(r,u,i)),C=qp(Ir(r,u,e));return m!==v&&x!==C||!(0!==m||!wh(i,r,e))||!(0!==v||!wh(i,u,e))||!(0!==x||!wh(r,i,u))||!(0!==C||!wh(r,e,u))}function wh(i,e,r){return e.x<=Math.max(i.x,r.x)&&e.x>=Math.min(i.x,r.x)&&e.y<=Math.max(i.y,r.y)&&e.y>=Math.min(i.y,r.y)}function qp(i){return i>0?1:i<0?-1:0}function Yc(i,e){return Ir(i.prev,i,i.next)<0?Ir(i,e,i.next)>=0&&Ir(i,i.prev,e)>=0:Ir(i,e,i.prev)<0||Ir(i,i.next,e)<0}function dl(i,e){var r=new co(i.i,i.x,i.y),u=new co(e.i,e.x,e.y),m=i.next,v=e.prev;return i.next=e,e.prev=i,r.next=m,m.prev=r,u.next=r,r.prev=u,v.next=u,u.prev=v,u}function Ba(i,e,r,u){var m=new co(i,e,r);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function Eh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function co(i,e,r){this.i=i,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uc(i,e,r,u){for(var m=0,v=e,x=r-u;v<r;v+=u)m+=(i[x]-i[v])*(i[v+1]+i[x+1]),x=v;return m}Zc.exports=ym,Zc.exports.default=ym,ym.deviation=function(i,e,r,u){var m=e&&e.length,v=Math.abs(uc(i,0,m?e[0]*r:i.length,r));if(m)for(var x=0,C=e.length;x<C;x++)v-=Math.abs(uc(i,e[x]*r,x<C-1?e[x+1]*r:i.length,r));var I=0;for(x=0;x<u.length;x+=3){var D=u[x]*r,R=u[x+1]*r,N=u[x+2]*r;I+=Math.abs((i[D]-i[N])*(i[R+1]-i[D+1])-(i[D]-i[R])*(i[N+1]-i[D+1]))}return 0===v&&0===I?0:Math.abs((I-v)/v)},ym.flatten=function(i){for(var e=i[0][0].length,r={vertices:[],holes:[],dimensions:e},u=0,m=0;m<i.length;m++){for(var v=0;v<i[m].length;v++)for(var x=0;x<e;x++)r.vertices.push(i[m][v][x]);m>0&&r.holes.push(u+=i[m-1].length)}return r};var bm=te(Zc.exports);function hl(i,e,r,u,m){od(i,e,r||0,u||i.length-1,m||za)}function od(i,e,r,u,m){for(;u>r;){if(u-r>600){var v=u-r+1,x=e-r+1,C=Math.log(v),I=.5*Math.exp(2*C/3),D=.5*Math.sqrt(C*I*(v-I)/v)*(x-v/2<0?-1:1);od(i,e,Math.max(r,Math.floor(e-x*I/v+D)),Math.min(u,Math.floor(e+(v-x)*I/v+D)),m)}var R=i[e],N=r,z=u;for(Zp(i,r,e),m(i[u],R)>0&&Zp(i,r,u);N<z;){for(Zp(i,N,z),N++,z--;m(i[N],R)<0;)N++;for(;m(i[z],R)>0;)z--}0===m(i[r],R)?Zp(i,r,z):Zp(i,++z,u),z<=e&&(r=z+1),e<=z&&(u=z-1)}}function Zp(i,e,r){var u=i[e];i[e]=i[r],i[r]=u}function za(i,e){return i<e?-1:i>e?1:0}function mo(i,e){const r=i.length;if(r<=1)return[i];const u=[];let m,v;for(let x=0;x<r;x++){const C=vi(i[x]);0!==C&&(i[x].area=Math.abs(C),void 0===v&&(v=C<0),v===C<0?(m&&u.push(m),m=[i[x]]):m.push(i[x]))}if(m&&u.push(m),e>1)for(let x=0;x<u.length;x++)u[x].length<=e||(hl(u[x],e,1,u[x].length-1,Yp),u[x]=u[x].slice(0,e));return u}function Yp(i,e){return e.area-i.area}function dc(i,e,r){const u=r.patternDependencies;let m=!1;for(const v of e){const x=v.paint.get(`${i}-pattern`);x.isConstant()||(m=!0);const C=x.constantOr(null);C&&(m=!0,u[C]=!0)}return m}function ja(i,e,r,u,m){const v=m.patternDependencies;for(const x of e){const C=x.paint.get(`${i}-pattern`).value;if("constant"!==C.kind){let I=C.evaluate({zoom:u},r,{},m.availableImages);I=I&&I.name?I.name:I,v[I]=!0,r.patterns[x.id]=I}}return r}class Va{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ut,this.indexArray=new bn,this.indexArray2=new Xr,this.programConfigurations=new Aa(e.layers,e.zoom),this.segments=new Pr,this.segments2=new Pr,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,u,m){this.hasPattern=dc("fill",this.layers,r);const v=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:C,id:I,index:D,sourceLayerIndex:R}of e){const N=this.layers[0]._featureFilter.needGeometry,z=ia(C,N);if(!this.layers[0]._featureFilter.filter(new F(this.zoom),z,u))continue;const H=v?v.evaluate(z,{},u,r.availableImages):void 0,$={id:I,properties:C.properties,type:C.type,sourceLayerIndex:R,index:D,geometry:N?z.geometry:La(C,u,m),patterns:{},sortKey:H};x.push($)}v&&x.sort((C,I)=>C.sortKey-I.sortKey);for(const C of x){const{geometry:I,index:D,sourceLayerIndex:R}=C;if(this.hasPattern){const N=ja("fill",this.layers,C,this.zoom,r);this.patternFeatures.push(N)}else this.addFeature(C,I,D,u,{},r.availableImages);r.featureIndex.insert(e[D].feature,I,D,R,this.index)}}update(e,r,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,u,m)}addFeatures(e,r,u,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,r,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,p_),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,u,m,v,x=[]){for(const C of mo(r,500)){let I=0;for(const $ of C)I+=$.length;const D=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),R=D.vertexLength,N=[],z=[];for(const $ of C){if(0===$.length)continue;$!==C[0]&&z.push(N.length/2);const Q=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),ae=Q.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(ae+$.length-1,ae),N.push($[0].x),N.push($[0].y);for(let be=1;be<$.length;be++)this.layoutVertexArray.emplaceBack($[be].x,$[be].y),this.indexArray2.emplaceBack(ae+be-1,ae+be),N.push($[be].x),N.push($[be].y);Q.vertexLength+=$.length,Q.primitiveLength+=$.length}const H=bm(N,z);for(let $=0;$<H.length;$+=3)this.indexArray.emplaceBack(R+H[$],R+H[$+1],R+H[$+2]);D.vertexLength+=I,D.primitiveLength+=H.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,u,v,x,m)}}fn(Va,"FillBucket",{omit:["layers","patternFeatures"]});const Xc=new Ce({"fill-sort-key":new de(Tt.layout_fill["fill-sort-key"])});var ts={paint:new Ce({"fill-antialias":new X(Tt.paint_fill["fill-antialias"]),"fill-opacity":new de(Tt.paint_fill["fill-opacity"]),"fill-color":new de(Tt.paint_fill["fill-color"]),"fill-outline-color":new de(Tt.paint_fill["fill-outline-color"]),"fill-translate":new X(Tt.paint_fill["fill-translate"]),"fill-translate-anchor":new X(Tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new de(Tt.paint_fill["fill-pattern"])}),layout:Xc};const ra=nt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),f_=nt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Rv=nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:xm}=ra;var Ch={},Lv=G,qg=Kc;function Kc(i,e,r,u,m){this.properties={},this.extent=r,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=m,i.readFields(ci,this,e)}function ci(i,e,r){1==i?e.id=r.readVarint():2==i?function(u,m){for(var v=u.readVarint()+u.pos;u.pos<v;){var x=m._keys[u.readVarint()],C=m._values[u.readVarint()];m.properties[x]=C}}(r,e):3==i?e.type=r.readVarint():4==i&&(e._geometry=r.pos)}function ns(i){for(var e,r,u=0,m=0,v=i.length,x=v-1;m<v;x=m++)u+=((r=i[x]).x-(e=i[m]).x)*(e.y+r.y);return u}Kc.types=["Unknown","Point","LineString","Polygon"],Kc.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var e,r=i.readVarint()+i.pos,u=1,m=0,v=0,x=0,C=[];i.pos<r;){if(m<=0){var I=i.readVarint();u=7&I,m=I>>3}if(m--,1===u||2===u)v+=i.readSVarint(),x+=i.readSVarint(),1===u&&(e&&C.push(e),e=[]),e.push(new Lv(v,x));else{if(7!==u)throw new Error("unknown command "+u);e&&e.push(e[0].clone())}}return e&&C.push(e),C},Kc.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var e=i.readVarint()+i.pos,r=1,u=0,m=0,v=0,x=1/0,C=-1/0,I=1/0,D=-1/0;i.pos<e;){if(u<=0){var R=i.readVarint();r=7&R,u=R>>3}if(u--,1===r||2===r)(m+=i.readSVarint())<x&&(x=m),m>C&&(C=m),(v+=i.readSVarint())<I&&(I=v),v>D&&(D=v);else if(7!==r)throw new Error("unknown command "+r)}return[x,I,C,D]},Kc.prototype.toGeoJSON=function(i,e,r){var u,m,v=this.extent*Math.pow(2,r),x=this.extent*i,C=this.extent*e,I=this.loadGeometry(),D=Kc.types[this.type];function R(H){for(var $=0;$<H.length;$++){var Q=H[$];H[$]=[360*(Q.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Q.y+C)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(u=0;u<I.length;u++)N[u]=I[u][0];R(I=N);break;case 2:for(u=0;u<I.length;u++)R(I[u]);break;case 3:for(I=function(H){var $=H.length;if($<=1)return[H];for(var Q,ae,be=[],Re=0;Re<$;Re++){var xe=ns(H[Re]);0!==xe&&(void 0===ae&&(ae=xe<0),ae===xe<0?(Q&&be.push(Q),Q=[H[Re]]):Q.push(H[Re]))}return Q&&be.push(Q),be}(I),u=0;u<I.length;u++)for(m=0;m<I[u].length;m++)R(I[u][m])}1===I.length?I=I[0]:D="Multi"+D;var z={type:"Feature",geometry:{type:D,coordinates:I},properties:this.properties};return"id"in this&&(z.id=this.id),z};var Fv=qg,Qc=m_;function m_(i,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Nv,this,e),this.length=this._features.length}function Nv(i,e,r){15===i?e.version=r.readVarint():1===i?e.name=r.readString():5===i?e.extent=r.readVarint():2===i?e._features.push(r.pos):3===i?e._keys.push(r.readString()):4===i&&e._values.push(function(u){for(var m=null,v=u.readVarint()+u.pos;u.pos<v;){var x=u.readVarint()>>3;m=1===x?u.readString():2===x?u.readFloat():3===x?u.readDouble():4===x?u.readVarint64():5===x?u.readVarint():6===x?u.readSVarint():7===x?u.readBoolean():null}return m}(r))}m_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var e=this._pbf.readVarint()+this._pbf.pos;return new Fv(this._pbf,e,this.extent,this._keys,this._values)};var pl=Qc;function g_(i,e,r){if(3===i){var u=new pl(r,r.readVarint()+r.pos);u.length&&(e[u.name]=u)}}var Xp=Ch.VectorTile=function(i,e){this.layers=i.readFields(g_,{},e)},Kp=Ch.VectorTileFeature=qg;function Zg(i,e,r,u){const m=[],v=0===u?(x,C,I,D,R,N)=>{x.push(new Y(N,I+(N-C)/(D-C)*(R-I)))}:(x,C,I,D,R,N)=>{x.push(new Y(C+(N-I)/(R-I)*(D-C),N))};for(const x of i){const C=[];for(const I of x){if(I.length<=2)continue;const D=[];for(let z=0;z<I.length-1;z++){const H=I[z].x,$=I[z].y,Q=I[z+1].x,ae=I[z+1].y,be=0===u?H:$,Re=0===u?Q:ae;be<e?Re>e&&v(D,H,$,Q,ae,e):be>r?Re<r&&v(D,H,$,Q,ae,r):D.push(I[z]),Re<e&&be>=e&&v(D,H,$,Q,ae,e),Re>r&&be<=r&&v(D,H,$,Q,ae,r)}let R=I[I.length-1];const N=0===u?R.x:R.y;N>=e&&N<=r&&D.push(R),D.length&&(R=D[D.length-1],D[0].x===R.x&&D[0].y===R.y||D.push(D[0]),C.push(D))}C.length&&m.push(C)}return m}Ch.VectorTileLayer=Qc;const ko=Kp.types,Hn=Math.pow(2,13);function hc(i,e,r,u,m,v,x,C){i.emplaceBack((e<<1)+x,(r<<1)+v,(Math.floor(u*Hn)<<1)+m,Math.round(C))}function Sh(i,e,r){i.emplaceBack(e.x,e.y,e.z,16384*r[0],16384*r[1],16384*r[2])}class wm{constructor(){this.acc=new Y(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Y(e.x,e.y),this.max=new Y(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const u=this.min,m=this.max;e.x<u.x?u.x=e.x:e.x>m.x&&(m.x=e.x),e.y<u.y?u.y=e.y:e.y>m.y&&(m.y=e.y),((0===e.x||e.x===Sn)&&e.x===r.x)!=((0===e.y||e.y===Sn)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,Ei(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>Sn!=e.x>Sn&&this.addBorderIntersection(1,Ei(r.y,e.y,(Sn-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,Ei(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>Sn!=e.y>Sn&&this.addBorderIntersection(3,Ei(r.x,e.x,(Sn-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[e];r<u[0]&&(u[0]=r),r>u[1]&&(u[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const u=0===e.x?0:1;this.addBorderIntersection(u,r.y),this.addBorderIntersection(u,e.y)}else{const u=0===e.y?2:3;this.addBorderIntersection(u,r.x),this.addBorderIntersection(u,e.x)}}centroid(){const e=this.polyCount.reduce((r,u)=>r+u.edges,0);return 0!==e?this.acc.div(e)._round():new Y(0,0)}span(){return new Y(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class Th{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Dt,this.centroidVertexArray=new ro,this.indexArray=new bn,this.programConfigurations=new Aa(e.layers,e.zoom),this.segments=new Pr,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,u,m){this.features=[],this.hasPattern=dc("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(v){const x=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*x/(x*x+1)/Sn/(1<<v.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:v,id:x,index:C,sourceLayerIndex:I}of e){const D=this.layers[0]._featureFilter.needGeometry,R=ia(v,D);if(!this.layers[0]._featureFilter.filter(new F(this.zoom),R,u))continue;const N={id:x,sourceLayerIndex:I,index:C,geometry:D?R.geometry:La(v,u,m),properties:v.properties,type:v.type,patterns:{}},z=this.layoutVertexArray.length;this.hasPattern?this.features.push(ja("fill-extrusion",this.layers,N,this.zoom,r)):this.addFeature(N,N.geometry,C,u,{},r.availableImages,m),r.featureIndex.insert(v,N.geometry,C,I,this.index,z)}this.sortBorders()}addFeatures(e,r,u,m,v){for(const x of this.features){const{geometry:C}=x;this.addFeature(x,C,x.index,r,u,m,v)}this.sortBorders()}update(e,r,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xm),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Rv.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,f_.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,u,m,v,x,C){const I=[new Y(0,0),new Y(Sn,Sn)],D=C.projection,R="globe"===D.name,N=this.enableTerrain&&!R?new wm:null,z="Polygon"===ko[e.type];R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new jt);const H=mo(r,500);for(let be=H.length-1;be>=0;be--){const Re=H[be];(0===Re.length||($=Re[0]).every(xe=>xe.x<=0)||$.every(xe=>xe.x>=Sn)||$.every(xe=>xe.y<=0)||$.every(xe=>xe.y>=Sn))&&H.splice(be,1)}var $;let Q;if(R)Q=hi(H,I,m);else{Q=[];for(const be of H)Q.push({polygon:be,bounds:I})}const ae=z?this.edgeRadius:0;for(const{polygon:be,bounds:Re}of Q){let xe=0,Ae=0;for(const je of be)z&&!je[0].equals(je[je.length-1])&&je.push(je[0]),Ae+=z?je.length-1:je.length;const Ve=this.segments.prepareSegment((z?5:4)*Ae,this.layoutVertexArray,this.indexArray);if(z){const je=[],_t=[];xe=Ve.vertexLength;for(const St of be){let Ht,bt;St.length&&St!==be[0]&&_t.push(je.length/2),Ht=St[1].sub(St[0])._perp()._unit();for(let At=1;At<St.length;At++){const kt=St[At],Nt=St[At===St.length-1?1:At+1];let{x:Gt,y:Ct}=kt;if(ae){bt=Nt.sub(kt)._perp()._unit();const an=Ht.add(bt)._unit(),mn=ae*Math.min(4,1/(Ht.x*an.x+Ht.y*an.y));Gt+=mn*an.x,Ct+=mn*an.y,Ht=bt}hc(this.layoutVertexArray,Gt,Ct,0,0,1,1,0),Ve.vertexLength++,je.push(kt.x,kt.y),R&&Sh(this.layoutVertexExtArray,D.projectTilePoint(Gt,Ct,m),D.upVector(m,Gt,Ct))}}const ft=bm(je,_t);for(let St=0;St<ft.length;St+=3)this.indexArray.emplaceBack(xe+ft[St],xe+ft[St+2],xe+ft[St+1]),Ve.primitiveLength++}for(const je of be){N&&je.length&&N.startRing(je[0]);let _t,ft,St,Ht=je.length>4&&Xg(je[je.length-2],je[0],je[1]),bt=ae?Yg(je[je.length-2],je[0],je[1],ae):0;ft=je[1].sub(je[0])._perp()._unit();let At=!0;for(let kt=1,Nt=0;kt<je.length;kt++){let Gt=je[kt-1],Ct=je[kt];const an=je[kt===je.length-1?1:kt+1];if(N&&z&&N.currentPolyCount.top++,Em(Ct,Gt,Re)){ae&&(ft=an.sub(Ct)._perp()._unit(),At=!At);continue}N&&N.append(Ct,Gt);const mn=Ct.sub(Gt)._perp(),un=mn.x/(Math.abs(mn.x)+Math.abs(mn.y)),Bn=mn.y>0?1:0,Xt=Gt.dist(Ct);if(Nt+Xt>32768&&(Nt=0),ae){St=an.sub(Ct)._perp()._unit();let $n=__(Gt,Ct,an,y_(ft,St),ae);isNaN($n)&&($n=0);const kn=Ct.sub(Gt)._unit();Gt=Gt.add(kn.mult(bt))._round(),Ct=Ct.add(kn.mult(-$n))._round(),bt=$n,ft=St}const Tn=Ve.vertexLength,On=je.length>4&&Xg(Gt,Ct,an);let yi=Qp(Nt,Ht,At);if(hc(this.layoutVertexArray,Gt.x,Gt.y,un,Bn,0,0,yi),hc(this.layoutVertexArray,Gt.x,Gt.y,un,Bn,0,1,yi),Nt+=Xt,yi=Qp(Nt,On,!At),Ht=On,hc(this.layoutVertexArray,Ct.x,Ct.y,un,Bn,0,0,yi),hc(this.layoutVertexArray,Ct.x,Ct.y,un,Bn,0,1,yi),Ve.vertexLength+=4,this.indexArray.emplaceBack(Tn+0,Tn+1,Tn+2),this.indexArray.emplaceBack(Tn+1,Tn+3,Tn+2),Ve.primitiveLength+=2,ae){const $n=xe+(1===kt?je.length-2:kt-2),kn=1===kt?xe:$n+1;if(this.indexArray.emplaceBack(Tn+1,$n,Tn+3),this.indexArray.emplaceBack($n,kn,Tn+3),Ve.primitiveLength+=2,void 0===_t&&(_t=Tn),!Em(an,je[kt],Re)){const Qn=kt===je.length-1?_t:Ve.vertexLength;this.indexArray.emplaceBack(Tn+2,Tn+3,Qn),this.indexArray.emplaceBack(Tn+3,Qn+1,Qn),this.indexArray.emplaceBack(Tn+3,kn,Qn+1),Ve.primitiveLength+=3}At=!At}if(R){const $n=this.layoutVertexExtArray,kn=D.projectTilePoint(Gt.x,Gt.y,m),Qn=D.projectTilePoint(Ct.x,Ct.y,m),wn=D.upVector(m,Gt.x,Gt.y),qn=D.upVector(m,Ct.x,Ct.y);Sh($n,kn,wn),Sh($n,kn,wn),Sh($n,Qn,qn),Sh($n,Qn,qn)}}z&&(xe+=je.length-1)}}if(N&&N.polyCount.length>0){if(N.borders){N.vertexArrayOffset=this.centroidVertexArray.length;const be=N.borders,Re=this.featuresOnBorder.push(N)-1;for(let xe=0;xe<4;xe++)be[xe][0]!==Number.MAX_VALUE&&this.borders[xe].push(Re)}this.encodeCentroid(N.borders?void 0:N.centroid(),N)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,u,v,x,m)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,u)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[u].borders[e][0])}encodeCentroid(e,r,u=!0){let m,v;if(e)if(0!==e.y){const C=r.span()._mult(this.tileToMeter);m=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(C.x/10)),v=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(C.y/10))}else m=Math.ceil(7*(e.x+450)),v=0;else m=0,v=+u;let x=u?this.centroidVertexArray.length:r.vertexArrayOffset;for(const C of r.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*C.edges+C.top);for(let I=0;I<C.top;I++)this.centroidVertexArray.emplace(x++,m,v);for(let I=0;I<2*C.edges;I++)this.centroidVertexArray.emplace(x++,0,v),this.centroidVertexArray.emplace(x++,m,v)}}}function y_(i,e){const r=i.add(e)._unit();return i.x*r.x+i.y*r.y}function Yg(i,e,r,u){const m=e.sub(i)._perp()._unit(),v=r.sub(e)._perp()._unit();return __(i,e,r,y_(m,v),u)}function __(i,e,r,u,m){const v=Math.sqrt(1-u*u);return Math.min(i.dist(e)/3,e.dist(r)/3,m*v/u)}function Em(i,e,r){return i.x<r[0].x&&e.x<r[0].x||i.x>r[1].x&&e.x>r[1].x||i.y<r[0].y&&e.y<r[0].y||i.y>r[1].y&&e.y>r[1].y}function Xg(i,e,r){if(i.x<0||i.x>=Sn||e.x<0||e.x>=Sn||r.x<0||r.x>=Sn)return!1;const u=r.sub(e),m=u.perp(),v=i.sub(e);return(u.x*v.x+u.y*v.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(v.x*v.x+v.y*v.y))>-.866&&m.x*v.x+m.y*v.y<0}function Qp(i,e,r){const u=e?2|i:-3&i;return r?1|u:-2&u}function pc(){const i=Math.PI/32,e=Math.tan(i),r=ph;return r*Math.sqrt(1+2*e*e)-r}function hi(i,e,r){const u=1<<r.z,m=na(r.x/u),v=na((r.x+1)/u),x=ao(r.y/u),C=ao((r.y+1)/u);return function(I,D,R,N,z=0,H){const $=[];if(!I.length||!R||!N)return $;const Q=(je,_t)=>{for(const ft of je)$.push({polygon:ft,bounds:_t})},ae=Math.ceil(Math.log2(R)),be=Math.ceil(Math.log2(N)),Re=ae-be,xe=[];for(let je=0;je<Math.abs(Re);je++)xe.push(Re>0?0:1);for(let je=0;je<Math.min(ae,be);je++)xe.push(0),xe.push(1);let Ae=I;if(Ae=Zg(Ae,D[0].y-z,D[1].y+z,1),Ae=Zg(Ae,D[0].x-z,D[1].x+z,0),!Ae.length)return $;const Ve=[];for(xe.length?Ve.push({polygons:Ae,bounds:D,depth:0}):Q(Ae,D);Ve.length;){const je=Ve.pop(),_t=je.depth,ft=xe[_t],St=je.bounds[0],Ht=je.bounds[1],bt=0===ft?St.x:St.y,At=0===ft?Ht.x:Ht.y,kt=H?H(ft,bt,At):.5*(bt+At),Nt=Zg(je.polygons,bt-z,kt+z,ft),Gt=Zg(je.polygons,kt-z,At+z,ft);if(Nt.length){const Ct=[St,new Y(0===ft?kt:Ht.x,1===ft?kt:Ht.y)];xe.length>_t+1?Ve.push({polygons:Nt,bounds:Ct,depth:_t+1}):Q(Nt,Ct)}if(Gt.length){const Ct=[new Y(0===ft?kt:St.x,1===ft?kt:St.y),Ht];xe.length>_t+1?Ve.push({polygons:Gt,bounds:Ct,depth:_t+1}):Q(Gt,Ct)}}return $}(i,e,Math.ceil((v-m)/11.25),Math.ceil((x-C)/11.25),1,(I,D,R)=>{if(0===I)return.5*(D+R);{const N=ao((r.y+D/Sn)/u);return(ea(.5*(ao((r.y+R/Sn)/u)+N))*u-r.y)*Sn}})}fn(Th,"FillExtrusionBucket",{omit:["layers","features"]}),fn(wm,"PartMetadata");const Mh=new Ce({"fill-extrusion-edge-radius":new X(Tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Jc={paint:new Ce({"fill-extrusion-opacity":new X(Tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new de(Tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new X(Tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new X(Tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new de(Tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new de(Tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new de(Tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new X(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new X(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new X(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new X(Tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Mh};function eu(i,e,r){var u=2*Math.PI*6378137/256/Math.pow(2,r);return[i*u-2*Math.PI*6378137/2,e*u-2*Math.PI*6378137/2]}class Ih{constructor(e,r,u){this.z=e,this.x=r,this.y=u,this.key=Jp(0,e,e,r,u)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const u=(x=this.y,C=this.z,I=eu(256*(v=this.x),256*(x=Math.pow(2,C)-x-1),C),D=eu(256*(v+1),256*(x+1),C),I[0]+","+I[1]+","+D[0]+","+D[1]),m=function(v,x,C){let I,D="";for(let R=v;R>0;R--)I=1<<R-1,D+=(x&I?1:0)+(C&I?2:0);return D}(this.z,this.x,this.y);var v,x,C,I,D;return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class tu{constructor(e,r){this.wrap=e,this.canonical=r,this.key=Jp(e,r.z,r.z,r.x,r.y)}}class go{constructor(e,r,u,m,v){this.overscaledZ=e,this.wrap=r,this.canonical=new Ih(u,+m,+v),this.key=0===r&&e===u?this.canonical.key:Jp(r,e,u,m,v)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new go(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new go(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return Jp(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-e;return Jp(this.wrap*+r,e,e,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new go(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new go(r,this.wrap,r,u,m),new go(r,this.wrap,r,u+1,m),new go(r,this.wrap,r,u,m+1),new go(r,this.wrap,r,u+1,m+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new go(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new go(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new tu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Jp(i,e,r,u,m){const v=1<<Math.min(r,22);let x=v*(m%v)+u%v;return i&&r<22&&(x+=v*v*((i<0?-2*i-1:2*i)%(1<<2*(22-r)))),16*(32*x+r)+(e-r)}fn(Ih,"CanonicalTileID"),fn(go,"OverscaledTileID",{omit:["projMatrix"]});class fc extends Y{constructor(e,r,u){super(e,r),this.z=u}}function mc(i,e){return i.x*e.x+i.y*e.y}function Kg(i,e){if(1===i.length){let r=0;const u=e[r++];let m;for(;!m||u.equals(m);)if(m=e[r++],!m)return 1/0;for(;r<e.length;r++){const v=e[r],x=i[0],C=m.sub(u),I=v.sub(u),D=x.sub(u),R=mc(C,C),N=mc(C,I),z=mc(I,I),H=mc(D,C),$=mc(D,I),Q=R*z-N*N,ae=(z*H-N*$)/Q,be=(R*$-N*H)/Q,Re=u.z*(1-ae-be)+m.z*ae+v.z*be;if(isFinite(Re))return Re}return 1/0}{let r=1/0;for(const u of e)r=Math.min(r,u.z);return r}}function Dh(i,e,r,u,m,v,x,C){const I=x*m.getElevationAt(i,e,!0,!0),D=0!==v[0],R=D?0===v[1]?x*(v[0]/7-450):x*function(N,z,H){const $=Math.floor(z[0]/8),Q=Math.floor(z[1]/8),ae=10*(z[0]-8*$),be=10*(z[1]-8*Q),Re=N.getElevationAt($,Q,!0,!0),xe=N.getMeterToDEM(H),Ae=Math.floor(.5*(ae*xe-1)),Ve=Math.floor(.5*(be*xe-1)),je=N.tileCoordToPixel($,Q),_t=2*Ae+1,ft=2*Ve+1,St=(mn=_t,un=ft,[(Gt=N).getElevationAtPixel(Ct=je.x-Ae,an=je.y-Ve,!0),Gt.getElevationAtPixel(Ct+un,an,!0),Gt.getElevationAtPixel(Ct,an+un,!0),Gt.getElevationAtPixel(Ct+mn,an+un,!0)]),Ht=Math.abs(St[0]-St[1]),bt=Math.abs(St[2]-St[3]),At=Math.abs(St[0]-St[2])+Math.abs(St[1]-St[3]),kt=Math.min(.25,.5*xe*(Ht+bt)/_t),Nt=Math.min(.25,.5*xe*At/ft);var Gt,Ct,an,mn,un;return Re+Math.max(kt*ae,Nt*be)}(m,v,C):I;return{base:I+(0===r)?-1:r,top:D?Math.max(R+u,I+r+2):I+u}}const Bv=nt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Qg}=Bv,oa=nt([{name:"a_packed",components:4,type:"Float32"}]),{members:v_}=oa,Jg=Kp.types,Cm=Math.cos(Math.PI/180*37.5);class Sm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new wt,this.layoutVertexArray2=new zt,this.indexArray=new bn,this.programConfigurations=new Aa(e.layers,e.zoom),this.segments=new Pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,u,m){this.hasPattern=dc("line",this.layers,r);const v=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:R,id:N,index:z,sourceLayerIndex:H}of e){const $=this.layers[0]._featureFilter.needGeometry,Q=ia(R,$);if(!this.layers[0]._featureFilter.filter(new F(this.zoom),Q,u))continue;const ae=v?v.evaluate(Q,{},u):void 0,be={id:N,properties:R.properties,type:R.type,sourceLayerIndex:H,index:z,geometry:$?Q.geometry:La(R,u,m),patterns:{},sortKey:ae};x.push(be)}v&&x.sort((R,N)=>R.sortKey-N.sortKey);const{lineAtlas:C,featureIndex:I}=r,D=this.addConstantDashes(C);for(const R of x){const{geometry:N,index:z,sourceLayerIndex:H}=R;if(D&&this.addFeatureDashes(R,C),this.hasPattern){const $=ja("line",this.layers,R,this.zoom,r);this.patternFeatures.push($)}else this.addFeature(R,N,z,u,C.positions,r.availableImages);I.insert(e[z].feature,N,z,H,this.index)}}addConstantDashes(e){let r=!1;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,v=u.layout.get("line-cap").value;if("constant"!==m.kind||"constant"!==v.kind)r=!0;else{const x=v.value,C=m.value;if(!C)continue;e.addDash(C,x)}}return r}addFeatureDashes(e,r){const u=this.zoom;for(const m of this.layers){const v=m.paint.get("line-dasharray").value,x=m.layout.get("line-cap").value;if("constant"===v.kind&&"constant"===x.kind)continue;let C,I;if("constant"===v.kind){if(C=v.value,!C)continue}else C=v.evaluate({zoom:u},e);I="constant"===x.kind?x.value:x.evaluate({zoom:u},e),r.addDash(C,I),e.patterns[m.id]=r.getKey(C,I)}}update(e,r,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,u,m)}addFeatures(e,r,u,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,r,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,v_)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Qg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,u,m,v,x){const C=this.layers[0].layout,I=C.get("line-join").evaluate(e,{}),D=C.get("line-cap").evaluate(e,{}),R=C.get("line-miter-limit"),N=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const z of r)this.addLine(z,e,I,D,R,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,u,v,x,m)}addLine(e,r,u,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<e.length-1;be++)this.totalDistance+=e[be].dist(e[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C="Polygon"===Jg[r.type];let I=e.length;for(;I>=2&&e[I-1].equals(e[I-2]);)I--;let D=0;for(;D<I-1&&e[D].equals(e[D+1]);)D++;if(I<(C?3:2))return;"bevel"===u&&(v=1.05);const R=this.overscaling<=16?15*Sn/(512*this.overscaling):0,N=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let z,H,$,Q,ae;this.e1=this.e2=-1,C&&(z=e[I-2],ae=e[D].sub(z)._unit()._perp());for(let be=D;be<I;be++){if($=be===I-1?C?e[D+1]:void 0:e[be+1],$&&e[be].equals($))continue;ae&&(Q=ae),z&&(H=z),z=e[be],ae=$?$.sub(z)._unit()._perp():Q,Q=Q||ae;let Re=Q.add(ae);0===Re.x&&0===Re.y||Re._unit();const xe=Q.x*ae.x+Q.y*ae.y,Ae=Re.x*ae.x+Re.y*ae.y,Ve=0!==Ae?1/Ae:1/0,je=2*Math.sqrt(2-2*Ae),_t=Ae<Cm&&H&&$,ft=Q.x*ae.y-Q.y*ae.x>0;if(_t&&be>D){const bt=z.dist(H);if(bt>2*R){const At=z.sub(z.sub(H)._mult(R/bt)._round());this.updateDistance(H,At),this.addCurrentVertex(At,Q,0,0,N),H=At}}const St=H&&$;let Ht=St?u:C?"butt":m;if(St&&"round"===Ht&&(Ve<x?Ht="miter":Ve<=2&&(Ht="fakeround")),"miter"===Ht&&Ve>v&&(Ht="bevel"),"bevel"===Ht&&(Ve>2&&(Ht="flipbevel"),Ve<v&&(Ht="miter")),H&&this.updateDistance(H,z),"miter"===Ht)Re._mult(Ve),this.addCurrentVertex(z,Re,0,0,N);else if("flipbevel"===Ht){if(Ve>100)Re=ae.mult(-1);else{const bt=Ve*Q.add(ae).mag()/Q.sub(ae).mag();Re._perp()._mult(bt*(ft?-1:1))}this.addCurrentVertex(z,Re,0,0,N),this.addCurrentVertex(z,Re.mult(-1),0,0,N)}else if("bevel"===Ht||"fakeround"===Ht){const bt=-Math.sqrt(Ve*Ve-1),At=ft?bt:0,kt=ft?0:bt;if(H&&this.addCurrentVertex(z,Q,At,kt,N),"fakeround"===Ht){const Nt=Math.round(180*je/Math.PI/20);for(let Gt=1;Gt<Nt;Gt++){let Ct=Gt/Nt;if(.5!==Ct){const mn=Ct-.5;Ct+=Ct*mn*(Ct-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*mn*mn+(.848013+xe*(.215638*xe-1.06021)))}const an=ae.sub(Q)._mult(Ct)._add(Q)._unit()._mult(ft?-1:1);this.addHalfVertex(z,an.x,an.y,!1,ft,0,N)}}$&&this.addCurrentVertex(z,ae,-At,-kt,N)}else if("butt"===Ht)this.addCurrentVertex(z,Re,0,0,N);else if("square"===Ht){const bt=H?1:-1;H||this.addCurrentVertex(z,Re,bt,bt,N),this.addCurrentVertex(z,Re,0,0,N),H&&this.addCurrentVertex(z,Re,bt,bt,N)}else"round"===Ht&&(H&&(this.addCurrentVertex(z,Q,0,0,N),this.addCurrentVertex(z,Q,1,1,N,!0)),$&&(this.addCurrentVertex(z,ae,-1,-1,N,!0),this.addCurrentVertex(z,ae,0,0,N)));if(_t&&be<I-1){const bt=z.dist($);if(bt>2*R){const At=z.add($.sub(z)._mult(R/bt)._round());this.updateDistance(z,At),this.addCurrentVertex(At,ae,0,0,N),z=At}}}}addCurrentVertex(e,r,u,m,v,x=!1){const C=r.y*m-r.x,I=-r.y-r.x*m;this.addHalfVertex(e,r.x+r.y*u,r.y-r.x*u,x,!1,u,v),this.addHalfVertex(e,C,I,x,!0,-m,v)}addHalfVertex({x:e,y:r},u,m,v,x,C,I){this.layoutVertexArray.emplaceBack((e<<1)+(v?1:0),(r<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(0===C?0:C<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const D=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),I.primitiveLength++),x?this.e2=D:this.e1=D}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}fn(Sm,"LineBucket",{omit:["layers","patternFeatures"]});const b_=new Ce({"line-cap":new de(Tt.layout_line["line-cap"]),"line-join":new de(Tt.layout_line["line-join"]),"line-miter-limit":new X(Tt.layout_line["line-miter-limit"]),"line-round-limit":new X(Tt.layout_line["line-round-limit"]),"line-sort-key":new de(Tt.layout_line["line-sort-key"])});var kh={paint:new Ce({"line-opacity":new de(Tt.paint_line["line-opacity"]),"line-color":new de(Tt.paint_line["line-color"]),"line-translate":new X(Tt.paint_line["line-translate"]),"line-translate-anchor":new X(Tt.paint_line["line-translate-anchor"]),"line-width":new de(Tt.paint_line["line-width"]),"line-gap-width":new de(Tt.paint_line["line-gap-width"]),"line-offset":new de(Tt.paint_line["line-offset"]),"line-blur":new de(Tt.paint_line["line-blur"]),"line-dasharray":new de(Tt.paint_line["line-dasharray"]),"line-pattern":new de(Tt.paint_line["line-pattern"]),"line-gradient":new we(Tt.paint_line["line-gradient"]),"line-trim-offset":new X(Tt.paint_line["line-trim-offset"])}),layout:b_};const x_=new class extends de{possiblyEvaluate(i,e){return e=new F(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(i,e)}evaluate(i,e,r,u){return e=ke({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(i,e,r,u)}}(kh.paint.properties["line-width"].specification);function w_(i,e){return e>0?e+2*i:i}x_.useIntegerZoom=!0;const zv=nt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jv=nt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),E_=nt([{name:"a_projected_pos",components:4,type:"Float32"}],4);nt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ey=nt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ef=nt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ty=nt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gc=nt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);nt([{name:"triangle",components:3,type:"Uint16"}]),nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),nt([{type:"Float32",name:"offsetX"}]),nt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var xr=24;const is=128;function Tm(i,e){const{expression:r}=e;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new F(i+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:u,interpolationType:m}=r;let v=0;for(;v<u.length&&u[v]<=i;)v++;v=Math.max(0,v-1);let x=v;for(;x<u.length&&u[x]<i+1;)x++;x=Math.min(u.length-1,x);const C=u[v],I=u[x];return"composite"===r.kind?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:C,maxZoom:I,minSize:r.evaluate(new F(C)),maxSize:r.evaluate(new F(I)),interpolationType:m}}}function tf(i,{uSize:e,uSizeT:r},{lowerSize:u,upperSize:m}){return"source"===i.kind?u/is:"composite"===i.kind?Ei(u/is,m/is,r):e}function Ua(i,e){let r=0,u=0;if("constant"===i.kind)u=i.layoutSize;else if("source"!==i.kind){const{interpolationType:m,minZoom:v,maxZoom:x}=i,C=m?Ze(cs.interpolationFactor(m,e,v,x),0,1):0;"camera"===i.kind?u=Ei(i.minSize,i.maxSize,C):r=C}return{uSizeT:r,uSize:u}}var Ah=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:is,evaluateSizeForFeature:tf,evaluateSizeForZoom:Ua,getSizeData:Tm});function nf(i,e,r){return i.sections.forEach(u=>{u.text=function(m,v,x){const C=v.layout.get("text-transform").evaluate(x,{});return"uppercase"===C?m=m.toLocaleUpperCase():"lowercase"===C&&(m=m.toLocaleLowerCase()),O.applyArabicShaping&&(m=O.applyArabicShaping(m)),m}(u.text,e,r)}),i}const Ha={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function C_(i){return"\ufe36"===i||"\ufe48"===i||"\ufe38"===i||"\ufe44"===i||"\ufe42"===i||"\ufe3e"===i||"\ufe3c"===i||"\ufe3a"===i||"\ufe18"===i||"\ufe40"===i||"\ufe10"===i||"\ufe13"===i||"\ufe14"===i||"\uff40"===i||"\uffe3"===i||"\ufe11"===i||"\ufe12"===i}function S_(i){return"\ufe35"===i||"\ufe47"===i||"\ufe37"===i||"\ufe43"===i||"\ufe41"===i||"\ufe3d"===i||"\ufe3b"===i||"\ufe39"===i||"\ufe17"===i||"\ufe3f"===i}var Ph=Ni,sa=function(i,e,r,u,m){var v,x,C=8*m-u-1,I=(1<<C)-1,D=I>>1,R=-7,N=r?m-1:0,z=r?-1:1,H=i[e+N];for(N+=z,v=H&(1<<-R)-1,H>>=-R,R+=C;R>0;v=256*v+i[e+N],N+=z,R-=8);for(x=v&(1<<-R)-1,v>>=-R,R+=u;R>0;x=256*x+i[e+N],N+=z,R-=8);if(0===v)v=1-D;else{if(v===I)return x?NaN:1/0*(H?-1:1);x+=Math.pow(2,u),v-=D}return(H?-1:1)*x*Math.pow(2,v-u)},Mm=function(i,e,r,u,m,v){var x,C,I,D=8*v-m-1,R=(1<<D)-1,N=R>>1,z=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,H=u?0:v-1,$=u?1:-1,Q=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(C=isNaN(e)?1:0,x=R):(x=Math.floor(Math.log(e)/Math.LN2),e*(I=Math.pow(2,-x))<1&&(x--,I*=2),(e+=x+N>=1?z/I:z*Math.pow(2,1-N))*I>=2&&(x++,I/=2),x+N>=R?(C=0,x=R):x+N>=1?(C=(e*I-1)*Math.pow(2,m),x+=N):(C=e*Math.pow(2,N-1)*Math.pow(2,m),x=0));m>=8;i[r+H]=255&C,H+=$,C/=256,m-=8);for(x=x<<m|C,D+=m;D>0;i[r+H]=255&x,H+=$,x/=256,D-=8);i[r+H-$]|=128*Q};function Ni(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Ni.Varint=0,Ni.Fixed64=1,Ni.Bytes=2,Ni.Fixed32=5;var Oh=4294967296,rf=1/Oh,sf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $o(i){return i.type===Ni.Bytes?i.readVarint()+i.pos:i.pos+1}function Rh(i,e,r){var u=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(u);for(var m=r.pos-1;m>=i;m--)r.buf[m+u]=r.buf[m]}function T_(i,e){for(var r=0;r<i.length;r++)e.writeVarint(i[r])}function Im(i,e){for(var r=0;r<i.length;r++)e.writeSVarint(i[r])}function M_(i,e){for(var r=0;r<i.length;r++)e.writeFloat(i[r])}function af(i,e){for(var r=0;r<i.length;r++)e.writeDouble(i[r])}function $a(i,e){for(var r=0;r<i.length;r++)e.writeBoolean(i[r])}function ny(i,e){for(var r=0;r<i.length;r++)e.writeFixed32(i[r])}function iu(i,e){for(var r=0;r<i.length;r++)e.writeSFixed32(i[r])}function lf(i,e){for(var r=0;r<i.length;r++)e.writeFixed64(i[r])}function Dm(i,e){for(var r=0;r<i.length;r++)e.writeSFixed64(i[r])}function Lh(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+16777216*i[e+3]}function yo(i,e,r){i[r]=e,i[r+1]=e>>>8,i[r+2]=e>>>16,i[r+3]=e>>>24}function I_(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}Ni.prototype={destroy:function(){this.buf=null},readFields:function(i,e,r){for(r=r||this.length;this.pos<r;){var u=this.readVarint(),m=u>>3,v=this.pos;this.type=7&u,i(m,e,this),this.pos===v&&this.skip(u)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=Lh(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=I_(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Lh(this.buf,this.pos)+Lh(this.buf,this.pos+4)*Oh;return this.pos+=8,i},readSFixed64:function(){var i=Lh(this.buf,this.pos)+I_(this.buf,this.pos+4)*Oh;return this.pos+=8,i},readFloat:function(){var i=sa(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=sa(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e,r,u=this.buf;return e=127&(r=u[this.pos++]),r<128?e:(e|=(127&(r=u[this.pos++]))<<7,r<128?e:(e|=(127&(r=u[this.pos++]))<<14,r<128?e:(e|=(127&(r=u[this.pos++]))<<21,r<128?e:function(m,v,x){var C,I,D=x.buf;if(C=(112&(I=D[x.pos++]))>>4,I<128||(C|=(127&(I=D[x.pos++]))<<3,I<128)||(C|=(127&(I=D[x.pos++]))<<10,I<128)||(C|=(127&(I=D[x.pos++]))<<17,I<128)||(C|=(127&(I=D[x.pos++]))<<24,I<128)||(C|=(1&(I=D[x.pos++]))<<31,I<128))return function nu(i,e,r){return r?4294967296*e+(i>>>0):4294967296*(e>>>0)+(i>>>0)}(m,C,v);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=12&&sf?sf.decode(this.buf.subarray(e,i)):function(r,u,m){for(var v="",x=u;x<m;){var C,I,D,R=r[x],N=null,z=R>239?4:R>223?3:R>191?2:1;if(x+z>m)break;1===z?R<128&&(N=R):2===z?128==(192&(C=r[x+1]))&&(N=(31&R)<<6|63&C)<=127&&(N=null):3===z?(I=r[x+2],128==(192&(C=r[x+1]))&&128==(192&I)&&((N=(15&R)<<12|(63&C)<<6|63&I)<=2047||N>=55296&&N<=57343)&&(N=null)):4===z&&(I=r[x+2],D=r[x+3],128==(192&(C=r[x+1]))&&128==(192&I)&&128==(192&D)&&((N=(15&R)<<18|(63&C)<<12|(63&I)<<6|63&D)<=65535||N>=1114112)&&(N=null)),null===N?(N=65533,z=1):N>65535&&(N-=65536,v+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),v+=String.fromCharCode(N),x+=z}return v}(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==Ni.Bytes)return i.push(this.readVarint(e));var r=$o(this);for(i=i||[];this.pos<r;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==Ni.Bytes)return i.push(this.readSVarint());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Ni.Bytes)return i.push(this.readBoolean());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Ni.Bytes)return i.push(this.readFloat());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Ni.Bytes)return i.push(this.readDouble());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Ni.Bytes)return i.push(this.readFixed32());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Ni.Bytes)return i.push(this.readSFixed32());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Ni.Bytes)return i.push(this.readFixed64());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Ni.Bytes)return i.push(this.readSFixed64());var e=$o(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=7&i;if(e===Ni.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ni.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ni.Fixed32)this.pos+=4;else{if(e!==Ni.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),yo(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),yo(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),yo(this.buf,-1&i,this.pos),yo(this.buf,Math.floor(i*rf),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),yo(this.buf,-1&i,this.pos),yo(this.buf,Math.floor(i*rf),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(e,r){var u,m,v,C;if(e>=0?(u=e%4294967296|0,m=e/4294967296|0):(m=~(-e/4294967296),4294967295^(u=~(-e%4294967296))?u=u+1|0:(u=0,m=m+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),v=u,(C=r).buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,C.buf[C.pos]=127&(v>>>=7),function(v,x){var C=(7&v)<<4;x.buf[x.pos++]|=C|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,r)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var e=this.pos;this.pos=function(u,m,v){for(var x,C,I=0;I<m.length;I++){if((x=m.charCodeAt(I))>55295&&x<57344){if(!C){x>56319||I+1===m.length?(u[v++]=239,u[v++]=191,u[v++]=189):C=x;continue}if(x<56320){u[v++]=239,u[v++]=191,u[v++]=189,C=x;continue}x=C-55296<<10|x-56320|65536,C=null}else C&&(u[v++]=239,u[v++]=191,u[v++]=189,C=null);x<128?u[v++]=x:(x<2048?u[v++]=x>>6|192:(x<65536?u[v++]=x>>12|224:(u[v++]=x>>18|240,u[v++]=x>>12&63|128),u[v++]=x>>6&63|128),u[v++]=63&x|128)}return v}(this.buf,i,this.pos);var r=this.pos-e;r>=128&&Rh(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(i){this.realloc(4),Mm(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Mm(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=i[r]},writeRawMessage:function(i,e){this.pos++;var r=this.pos;i(e,this);var u=this.pos-r;u>=128&&Rh(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,e,r){this.writeTag(i,Ni.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,T_,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,Im,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,$a,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,M_,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,af,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,ny,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,iu,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,lf,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,Dm,e)},writeBytesField:function(i,e){this.writeTag(i,Ni.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,Ni.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,Ni.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,Ni.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,Ni.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,Ni.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,Ni.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,Ni.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,Ni.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,Ni.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,Boolean(e))}};var km=te(Ph);const D_=3;function iy(i,e,r){e.glyphs=[],1===i&&r.readMessage(k_,e)}function k_(i,e,r){if(3===i){const{id:u,bitmap:m,width:v,height:x,left:C,top:I,advance:D}=r.readMessage(Vv,{});e.glyphs.push({id:u,bitmap:new lo({width:v+2*D_,height:x+2*D_},m),metrics:{width:v,height:x,left:C,top:I,advance:D}})}else 4===i?e.ascender=r.readSVarint():5===i&&(e.descender=r.readSVarint())}function Vv(i,e,r){1===i?e.id=r.readVarint():2===i?e.bitmap=r.readBytes():3===i?e.width=r.readVarint():4===i?e.height=r.readVarint():5===i?e.left=r.readSVarint():6===i?e.top=r.readSVarint():7===i&&(e.advance=r.readVarint())}const A_=D_;function ry(i){let e=0,r=0;for(const x of i)e+=x.w*x.h,r=Math.max(r,x.w);i.sort((x,C)=>C.h-x.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let m=0,v=0;for(const x of i)for(let C=u.length-1;C>=0;C--){const I=u[C];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===I.w&&x.h===I.h){const D=u.pop();C<u.length&&(u[C]=D)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(u.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:m,h:v,fill:e/(m*v)||0}}const Go=1;class oy{constructor(e,{pixelRatio:r,version:u,stretchX:m,stretchY:v,content:x}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=m,this.stretchY=v,this.content=x,this.version=u}get tl(){return[this.paddedRect.x+Go,this.paddedRect.y+Go]}get br(){return[this.paddedRect.x+this.paddedRect.w-Go,this.paddedRect.y+this.paddedRect.h-Go]}get displaySize(){return[(this.paddedRect.w-2*Go)/this.pixelRatio,(this.paddedRect.h-2*Go)/this.pixelRatio]}}class sy{constructor(e,r){const u={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(e,u,v),this.addImages(r,m,v);const{w:x,h:C}=ry(v),I=new Xi({width:x||1,height:C||1});for(const D in e){const R=e[D],N=u[D].paddedRect;Xi.copy(R.data,I,{x:0,y:0},{x:N.x+Go,y:N.y+Go},R.data)}for(const D in r){const R=r[D],N=m[D].paddedRect,z=N.x+Go,H=N.y+Go,$=R.data.width,Q=R.data.height;Xi.copy(R.data,I,{x:0,y:0},{x:z,y:H},R.data),Xi.copy(R.data,I,{x:0,y:Q-1},{x:z,y:H-1},{width:$,height:1}),Xi.copy(R.data,I,{x:0,y:0},{x:z,y:H+Q},{width:$,height:1}),Xi.copy(R.data,I,{x:$-1,y:0},{x:z-1,y:H},{width:1,height:Q}),Xi.copy(R.data,I,{x:0,y:0},{x:z+$,y:H},{width:1,height:Q})}this.image=I,this.iconPositions=u,this.patternPositions=m}addImages(e,r,u){for(const m in e){const v=e[m],x={x:0,y:0,w:v.data.width+2*Go,h:v.data.height+2*Go};u.push(x),r[m]=new oy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>e.hasImage(u)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in e.updatedImages)this.patchUpdatedImage(this.iconPositions[u],e.getImage(u),r),this.patchUpdatedImage(this.patternPositions[u],e.getImage(u),r)}patchUpdatedImage(e,r,u){if(!e||!r||e.version===r.version)return;e.version=r.version;const[m,v]=e.tl;u.update(r.data,void 0,{x:m,y:v})}}fn(oy,"ImagePosition"),fn(sy,"ImageAtlas");const rs={horizontal:1,vertical:2,horizontalOnly:3},P_=-17;class cf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const u=new cf;return u.scale=e||1,u.fontStack=r,u}static forImage(e){const r=new cf;return r.imageName=e,r}}class Fh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const u=new Fh;for(let m=0;m<e.sections.length;m++){const v=e.sections[m];v.image?u.addImageSection(v):u.addTextSection(v,r)}return u}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,u){let m="";for(let v=0;v<r.length;v++){const x=r.charCodeAt(v+1)||null,C=r.charCodeAt(v-1)||null;m+=!u&&(x&&wg(x)&&!Ha[r[v+1]]||C&&wg(C)&&!Ha[r[v-1]])||!Ha[r[v]]?r[v]:Ha[r[v]]}return m}(this.text,e)}trim(){let e=0;for(let u=0;u<this.text.length&&uf[this.text.charCodeAt(u)];u++)e++;let r=this.text.length;for(let u=this.text.length-1;u>=0&&u>=e&&uf[this.text.charCodeAt(u)];u--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const u=new Fh;return u.text=this.text.substring(e,r),u.sectionIndex=this.sectionIndex.slice(e,r),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(cf.forText(e.scale,e.fontStack||r));const u=this.sections.length-1;for(let m=0;m<e.text.length;++m)this.sectionIndex.push(u)}addImageSection(e){const r=e.image?e.image.name:"";if(0===r.length)return void tn("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(cf.forImage(r)),this.sectionIndex.push(this.sections.length-1)):tn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ay(i,e,r,u,m,v,x,C,I,D,R,N,z,H,$){const Q=Fh.fromFeature(i,m);N===rs.vertical&&Q.verticalizePunctuation(z);let ae=[];const be=function(je,_t,ft,St,Ht,bt){if(!je)return[];const At=[],kt=function(an,mn,un,Bn,Xt,Tn){let On=0;for(let yi=0;yi<an.length();yi++){const $n=an.getSection(yi);On+=Nh(an.getCharCode(yi),$n,Bn,Xt,mn,Tn)}return On/Math.max(1,Math.ceil(On/un))}(je,_t,ft,St,Ht,bt),Nt=je.text.indexOf("\u200b")>=0;let Gt=0;for(let an=0;an<je.length();an++){const mn=je.getSection(an),un=je.getCharCode(an);if(uf[un]||(Gt+=Nh(un,mn,St,Ht,_t,bt)),an<je.length()-1){const Bn=!((Ct=un)<11904||!(dn["Bopomofo Extended"](Ct)||dn.Bopomofo(Ct)||dn["CJK Compatibility Forms"](Ct)||dn["CJK Compatibility Ideographs"](Ct)||dn["CJK Compatibility"](Ct)||dn["CJK Radicals Supplement"](Ct)||dn["CJK Strokes"](Ct)||dn["CJK Symbols and Punctuation"](Ct)||dn["CJK Unified Ideographs Extension A"](Ct)||dn["CJK Unified Ideographs"](Ct)||dn["Enclosed CJK Letters and Months"](Ct)||dn["Halfwidth and Fullwidth Forms"](Ct)||dn.Hiragana(Ct)||dn["Ideographic Description Characters"](Ct)||dn["Kangxi Radicals"](Ct)||dn["Katakana Phonetic Extensions"](Ct)||dn.Katakana(Ct)||dn["Vertical Forms"](Ct)||dn["Yi Radicals"](Ct)||dn["Yi Syllables"](Ct)));(aa[un]||Bn||mn.imageName)&&At.push(Am(an+1,Gt,kt,At,Bh(un,je.getCharCode(an+1),Bn&&Nt),!1))}}var Ct;return ly(Am(je.length(),Gt,kt,At,0,!0))}(Q,D,v,e,u,H),{processBidirectionalText:Re,processStyledBidirectionalText:xe}=O;if(Re&&1===Q.sections.length){const je=Re(Q.toString(),be);for(const _t of je){const ft=new Fh;ft.text=_t,ft.sections=Q.sections;for(let St=0;St<_t.length;St++)ft.sectionIndex.push(0);ae.push(ft)}}else if(xe){const je=xe(Q.text,Q.sectionIndex,be);for(const _t of je){const ft=new Fh;ft.text=_t[0],ft.sectionIndex=_t[1],ft.sections=Q.sections,ae.push(ft)}}else ae=function(je,_t){const ft=[],St=je.text;let Ht=0;for(const bt of _t)ft.push(je.substring(Ht,bt)),Ht=bt;return Ht<St.length&&ft.push(je.substring(Ht,St.length)),ft}(Q,be);const Ae=[],Ve={positionedLines:Ae,text:Q.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:N,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(je,_t,ft,St,Ht,bt,At,kt,Nt,Gt,Ct,an){let mn=0,un=0,Bn=0;const Xt="right"===kt?1:"left"===kt?0:.5;let Tn=!1;for(const wn of Ht){const qn=wn.getSections();for(const ji of qn){if(ji.imageName)continue;const fi=_t[ji.fontStack];if(fi&&(Tn=void 0!==fi.ascender&&void 0!==fi.descender,!Tn))break}if(!Tn)break}let On=0;for(const wn of Ht){wn.trim();const qn=wn.getMaxScale(),ji=(qn-1)*xr,fi={positionedGlyphs:[],lineOffset:0};je.positionedLines[On]=fi;const Oi=fi.positionedGlyphs;let Vi=0;if(!wn.length()){un+=bt,++On;continue}let ar=0,yr=0;for(let Ui=0;Ui<wn.length();Ui++){const Lr=wn.getSection(Ui),kr=wn.getSectionIndex(Ui),hr=wn.getCharCode(Ui);let Mi=Lr.scale,Ar=null,Hi=null,vo=null,pr=xr,Fr=0;const lr=!(Nt===rs.horizontal||!Ct&&!Dp(hr)||Ct&&(uf[hr]||(yi=hr,dn.Arabic(yi)||dn["Arabic Supplement"](yi)||dn["Arabic Extended-A"](yi)||dn["Arabic Presentation Forms-A"](yi)||dn["Arabic Presentation Forms-B"](yi))));if(Lr.imageName){const fr=St[Lr.imageName];if(!fr)continue;vo=Lr.imageName,je.iconsInText=je.iconsInText||!0,Hi=fr.paddedRect;const Nr=fr.displaySize;Mi=Mi*xr/an,Ar={width:Nr[0],height:Nr[1],left:Go,top:-A_,advance:lr?Nr[1]:Nr[0],localGlyph:!1},Fr=Tn?-Ar.height*Mi:P_+qn*xr-Nr[1]*Mi,pr=Ar.advance;const Os=(lr?Nr[0]:Nr[1])*Mi-xr*qn;Os>0&&Os>Vi&&(Vi=Os)}else{const fr=ft[Lr.fontStack];if(!fr)continue;fr[hr]&&(Hi=fr[hr]);const Nr=_t[Lr.fontStack];if(!Nr)continue;const Os=Nr.glyphs[hr];if(!Os)continue;if(Ar=Os.metrics,pr=8203!==hr?xr:0,Tn){const fu=void 0!==Nr.ascender?Math.abs(Nr.ascender):0,_d=void 0!==Nr.descender?Math.abs(Nr.descender):0,xl=(fu+_d)*Mi;ar<xl&&(ar=xl,yr=(fu-_d)/2*Mi),Fr=-fu*Mi}else Fr=P_+(qn-Mi)*xr}lr?(je.verticalizable=!0,Oi.push({glyph:hr,imageName:vo,x:mn,y:un+Fr,vertical:lr,scale:Mi,localGlyph:Ar.localGlyph,fontStack:Lr.fontStack,sectionIndex:kr,metrics:Ar,rect:Hi}),mn+=pr*Mi+Gt):(Oi.push({glyph:hr,imageName:vo,x:mn,y:un+Fr,vertical:lr,scale:Mi,localGlyph:Ar.localGlyph,fontStack:Lr.fontStack,sectionIndex:kr,metrics:Ar,rect:Hi}),mn+=Ar.advance*Mi+Gt)}0!==Oi.length&&(Bn=Math.max(mn-Gt,Bn),Tn?Ao(Oi,Xt,Vi,yr,bt*qn/2):Ao(Oi,Xt,Vi,0,bt/2)),mn=0;const Dr=bt*qn+Vi;fi.lineOffset=Math.max(Vi,ji),un+=Dr,++On}var yi;const $n=un,{horizontalAlign:kn,verticalAlign:Qn}=cy(At);(function(wn,qn,ji,fi,Oi,Vi){const ar=(qn-ji)*Oi,yr=-Vi*fi;for(const Dr of wn)for(const Ui of Dr.positionedGlyphs)Ui.x+=ar,Ui.y+=yr})(je.positionedLines,Xt,kn,Qn,Bn,$n),je.top+=-Qn*$n,je.bottom=je.top+$n,je.left+=-kn*Bn,je.right=je.left+Bn,je.hasBaseline=Tn}(Ve,e,r,u,ae,x,C,I,N,D,z,$),!function(je){for(const _t of je)if(0!==_t.positionedGlyphs.length)return!1;return!0}(Ae)&&Ve}const uf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},aa={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Nh(i,e,r,u,m,v){if(e.imageName){const x=u[e.imageName];return x?x.displaySize[0]*e.scale*xr/v+m:0}{const x=r[e.fontStack],C=x&&x.glyphs[i];return C?C.metrics.advance*e.scale+m:0}}function fl(i,e,r,u){const m=Math.pow(i-e,2);return u?i<e?m/2:2*m:m+Math.abs(r)*r}function Bh(i,e,r){let u=0;return 10===i&&(u-=1e4),r&&(u+=150),40!==i&&65288!==i||(u+=50),41!==e&&65289!==e||(u+=50),u}function Am(i,e,r,u,m,v){let x=null,C=fl(e,r,m,v);for(const I of u){const D=fl(e-I.x,r,m,v)+I.badness;D<=C&&(x=I,C=D)}return{index:i,x:e,priorBreak:x,badness:C}}function ly(i){return i?ly(i.priorBreak).concat(i.index):[]}function cy(i){let e=.5,r=.5;switch(i){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Ao(i,e,r,u,m){if(!(e||r||u||m))return;const v=i.length-1,x=i[v],C=(x.x+x.metrics.advance*x.scale)*e;for(let I=0;I<=v;I++)i[I].x-=C,i[I].y+=r+u+m}function Pm(i,e,r){const{horizontalAlign:u,verticalAlign:m}=cy(r),v=e[0]-i.displaySize[0]*u,x=e[1]-i.displaySize[1]*m;return{image:i,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function O_(i,e,r,u,m,v){const x=i.image;let C;if(x.content){const ae=x.content,be=x.pixelRatio||1;C=[ae[0]/be,ae[1]/be,x.displaySize[0]-ae[2]/be,x.displaySize[1]-ae[3]/be]}const I=e.left*v,D=e.right*v;let R,N,z,H;"width"===r||"both"===r?(H=m[0]+I-u[3],N=m[0]+D+u[1]):(H=m[0]+(I+D-x.displaySize[0])/2,N=H+x.displaySize[0]);const $=e.top*v,Q=e.bottom*v;return"height"===r||"both"===r?(R=m[1]+$-u[0],z=m[1]+Q+u[2]):(R=m[1]+($+Q-x.displaySize[1])/2,z=R+x.displaySize[1]),{image:x,top:R,right:N,bottom:z,left:H,collisionPadding:C}}class la extends Y{constructor(e,r,u,m,v){super(e,r),this.angle=m,this.z=u,void 0!==v&&(this.segment=v)}clone(){return new la(this.x,this.y,this.z,this.angle,this.segment)}}function zh(i,e,r,u,m){if(void 0===e.segment)return!0;let v=e,x=e.segment+1,C=0;for(;C>-r/2;){if(x--,x<0)return!1;C-=i[x].dist(v),v=i[x]}C+=i[x].dist(i[x+1]),x++;const I=[];let D=0;for(;C<r/2;){const R=i[x],N=i[x+1];if(!N)return!1;let z=i[x-1].angleTo(R)-R.angleTo(N);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:z}),D+=z;C-I[0].distance>u;)D-=I.shift().angleDelta;if(D>m)return!1;x++,C+=R.dist(N)}return!0}function sd(i){let e=0;for(let r=0;r<i.length-1;r++)e+=i[r].dist(i[r+1]);return e}function jh(i,e,r){return i?.6*e*r:0}function uy(i,e){return Math.max(i?i.right-i.left:0,e?e.right-e.left:0)}function df(i,e,r,u,m,v){const x=jh(r,m,v),C=uy(r,u)*v;let I=0;const D=sd(i)/2;for(let R=0;R<i.length-1;R++){const N=i[R],z=i[R+1],H=N.dist(z);if(I+H>D){const $=(D-I)/H,Q=Ei(N.x,z.x,$),ae=Ei(N.y,z.y,$),be=new la(Q,ae,0,z.angleTo(N),R);return!x||zh(i,be,C,x,e)?be:void 0}I+=H}}function e1(i,e,r,u,m,v,x,C,I){const D=jh(u,v,x),R=uy(u,m),N=R*x,z=0===i[0].x||i[0].x===I||0===i[0].y||i[0].y===I;return e-N<e/4&&(e=N+e/4),ad(i,z?e/2*C%e:(R/2+2*v)*x*C%e,e,D,r,N,z,!1,I)}function ad(i,e,r,u,m,v,x,C,I){const D=v/2,R=sd(i);let N=0,z=e-r,H=[];for(let $=0;$<i.length-1;$++){const Q=i[$],ae=i[$+1],be=Q.dist(ae),Re=ae.angleTo(Q);for(;z+r<N+be;){z+=r;const xe=(z-N)/be,Ae=Ei(Q.x,ae.x,xe),Ve=Ei(Q.y,ae.y,xe);if(Ae>=0&&Ae<I&&Ve>=0&&Ve<I&&z-D>=0&&z+D<=R){const je=new la(Ae,Ve,0,Re,$);je._round(),u&&!zh(i,je,v,u,m)||H.push(je)}}N+=be}return C||H.length||x||(H=ad(i,N/2,r,u,m,v,x,!0,I)),H}function dy(i,e,r,u,m){const v=[];for(let x=0;x<i.length;x++){const C=i[x];let I;for(let D=0;D<C.length-1;D++){let R=C[D],N=C[D+1];R.x<e&&N.x<e||(R.x<e?R=new Y(e,R.y+(e-R.x)/(N.x-R.x)*(N.y-R.y))._round():N.x<e&&(N=new Y(e,R.y+(e-R.x)/(N.x-R.x)*(N.y-R.y))._round()),R.y<r&&N.y<r||(R.y<r?R=new Y(R.x+(r-R.y)/(N.y-R.y)*(N.x-R.x),r)._round():N.y<r&&(N=new Y(R.x+(r-R.y)/(N.y-R.y)*(N.x-R.x),r)._round()),R.x>=u&&N.x>=u||(R.x>=u?R=new Y(u,R.y+(u-R.x)/(N.x-R.x)*(N.y-R.y))._round():N.x>=u&&(N=new Y(u,R.y+(u-R.x)/(N.x-R.x)*(N.y-R.y))._round()),R.y>=m&&N.y>=m||(R.y>=m?R=new Y(R.x+(m-R.y)/(N.y-R.y)*(N.x-R.x),m)._round():N.y>=m&&(N=new Y(R.x+(m-R.y)/(N.y-R.y)*(N.x-R.x),m)._round()),I&&R.equals(I[I.length-1])||(I=[R],v.push(I)),I.push(N)))))}}return v}fn(la,"Anchor");const Vh=1e20;function hf(i,e,r,u,m,v,x,C,I){for(let D=e;D<e+u;D++)pf(i,r*v+D,v,m,x,C,I);for(let D=r;D<r+m;D++)pf(i,D*v+e,1,u,x,C,I)}function pf(i,e,r,u,m,v,x){v[0]=0,x[0]=-Vh,x[1]=Vh,m[0]=i[e];for(let C=1,I=0,D=0;C<u;C++){m[C]=i[e+C*r];const R=C*C;do{const N=v[I];D=(m[C]-m[N]+R-N*N)/(C-N)/2}while(D<=x[I]&&--I>-1);I++,v[I]=C,x[I]=D,x[I+1]=Vh}for(let C=0,I=0;C<u;C++){for(;x[I+1]<C;)I++;const D=v[I],R=C-D;i[e+C*r]=m[D]+R*R}}const Qr=2,ld={none:0,ideographs:1,all:2};class ml{constructor(e,r,u){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const u=[];for(const m in e)for(const v of e[m])u.push({stack:m,id:v});Et(u,({stack:m,id:v},x)=>{let C=this.entries[m];C||(C=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=C.glyphs[v];if(void 0!==I)return void x(null,{stack:m,id:v,glyph:I});if(I=this._tinySDF(C,m,v),I)return C.glyphs[v]=I,void x(null,{stack:m,id:v,glyph:I});const D=Math.floor(v/256);if(256*D>65535)return void x(new Error("glyphs > 65535 not supported"));if(C.ranges[D])return void x(null,{stack:m,id:v,glyph:I});let R=C.requests[D];R||(R=C.requests[D]=[],ml.loadGlyphRange(m,D,this.url,this.requestManager,(N,z)=>{if(z){C.ascender=z.ascender,C.descender=z.descender;for(const H in z.glyphs)this._doesCharSupportLocalGlyph(+H)||(C.glyphs[+H]=z.glyphs[+H]);C.ranges[D]=!0}for(const H of R)H(N,z);delete C.requests[D]})),R.push((N,z)=>{N?x(N):z&&x(null,{stack:m,id:v,glyph:z.glyphs[v]||null})})},(m,v)=>{if(m)r(m);else if(v){const x={};for(const{stack:C,id:I,glyph:D}of v)void 0===x[C]&&(x[C]={}),void 0===x[C].glyphs&&(x[C].glyphs={}),x[C].glyphs[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},x[C].ascender=this.entries[C].ascender,x[C].descender=this.entries[C].descender;r(null,x)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==ld.none&&(this.localGlyphMode===ld.all?!!this.localFontFamily:!!this.localFontFamily&&(dn["CJK Unified Ideographs"](e)||dn["Hangul Syllables"](e)||dn.Hiragana(e)||dn.Katakana(e)||dn["CJK Symbols and Punctuation"](e)))}_tinySDF(e,r,u){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(u))return;let v=e.tinySDF;if(!v){let Q="400";/bold/i.test(r)?Q="900":/medium/i.test(r)?Q="500":/light/i.test(r)&&(Q="200"),v=e.tinySDF=new ml.TinySDF({fontFamily:m,fontWeight:Q,fontSize:24*Qr,buffer:3*Qr,radius:8*Qr}),v.fontWeight=Q}if(this.localGlyphs[v.fontWeight][u])return this.localGlyphs[v.fontWeight][u];const x=String.fromCharCode(u),{data:C,width:I,height:D,glyphWidth:R,glyphHeight:N,glyphLeft:z,glyphTop:H,glyphAdvance:$}=v.draw(x);return this.localGlyphs[v.fontWeight][u]={id:u,bitmap:new lo({width:I,height:D},C),metrics:{width:R/Qr,height:N/Qr,left:z/Qr,top:H/Qr-27,advance:$/Qr,localGlyph:!0}}}}ml.loadGlyphRange=function(i,e,r,u,m){const v=256*e,x=v+255,C=u.transformRequest(u.normalizeGlyphsURL(r).replace("{fontstack}",i).replace("{range}",`${v}-${x}`),_r.Glyphs);ga(C,(I,D)=>{if(I)m(I);else if(D){const R={},N=new km(D).readFields(iy,{});for(const z of N.glyphs)R[z.id]=z;m(null,{glyphs:R,ascender:N.ascender,descender:N.descender})}})},ml.TinySDF=class{constructor({fontSize:i=24,buffer:e=3,radius:r=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:x="normal"}={}){this.buffer=e,this.cutoff=u,this.radius=r;const C=this.size=i+4*e,I=this._createCanvas(C),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${x} ${v} ${i}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(i){const e=document.createElement("canvas");return e.width=e.height=i,e}draw(i){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(i),x=Math.ceil(r),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),I=Math.min(this.size-this.buffer,x+Math.ceil(u)),D=C+2*this.buffer,R=I+2*this.buffer,N=Math.max(D*R,0),z=new Uint8ClampedArray(N),H={data:z,width:D,height:R,glyphWidth:C,glyphHeight:I,glyphTop:x,glyphLeft:0,glyphAdvance:e};if(0===C||0===I)return H;const{ctx:$,buffer:Q,gridInner:ae,gridOuter:be}=this;$.clearRect(Q,Q,C,I),$.fillText(i,Q,Q+x);const Re=$.getImageData(Q,Q,C,I);be.fill(Vh,0,N),ae.fill(0,0,N);for(let xe=0;xe<I;xe++)for(let Ae=0;Ae<C;Ae++){const Ve=Re.data[4*(xe*C+Ae)+3]/255;if(0===Ve)continue;const je=(xe+Q)*D+Ae+Q;if(1===Ve)be[je]=0,ae[je]=Vh;else{const _t=.5-Ve;be[je]=_t>0?_t*_t:0,ae[je]=_t<0?_t*_t:0}}hf(be,0,0,D,R,D,this.f,this.v,this.z),hf(ae,Q,Q,C,I,D,this.f,this.v,this.z);for(let xe=0;xe<N;xe++){const Ae=Math.sqrt(be[xe])-Math.sqrt(ae[xe]);z[xe]=Math.round(255-255*(Ae/this.radius+this.cutoff))}return H}};const Ga=Go;function Uh(i,e,r,u){const m=[],v=i.image,x=v.pixelRatio,C=v.paddedRect.w-2*Ga,I=v.paddedRect.h-2*Ga,D=i.right-i.left,R=i.bottom-i.top,N=v.stretchX||[[0,C]],z=v.stretchY||[[0,I]],H=(bt,At)=>bt+At[1]-At[0],$=N.reduce(H,0),Q=z.reduce(H,0),ae=C-$,be=I-Q;let Re=0,xe=$,Ae=0,Ve=Q,je=0,_t=ae,ft=0,St=be;if(v.content&&u){const bt=v.content;Re=ru(N,0,bt[0]),Ae=ru(z,0,bt[1]),xe=ru(N,bt[0],bt[2]),Ve=ru(z,bt[1],bt[3]),je=bt[0]-Re,ft=bt[1]-Ae,_t=bt[2]-bt[0]-xe,St=bt[3]-bt[1]-Ve}const Ht=(bt,At,kt,Nt)=>{const Gt=Om(bt.stretch-Re,xe,D,i.left),Ct=Rm(bt.fixed-je,_t,bt.stretch,$),an=Om(At.stretch-Ae,Ve,R,i.top),mn=Rm(At.fixed-ft,St,At.stretch,Q),un=Om(kt.stretch-Re,xe,D,i.left),Bn=Rm(kt.fixed-je,_t,kt.stretch,$),Xt=Om(Nt.stretch-Ae,Ve,R,i.top),Tn=Rm(Nt.fixed-ft,St,Nt.stretch,Q),On=new Y(Gt,an),yi=new Y(un,an),$n=new Y(un,Xt),kn=new Y(Gt,Xt),Qn=new Y(Ct/x,mn/x),wn=new Y(Bn/x,Tn/x),qn=e*Math.PI/180;if(qn){const Oi=Math.sin(qn),Vi=Math.cos(qn),ar=[Vi,-Oi,Oi,Vi];On._matMult(ar),yi._matMult(ar),kn._matMult(ar),$n._matMult(ar)}const ji=bt.stretch+bt.fixed,fi=At.stretch+At.fixed;return{tl:On,tr:yi,bl:kn,br:$n,tex:{x:v.paddedRect.x+Ga+ji,y:v.paddedRect.y+Ga+fi,w:kt.stretch+kt.fixed-ji,h:Nt.stretch+Nt.fixed-fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qn,pixelOffsetBR:wn,minFontScaleX:_t/x/D,minFontScaleY:St/x/R,isSDF:r}};if(u&&(v.stretchX||v.stretchY)){const bt=ff(N,ae,$),At=ff(z,be,Q);for(let kt=0;kt<bt.length-1;kt++){const Nt=bt[kt],Gt=bt[kt+1];for(let Ct=0;Ct<At.length-1;Ct++)m.push(Ht(Nt,At[Ct],Gt,At[Ct+1]))}}else m.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return m}function ru(i,e,r){let u=0;for(const m of i)u+=Math.max(e,Math.min(r,m[1]))-Math.max(e,Math.min(r,m[0]));return u}function ff(i,e,r){const u=[{fixed:-Ga,stretch:0}];for(const[m,v]of i){const x=u[u.length-1];u.push({fixed:m-x.stretch,stretch:x.stretch}),u.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return u.push({fixed:e+Ga,stretch:r}),u}function Om(i,e,r,u){return i/e*r+u}function Rm(i,e,r,u){return i-e*r/u}function ou(i,e,r,u){const m=e+i.positionedLines[u].lineOffset;return 0===u?r+m/2:r+(m+(e+i.positionedLines[u-1].lineOffset))/2}class hy{constructor(e=[],r=Ab){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:u}=this,m=r[e];for(;e>0;){const v=e-1>>1,x=r[v];if(u(m,x)>=0)break;r[e]=x,e=v}r[e]=m}_down(e){const{data:r,compare:u}=this,m=this.length>>1,v=r[e];for(;e<m;){let x=1+(e<<1),C=r[x];const I=x+1;if(I<this.length&&u(r[I],C)<0&&(x=I,C=r[I]),u(C,v)>=0)break;r[e]=C,e=x}r[e]=v}}function Ab(i,e){return i<e?-1:i>e?1:0}function t1(i,e=1,r=!1){let u=1/0,m=1/0,v=-1/0,x=-1/0;const C=i[0];for(let H=0;H<C.length;H++){const $=C[H];(!H||$.x<u)&&(u=$.x),(!H||$.y<m)&&(m=$.y),(!H||$.x>v)&&(v=$.x),(!H||$.y>x)&&(x=$.y)}const I=Math.min(v-u,x-m);let D=I/2;const R=new hy([],n1);if(0===I)return new Y(u,m);for(let H=u;H<v;H+=I)for(let $=m;$<x;$+=I)R.push(new mf(H+D,$+D,D,i));let N=function(H){let $=0,Q=0,ae=0;const be=H[0];for(let Re=0,xe=be.length,Ae=xe-1;Re<xe;Ae=Re++){const Ve=be[Re],je=be[Ae],_t=Ve.x*je.y-je.x*Ve.y;Q+=(Ve.x+je.x)*_t,ae+=(Ve.y+je.y)*_t,$+=3*_t}return new mf(Q/$,ae/$,0,H)}(i),z=R.length;for(;R.length;){const H=R.pop();(H.d>N.d||!N.d)&&(N=H,r&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,z)),H.max-N.d<=e||(D=H.h/2,R.push(new mf(H.p.x-D,H.p.y-D,D,i)),R.push(new mf(H.p.x+D,H.p.y-D,D,i)),R.push(new mf(H.p.x-D,H.p.y+D,D,i)),R.push(new mf(H.p.x+D,H.p.y+D,D,i)),z+=4)}return r&&(console.log(`num probes: ${z}`),console.log(`best distance: ${N.d}`)),N.p}function n1(i,e){return e.max-i.max}class mf{constructor(e,r,u,m){this.p=new Y(e,r),this.h=u,this.d=function(v,x){let C=!1,I=1/0;for(let D=0;D<x.length;D++){const R=x[D];for(let N=0,z=R.length,H=z-1;N<z;H=N++){const $=R[N],Q=R[H];$.y>v.y!=Q.y>v.y&&v.x<(Q.x-$.x)*(v.y-$.y)/(Q.y-$.y)+$.x&&(C=!C),I=Math.min(I,ed(v,$,Q))}}return(C?1:-1)*Math.sqrt(I)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}}const su=7,py=Number.POSITIVE_INFINITY,Uv=Math.sqrt(2);function fy(i,[e,r]){let u=0,m=0;if(r===py){e<0&&(e=0);const v=e/Uv;switch(i){case"top-right":case"top-left":m=v-su;break;case"bottom-right":case"bottom-left":m=-v+su;break;case"bottom":m=-e+su;break;case"top":m=e-su}switch(i){case"top-right":case"bottom-right":u=-v;break;case"top-left":case"bottom-left":u=v;break;case"left":u=e;break;case"right":u=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),i){case"top-right":case"top-left":case"top":m=r-su;break;case"bottom-right":case"bottom-left":case"bottom":m=-r+su}switch(i){case"top-right":case"bottom-right":case"right":u=-e;break;case"top-left":case"bottom-left":case"left":u=e}}return[u,m]}function Lm(i,e,r,u,m,v,x,C,I,D){i.createArrays(),i.tilePixelRatio=Sn/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const R=i.layers[0].layout,N=i.layers[0]._unevaluatedLayout._values,z={};if("composite"===i.textSizeData.kind){const{minZoom:Q,maxZoom:ae}=i.textSizeData;z.compositeTextSizes=[N["text-size"].possiblyEvaluate(new F(Q),C),N["text-size"].possiblyEvaluate(new F(ae),C)]}if("composite"===i.iconSizeData.kind){const{minZoom:Q,maxZoom:ae}=i.iconSizeData;z.compositeIconSizes=[N["icon-size"].possiblyEvaluate(new F(Q),C),N["icon-size"].possiblyEvaluate(new F(ae),C)]}z.layoutTextSize=N["text-size"].possiblyEvaluate(new F(I+1),C),z.layoutIconSize=N["icon-size"].possiblyEvaluate(new F(I+1),C),z.textMaxSize=N["text-size"].possiblyEvaluate(new F(18),C);const H="map"===R.get("text-rotation-alignment")&&"point"!==R.get("symbol-placement"),$=R.get("text-size");for(const Q of i.features){const ae=R.get("text-font").evaluate(Q,{},C).join(","),be=$.evaluate(Q,{},C),Re=z.layoutTextSize.evaluate(Q,{},C),xe=(z.layoutIconSize.evaluate(Q,{},C),{horizontal:{},vertical:void 0}),Ae=Q.text;let Ve,je=[0,0];if(Ae){const St=Ae.toString(),Ht=R.get("text-letter-spacing").evaluate(Q,{},C)*xr,bt=R.get("text-line-height").evaluate(Q,{},C)*xr,At=Ky(St)?Ht:0,kt=R.get("text-anchor").evaluate(Q,{},C),Nt=R.get("text-variable-anchor");if(!Nt){const un=R.get("text-radial-offset").evaluate(Q,{},C);je=un?fy(kt,[un*xr,py]):R.get("text-offset").evaluate(Q,{},C).map(Bn=>Bn*xr)}let Gt=H?"center":R.get("text-justify").evaluate(Q,{},C);const Ct="point"===R.get("symbol-placement"),an=Ct?R.get("text-max-width").evaluate(Q,{},C)*xr:1/0,mn=un=>{i.allowVerticalPlacement&&Bc(St)&&(xe.vertical=ay(Ae,e,r,m,ae,an,bt,kt,un,At,je,rs.vertical,!0,Re,be))};if(!H&&Nt){const un="auto"===Gt?Nt.map(Xt=>Wo(Xt)):[Gt];let Bn=!1;for(let Xt=0;Xt<un.length;Xt++){const Tn=un[Xt];if(!xe.horizontal[Tn])if(Bn)xe.horizontal[Tn]=xe.horizontal[0];else{const On=ay(Ae,e,r,m,ae,an,bt,"center",Tn,At,je,rs.horizontal,!1,Re,be);On&&(xe.horizontal[Tn]=On,Bn=1===On.positionedLines.length)}}mn("left")}else{if("auto"===Gt&&(Gt=Wo(kt)),Ct||R.get("text-writing-mode").indexOf("horizontal")>=0||!Bc(St)){const un=ay(Ae,e,r,m,ae,an,bt,kt,Gt,At,je,rs.horizontal,!1,Re,be);un&&(xe.horizontal[Gt]=un)}mn(Ct?"left":Gt)}}let _t=!1;if(Q.icon&&Q.icon.name){const St=u[Q.icon.name];St&&(Ve=Pm(m[Q.icon.name],R.get("icon-offset").evaluate(Q,{},C),R.get("icon-anchor").evaluate(Q,{},C)),_t=St.sdf,void 0===i.sdfIcons?i.sdfIcons=St.sdf:i.sdfIcons!==St.sdf&&tn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(St.pixelRatio!==i.pixelRatio||0!==R.get("icon-rotate").constantOr(1))&&(i.iconsNeedLinear=!0))}const ft=my(xe.horizontal)||xe.vertical;i.iconsInText||(i.iconsInText=!!ft&&ft.iconsInText),(ft||Ve)&&R_(i,Q,xe,Ve,u,z,Re,0,je,_t,x,C,D)}v&&i.generateCollisionDebugBuffers(I,i.collisionBoxArray)}function Wo(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function R_(i,e,r,u,m,v,x,C,I,D,R,N,z){let H=v.textMaxSize.evaluate(e,{},N);void 0===H&&(H=x);const $=i.layers[0].layout,Q=$.get("icon-offset").evaluate(e,{},N),ae=my(r.horizontal)||r.vertical,be="globe"===z.name,Re=xr,xe=x/Re,Ae=i.tilePixelRatio*H/Re,Ve=(kt=i.overscaling,i.zoom>18&&kt>2&&(kt>>=1),Math.max(Sn/(512*kt),1)*$.get("symbol-spacing")),je=$.get("text-padding")*i.tilePixelRatio,_t=$.get("icon-padding")*i.tilePixelRatio,ft=K($.get("text-max-angle")),St="map"===$.get("text-rotation-alignment")&&"point"!==$.get("symbol-placement"),Ht="map"===$.get("icon-rotation-alignment")&&"point"!==$.get("symbol-placement"),bt=$.get("symbol-placement"),At=Ve/2;var kt;const Nt=$.get("icon-text-fit");let Gt;u&&"none"!==Nt&&(i.allowVerticalPlacement&&r.vertical&&(Gt=O_(u,r.vertical,Nt,$.get("icon-text-fit-padding"),Q,xe)),ae&&(u=O_(u,ae,Nt,$.get("icon-text-fit-padding"),Q,xe)));const Ct=(an,mn,un)=>{if(mn.x<0||mn.x>=Sn||mn.y<0||mn.y>=Sn)return;let Bn=null;if(be){const{x:Xt,y:Tn,z:On}=z.projectTilePoint(mn.x,mn.y,un);Bn={anchor:new la(Xt,Tn,On,0,void 0),up:z.upVector(un,mn.x,mn.y)}}!function(Xt,Tn,On,yi,$n,kn,Qn,wn,qn,ji,fi,Oi,Vi,ar,yr,Dr,Ui,Lr,kr,hr,Mi,Ar,Hi,vo,pr){const Fr=Xt.addToLineVertexArray(Tn,yi);let lr,fr,Nr,Os,fu,_d,xl,wl=0,El=0,Zv=0,vd=0,Ay=-1,Tf=-1;const Cl={};let Km=Ap("");const Xa=On?On.anchor:Tn;let Sl=0,jn=0;if(void 0===qn._unevaluatedLayout.getValue("text-radial-offset")?[Sl,jn]=qn.layout.get("text-offset").evaluate(Mi,{},pr).map(Wr=>Wr*xr):(Sl=qn.layout.get("text-radial-offset").evaluate(Mi,{},pr)*xr,jn=py),Xt.allowVerticalPlacement&&$n.vertical){const Wr=$n.vertical;if(yr)_d=gy(Wr),wn&&(xl=gy(wn));else{const os=qn.layout.get("text-rotate").evaluate(Mi,{},pr)+90;Nr=cd(ji,Xa,Tn,fi,Oi,Vi,Wr,ar,os,Dr),wn&&(Os=cd(ji,Xa,Tn,fi,Oi,Vi,wn,Lr,os))}}if(kn){const Wr=qn.layout.get("icon-rotate").evaluate(Mi,{},pr),os="none"!==qn.layout.get("icon-text-fit"),gu=Uh(kn,Wr,Hi,os),Tl=wn?Uh(wn,Wr,Hi,os):void 0;fr=cd(ji,Xa,Tn,fi,Oi,Vi,kn,Lr,Wr),wl=4*gu.length;const pi=Xt.iconSizeData;let yu=null;"source"===pi.kind?(yu=[is*qn.layout.get("icon-size").evaluate(Mi,{},pr)],yu[0]>au&&tn(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Wa}. Reduce your "icon-size".`)):"composite"===pi.kind&&(yu=[is*Ar.compositeIconSizes[0].evaluate(Mi,{},pr),is*Ar.compositeIconSizes[1].evaluate(Mi,{},pr)],(yu[0]>au||yu[1]>au)&&tn(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Wa}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,gu,yu,hr,kr,Mi,!1,On,Tn,Fr.lineStartIndex,Fr.lineLength,-1,vo,pr),Ay=Xt.icon.placedSymbolArray.length-1,Tl&&(El=4*Tl.length,Xt.addSymbols(Xt.icon,Tl,yu,hr,kr,Mi,rs.vertical,On,Tn,Fr.lineStartIndex,Fr.lineLength,-1,vo,pr),Tf=Xt.icon.placedSymbolArray.length-1)}for(const Wr in $n.horizontal){const os=$n.horizontal[Wr];lr||(Km=Ap(os.text),yr?fu=gy(os):lr=cd(ji,Xa,Tn,fi,Oi,Vi,os,ar,qn.layout.get("text-rotate").evaluate(Mi,{},pr),Dr));const gu=1===os.positionedLines.length;if(Zv+=L_(Xt,On,Tn,os,Qn,qn,yr,Mi,Dr,Fr,$n.vertical?rs.horizontal:rs.horizontalOnly,gu?Object.keys($n.horizontal):[Wr],Cl,Ay,Ar,vo,pr),gu)break}$n.vertical&&(vd+=L_(Xt,On,Tn,$n.vertical,Qn,qn,yr,Mi,Dr,Fr,rs.vertical,["vertical"],Cl,Tf,Ar,vo,pr));let mu=-1;const Py=(Wr,os)=>Wr?Math.max(Wr,os):os;mu=Py(fu,mu),mu=Py(_d,mu),mu=Py(xl,mu);const $_=mu>-1?1:0;Xt.glyphOffsetArray.length>=As.MAX_GLYPHS&&tn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Mi.sortKey&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,Mi.sortKey),Xt.symbolInstances.emplaceBack(Xa.x,Xa.y,Xa.z,Tn.x,Tn.y,Cl.right>=0?Cl.right:-1,Cl.center>=0?Cl.center:-1,Cl.left>=0?Cl.left:-1,Cl.vertical>=0?Cl.vertical:-1,Ay,Tf,Km,void 0!==lr?lr:Xt.collisionBoxArray.length,void 0!==lr?lr+1:Xt.collisionBoxArray.length,void 0!==Nr?Nr:Xt.collisionBoxArray.length,void 0!==Nr?Nr+1:Xt.collisionBoxArray.length,void 0!==fr?fr:Xt.collisionBoxArray.length,void 0!==fr?fr+1:Xt.collisionBoxArray.length,Os||Xt.collisionBoxArray.length,Os?Os+1:Xt.collisionBoxArray.length,fi,Zv,vd,wl,El,$_,0,Sl,jn,mu)}(i,mn,Bn,an,r,u,m,Gt,i.layers[0],i.collisionBoxArray,e.index,e.sourceLayerIndex,i.index,je,St,I,0,_t,Ht,Q,e,v,D,R,N)};if("line"===bt)for(const an of dy(e.geometry,0,0,Sn,Sn)){const mn=e1(an,Ve,ft,r.vertical||ae,u,Re,Ae,i.overscaling,Sn);for(const un of mn)ae&&F_(i,ae.text,At,un)||Ct(an,un,N)}else if("line-center"===bt){for(const an of e.geometry)if(an.length>1){const mn=df(an,ft,r.vertical||ae,u,Re,Ae);mn&&Ct(an,mn,N)}}else if("Polygon"===e.type)for(const an of mo(e.geometry,0)){const mn=t1(an,16);Ct(an[0],new la(mn.x,mn.y,0,0,void 0),N)}else if("LineString"===e.type)for(const an of e.geometry)Ct(an,new la(an[0].x,an[0].y,0,0,void 0),N);else if("Point"===e.type)for(const an of e.geometry)for(const mn of an)Ct([mn],new la(mn.x,mn.y,0,0,void 0),N)}const Wa=255,au=Wa*is;function L_(i,e,r,u,m,v,x,C,I,D,R,N,z,H,$,Q,ae){const be=function(Ae,Ve,je,_t,ft,St,Ht,bt){const At=[];if(0===Ve.positionedLines.length)return At;const kt=_t.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,Nt=function(un){const Bn=un[0],Xt=un[1],Tn=Bn*Xt;return Tn>0?[Bn,-Xt]:Tn<0?[-Bn,Xt]:0===Bn?[Xt,Bn]:[Xt,-Bn]}(je);let Gt=Math.abs(Ve.top-Ve.bottom);for(const un of Ve.positionedLines)Gt-=un.lineOffset;const Ct=Ve.positionedLines.length,an=Gt/Ct;let mn=Ve.top-je[1];for(let un=0;un<Ct;++un){const Bn=Ve.positionedLines[un];mn=ou(Ve,an,mn,un);for(const Xt of Bn.positionedGlyphs){if(!Xt.rect)continue;const Tn=Xt.rect||{};let On=A_+1,yi=!0,$n=1,kn=0;if(Xt.imageName){const Hi=Ht[Xt.imageName];if(!Hi)continue;if(Hi.sdf){tn("SDF images are not supported in formatted text and will be ignored.");continue}yi=!1,$n=Hi.pixelRatio,On=Go/$n}const Qn=(ft||bt)&&Xt.vertical,wn=Xt.metrics.advance*Xt.scale/2,qn=Xt.metrics,ji=Xt.rect;if(null===ji)continue;bt&&Ve.verticalizable&&(kn=Xt.imageName?wn-Xt.metrics.width*Xt.scale/2:0);const fi=ft?[Xt.x+wn,Xt.y]:[0,0];let Oi=[0,0],Vi=[0,0],ar=!1;ft||(Qn?(Vi=[Xt.x+wn+Nt[0],Xt.y+Nt[1]-kn],ar=!0):Oi=[Xt.x+wn+je[0],Xt.y+je[1]-kn]);const yr=ji.w*Xt.scale/($n*(Xt.localGlyph?Qr:1)),Dr=ji.h*Xt.scale/($n*(Xt.localGlyph?Qr:1));let Ui,Lr,kr,hr;if(Qn){const Hi=Xt.y-mn,vo=new Y(-wn,wn-Hi),pr=-Math.PI/2,Fr=new Y(...Vi);Ui=new Y(-wn+Oi[0],Oi[1]),Ui._rotateAround(pr,vo)._add(Fr),Ui.x+=-Hi+wn,Ui.y-=(qn.left-On)*Xt.scale;const lr=Xt.imageName?qn.advance*Xt.scale:xr*Xt.scale,fr=String.fromCharCode(Xt.glyph);C_(fr)?Ui.x+=(1-On)*Xt.scale:S_(fr)?Ui.x+=lr-qn.height*Xt.scale+(-On-1)*Xt.scale:Ui.x+=Xt.imageName||qn.width+2*On===ji.w&&qn.height+2*On===ji.h?(lr-Dr)/2:(lr-(qn.height+2*On)*Xt.scale)/2,Lr=new Y(Ui.x,Ui.y-yr),kr=new Y(Ui.x+Dr,Ui.y),hr=new Y(Ui.x+Dr,Ui.y-yr)}else{const Hi=(qn.left-On)*Xt.scale-wn+Oi[0],vo=(-qn.top-On)*Xt.scale+Oi[1],pr=Hi+yr,Fr=vo+Dr;Ui=new Y(Hi,vo),Lr=new Y(pr,vo),kr=new Y(Hi,Fr),hr=new Y(pr,Fr)}if(kt){let Hi;Hi=ft?new Y(0,0):ar?new Y(Nt[0],Nt[1]):new Y(je[0],je[1]),Ui._rotateAround(kt,Hi),Lr._rotateAround(kt,Hi),kr._rotateAround(kt,Hi),hr._rotateAround(kt,Hi)}const Mi=new Y(0,0),Ar=new Y(0,0);At.push({tl:Ui,tr:Lr,bl:kr,br:hr,tex:Tn,writingMode:Ve.writingMode,glyphOffset:fi,sectionIndex:Xt.sectionIndex,isSDF:yi,pixelOffsetTL:Mi,pixelOffsetBR:Ar,minFontScaleX:0,minFontScaleY:0})}}return At}(0,u,I,v,x,C,m,i.allowVerticalPlacement),Re=i.textSizeData;let xe=null;"source"===Re.kind?(xe=[is*v.layout.get("text-size").evaluate(C,{},ae)],xe[0]>au&&tn(`${i.layerIds[0]}: Value for "text-size" is >= ${Wa}. Reduce your "text-size".`)):"composite"===Re.kind&&(xe=[is*$.compositeTextSizes[0].evaluate(C,{},ae),is*$.compositeTextSizes[1].evaluate(C,{},ae)],(xe[0]>au||xe[1]>au)&&tn(`${i.layerIds[0]}: Value for "text-size" is >= ${Wa}. Reduce your "text-size".`)),i.addSymbols(i.text,be,xe,I,x,C,R,e,r,D.lineStartIndex,D.lineLength,H,Q,ae);for(const Ae of N)z[Ae]=i.text.placedSymbolArray.length-1;return 4*be.length}function my(i){for(const e in i)return i[e];return null}function cd(i,e,r,u,m,v,x,C,I,D){let R=x.top,N=x.bottom,z=x.left,H=x.right;const $=x.collisionPadding;if($&&(z-=$[0],R-=$[1],H+=$[2],N+=$[3]),I){const Q=new Y(z,R),ae=new Y(H,R),be=new Y(z,N),Re=new Y(H,N),xe=K(I);let Ae=new Y(0,0);D&&(Ae=new Y(D[0],D[1])),Q._rotateAround(xe,Ae),ae._rotateAround(xe,Ae),be._rotateAround(xe,Ae),Re._rotateAround(xe,Ae),z=Math.min(Q.x,ae.x,be.x,Re.x),H=Math.max(Q.x,ae.x,be.x,Re.x),R=Math.min(Q.y,ae.y,be.y,Re.y),N=Math.max(Q.y,ae.y,be.y,Re.y)}return i.emplaceBack(e.x,e.y,e.z,r.x,r.y,z,R,H,N,C,u,m,v),i.length-1}function gy(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const e=i.bottom-i.top;return e>0?Math.max(10,e):null}function F_(i,e,r,u){const m=i.compareText;if(e in m){const v=m[e];for(let x=v.length-1;x>=0;x--)if(u.dist(v[x])<r)return!0}else m[e]=[];return m[e].push(u),!1}function lu(i,e){const r=i.fovAboveCenter,u=i.elevation?i.elevation.getMinElevationBelowMSL()*e:0,m=(i._camera.position[2]*i.worldSize-u)/Math.cos(i._pitch),v=Math.sin(r)*m/Math.sin(Math.max(Math.PI/2-i._pitch-r,.01)),x=Math.sin(i._pitch)*v+m;return Math.min(1.01*x,m*(1/i._horizonShift))}function ca(i,e){if(!e.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:e};const r=Math.pow(2,-i.z),u=i.x*r,m=(i.x+1)*r,v=i.y*r,x=(i.y+1)*r,C=na(u),I=na(m),D=ao(v),R=ao(x),N=e.project(C,D),z=e.project(I,D),H=e.project(I,R),$=e.project(C,R);let Q=Math.min(N.x,z.x,H.x,$.x),ae=Math.min(N.y,z.y,H.y,$.y),be=Math.max(N.x,z.x,H.x,$.x),Re=Math.max(N.y,z.y,H.y,$.y);const xe=r/16;function Ae(je,_t,ft,St,Ht,bt){const At=(ft+Ht)/2,kt=(St+bt)/2,Nt=e.project(na(At),ao(kt)),Gt=Math.max(0,Q-Nt.x,ae-Nt.y,Nt.x-be,Nt.y-Re);Q=Math.min(Q,Nt.x),be=Math.max(be,Nt.x),ae=Math.min(ae,Nt.y),Re=Math.max(Re,Nt.y),Gt>xe&&(Ae(je,Nt,ft,St,At,kt),Ae(Nt,_t,At,kt,Ht,bt))}Ae(N,z,u,v,m,v),Ae(z,H,m,v,m,x),Ae(H,$,m,x,u,x),Ae($,N,u,x,u,v),Q-=xe,ae-=xe,be+=xe,Re+=xe;const Ve=1/Math.max(be-Q,Re-ae);return{scale:Ve,x:Q*Ve,y:ae*Ve,x2:be*Ve,y2:Re*Ve,projection:e}}const N_=es(new Float32Array(16));class cu{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new Fi(0,0)}projectTilePoint(e,r,u){return{x:e,y:r,z:0}}locationPoint(e,r,u=!0){return e._coordinatePoint(e.locationCoordinate(r),u)}pixelsPerMeter(e,r){return ta(1,e)*r}pixelSpaceConversion(e,r,u){return 1}farthestPixelDistance(e){return lu(e,e.pixelsPerMeter)}pointCoordinate(e,r,u,m){const v=e.horizonLineFromTop(!1),x=new Y(r,Math.max(v,u));return e.rayIntersectionCoordinate(e.pointRayIntersection(x,m))}pointCoordinate3D(e,r,u){const m=new Y(r,u);if(e.elevation)return e.elevation.pointCoordinate(m);{const v=this.pointCoordinate(e,m.x,m.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const u=e.horizonLineFromTop();return r.y<u}createInversionMatrix(e,r){return N_}createTileMatrix(e,r,u){let m,v,x;const C=u.canonical,I=es(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=ca(C,this);m=1,v=D.x+u.wrap*D.scale,x=D.y,Oa(I,I,[m/D.scale,m/D.scale,e.pixelsPerMeter/r])}else m=r/e.zoomScale(C.z),v=(C.x+Math.pow(2,C.z)*u.wrap)*m,x=C.y*m;return Qd(I,I,[v,x,0]),Oa(I,I,[m/Sn,m/Sn,1]),I}upVector(e,r,u){return[0,0,1]}upVectorScale(e,r,u){return{metersToTile:1}}}class Fm extends cu{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,u]=this.parallels=e.parallels||[29.5,45.5],m=Math.sin(K(r));this.n=(m+Math.sin(K(u)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:u,c:m,r0:v}=this,x=K(e-this.center[0]),C=K(r),I=Math.sqrt(m-2*u*Math.sin(C))/u;return{x:I*Math.sin(x*u),y:I*Math.cos(x*u)-v,z:0}}unproject(e,r){const{n:u,c:m,r0:v}=this,x=v+r;let C=Math.atan2(e,Math.abs(x))*Math.sign(x);x*u<0&&(C-=Math.PI*Math.sign(e)*Math.sign(x));const I=K(this.center[0])*u;C=ze(C,-Math.PI-I,Math.PI-I);const D=Ze(ce(C/u)+this.center[0],-180,180),R=Math.asin(Ze((m-(e*e+x*x)*u*u)/(2*u),-1,1)),N=Ze(ce(R),-fo,fo);return new Fi(D,N)}}const gl=1.340264,Nm=-.081106,uu=893e-6,gf=.003796,Bm=Math.sqrt(3)/2;class yy extends cu{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const u=Math.asin(Bm*Math.sin(r)),m=u*u,v=m*m*m;return{x:.5*(e*Math.cos(u)/(Bm*(gl+3*Nm*m+v*(7*uu+9*gf*m)))/Math.PI+.5),y:1-.5*(u*(gl+Nm*m+v*(uu+gf*m))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let u=r=(2*(1-r)-1)*Math.PI,m=u*u,v=m*m*m;for(let R,N,z,H=0;H<12&&(N=u*(gl+Nm*m+v*(uu+gf*m))-r,z=gl+3*Nm*m+v*(7*uu+9*gf*m),R=N/z,u=Ze(u-R,-Math.PI/3,Math.PI/3),m=u*u,v=m*m*m,!(Math.abs(R)<1e-12));++H);const x=Bm*e*(gl+3*Nm*m+v*(7*uu+9*gf*m))/Math.cos(u),C=Math.asin(Math.sin(u)/Bm),I=Ze(180*x/Math.PI,-180,180),D=Ze(180*C/Math.PI,-fo,fo);return new Fi(I,D)}}class B_ extends cu{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const u=360*(e-.5),m=Ze(360*(.5-r),-fo,fo);return new Fi(u,m)}}const ms=Math.PI/2;function du(i){return Math.tan((ms+i)/2)}class _o extends cu{constructor(e){super(e),this.center=e.center||[0,30];const[r,u]=this.parallels=e.parallels||[30,30];let m=K(r),v=K(u);this.southernCenter=m+v<0,this.southernCenter&&(m=-m,v=-v);const x=Math.cos(m),C=du(m);this.n=m===v?Math.sin(m):Math.log(x/Math.cos(v))/Math.log(du(v)/C),this.f=x*Math.pow(du(m),this.n)/this.n}project(e,r){r=K(r),this.southernCenter&&(r=-r),e=K(e-this.center[0]);const u=1e-6,{n:m,f:v}=this;v>0?r<-ms+u&&(r=-ms+u):r>ms-u&&(r=ms-u);const x=v/Math.pow(du(r),m);let C=x*Math.sin(m*e),I=v-x*Math.cos(m*e);return C=.5*(C/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:C,y:this.southernCenter?I:1-I,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:u,f:m}=this,v=m-r,x=Math.sign(v),C=Math.sign(u)*Math.sqrt(e*e+v*v);let I=Math.atan2(e,Math.abs(v))*x;v*u<0&&(I-=Math.PI*Math.sign(e)*x);const D=Ze(ce(I/u)+this.center[0],-180,180),R=Ze(ce(2*Math.atan(Math.pow(m/C,1/u))-ms),-fo,fo);return new Fi(D,this.southernCenter?-R:R)}}class qa extends cu{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:Js(e),y:ea(r),z:0}}unproject(e,r){const u=na(e),m=ao(r);return new Fi(u,m)}}const yl=K(fo);class ua extends cu{project(e,r){const u=(r=K(r))*r,m=u*u;return{x:.5*((e=K(e))*(.8707-.131979*u+m*(m*(.003971*u-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+u*(.015085+m*(.028874*u-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let u=r=(2*(1-r)-1)*Math.PI,m=25,v=0,x=u*u;do{x=u*u;const D=x*x;v=(u*(1.007226+x*(.015085+D*(.028874*x-.044475-.005916*D)))-r)/(1.007226+x*(.045255+D*(.259866*x-.311325-.005916*11*D))),u=Ze(u-v,-yl,yl)}while(Math.abs(v)>1e-6&&--m>0);x=u*u;const C=Ze(ce(e/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),I=ce(u);return new Fi(C,I)}}const zm=K(fo);class Hh extends cu{project(e,r){r=K(r),e=K(e);const u=Math.cos(r),m=2/Math.PI,v=Math.acos(u*Math.cos(e/2)),x=Math.sin(v)/v,C=.5*(e*m+2*u*Math.sin(e/2)/x)||0,I=.5*(r+Math.sin(r)/x)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(e,r){let u=e=(2*e-.5)*Math.PI,m=r=(2*(1-r)-1)*Math.PI,v=25;const x=1e-6;let C=0,I=0;do{const D=Math.cos(m),R=Math.sin(m),N=2*R*D,z=R*R,H=D*D,$=Math.cos(u/2),Q=Math.sin(u/2),ae=2*$*Q,be=Q*Q,Re=1-H*$*$,xe=Re?1/Re:0,Ae=Re?Math.acos(D*$)*Math.sqrt(1/Re):0,Ve=.5*(2*Ae*D*Q+2*u/Math.PI)-e,je=.5*(Ae*R+m)-r,_t=.5*xe*(H*be+Ae*D*$*z)+1/Math.PI,ft=xe*(ae*N/4-Ae*R*Q),St=.125*xe*(N*Q-Ae*R*H*ae),Ht=.5*xe*(z*$+Ae*be*D)+.5,bt=ft*St-Ht*_t;C=(je*ft-Ve*Ht)/bt,I=(Ve*St-je*_t)/bt,u=Ze(u-C,-Math.PI,Math.PI),m=Ze(m-I,-zm,zm)}while((Math.abs(C)>x||Math.abs(I)>x)&&--v>0);return new Fi(ce(u),ce(m))}}class ud extends cu{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(K(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:u,cosPhi:m}=this;return{x:K(e)*m*u+.5,y:-Math.sin(K(r))/m*u+.5,z:0}}unproject(e,r){const{scale:u,cosPhi:m}=this,v=-(r-.5)/u,x=Ze(ce((e-.5)/u)/m,-180,180),C=Math.asin(Ze(v*m,-1,1)),I=Ze(ce(C),-fo,fo);return new Fi(x,I)}}class $h extends qa{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,u){const m=Np(e,r,u);return sr(m,m,dh(Ra(u))),{x:m[0],y:m[1],z:m[2]}}locationPoint(e,r){const u=uh(r.lat,r.lng),m=so([],u),v=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude;Yu(u,u,m,ta(1,0)*Sn*v);const x=es(new Float64Array(16));return nc(x,e.pixelMatrix,e.globeMatrix),sr(u,u,x),new Y(u[0],u[1])}pixelsPerMeter(e,r){return ta(1,0)*r}pixelSpaceConversion(e,r,u){const m=ta(1,e)*r,v=Ei(ta(1,45)*r,m,u);return this.pixelsPerMeter(e,r)/v}createTileMatrix(e,r,u){const m=pm(Ra(u.canonical));return nc(new Float64Array(16),e.globeMatrix,m)}createInversionMatrix(e,r){const{center:u}=e,m=dh(Ra(r));return nm(m,m,K(u.lng)),Jd(m,m,K(u.lat)),Oa(m,m,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(e,r,u,m){return i_(e,r,u,!0)||new Ju(0,0)}pointCoordinate3D(e,r,u){const m=this.pointCoordinate(e,r,u,0);return[m.x,m.y,m.z]}isPointAboveHorizon(e,r){return!i_(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(m,v){const x=m.cameraToCenterDistance,C=m._centerAltitude*v,I=m._camera,D=m._camera.forward(),R=Ds([],Ks([],D,-x),[0,0,C]),N=m.worldSize/(2*Math.PI),z=[0,0,-N],H=m.width/m.height,$=Math.tan(m.fovAboveCenter),Q=Ks([],I.up(),$),ae=Ks([],I.right(),$*H),be=so([],Ds([],Ds([],D,Q),ae)),Re=[];let xe;if(new ah(R,be).closestPointOnSphere(z,N,Re)){const Ae=Ds([],Re,z),Ve=ks([],Ae,R);xe=Math.cos(m.fovAboveCenter)*eh(Ve)}else{const Ae=ks([],R,z),Ve=ks([],z,R);so(Ve,Ve);const je=eh(Ae)-N;xe=Math.sqrt(je*(je+2*N));const _t=Math.acos(xe/(N+je))-Math.acos(Qs(D,Ve));xe*=Math.cos(_t)}return 1.01*xe}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),u=Gc(e.zoom);if(u>0){const m=lu(e,ta(1,e.center.lat)*e.worldSize),v=e.worldSize/(2*Math.PI),x=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Ei(r,m+v*(1-Math.cos(x)),Math.pow(u,10))}return r}upVector(e,r,u){return Np(r,u,e,1)}upVectorScale(e){return{metersToTile:Ku(Bp(Ra(e)))}}}function dd(i){const e=i.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(i.name){case"mercator":return new qa(i);case"equirectangular":return new B_(i);case"naturalEarth":return new ua(i);case"equalEarth":return new yy(i);case"winkelTripel":return new Hh(i);case"albers":return r?new ud(i):new Fm(i);case"lambertConformalConic":return r?new ud(i):new _o(i);case"globe":return new $h(i)}throw new Error(`Invalid projection name: ${i.name}`)}const Gh=Kp.types,Wh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function yc(i,e,r,u,m,v,x,C,I,D,R,N,z){const H=C?Math.min(au,Math.round(C[0])):0,$=C?Math.min(au,Math.round(C[1])):0;i.emplaceBack(e,r,Math.round(32*u),Math.round(32*m),v,x,(H<<1)+(I?1:0),$,16*D,16*R,256*N,256*z)}function _l(i,e,r,u,m,v,x){i.emplaceBack(e,r,u,m,v,x)}function _c(i,e,r,u,m){i.emplaceBack(e,r,u,m),i.emplaceBack(e,r,u,m),i.emplaceBack(e,r,u,m),i.emplaceBack(e,r,u,m)}function yf(i){for(const e of i.sections)if(Sv(e.text))return!0;return!1}class qh{constructor(e){this.layoutVertexArray=new Lt,this.indexArray=new bn,this.programConfigurations=e,this.segments=new Pr,this.dynamicLayoutVertexArray=new zt,this.opacityVertexArray=new En,this.placedSymbolArray=new br,this.globeExtVertexArray=new Yt}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,r,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zv.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,E_.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Wh,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,jv.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}fn(qh,"SymbolBuffers");class hd{constructor(e,r,u){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new u,this.segments=new Pr,this.collisionVertexArray=new oi,this.collisionVertexArrayExt=new ii}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ey.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,ef.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}fn(hd,"CollisionBuffers");class As{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(x=>x.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=es([]),this.placementViewportMatrix=es([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tm(this.zoom,r["text-size"]),this.iconSizeData=Tm(this.zoom,r["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),v=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==v&&void 0!==m.constantOr(1),this.sortFeaturesByY=("viewport-y"===v||"auto"===v&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(x=>rs[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new qh(new Aa(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new qh(new Aa(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Jo,this.lineVertexArray=new kp,this.symbolInstances=new or}calculateGlyphDependencies(e,r,u,m,v){for(let x=0;x<e.length;x++)if(r[e.charCodeAt(x)]=!0,m&&v){const C=Ha[e.charAt(x)];C&&(r[C.charCodeAt(0)]=!0)}}populate(e,r,u,m){const v=this.layers[0],x=v.layout,C="globe"===this.projection.name,I=x.get("text-font"),D=x.get("text-field"),R=x.get("icon-image"),N=("constant"!==D.value.kind||D.value.value instanceof wo&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&("constant"!==I.value.kind||I.value.value.length>0),z="constant"!==R.value.kind||!!R.value.value||Object.keys(R.parameters).length>0,H=x.get("symbol-sort-key");if(this.features=[],!N&&!z)return;const $=r.iconDependencies,Q=r.glyphDependencies,ae=r.availableImages,be=new F(this.zoom);for(const{feature:Re,id:xe,index:Ae,sourceLayerIndex:Ve}of e){const je=v._featureFilter.needGeometry,_t=ia(Re,je);if(!v._featureFilter.filter(be,_t,u))continue;if(je||(_t.geometry=La(Re,u,m)),C&&1!==Re.type&&u.z<=5){const bt=_t.geometry,At=.98078528056,kt=(Nt,Gt)=>Qs(Np(Nt.x,Nt.y,u,1),Np(Gt.x,Gt.y,u,1))<At;for(let Nt=0;Nt<bt.length;Nt++)bt[Nt]=Fg(bt[Nt],kt)}let ft,St;if(N){const bt=v.getValueAndResolveTokens("text-field",_t,u,ae),At=wo.factory(bt);yf(At)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===S()||this.hasRTLText&&O.isParsed())&&(ft=nf(At,v,_t))}if(z){const bt=v.getValueAndResolveTokens("icon-image",_t,u,ae);St=bt instanceof Eo?bt:Eo.fromString(bt)}if(!ft&&!St)continue;const Ht=this.sortFeaturesByKey?H.evaluate(_t,{},u):void 0;if(this.features.push({id:xe,text:ft,icon:St,index:Ae,sourceLayerIndex:Ve,geometry:_t.geometry,properties:Re.properties,type:Gh[Re.type],sortKey:Ht}),St&&($[St.name]=!0),ft){const bt=I.evaluate(_t,{},u).join(","),At="map"===x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rs.vertical)>=0;for(const kt of ft.sections)if(kt.image)$[kt.image.name]=!0;else{const Nt=Bc(ft.toString()),Gt=kt.fontStack||bt,Ct=Q[Gt]=Q[Gt]||{};this.calculateGlyphDependencies(kt.text,Ct,At,this.allowVerticalPlacement,Nt)}}}"line"===x.get("symbol-placement")&&(this.features=function(Re){const xe={},Ae={},Ve=[];let je=0;function _t(bt){Ve.push(Re[bt]),je++}function ft(bt,At,kt){const Nt=Ae[bt];return delete Ae[bt],Ae[At]=Nt,Ve[Nt].geometry[0].pop(),Ve[Nt].geometry[0]=Ve[Nt].geometry[0].concat(kt[0]),Nt}function St(bt,At,kt){const Nt=xe[At];return delete xe[At],xe[bt]=Nt,Ve[Nt].geometry[0].shift(),Ve[Nt].geometry[0]=kt[0].concat(Ve[Nt].geometry[0]),Nt}function Ht(bt,At,kt){const Nt=kt?At[0][At[0].length-1]:At[0][0];return`${bt}:${Nt.x}:${Nt.y}`}for(let bt=0;bt<Re.length;bt++){const At=Re[bt],kt=At.geometry,Nt=At.text?At.text.toString():null;if(!Nt){_t(bt);continue}const Gt=Ht(Nt,kt),Ct=Ht(Nt,kt,!0);if(Gt in Ae&&Ct in xe&&Ae[Gt]!==xe[Ct]){const an=St(Gt,Ct,kt),mn=ft(Gt,Ct,Ve[an].geometry);delete xe[Gt],delete Ae[Ct],Ae[Ht(Nt,Ve[mn].geometry,!0)]=mn,Ve[an].geometry=null}else Gt in Ae?ft(Gt,Ct,kt):Ct in xe?St(Gt,Ct,kt):(_t(bt),xe[Gt]=je-1,Ae[Ct]=je-1)}return Ve.filter(bt=>bt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,xe)=>Re.sortKey-xe.sortKey)}update(e,r,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,u,m),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,u,m))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=dd(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const u=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:m,y:v}of r)this.lineVertexArray.emplaceBack(m,v);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(e,r,u,m,v,x,C,I,D,R,N,z,H,$){const Q=e.indexArray,ae=e.layoutVertexArray,be=e.globeExtVertexArray,Re=e.segments.prepareSegment(4*r.length,ae,Q,this.canOverlap?x.sortKey:void 0),xe=this.glyphOffsetArray.length,Ae=Re.vertexLength,Ve=this.allowVerticalPlacement&&C===rs.vertical?Math.PI/2:0,je=x.text&&x.text.sections;for(let ft=0;ft<r.length;ft++){const{tl:St,tr:Ht,bl:bt,br:At,tex:kt,pixelOffsetTL:Nt,pixelOffsetBR:Gt,minFontScaleX:Ct,minFontScaleY:an,glyphOffset:mn,isSDF:un,sectionIndex:Bn}=r[ft],Xt=Re.vertexLength,Tn=mn[1];if(yc(ae,D.x,D.y,St.x,Tn+St.y,kt.x,kt.y,u,un,Nt.x,Nt.y,Ct,an),yc(ae,D.x,D.y,Ht.x,Tn+Ht.y,kt.x+kt.w,kt.y,u,un,Gt.x,Nt.y,Ct,an),yc(ae,D.x,D.y,bt.x,Tn+bt.y,kt.x,kt.y+kt.h,u,un,Nt.x,Gt.y,Ct,an),yc(ae,D.x,D.y,At.x,Tn+At.y,kt.x+kt.w,kt.y+kt.h,u,un,Gt.x,Gt.y,Ct,an),I){const{x:On,y:yi,z:$n}=I.anchor,[kn,Qn,wn]=I.up;_l(be,On,yi,$n,kn,Qn,wn),_l(be,On,yi,$n,kn,Qn,wn),_l(be,On,yi,$n,kn,Qn,wn),_l(be,On,yi,$n,kn,Qn,wn),_c(e.dynamicLayoutVertexArray,On,yi,$n,Ve)}else _c(e.dynamicLayoutVertexArray,D.x,D.y,D.z,Ve);Q.emplaceBack(Xt,Xt+1,Xt+2),Q.emplaceBack(Xt+1,Xt+2,Xt+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mn[0]),ft!==r.length-1&&Bn===r[ft+1].sectionIndex||e.programConfigurations.populatePaintArrays(ae.length,x,x.index,{},H,$,je&&je[Bn])}const _t=I?I.anchor:D;e.placedSymbolArray.emplaceBack(_t.x,_t.y,_t.z,D.x,D.y,xe,this.glyphOffsetArray.length-xe,Ae,R,N,D.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],C,0,!1,0,z,0)}_commitLayoutVertex(e,r,u,m,v,x,C){e.emplaceBack(r,u,m,v,x,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(e,r,u,m,v,x,C){const I=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),D=I.vertexLength,R=C.tileAnchorX,N=C.tileAnchorY;for(let H=0;H<4;H++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),u.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),u.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),u.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,R,N,new Y(e.x1,e.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,R,N,new Y(e.x2,e.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,R,N,new Y(e.x2,e.y2)),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,R,N,new Y(e.x1,e.y2)),I.vertexLength+=4;const z=u.indexArray;z.emplaceBack(D,D+1),z.emplaceBack(D+1,D+2),z.emplaceBack(D+2,D+3),z.emplaceBack(D+3,D),I.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,u,m,v,x){for(let C=m;C<v;C++){const I=u.get(C),D=this.getSymbolInstanceTextSize(e,x,r,C);this._addCollisionDebugVertices(I,D,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(e,r,u,m,v,x){for(let C=m;C<v;C++){const I=u.get(C),D=this.getSymbolInstanceIconSize(e,r,x.placedIconSymbolIndex);this._addCollisionDebugVertices(I,D,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hd(yn,ty.members,Xr),this.iconCollisionBox=new hd(yn,ty.members,Xr);const u=Ua(this.iconSizeData,e),m=Ua(this.textSizeData,e);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(m,e,r,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(m,e,r,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(u,e,r,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(u,e,r,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(e,r,u,m){const v=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:m),x=tf(this.textSizeData,e,v)/xr;return this.tilePixelRatio*x}getSymbolInstanceIconSize(e,r,u){const m=this.icon.placedSymbolArray.get(u),v=tf(this.iconSizeData,e,m);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(e,r,u){e.emplaceBack(r,-u,-u),e.emplaceBack(r,u,-u),e.emplaceBack(r,u,u),e.emplaceBack(r,-u,u)}_updateTextDebugCollisionBoxes(e,r,u,m,v,x){for(let C=m;C<v;C++){const I=u.get(C),D=this.getSymbolInstanceTextSize(e,x,r,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,D,I.padding)}}_updateIconDebugCollisionBoxes(e,r,u,m,v,x){for(let C=m;C<v;C++){const I=u.get(C),D=this.getSymbolInstanceIconSize(e,r,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,D,I.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=Ua(this.iconSizeData,e),m=Ua(this.textSizeData,e);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(m,e,r,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(m,e,r,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(u,e,r,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,e,r,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,u,m,v,x,C,I,D){const R={};if(r<u){const{x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae,featureIndex:Ve}=e.get(r);R.textBox={x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae},R.textFeatureIndex=Ve}if(m<v){const{x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae,featureIndex:Ve}=e.get(m);R.verticalTextBox={x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae},R.verticalTextFeatureIndex=Ve}if(x<C){const{x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae,featureIndex:Ve}=e.get(x);R.iconBox={x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae},R.iconFeatureIndex=Ve}if(I<D){const{x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae,featureIndex:Ve}=e.get(I);R.verticalIconBox={x1:N,y1:z,x2:H,y2:$,padding:Q,projectedAnchorX:ae,projectedAnchorY:be,projectedAnchorZ:Re,tileAnchorX:xe,tileAnchorY:Ae},R.verticalIconFeatureIndex=Ve}return R}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const u=e.placedSymbolArray.get(r),m=u.vertexStartIndex+4*u.numGlyphs;for(let v=u.vertexStartIndex;v<m;v+=4)e.indexArray.emplaceBack(v,v+1,v+2),e.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const r=Math.sin(e),u=Math.cos(e),m=[],v=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const I=this.symbolInstances.get(C);m.push(0|Math.round(r*I.tileAnchorX+u*I.tileAnchorY)),v.push(I.featureIndex)}return x.sort((C,I)=>m[C]-m[I]||v[I]-v[C]),x}addToSortKeyRanges(e,r){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===r?u.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const u=this.symbolInstances.get(r);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:m,centerJustifiedTextSymbolIndex:v,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:D}=u;m>=0&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&v!==m&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&x!==v&&x!==m&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fn(As,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),As.MAX_GLYPHS=65535,As.addDynamicAttributes=_c;const _y=new Ce({"symbol-placement":new X(Tt.layout_symbol["symbol-placement"]),"symbol-spacing":new X(Tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new X(Tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new de(Tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new X(Tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new X(Tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new X(Tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new X(Tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new X(Tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new de(Tt.layout_symbol["icon-size"]),"icon-text-fit":new X(Tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new X(Tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new de(Tt.layout_symbol["icon-image"]),"icon-rotate":new de(Tt.layout_symbol["icon-rotate"]),"icon-padding":new X(Tt.layout_symbol["icon-padding"]),"icon-keep-upright":new X(Tt.layout_symbol["icon-keep-upright"]),"icon-offset":new de(Tt.layout_symbol["icon-offset"]),"icon-anchor":new de(Tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new X(Tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new X(Tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new X(Tt.layout_symbol["text-rotation-alignment"]),"text-field":new de(Tt.layout_symbol["text-field"]),"text-font":new de(Tt.layout_symbol["text-font"]),"text-size":new de(Tt.layout_symbol["text-size"]),"text-max-width":new de(Tt.layout_symbol["text-max-width"]),"text-line-height":new de(Tt.layout_symbol["text-line-height"]),"text-letter-spacing":new de(Tt.layout_symbol["text-letter-spacing"]),"text-justify":new de(Tt.layout_symbol["text-justify"]),"text-radial-offset":new de(Tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new X(Tt.layout_symbol["text-variable-anchor"]),"text-anchor":new de(Tt.layout_symbol["text-anchor"]),"text-max-angle":new X(Tt.layout_symbol["text-max-angle"]),"text-writing-mode":new X(Tt.layout_symbol["text-writing-mode"]),"text-rotate":new de(Tt.layout_symbol["text-rotate"]),"text-padding":new X(Tt.layout_symbol["text-padding"]),"text-keep-upright":new X(Tt.layout_symbol["text-keep-upright"]),"text-transform":new de(Tt.layout_symbol["text-transform"]),"text-offset":new de(Tt.layout_symbol["text-offset"]),"text-allow-overlap":new X(Tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new X(Tt.layout_symbol["text-ignore-placement"]),"text-optional":new X(Tt.layout_symbol["text-optional"])});var _f={paint:new Ce({"icon-opacity":new de(Tt.paint_symbol["icon-opacity"]),"icon-color":new de(Tt.paint_symbol["icon-color"]),"icon-halo-color":new de(Tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new de(Tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new de(Tt.paint_symbol["icon-halo-blur"]),"icon-translate":new X(Tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new X(Tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new de(Tt.paint_symbol["text-opacity"]),"text-color":new de(Tt.paint_symbol["text-color"],{runtimeType:Ai,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new de(Tt.paint_symbol["text-halo-color"]),"text-halo-width":new de(Tt.paint_symbol["text-halo-width"]),"text-halo-blur":new de(Tt.paint_symbol["text-halo-blur"]),"text-translate":new X(Tt.paint_symbol["text-translate"]),"text-translate-anchor":new X(Tt.paint_symbol["text-translate-anchor"])}),layout:_y};class jm{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:bo,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fn(jm,"FormatSectionOverride",{omit:["defaultValue"]});class Zh extends Pa{constructor(e){super(e,_f)}recalculate(e,r){super.recalculate(e,r),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const v of u)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,u,m){const v=this.layout.get(e).evaluate(r,{},u,m),x=this._unevaluatedLayout._values[e];return x.isDataDriven()||Xo(x.value)||!v?v:(C=r.properties,v.replace(/{([^{}]+)}/g,(D,R)=>R in C?String(C[R]):""));var C}createBucket(e){return new As(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of _f.paint.overridableProperties){if(!Zh.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),u=new jm(r),m=new us(u,r.property.specification);let v=null;v="constant"===r.value.kind||"source"===r.value.kind?new Cp("source",m):new Ss("composite",m,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new fe(r.property,v,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,u){return!(!this.layout||r.isDataDriven()||u.isDataDriven())&&Zh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const u=e.get("text-field"),m=_f.paint.properties[r];let v=!1;const x=C=>{for(const I of C)if(m.overrides&&m.overrides.hasOverride(I))return void(v=!0)};if("constant"===u.value.kind&&u.value.value instanceof wo)x(u.value.value.sections);else if("source"===u.value.kind){const C=D=>{v||(D instanceof no&&wi(D.value)===Ns?x(D.value.sections):D instanceof el?x(D.sections):D.eachChild(C))},I=u.value;I._styleExpression&&C(I._styleExpression.expression)}return v}getProgramConfiguration(e){return new ka(this,e)}}var Yh={paint:new Ce({"background-color":new X(Tt.paint_background["background-color"]),"background-pattern":new X(Tt.paint_background["background-pattern"]),"background-opacity":new X(Tt.paint_background["background-opacity"])})},vy={paint:new Ce({"raster-opacity":new X(Tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new X(Tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new X(Tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new X(Tt.paint_raster["raster-brightness-max"]),"raster-saturation":new X(Tt.paint_raster["raster-saturation"]),"raster-contrast":new X(Tt.paint_raster["raster-contrast"]),"raster-resampling":new X(Tt.paint_raster["raster-resampling"]),"raster-fade-duration":new X(Tt.paint_raster["raster-fade-duration"])})};class z_ extends Pa{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var vf={paint:new Ce({"sky-type":new X(Tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new X(Tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new X(Tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new X(Tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new X(Tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new we(Tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new X(Tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new X(Tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new X(Tt.paint_sky["sky-opacity"])})};function pd(i,e,r){const u=[0,0,1],m=rh([]);return kg(m,m,r?-K(i)+Math.PI:K(i)),n_(m,m,-K(e)),nh(u,u,m),so(u,u)}const by={circle:class extends Pa{constructor(i){super(i,d_)}createBucket(i){return new mh(i)}queryRadius(i){const e=i;return td("circle-radius",this,e)+td("circle-stroke-width",this,e)+$p(this.paint.get("circle-translate"))}queryIntersectsFeature(i,e,r,u,m,v,x,C){const I=kv(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return yh(i,u,v,x,C,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),I,D)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new ka(this,i)}},heatmap:class extends Pa{createBucket(i){return new $g(i)}constructor(i){super(i,h_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){"heatmap-color"===i&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return td("heatmap-radius",this,i)}queryIntersectsFeature(i,e,r,u,m,v,x,C){const I=this.paint.get("heatmap-radius").evaluate(e,r);return yh(i,u,v,x,C,!0,!0,new Y(0,0),I)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new ka(this,i)}},hillshade:class extends Pa{constructor(i){super(i,id)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Pa{constructor(i){super(i,ts)}getProgramIds(){const i=this.paint.get("fill-pattern"),e=i&&i.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(i){return new ka(this,i)}recalculate(i,e){super.recalculate(i,e);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Va(i)}queryRadius(){return $p(this.paint.get("fill-translate"))}queryIntersectsFeature(i,e,r,u,m,v){return!i.queryGeometry.isAboveHorizon&&zg(gm(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Pa{constructor(i){super(i,Jc)}createBucket(i){return new Th(i)}queryRadius(){return $p(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new ka(this,i)}queryIntersectsFeature(i,e,r,u,m,v,x,C,I){const D=kv(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(e,r),N=this.paint.get("fill-extrusion-base").evaluate(e,r),z=[0,0],H=C&&v.elevation,$=v.elevation?v.elevation.exaggeration():1,Q=i.tile.getBucket(this);if(H&&Q instanceof Th){const Ae=Q.centroidVertexArray,Ve=I+1;Ve<Ae.length&&(z[0]=Ae.geta_centroid_pos0(Ve),z[1]=Ae.geta_centroid_pos1(Ve))}if(0===z[0]&&1===z[1])return!1;"globe"===v.projection.name&&(u=hi([u],[new Y(0,0),new Y(Sn,Sn)],i.tileID.canonical).map(Ae=>Ae.polygon).flat());const ae=H?C:null,[be,Re]=(Ve=u,je=N,_t=R,ft=D,St=x,Ht=ae,bt=z,At=$,kt=v.center.lat,"globe"===(Ae=v).projection.name?function(Gt,Ct,an,mn,un,Bn,Xt,Tn,On,yi,$n){const kn=[],Qn=[],wn=Gt.projection.upVectorScale($n,Gt.center.lat,Gt.worldSize).metersToTile,qn=[0,0,0,1],ji=[0,0,0,1],fi=(Vi,ar,yr,Dr)=>{Vi[0]=ar,Vi[1]=yr,Vi[2]=Dr,Vi[3]=1},Oi=pc();an>0&&(an+=Oi),mn+=Oi;for(const Vi of Ct){const ar=[],yr=[];for(const Dr of Vi){const Ui=Dr.x+un.x,Lr=Dr.y+un.y,kr=Gt.projection.projectTilePoint(Ui,Lr,$n),hr=Gt.projection.upVector($n,Dr.x,Dr.y);let Mi=an,Ar=mn;if(Xt){const Hi=Dh(Ui,Lr,an,mn,Xt,Tn,On,yi);Mi+=Hi.base,Ar+=Hi.top}0!==an?fi(qn,kr.x+hr[0]*wn*Mi,kr.y+hr[1]*wn*Mi,kr.z+hr[2]*wn*Mi):fi(qn,kr.x,kr.y,kr.z),fi(ji,kr.x+hr[0]*wn*Ar,kr.y+hr[1]*wn*Ar,kr.z+hr[2]*wn*Ar),sr(qn,qn,Bn),sr(ji,ji,Bn),ar.push(new fc(qn[0],qn[1],qn[2])),yr.push(new fc(ji[0],ji[1],ji[2]))}kn.push(ar),Qn.push(yr)}return[kn,Qn]}(Ae,Ve,je,_t,ft,St,Ht,bt,At,kt,i.tileID.canonical):Ht?function(Gt,Ct,an,mn,un,Bn,Xt,Tn,On){const yi=[],$n=[],kn=[0,0,0,1];for(const Qn of Gt){const wn=[],qn=[];for(const ji of Qn){const fi=ji.x+mn.x,Oi=ji.y+mn.y,Vi=Dh(fi,Oi,Ct,an,Bn,Xt,Tn,On);kn[0]=fi,kn[1]=Oi,kn[2]=Vi.base,kn[3]=1,rc(kn,kn,un),kn[3]=Math.max(kn[3],1e-5);const ar=new fc(kn[0]/kn[3],kn[1]/kn[3],kn[2]/kn[3]);kn[0]=fi,kn[1]=Oi,kn[2]=Vi.top,kn[3]=1,rc(kn,kn,un),kn[3]=Math.max(kn[3],1e-5);const yr=new fc(kn[0]/kn[3],kn[1]/kn[3],kn[2]/kn[3]);wn.push(ar),qn.push(yr)}yi.push(wn),$n.push(qn)}return[yi,$n]}(Ve,je,_t,ft,St,Ht,bt,At,kt):function(Gt,Ct,an,mn,un){const Bn=[],Xt=[],Tn=un[8]*Ct,On=un[9]*Ct,yi=un[10]*Ct,$n=un[11]*Ct,kn=un[8]*an,Qn=un[9]*an,wn=un[10]*an,qn=un[11]*an;for(const ji of Gt){const fi=[],Oi=[];for(const Vi of ji){const ar=Vi.x+mn.x,yr=Vi.y+mn.y,Dr=un[0]*ar+un[4]*yr+un[12],Ui=un[1]*ar+un[5]*yr+un[13],Lr=un[2]*ar+un[6]*yr+un[14],kr=un[3]*ar+un[7]*yr+un[15],hr=Dr+Tn,Mi=Ui+On,Ar=Lr+yi,Hi=Math.max(kr+$n,1e-5),vo=Dr+kn,pr=Ui+Qn,Fr=Lr+wn,lr=Math.max(kr+qn,1e-5);fi.push(new fc(hr/Hi,Mi/Hi,Ar/Hi)),Oi.push(new fc(vo/lr,pr/lr,Fr/lr))}Bn.push(fi),Xt.push(Oi)}return[Bn,Xt]}(Ve,je,_t,ft,St)),xe=i.queryGeometry;var Ae,Ve,je,_t,ft,St,Ht,bt,At,kt;return function(Ae,Ve,je){let _t=1/0;zg(je,Ve)&&(_t=Kg(je,Ve[0]));for(let ft=0;ft<Ve.length;ft++){const St=Ve[ft],Ht=Ae[ft];for(let bt=0;bt<St.length-1;bt++){const At=St[bt],kt=[At,St[bt+1],Ht[bt+1],Ht[bt],At];Bg(je,kt)&&(_t=Math.min(_t,Kg(je,kt)))}}return _t!==1/0&&_t}(be,Re,xe.isPointQuery()?xe.screenBounds:xe.screenGeometry)}},line:class extends Pa{constructor(i){super(i,kh),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if("line-gradient"===i){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Lo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,e){super.recalculate(i,e),this.paint._values["line-floorwidth"]=x_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Sm(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new ka(this,i)}queryRadius(i){const e=i,r=w_(td("line-width",this,e),td("line-gap-width",this,e)),u=td("line-offset",this,e);return r/2+Math.abs(u)+$p(this.paint.get("line-translate"))}queryIntersectsFeature(i,e,r,u,m,v){if(i.queryGeometry.isAboveHorizon)return!1;const x=gm(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),C=i.pixelToTileUnitsFactor/2*w_(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),I=this.paint.get("line-offset").evaluate(e,r);return I&&(u=function(D,R){const N=[],z=new Y(0,0);for(let H=0;H<D.length;H++){const $=D[H],Q=[];for(let ae=0;ae<$.length;ae++){const be=$[ae],Re=$[ae+1],xe=0===ae?z:be.sub($[ae-1])._unit()._perp(),Ae=ae===$.length-1?z:Re.sub(be)._unit()._perp(),Ve=xe._add(Ae)._unit();Ve._mult(1/(Ve.x*Ae.x+Ve.y*Ae.y)),Q.push(Ve._mult(R)._add(be))}N.push(Q)}return N}(u,I*i.pixelToTileUnitsFactor)),function(D,R,N){for(let z=0;z<R.length;z++){const H=R[z];if(D.length>=3)for(let $=0;$<H.length;$++)if(Wc(D,H[$]))return!0;if(Q0(D,H,N))return!0}return!1}(x,u,C)}isTileClipped(){return!0}},symbol:Zh,background:class extends Pa{constructor(i){super(i,Yh)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Pa{constructor(i){super(i,vy)}getProgramIds(){return["raster"]}},sky:class extends Pa{constructor(i){super(i,vf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){"sky-gradient"===i?this._updateColorRamp():"sky-atmosphere-sun"!==i&&"sky-atmosphere-halo-color"!==i&&"sky-atmosphere-color"!==i&&"sky-atmosphere-sun-intensity"!==i||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=qc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(i,e){if("atmosphere"===this.paint.get("sky-type")){const u=this.paint.get("sky-atmosphere-sun"),m=!u,v=i.style.light,x=v.properties.get("position");return m&&"viewport"===v.properties.get("anchor")&&tn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?pd(x.azimuthal,90-x.polar,e):pd(u[0],90-u[1],e)}const r=this.paint.get("sky-gradient-center");return pd(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return"atmosphere"===i?["skyboxCapture","skybox"]:"gradient"===i?["skyboxGradient"]:null}}};class Za{constructor(e,r,u,m){this.context=e,this.format=u,this.texture=e.gl.createTexture(),this.update(r,m)}update(e,r,u){const{width:m,height:v}=e,{context:x}=this,{gl:C}=x,{HTMLImageElement:I,HTMLCanvasElement:D,HTMLVideoElement:R,ImageData:N,ImageBitmap:z}=ge;if(C.bindTexture(C.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!r||!1!==r.premultiply)),u||this.size&&this.size[0]===m&&this.size[1]===v){const{x:H,y:$}=u||{x:0,y:0};e instanceof I||e instanceof D||e instanceof R||e instanceof N||z&&e instanceof z?C.texSubImage2D(C.TEXTURE_2D,0,H,$,C.RGBA,C.UNSIGNED_BYTE,e):C.texSubImage2D(C.TEXTURE_2D,0,H,$,m,v,C.RGBA,C.UNSIGNED_BYTE,e.data)}else this.size=[m,v],e instanceof I||e instanceof D||e instanceof R||e instanceof N||z&&e instanceof z?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,e):C.texImage2D(C.TEXTURE_2D,0,this.format,m,v,0,this.format,C.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&C.generateMipmap(C.TEXTURE_2D)}bind(e,r){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),e!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,e),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?e===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Vm{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Hv{constructor(){this.tasks={},this.taskQueue=[],It(["process"],this),this.invoker=new Vm(this.process),this.nextId=0}add(e,r){const u=this.nextId++,m=function({type:v,isSymbolTile:x,zoom:C}){return C=C||0,"message"===v?0:"maybePrepare"!==v||x?"parseTile"!==v||x?"parseTile"===v&&x?300-C:"maybePrepare"===v&&x?400-C:500:200-C:100-C}(r);if(0===m){hn();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:e,metadata:r,priority:m,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){hn();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let m=0;m<this.taskQueue.length;m++){const v=this.tasks[this.taskQueue[m]];v.priority<r&&(r=v.priority,e=m)}if(null===e)return null;const u=this.taskQueue[e];return this.taskQueue.splice(e,1),u}remove(){this.invoker.remove()}}class bf{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const u=e[r];this._stringToNumber[u]=r,this._numberToString[r]=u}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Um=["tile","layer","source","sourceLayer","state"];class Hm{constructor(e,r,u,m,v){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=u,this._y=m,this.properties=e.properties,this.id=v}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const r of Um)void 0!==this[r]&&(e[r]=this[r]);return e}}const da=32,gs=33,Ya=new Uint16Array(8184);for(let i=0;i<2046;i++){let e=i+2,r=0,u=0,m=0,v=0,x=0,C=0;for(1&e?m=v=x=da:r=u=C=da;(e>>=1)>1;){const D=r+m>>1,R=u+v>>1;1&e?(m=r,v=u,r=x,u=C):(r=m,u=v,m=x,v=C),x=D,C=R}const I=4*i;Ya[I+0]=r,Ya[I+1]=u,Ya[I+2]=m,Ya[I+3]=v}const ha=new Uint16Array(2178),vc=new Uint8Array(1089),Xh=new Uint16Array(1089);function xy(i){return 0===i?-.03125:32===i?.03125:0}var wy=nt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const $m={type:2,extent:Sn,loadGeometry:()=>[[new Y(0,0),new Y(Sn+1,0),new Y(Sn+1,Sn+1),new Y(0,Sn+1),new Y(0,0)]]};class Kh{constructor(e,r,u,m,v){this.tileID=e,this.uid=Ye(),this.uses=0,this.tileSize=r,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",m&&m.transform&&(this.projection=m.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<ya.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=ca(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,u){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(m,v){const x={};if(!v)return x;for(const C of m){const I=C.layerIds.map(D=>v.getLayer(D)).filter(Boolean);if(0!==I.length){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(D=>I.filter(R=>R.id===D)[0]));for(const D of I)x[D.id]=C}}return x}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof As){if(this.hasSymbolBuckets=!0,!u)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof As&&v.hasRTLText){this.hasRTLText=!0,O.isLoading()||O.isLoaded()||"deferred"!==S()||k();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(m).queryRadius(v))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Zi}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Za(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Za(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Za(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,u,m,v,x,C,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:C,transform:x,params:v,tileTransform:this.tileTransform},e,r,u):{}}querySourceFeatures(e,r){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const m=u.loadVTLayers(),v=r?r.sourceLayer:"",x=m._geojsonTileLayer||m[v];if(!x)return;const C=ql(r&&r.filter),{z:I,x:D,y:R}=this.tileID.canonical,N={z:I,x:D,y:R};for(let z=0;z<x.length;z++){const H=x.feature(z);if(C.needGeometry){const ae=ia(H,!0);if(!C.filter(new F(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!C.filter(new F(this.tileID.overscaledZ),H))continue;const $=u.getId(H,v),Q=new Hm(H,I,D,R,$);Q.tile=N,e.push(Q)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const u=An(e.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const u=Date.now();let m=!1;if(this.expirationTime>u)m=!1;else if(r)if(this.expirationTime<r)m=!0;else{const v=this.expirationTime-r;v?this.expirationTime=u+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!r)return;const u=this.latestFeatureIndex.loadVTLayers(),m=r.style.listImages();for(const v in this.buckets){if(!r.style.hasLayer(v))continue;const x=this.buckets[v],C=x.layers[0].sourceLayer||"_geojsonTileLayer",I=u[C],D=e[C];if(!I||!D||0===Object.keys(D).length)continue;if(x.update(D,I,m,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof Sm||x instanceof Va){const N=r.style._getSourceCache(x.layers[0].source);r._terrain&&r._terrain.enabled&&N&&x.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(N.id,this.tileID)}const R=r&&r.style&&r.style.getLayer(v);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(x)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ya.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=ya.now()+e}setTexture(e,r){const u=r.context,m=u.gl;this.texture=this.texture||r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Za(u,e,m.RGBA,{useMipmap:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE))}setDependencies(e,r){const u={};for(const m of r)u[m]=!0;this.dependencies[e]=u}hasDependency(e,r){for(const u of e){const m=this.dependencies[u];if(m)for(const v of r)if(m[v])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||"mercator"===r.name||this._tileDebugBuffer)return;const u=La($m,this.tileID.canonical,this.tileTransform)[0],m=new Ut,v=new Qo;for(let x=0;x<u.length;x++){const{x:C,y:I}=u[x];m.emplaceBack(C,I),v.emplaceBack(x)}v.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(v),this._tileDebugBuffer=e.createVertexBuffer(m,sh.members),this._tileDebugSegments=Pr.simpleSegment(0,0,m.length,v.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||"mercator"===r.name)return;const u=La($m,this.tileID.canonical,this.tileTransform)[0];let m,v;if(this.isRaster){const x=function(C,I){const D=ca(C,I),R=Math.pow(2,C.z);for(let ae=0;ae<gs;ae++)for(let be=0;be<gs;be++){const Re=na((C.x+(be+xy(be))/da)/R),xe=ao((C.y+(ae+xy(ae))/da)/R),Ae=I.project(Re,xe),Ve=ae*gs+be;ha[2*Ve+0]=Math.round((Ae.x*D.scale-D.x)*Sn),ha[2*Ve+1]=Math.round((Ae.y*D.scale-D.y)*Sn)}vc.fill(0),Xh.fill(0);for(let ae=2045;ae>=0;ae--){const be=4*ae,Re=Ya[be+0],xe=Ya[be+1],Ae=Ya[be+2],Ve=Ya[be+3],je=Re+Ae>>1,_t=xe+Ve>>1,ft=je+_t-xe,St=_t+Re-je,Ht=xe*gs+Re,bt=Ve*gs+Ae,At=_t*gs+je,kt=Math.hypot((ha[2*Ht+0]+ha[2*bt+0])/2-ha[2*At+0],(ha[2*Ht+1]+ha[2*bt+1])/2-ha[2*At+1])>=16;vc[At]=vc[At]||(kt?1:0),ae<1022&&(vc[At]=vc[At]||vc[(xe+St>>1)*gs+(Re+ft>>1)]||vc[(Ve+St>>1)*gs+(Ae+ft>>1)])}const N=new Dt,z=new bn;let H=0;function $(ae,be){const Re=be*gs+ae;return 0===Xh[Re]&&(N.emplaceBack(ha[2*Re+0],ha[2*Re+1],ae*Sn/da,be*Sn/da),Xh[Re]=++H),Xh[Re]-1}function Q(ae,be,Re,xe,Ae,Ve){const je=ae+Re>>1,_t=be+xe>>1;if(Math.abs(ae-Ae)+Math.abs(be-Ve)>1&&vc[_t*gs+je])Q(Ae,Ve,ae,be,je,_t),Q(Re,xe,Ae,Ve,je,_t);else{const ft=$(ae,be),St=$(Re,xe),Ht=$(Ae,Ve);z.emplaceBack(ft,St,Ht)}}return Q(0,0,da,da,da,0),Q(da,da,0,0,0,da),{vertices:N,indices:z}}(this.tileID.canonical,r);m=x.vertices,v=x.indices}else{m=new Dt,v=new bn;for(const{x:C,y:I}of u)m.emplaceBack(C,I,0,0);const x=bm(m.int16,void 0,4);for(let C=0;C<x.length;C+=3)v.emplaceBack(x[C],x[C+1],x[C+2])}this._tileBoundsBuffer=e.createVertexBuffer(m,wy.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(v),this._tileBoundsSegments=Pr.simpleSegment(0,0,m.length,v.length)}_makeGlobeTileDebugBuffers(e,r){const u=r.projection;if(!u||"globe"!==u.name||r.freezeTileCoverage)return;const m=this.tileID.canonical,v=dh(Og(m,r)),x=Gc(r.zoom);let C;x>0&&(C=Pp(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,m,r,v,C,x),this._makeGlobeTileDebugTextBuffer(e,m,r,v,C,x)}_globePoint(e,r,u,m,v,x,C){let I=Np(e,r,u);if(x){const D=1<<u.z,R=Js(m.center.lng),N=ea(m.center.lat),z=(u.x+.5)/D-R;let H=0;z>.5?H=-1:z<-.5&&(H=1);let $=(e/Sn+u.x)/D+H,Q=(r/Sn+u.y)/D;$=($-R)*m._pixelsPerMercatorPixel+R,Q=(Q-N)*m._pixelsPerMercatorPixel+N;const ae=[$*m.worldSize,Q*m.worldSize,0];sr(ae,ae,x),I=oc(I,ae,C)}return sr(I,I,v)}_makeGlobeTileDebugBorderBuffer(e,r,u,m,v,x){const C=new Ut,I=new Qo,D=new ht,R=(z,H,$,Q,ae)=>{const be=($-z)/(ae-1),Re=(Q-H)/(ae-1),xe=C.length;for(let Ae=0;Ae<ae;Ae++){const Ve=z+Ae*be,je=H+Ae*Re;C.emplaceBack(Ve,je);const _t=this._globePoint(Ve,je,r,u,m,v,x);D.emplaceBack(_t[0],_t[1],_t[2]),I.emplaceBack(xe+Ae)}},N=Sn;R(0,0,N,0,16),R(N,0,N,N,16),R(N,N,0,N,16),R(0,N,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(I),this._tileDebugBuffer=e.createVertexBuffer(C,sh.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(D,oh.members),this._tileDebugSegments=Pr.simpleSegment(0,0,C.length,I.length)}_makeGlobeTileDebugTextBuffer(e,r,u,m,v,x){const C=Sn/4,I=new Ut,D=new bn,R=new ht,N=25;D.reserve(32),I.reserve(N),R.reserve(N);const z=(H,$)=>N*H+$;for(let H=0;H<N;H++){const $=H*C;for(let Q=0;Q<N;Q++){const ae=Q*C;I.emplaceBack(ae,$);const be=this._globePoint(ae,$,r,u,m,v,x);R.emplaceBack(be[0],be[1],be[2])}}for(let H=0;H<4;H++)for(let $=0;$<4;$++){const Q=z(H,$),ae=z(H,$+1),be=z(H+1,$),Re=z(H+1,$+1);D.emplaceBack(Q,ae,be),D.emplaceBack(be,ae,Re)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(D),this._tileDebugTextBuffer=e.createVertexBuffer(I,sh.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(R,oh.members),this._tileDebugTextSegments=Pr.simpleSegment(0,0,N,32)}}class $v{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,u){const m=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][m]=this.stateChanges[e][m]||{},ke(this.stateChanges[e][m],u),null===this.deletedStates[e]){this.deletedStates[e]={};for(const v in this.state[e])v!==m&&(this.deletedStates[e][v]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][m]){this.deletedStates[e][m]={};for(const v in this.state[e][m])u[v]||(this.deletedStates[e][m][v]=null)}else for(const v in u)this.deletedStates[e]&&this.deletedStates[e][m]&&null===this.deletedStates[e][m][v]&&delete this.deletedStates[e][m][v]}removeFeatureState(e,r,u){if(null===this.deletedStates[e])return;const m=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},u&&void 0!==r)null!==this.deletedStates[e][m]&&(this.deletedStates[e][m]=this.deletedStates[e][m]||{},this.deletedStates[e][m][u]=null);else if(void 0!==r)if(this.stateChanges[e]&&this.stateChanges[e][m])for(u in this.deletedStates[e][m]={},this.stateChanges[e][m])this.deletedStates[e][m][u]=null;else this.deletedStates[e][m]=null;else this.deletedStates[e]=null}getState(e,r){const u=String(r),m=ke({},(this.state[e]||{})[u],(this.stateChanges[e]||{})[u]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const v=this.deletedStates[e][r];if(null===v)return{};for(const x in v)delete m[x]}return m}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const u={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const x in this.stateChanges[m])this.state[m][x]||(this.state[m][x]={}),ke(this.state[m][x],this.stateChanges[m][x]),v[x]=this.state[m][x];u[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(null===this.deletedStates[m])for(const x in this.state[m])v[x]={},this.state[m][x]={};else for(const x in this.deletedStates[m]){if(null===this.deletedStates[m][x])this.state[m][x]={};else if(this.state[m][x])for(const C of Object.keys(this.deletedStates[m][x]))delete this.state[m][x][C];v[x]=this.state[m][x]}u[m]=u[m]||{},ke(u[m],v)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(u).length)for(const m in e)e[m].setFeatureState(u,r)}}class Gm{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const u=this.toIdx(e,r);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function Wm(i,e,r,u){let m=0,v=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(u[x])<1e-15){if(r[x]<i[x]||r[x]>e[x])return null}else{const C=1/u[x];let I=(i[x]-r[x])*C,D=(e[x]-r[x])*C;if(I>D){const R=I;I=D,D=R}if(I>m&&(m=I),D<v&&(v=D),m>v)return null}return m}function j_(i,e,r,u,m,v,x,C,I,D,R){const N=u-i,z=m-e,H=v-r,$=x-i,Q=C-e,ae=I-r,be=R[1]*ae-R[2]*Q,Re=R[2]*$-R[0]*ae,xe=R[0]*Q-R[1]*$,Ae=N*be+z*Re+H*xe;if(Math.abs(Ae)<1e-15)return null;const Ve=1/Ae,je=D[0]-i,_t=D[1]-e,ft=D[2]-r,St=(je*be+_t*Re+ft*xe)*Ve;if(St<0||St>1)return null;const Ht=_t*H-ft*z,bt=ft*N-je*H,At=je*z-_t*N,kt=(R[0]*Ht+R[1]*bt+R[2]*At)*Ve;return kt<0||St+kt>1?null:($*Ht+Q*bt+ae*At)*Ve}function qm(i,e,r){return(i-e)/(r-e)}function Ey(i,e,r,u,m,v,x,C,I){const D=1<<r,R=v-u,N=x-m,z=(i+1)/D*R+u,H=(e+0)/D*N+m,$=(e+1)/D*N+m;C[0]=(i+0)/D*R+u,C[1]=H,I[0]=z,I[1]=$}class Cy{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(v){const x=Math.ceil(Math.log2(v.dim/8)),C=[];let I=Math.ceil(Math.pow(2,x));const D=1/I,R=(H,$,Q,ae,be)=>{const Re=ae?1:0,xe=(H+1)*Q-Re,Ae=$*Q,Ve=($+1)*Q-Re;be[0]=H*Q,be[1]=Ae,be[2]=xe,be[3]=Ve};let N=new Gm(I);const z=[];for(let H=0;H<I*I;H++){R(H%I,Math.floor(H/I),D,!1,z);const $=vl(z[0],z[1],v),Q=vl(z[2],z[1],v),ae=vl(z[2],z[3],v),be=vl(z[0],z[3],v);N.minimums.push(Math.min($,Q,ae,be)),N.maximums.push(Math.max($,Q,ae,be)),N.leaves.push(1)}for(C.push(N),I/=2;I>=1;I/=2){const H=C[C.length-1];N=new Gm(I);for(let $=0;$<I*I;$++){R($%I,Math.floor($/I),2,!0,z);const Q=H.getElevation(z[0],z[1]),ae=H.getElevation(z[2],z[1]),be=H.getElevation(z[2],z[3]),Re=H.getElevation(z[0],z[3]),xe=H.isLeaf(z[0],z[1]),Ae=H.isLeaf(z[2],z[1]),Ve=H.isLeaf(z[2],z[3]),je=H.isLeaf(z[0],z[3]),_t=Math.min(Q.min,ae.min,be.min,Re.min),ft=Math.max(Q.max,ae.max,be.max,Re.max),St=xe&&Ae&&Ve&&je;N.maximums.push(ft),N.minimums.push(_t),N.leaves.push(ft-_t<=5&&St?1:0)}C.push(N)}return C}(this.dem),u=r.length-1,m=r[u];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(r,0,0,u,0)}raycastRoot(e,r,u,m,v,x,C=1){return Wm([e,r,-100],[u,m,this.maximums[0]*C],v,x)}raycast(e,r,u,m,v,x,C=1){if(!this.nodeCount)return null;const I=this.raycastRoot(e,r,u,m,v,x,C);if(null==I)return null;const D=[],R=[],N=[],z=[],H=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;H.length>0;){const{idx:$,t:Q,nodex:ae,nodey:be,depth:Re}=H.pop();if(this.leaves[$]){Ey(ae,be,Re,e,r,u,m,N,z);const Ae=1<<Re,Ve=(ae+0)/Ae,je=(ae+1)/Ae,_t=(be+0)/Ae,ft=(be+1)/Ae,St=vl(Ve,_t,this.dem)*C,Ht=vl(je,_t,this.dem)*C,bt=vl(je,ft,this.dem)*C,At=vl(Ve,ft,this.dem)*C,kt=j_(N[0],N[1],St,z[0],N[1],Ht,z[0],z[1],bt,v,x),Nt=j_(z[0],z[1],bt,N[0],z[1],At,N[0],N[1],St,v,x),Gt=Math.min(null!==kt?kt:Number.MAX_VALUE,null!==Nt?Nt:Number.MAX_VALUE);if(Gt!==Number.MAX_VALUE)return Gt;{const Ct=Yu([],v,x,Q);if(Sy(St,Ht,At,bt,qm(Ct[0],N[0],z[0]),qm(Ct[1],N[1],z[1]))>=Ct[2])return Q}continue}let xe=0;for(let Ae=0;Ae<this._siblingOffset.length;Ae++){Ey((ae<<1)+this._siblingOffset[Ae][0],(be<<1)+this._siblingOffset[Ae][1],Re+1,e,r,u,m,N,z),N[2]=-100,z[2]=this.maximums[this.childOffsets[$]+Ae]*C;const Ve=Wm(N,z,v,x);if(null!=Ve){const je=Ve;D[Ae]=je;let _t=!1;for(let ft=0;ft<xe&&!_t;ft++)je>=D[R[ft]]&&(R.splice(ft,0,Ae),_t=!0);_t||(R[xe]=Ae),xe++}}for(let Ae=0;Ae<xe;Ae++){const Ve=R[Ae];H.push({idx:this.childOffsets[$]+Ve,t:D[Ve],nodex:(ae<<1)+this._siblingOffset[Ve][0],nodey:(be<<1)+this._siblingOffset[Ve][1],depth:Re+1})}}return null}_addNode(e,r,u){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,u,m,v){if(1===e[m].isLeaf(r,u))return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const x=m-1,C=e[x];let I=0,D=0;for(let R=0;R<this._siblingOffset.length;R++){const N=2*r+this._siblingOffset[R][0],z=2*u+this._siblingOffset[R][1],H=C.getElevation(N,z),$=C.isLeaf(N,z),Q=this._addNode(H.min,H.max,$);$&&(I|=1<<R),D||(D=Q)}for(let R=0;R<this._siblingOffset.length;R++)I&1<<R||this._construct(e,2*r+this._siblingOffset[R][0],2*u+this._siblingOffset[R][1],x,D+R)}}function Sy(i,e,r,u,m,v){return Ei(Ei(i,r,v),Ei(e,u,v),m)}function vl(i,e,r){const u=r.dim,m=Ze(i*u-.5,0,u-1),v=Ze(e*u-.5,0,u-1),x=Math.floor(m),C=Math.floor(v),I=Math.min(x+1,u-1),D=Math.min(C+1,u-1);return Sy(r.get(x,C),r.get(I,C),r.get(x,D),r.get(I,D),m-x,v-C)}const xf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Ty(i,e,r){return(256*i*256+256*e+r)/10-1e4}function My(i,e,r){return 256*i+e+r/256-32768}class fd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,u,m=!1,v=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(u&&"mapbox"!==u&&"terrarium"!==u)return tn(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const x=this.dim=r.height-2,C=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=u||"mapbox",this.borderReady=m,!m){for(let I=0;I<x;I++)C[this._idx(-1,I)]=C[this._idx(0,I)],C[this._idx(x,I)]=C[this._idx(x-1,I)],C[this._idx(I,-1)]=C[this._idx(I,0)],C[this._idx(I,x)]=C[this._idx(I,x-1)];C[this._idx(-1,-1)]=C[this._idx(0,0)],C[this._idx(x,-1)]=C[this._idx(x-1,0)],C[this._idx(-1,x)]=C[this._idx(0,x-1)],C[this._idx(x,x)]=C[this._idx(x-1,x-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Cy(this)}get(e,r,u=!1){u&&(e=Ze(e,-1,this.dim),r=Ze(r,-1,this.dim));const m=4*this._idx(e,r);return("terrarium"===this.encoding?My:Ty)(this.pixels[m],this.pixels[m+1],this.pixels[m+2])}static getUnpackVector(e){return xf[e]}get unpackVector(){return xf[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const u=[0,0,0,0],m=fd.getUnpackVector(r);let v=Math.floor((e+m[3])/m[2]);return u[2]=v%256,v=Math.floor(v/256),u[1]=v%256,v=Math.floor(v/256),u[0]=v,u}getPixels(){return new Xi({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,u){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let m=r*this.dim,v=r*this.dim+this.dim,x=u*this.dim,C=u*this.dim+this.dim;switch(r){case-1:m=v-1;break;case 1:v=m+1}switch(u){case-1:x=C-1;break;case 1:C=x+1}const I=-r*this.dim,D=-u*this.dim;for(let R=x;R<C;R++)for(let N=m;N<v;N++){const z=4*this._idx(N,R),H=4*this._idx(N+I,R+D);this.pixels[z+0]=e.pixels[H+0],this.pixels[z+1]=e.pixels[H+1],this.pixels[z+2]=e.pixels[H+2],this.pixels[z+3]=e.pixels[H+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}fn(fd,"DEMData"),fn(Cy,"DemMinMaxQuadTree",{omit:["dem"]});class wf{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,u){const m=e.wrapped().key;void 0===this.data[m]&&(this.data[m]=[]);const v={value:r,timeout:void 0};if(void 0!==u&&(v.timeout=setTimeout(()=>{this.remove(e,v)},u)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const u=e.wrapped().key,m=void 0===r?0:this.data[u].indexOf(r),v=this.data[u][m];return this.data[u].splice(m,1),v.timeout&&clearTimeout(v.timeout),0===this.data[u].length&&delete this.data[u],this.onRemove(v.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const u in this.data)for(const m of this.data[u])e(m.value)||r.push(m);for(const u of r)this.remove(u.value.tileID,u)}}class bc{constructor(e,r,u){this.func=e,this.mask=r,this.range=u}}bc.ReadOnly=!1,bc.ReadWrite=!0,bc.disabled=new bc(519,bc.ReadOnly,[0,1]);class md{constructor(e,r,u,m,v,x){this.test=e,this.ref=r,this.mask=u,this.fail=m,this.depthFail=v,this.pass=x}}md.disabled=new md({func:519,mask:0},0,0,7680,7680,7680);class pa{constructor(e,r,u){this.blendFunction=e,this.blendColor=r,this.mask=u}}pa.Replace=[1,0],pa.disabled=new pa(pa.Replace,ei.transparent,[!1,!1,!1,!1]),pa.unblended=new pa(pa.Replace,ei.transparent,[!0,!0,!0,!0]),pa.alphaBlended=new pa([1,771],ei.transparent,[!0,!0,!0,!0]);class ys{constructor(e,r,u){this.enable=e,this.mode=r,this.frontFace=u}}ys.disabled=new ys(!1,1029,2305),ys.backCCW=new ys(!0,1029,2305),ys.backCW=new ys(!0,1029,2304),ys.frontCW=new ys(!0,1028,2304),ys.frontCCW=new ys(!0,1028,2305);class hu extends Cu{constructor(e,r,u){super(),this.id=e,this._onlySymbols=u,r.on("data",m=>{"source"===m.dataType&&"metadata"===m.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===m.dataType&&"content"===m.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new wf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new $v,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if("loaded"!==r.state&&"errored"!==r.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const u=this._tiles[r];u.upload(e),u.prepare(this.map.style.imageManager)}}getIds(){return Ot(this._tiles).map(e=>e.tileID).sort(Ef).map(e=>e.key)}getRenderableIds(e){const r=[];for(const u in this._tiles)this._isIdRenderable(+u,e)&&r.push(this._tiles[u]);return e?r.sort((u,m)=>{const v=u.tileID,x=m.tileID,C=new Y(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),I=new Y(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-x.overscaledZ||I.y-C.y||I.x-C.x}).map(u=>u.tileID.key):r.map(u=>u.tileID).sort(Ef).map(u=>u.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const u=this._tiles[e];u&&("loading"!==u.state&&(u.state=r),this._loadTile(u,this._tileLoaded.bind(this,u,e,r)))}_tileLoaded(e,r,u,m){if(m)if(e.state="errored",404!==m.status)this._source.fire(new Fs(m,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=ya.now(),"expired"===u&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new _a("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let m=0;m<r.length;m++){const v=r[m];if(e.neighboringTiles&&e.neighboringTiles[v]){const x=this.getTileByID(v);u(e,x),u(x,e)}}function u(m,v){if(!m.dem||m.dem.borderReady)return;m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0;let x=v.tileID.canonical.x-m.tileID.canonical.x;const C=v.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),D=v.tileID.key;0===x&&0===C||Math.abs(C)>1||(Math.abs(x)>1&&(1===Math.abs(x+I)?x+=I:1===Math.abs(x-I)&&(x-=I)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,x,C),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,u,m){for(const v in this._tiles){let x=this._tiles[v];if(m[v]||!x.hasData()||x.tileID.overscaledZ<=r||x.tileID.overscaledZ>u)continue;let C=x.tileID;for(;x&&x.tileID.overscaledZ>r+1;){const D=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[D.key],x&&x.hasData()&&(C=D)}let I=C;for(;I.overscaledZ>r;)if(I=I.scaledTo(I.overscaledZ-1),e[I.key]){m[C.key]=C;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const u=this._loadedParentTiles[e.key];return u&&u.tileID.overscaledZ>=r?u:null}for(let u=e.overscaledZ-1;u>=r;u--){const m=e.scaledTo(u),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const u=Math.ceil(e.width/r)+1,m=Math.ceil(e.height/r)+1,v=Math.floor(u*m*5),x="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,v):v,C="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(C)}handleWrapJump(e){const r=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,r){const u={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+r),u[v.tileID.key]=v}this._tiles=u;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(+m,this._tiles[m])}}update(e,r,u){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let m;this.updateCacheSize(e,r),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(C=>new go(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y)):(m=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(m=m.filter(C=>this._source.hasTile(C)))):m=[];const v=this._updateRetainedTiles(m);if(pu(this._source.type)&&0!==m.length){const C={},I={},D=Object.keys(v);for(const N of D){const z=v[N],H=this._tiles[N];if(!H||H.fadeEndTime&&H.fadeEndTime<=ya.now())continue;const $=this.findLoadedParent(z,Math.max(z.overscaledZ-hu.maxOverzooming,this._source.minzoom));$&&(this._addTile($.tileID),C[$.tileID.key]=$.tileID),I[N]=z}const R=m[m.length-1].overscaledZ;for(const N in this._tiles){const z=this._tiles[N];if(v[N]||!z.hasData())continue;let H=z.tileID;for(;H.overscaledZ>R;){H=H.scaledTo(H.overscaledZ-1);const $=this._tiles[H.key];if($&&$.hasData()&&I[H.key]){v[N]=z.tileID;break}}}for(const N in C)v[N]||(this._coveredTiles[N]=!0,v[N]=C[N])}for(const C in v)this._tiles[C].clearFadeHold();const x=function(C,I){const D=[];for(const R in C)R in I||D.push(R);return D}(this._tiles,v);for(const C of x){const I=this._tiles[C];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+C)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(0===e.length)return r;const u={},m=e.reduce((D,R)=>Math.min(D,R.overscaledZ),1/0),v=e[0].overscaledZ,x=Math.max(v-hu.maxOverzooming,this._source.minzoom),C=Math.max(v+hu.maxUnderzooming,this._source.minzoom),I={};for(const D of e){const R=this._addTile(D);r[D.key]=D,R.hasData()||m<this._source.maxzoom&&(I[D.key]=D)}this._retainLoadedChildren(I,m,C,r);for(const D of e){let R=this._tiles[D.key];if(R.hasData())continue;if(D.canonical.z>=this._source.maxzoom){const z=D.children(this._source.maxzoom)[0],H=this.getTile(z);if(H&&H.hasData()){r[z.key]=z;continue}}else{const z=D.children(this._source.maxzoom);if(r[z[0].key]&&r[z[1].key]&&r[z[2].key]&&r[z[3].key])continue}let N=R.wasRequested();for(let z=D.overscaledZ-1;z>=x;--z){const H=D.scaledTo(z);if(u[H.key]||(u[H.key]=!0,R=this.getTile(H),!R&&N&&(R=this._addTile(H)),R&&(r[H.key]=H,N=R.wasRequested(),R.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let u,m=this._tiles[e].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){u=this._loadedParentTiles[m.key];break}r.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(u=this._getLoadedTile(v),u)break;m=v}for(const v of r)this._loadedParentTiles[v]=u}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const u=Boolean(r);if(!u){const m=this.map?this.map.painter:null;r=new Kh(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,m,this._isRaster),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,u||this._source.fire(new _a("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const u=r.getExpiryTimeout();u&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},u))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&"reloading"!==r.state?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,u){const m=[],v=this.transform;if(!v)return m;const x="globe"===v.projection.name,C=Js(v.center.lng);for(const I in this._tiles){const D=this._tiles[I];if(u&&D.clearQueryDebugViz(),D.holdingForFade())continue;let R;if(x){const N=D.tileID.canonical;if(0===N.z){const z=[Math.abs(Ze(C,...yd(N,-1))-C),Math.abs(Ze(C,...yd(N,1))-C)];R=[0,2*z.indexOf(Math.min(...z))-1]}else{const z=[Math.abs(Ze(C,...yd(N,-1))-C),Math.abs(Ze(C,...yd(N,0))-C),Math.abs(Ze(C,...yd(N,1))-C)];R=[z.indexOf(Math.min(...z))-1]}}else R=[0];for(const N of R){const z=e.containsTile(D,v,r,N);z&&m.push(z)}}return m}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(u=>this._tiles[u].tileID);for(const u of r)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(pu(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=ya.now())return!0}return!1}setFeatureState(e,r,u){this._state.updateState(e=e||"_geojsonTileLayer",r,u)}removeFeatureState(e,r,u){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,u)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,u){const m=this._tiles[e];m&&m.setDependencies(r,u)}reloadTilesForDependencies(e,r){for(const u in this._tiles)this._tiles[u].hasDependency(e,r)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(e,r))}_preloadTiles(e,r){if(!this._sourceLoaded){const C=()=>{this._sourceLoaded&&(this._source.off("data",C),this._preloadTiles(e,r))};return void this._source.on("data",C)}const u=new Map,m=Array.isArray(e)?e:[e],v=this.map.painter.terrain,x=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const C of m){const I=C.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const D of I)u.set(D.key,D);this.usedForTerrain&&C.updateElevation(!1)}Et(Array.from(u.values()),(C,I)=>{const D=new Kh(C,this._source.tileSize*C.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(D,R=>{"raster-dem"===this._source.type&&D.dem&&this._backfillDEM(D),I(R,D)})},r)}}function Ef(i,e){const r=Math.abs(2*i.wrap)-+(i.wrap<0),u=Math.abs(2*e.wrap)-+(e.wrap<0);return i.overscaledZ-e.overscaledZ||u-r||e.canonical.y-i.canonical.y||e.canonical.x-i.canonical.x}function pu(i){return"raster"===i||"image"===i||"video"===i||"custom"===i}function yd(i,e){const r=1<<i.z;return[i.x/r+e,(i.x+1)/r+e]}hu.maxOverzooming=10,hu.maxUnderzooming=3;class Zm{constructor(e,r,u){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=u}static create(e,r,u){const m=u||e.findDEMTileFor(r);if(!m||!m.dem)return;const v=m.dem,x=m.tileID,C=1<<r.canonical.z-x.canonical.z;return new Zm(m,m.tileSize/Sn/C,[(r.canonical.x/C-x.canonical.x)*v.dim,(r.canonical.y/C-x.canonical.y)*v.dim])}tileCoordToPixel(e,r){const u=r*this._scale+this._offset[1],m=Math.floor(e*this._scale+this._offset[0]),v=Math.floor(u);return new Y(m,v)}getElevationAt(e,r,u,m){const v=e*this._scale+this._offset[0],x=r*this._scale+this._offset[1],C=Math.floor(v),I=Math.floor(x),D=this._dem;return m=!!m,u?Ei(Ei(D.get(C,I,m),D.get(C,I+1,m),x-I),Ei(D.get(C+1,I,m),D.get(C+1,I+1,m),x-I),v-C):D.get(C,I,m)}getElevationAtPixel(e,r,u){return this._dem.get(e,r,!!u)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*ta(1,e)*this._dem.stride}}class Ym{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new No(Sn,16,0),this.featureIndexArray=new Kl,this.promoteId=r}insert(e,r,u,m,v,x=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,v,x);const I=this.grid;for(let D=0;D<r.length;D++){const R=r[D],N=[1/0,1/0,-1/0,-1/0];for(let z=0;z<R.length;z++){const H=R[z];N[0]=Math.min(N[0],H.x),N[1]=Math.min(N[1],H.y),N[2]=Math.max(N[2],H.x),N[3]=Math.max(N[3],H.y)}N[0]<Sn&&N[1]<Sn&&N[2]>=0&&N[3]>=0&&I.insert(C,N[0],N[1],N[2],N[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Xp(new km(this.rawTileData)).layers,this.sourceLayerCoder=new bf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,u,m){this.loadVTLayers();const v=e.params||{},x=ql(v.filter),C=e.tileResult,I=e.transform,D=C.bufferedTilespaceBounds,R=this.grid.query(D.min.x,D.min.y,D.max.x,D.max.y,($,Q,ae,be)=>jg(C.bufferedTilespaceGeometry,$,Q,ae,be));R.sort(Iy);let N=null;I.elevation&&R.length>0&&(N=Zm.create(I.elevation,this.tileID));const z={};let H;for(let $=0;$<R.length;$++){const Q=R[$];if(Q===H)continue;H=Q;const ae=this.featureIndexArray.get(Q);let be=null;this.loadMatchingFeature(z,ae,x,v.layers,v.availableImages,r,u,m,(Re,xe,Ae,Ve=0)=>(be||(be=La(Re,this.tileID.canonical,e.tileTransform)),xe.queryIntersectsFeature(C,Re,Ae,be,this.z,e.transform,e.pixelPosMatrix,N,Ve)))}return z}loadMatchingFeature(e,r,u,m,v,x,C,I,D){const{featureIndex:R,bucketIndex:N,sourceLayerIndex:z,layoutVertexArrayOffset:H}=r,$=this.bucketLayerIDs[N];if(m&&!function(Re,xe){for(let Ae=0;Ae<Re.length;Ae++)if(xe.indexOf(Re[Ae])>=0)return!0;return!1}(m,$))return;const Q=this.sourceLayerCoder.decode(z),ae=this.vtLayers[Q].feature(R);if(u.needGeometry){const Re=ia(ae,!0);if(!u.filter(new F(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!u.filter(new F(this.tileID.overscaledZ),ae))return;const be=this.getId(ae,Q);for(let Re=0;Re<$.length;Re++){const xe=$[Re];if(m&&m.indexOf(xe)<0)continue;const Ae=x[xe];if(!Ae)continue;let Ve={};void 0!==be&&I&&(Ve=I.getState(Ae.sourceLayer||"_geojsonTileLayer",be));const je=ke({},C[xe]);je.paint=Gv(je.paint,Ae.paint,ae,Ve,v),je.layout=Gv(je.layout,Ae.layout,ae,Ve,v);const _t=!D||D(ae,Ae,Ve,H);if(!_t)continue;const ft=new Hm(ae,this.z,this.x,this.y,be);ft.layer=je;let St=e[xe];void 0===St&&(St=e[xe]=[]),St.push({featureIndex:R,feature:ft,intersectionZ:_t})}}lookupSymbolFeatures(e,r,u,m,v,x,C,I){const D={};this.loadVTLayers();const R=ql(v);for(const N of e)this.loadMatchingFeature(D,{bucketIndex:u,sourceLayerIndex:m,featureIndex:N,layoutVertexArrayOffset:0},R,x,C,I,r);return D}loadFeature(e){const{featureIndex:r,sourceLayerIndex:u}=e;this.loadVTLayers();const m=this.sourceLayerCoder.decode(u),v=this.vtFeatures[m];if(v[r])return v[r];const x=this.vtLayers[m].feature(r);return v[r]=x,x}hasLayer(e){for(const r of this.bucketLayerIDs)for(const u of r)if(e===u)return!0;return!1}getId(e,r){let u=e.id;if(this.promoteId){const m="string"==typeof this.promoteId?this.promoteId:this.promoteId[r];null!=m&&(u=e.properties[m]),"boolean"==typeof u&&(u=Number(u))}return u}}function Gv(i,e,r,u,m){return ct(i,(v,x)=>{const C=e instanceof ve?e.get(x):null;return C&&C.evaluate?C.evaluate(r,u,m):C})}function Iy(i,e){return e-i}fn(Ym,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class V_{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new lo({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const u=this.getKey(e,r);return this.positions[u]}trim(){const e=this.width,r=this.height=it(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,u){const m=[];let v=e.length%2==1?-e[e.length-1]*u:0,x=e[0]*u,C=!0;m.push({left:v,right:x,isDash:C,zeroLength:0===e[0]});let I=e[0];for(let D=1;D<e.length;D++){C=!C;const R=e[D];v=I*u,I+=R,x=I*u,m.push({left:v,right:x,isDash:C,zeroLength:0===R})}return m}addRoundDash(e,r,u){const m=r/2;for(let v=-u;v<=u;v++){const x=this.width*(this.nextRow+u+v);let C=0,I=e[C];for(let D=0;D<this.width;D++){D/I.right>1&&(I=e[++C]);const R=Math.abs(D-I.left),N=Math.abs(D-I.right),z=Math.min(R,N);let H;const $=v/u*(m+1);if(I.isDash){const Q=m-Math.abs($);H=Math.sqrt(z*z+Q*Q)}else H=m-Math.sqrt(z*z+$*$);this.image.data[x+D]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(e,r){for(let I=e.length-1;I>=0;--I){const D=e[I],R=e[I+1];D.zeroLength?e.splice(I,1):R&&R.isDash===D.isDash&&(R.left=D.left,e.splice(I,1))}const u=e[0],m=e[e.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const v=this.width*this.nextRow;let x=0,C=e[x];for(let I=0;I<this.width;I++){I/C.right>1&&(C=e[++x]);const D=Math.abs(I-C.left),R=Math.abs(I-C.right),N=Math.min(D,R);this.image.data[v+I]=Math.max(0,Math.min(255,(C.isDash?N:-N)+r+128))}}addDash(e,r){const u=this.getKey(e,r);if(this.positions[u])return this.positions[u];const m="round"===r,v=m?7:0,x=2*v+1;if(this.nextRow+x>this.height)return tn("LineAtlas out of space"),null;0===e.length&&e.push(1);let C=0;for(let R=0;R<e.length;R++)e[R]<0&&(tn("Negative value is found in line dasharray, replacing values with 0"),e[R]=0),C+=e[R];if(0!==C){const R=this.width/C,N=this.getDashRanges(e,this.width,R);m?this.addRoundDash(N,R,v):this.addRegularDash(N,"square"===r?.5*R:0)}const I=this.nextRow+v;this.nextRow+=x;const D={tl:[I,v],br:[C,0]};return this.positions[u]=D,D}}fn(V_,"LineAtlas");const U_=1*Qr;class Cf{constructor(e){const r={},u=[];for(const C in e){const I=e[C],D=r[C]={};for(const R in I.glyphs){const N=I.glyphs[+R];if(!N||0===N.bitmap.width||0===N.bitmap.height)continue;const z=N.metrics.localGlyph?U_:1,H={x:0,y:0,w:N.bitmap.width+2*z,h:N.bitmap.height+2*z};u.push(H),D[R]=H}}const{w:m,h:v}=ry(u),x=new lo({width:m||1,height:v||1});for(const C in e){const I=e[C];for(const D in I.glyphs){const R=I.glyphs[+D];if(!R||0===R.bitmap.width||0===R.bitmap.height)continue;const N=r[C][D],z=R.metrics.localGlyph?U_:1;lo.copy(R.bitmap,x,{x:0,y:0},{x:N.x+z,y:N.y+z},R.bitmap)}}this.image=x,this.positions=r}}fn(Cf,"GlyphAtlas");class Wv{constructor(e){this.tileID=new go(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=ca(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,u,m,v){this.status="parsing",this.data=e,this.collisionBoxArray=new Zi;const x=new bf(Object.keys(e.layers).sort()),C=new Ym(this.tileID,this.promoteId);C.bucketLayerIDs=[];const I={},D=new V_(256,256),R={featureIndex:C,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:D,availableImages:u},N=r.familiesBySource[this.source];for(const Ve in N){const je=e.layers[Ve];if(!je)continue;let _t=!1,ft=!1;for(const bt of N[Ve])"symbol"===bt[0].type?_t=!0:ft=!0;if(!0===this.isSymbolTile&&!_t||!1===this.isSymbolTile&&!ft)continue;1===je.version&&tn(`Vector tile source "${this.source}" layer "${Ve}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const St=x.encode(Ve),Ht=[];for(let bt=0;bt<je.length;bt++){const At=je.feature(bt),kt=C.getId(At,Ve);Ht.push({feature:At,id:kt,index:bt,sourceLayerIndex:St})}for(const bt of N[Ve]){const At=bt[0];void 0!==this.isSymbolTile&&"symbol"===At.type!==this.isSymbolTile||At.minzoom&&this.zoom<Math.floor(At.minzoom)||At.maxzoom&&this.zoom>=At.maxzoom||"none"!==At.visibility&&(Gr(bt,this.zoom,u),(I[At.id]=At.createBucket({index:C.bucketLayerIDs.length,layers:bt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:St,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Ht,R,this.tileID.canonical,this.tileTransform),C.bucketLayerIDs.push(bt.map(kt=>kt.id)))}}let z,H,$,Q;D.trim();const ae={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},be=()=>{if(z)return v(z);if(H&&$&&Q){const Ve=new Cf(H),je=new sy($,Q);for(const _t in I){const ft=I[_t];ft instanceof As?(Gr(ft.layers,this.zoom,u),Lm(ft,H,Ve.positions,$,je.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):ft.hasPattern&&(ft instanceof Sm||ft instanceof Va||ft instanceof Th)&&(Gr(ft.layers,this.zoom,u),ft.addFeatures(R,this.tileID.canonical,je.patternPositions,u,this.tileTransform))}this.status="done",v(null,{buckets:Ot(I).filter(_t=>!_t.isEmpty()),featureIndex:C,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ve.image,lineAtlas:D,imageAtlas:je,glyphMap:this.returnDependencies?H:null,iconMap:this.returnDependencies?$:null,glyphPositions:this.returnDependencies?Ve.positions:null})}},Re=ct(R.glyphDependencies,Ve=>Object.keys(Ve).map(Number));Object.keys(Re).length?m.send("getGlyphs",{uid:this.uid,stacks:Re},(Ve,je)=>{z||(z=Ve,H=je,be())},void 0,!1,ae):H={};const xe=Object.keys(R.iconDependencies);xe.length?m.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"icons"},(Ve,je)=>{z||(z=Ve,$=je,be())},void 0,!1,ae):$={};const Ae=Object.keys(R.patternDependencies);Ae.length?m.send("getImages",{icons:Ae,source:this.source,tileID:this.tileID,type:"patterns"},(Ve,je)=>{z||(z=Ve,Q=je,be())},void 0,!1,ae):Q={},be()}}function Gr(i,e,r){const u=new F(e);for(const m of i)m.recalculate(u,r)}class Dy{constructor(e){this.entries={},this.scheduler=e}request(e,r,u,m){const v=this.entries[e]=this.entries[e]||{callbacks:[]};if(v.result){const[x,C]=v.result;return this.scheduler?this.scheduler.add(()=>{m(x,C)},r):m(x,C),()=>{}}return v.callbacks.push(m),v.cancel||(v.cancel=u((x,C)=>{v.result=[x,C];for(const I of v.callbacks)this.scheduler?this.scheduler.add(()=>{I(x,C)},r):I(x,C);setTimeout(()=>delete this.entries[e],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(x=>x!==m),v.callbacks.length||(v.cancel(),delete this.entries[e]))}}}function H_(i,e,r){const u=JSON.stringify(i.request);return i.data&&(this.deduped.entries[u]={result:[null,i.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},m=>{const v=ga(i.request,(x,C,I,D)=>{x?m(x):C&&m(null,{vectorTile:r?void 0:new Xp(new km(C)),rawData:C,cacheControl:I,expires:D})});return()=>{v.cancel(),m()}},e)}const uo=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xm{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,u]=new Uint8Array(e,0,2);if(219!==r)throw new Error("Data does not appear to be in a KDBush format.");const m=u>>4;if(1!==m)throw new Error(`Got v${m} data when expected v1.`);const v=uo[15&u];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(e,2,1),[C]=new Uint32Array(e,4,1);return new Xm(C,x,v,e)}constructor(e,r=64,u=Float64Array,m){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=u,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const v=uo.indexOf(this.ArrayType),x=2*e*this.ArrayType.BYTES_PER_ELEMENT,C=e*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-C%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${u}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+C+I,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+x+C+I),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+C+I,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=e,this.coords[this._pos++]=r,u}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Sf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:C}=this,I=[0,v.length-1,0],D=[];for(;I.length;){const R=I.pop()||0,N=I.pop()||0,z=I.pop()||0;if(N-z<=C){for(let ae=z;ae<=N;ae++){const be=x[2*ae],Re=x[2*ae+1];be>=e&&be<=u&&Re>=r&&Re<=m&&D.push(v[ae])}continue}const H=z+N>>1,$=x[2*H],Q=x[2*H+1];$>=e&&$<=u&&Q>=r&&Q<=m&&D.push(v[H]),(0===R?e<=$:r<=Q)&&(I.push(z),I.push(H-1),I.push(1-R)),(0===R?u>=$:m>=Q)&&(I.push(H+1),I.push(N),I.push(1-R))}return D}within(e,r,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,C=[0,m.length-1,0],I=[],D=u*u;for(;C.length;){const R=C.pop()||0,N=C.pop()||0,z=C.pop()||0;if(N-z<=x){for(let ae=z;ae<=N;ae++)qv(v[2*ae],v[2*ae+1],e,r)<=D&&I.push(m[ae]);continue}const H=z+N>>1,$=v[2*H],Q=v[2*H+1];qv($,Q,e,r)<=D&&I.push(m[H]),(0===R?e-u<=$:r-u<=Q)&&(C.push(z),C.push(H-1),C.push(1-R)),(0===R?e+u>=$:r+u>=Q)&&(C.push(H+1),C.push(N),C.push(1-R))}return I}}function Sf(i,e,r,u,m,v){if(m-u<=r)return;const x=u+m>>1;ky(i,e,x,u,m,v),Sf(i,e,r,u,x-1,1-v),Sf(i,e,r,x+1,m,1-v)}function ky(i,e,r,u,m,v){for(;m>u;){if(m-u>600){const D=m-u+1,R=r-u+1,N=Math.log(D),z=.5*Math.exp(2*N/3),H=.5*Math.sqrt(N*z*(D-z)/D)*(R-D/2<0?-1:1);ky(i,e,r,Math.max(u,Math.floor(r-R*z/D+H)),Math.min(m,Math.floor(r+(D-R)*z/D+H)),v)}const x=e[2*r+v];let C=u,I=m;for(Qh(i,e,u,r),e[2*m+v]>x&&Qh(i,e,u,m);C<I;){for(Qh(i,e,C,I),C++,I--;e[2*C+v]<x;)C++;for(;e[2*I+v]>x;)I--}e[2*u+v]===x?Qh(i,e,u,I):(I++,Qh(i,e,I,m)),I<=r&&(u=I+1),r<=I&&(m=I-1)}}function Qh(i,e,r,u){xc(i,r,u),xc(e,2*r,2*u),xc(e,2*r+1,2*u+1)}function xc(i,e,r){const u=i[e];i[e]=i[r],i[r]=u}function qv(i,e,r,u){const m=i-r,v=e-u;return m*m+v*v}p.ARRAY_TYPE=Kr,p.AUTH_ERR_MSG=Ue,p.Aabb=jo,p.Actor=class{constructor(i,e,r){this.target=i,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},It(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=hn()?i:ge,this.scheduler=new Hv}send(i,e,r,u,m=!1,v){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=v,this.callbacks[x]=r);const C=Cn(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:i,hasCallback:!!r,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:zi(e,C)},C),{cancel:()=>{r&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const e=i.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const u=this.cancelCallbacks[r];delete this.cancelCallbacks[r],u&&u.cancel()}else if(e.mustQueue||hn()){const u=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),u&&u.metadata||{type:"message"})}else this.processTask(r,e)}processTask(i,e){if("<response>"===e.type){const r=this.callbacks[i];delete this.callbacks[i],r&&(e.error?r(Nc(e.error)):r(null,Nc(e.data)))}else{const r=Cn(this.globalScope)?void 0:[],u=e.hasCallback?(v,x)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:v?zi(v):null,data:zi(x,r)},r)}:v=>{},m=Nc(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,m,u);else if(this.parent.getWorkerSource){const v=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,v[0],m.source)[v[1]](m,u)}else u(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},p.CanonicalTileID=Ih,p.Color=ei,p.ColorMode=pa,p.CullFaceMode=ys,p.DEMData=fd,p.DataConstantProperty=X,p.DedupedRequest=Dy,p.DepthMode=bc,p.EXTENT=Sn,p.Elevation=class{isDataAvailableAtPoint(i){const e=this._source();if(this.isUsingMockSource()||!e||i.y<0||i.y>1)return!1;const r=e.getSource().maxzoom,u=1<<r,m=Math.floor(i.x),v=Math.floor((i.x-m)*u),x=Math.floor(i.y*u),C=this.findDEMTileFor(new go(r,m,r,v,x));return!(!C||!C.dem)}getAtPointOrZero(i,e=0){return this.getAtPoint(i,e)||0}getAtPoint(i,e,r=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const u=this._source();if(!u||i.y<0||i.y>1)return e;const m=u.getSource().maxzoom,v=1<<m,x=Math.floor(i.x),C=i.x-x,I=new go(m,x,m,Math.floor(C*v),Math.floor(i.y*v)),D=this.findDEMTileFor(I);if(!D||!D.dem)return e;const R=D.dem,N=1<<D.tileID.canonical.z,z=(C*N-D.tileID.canonical.x)*R.dim,H=(i.y*N-D.tileID.canonical.y)*R.dim,$=Math.floor(z),Q=Math.floor(H);return(r?this.exaggeration():1)*Ei(Ei(R.get($,Q),R.get($,Q+1),H-Q),Ei(R.get($+1,Q),R.get($+1,Q+1),H-Q),z-$)}getAtTileOffset(i,e,r){const u=1<<i.canonical.z;return this.getAtPointOrZero(new Ju(i.wrap+(i.canonical.x+e/Sn)/u,(i.canonical.y+r/Sn)/u))}getAtTileOffsetFunc(i,e,r,u){return m=>{const v=this.getAtTileOffset(i,m.x,m.y),x=u.upVector(i.canonical,m.x,m.y);return Ks(x,x,v*u.upVectorScale(i.canonical,e,r).metersToTile),x}}getForTilePoints(i,e,r,u){if(this.isUsingMockSource())return!1;const m=Zm.create(this,i,u);return!!m&&(e.forEach(v=>{v[2]=this.exaggeration()*m.getElevationAt(v[0],v[1],r)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(i);if(!e||!e.dem)return null;const r=e.dem.tree,u=e.tileID,m=1<<i.canonical.z-u.canonical.z;let v=i.canonical.x/m-u.canonical.x,x=i.canonical.y/m-u.canonical.y,C=0;for(let I=0;I<i.canonical.z-u.canonical.z&&!r.leaves[C];I++){v*=2,x*=2;const D=2*Math.floor(x)+Math.floor(v);C=r.childOffsets[C]+D,v%=1,x%=1}return{min:this.exaggeration()*r.minimums[C],max:this.exaggeration()*r.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},p.ErrorEvent=Fs,p.EvaluationParameters=F,p.Event=_a,p.Evented=Cu,p.FillExtrusionBucket=Th,p.Frustum=$c,p.FrustumCorners=Rp,p.GLOBE_RADIUS=hs,p.GLOBE_SCALE_MATCH_LATITUDE=45,p.GLOBE_ZOOM_THRESHOLD_MAX=Mv,p.GLOBE_ZOOM_THRESHOLD_MIN=Lp,p.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_fillGridMeshWithLods(i,e){const r=new Ut,u=new bn,m=[],v=i+1+2,x=e[0]+1,C=e[0]+1+(1+e.length),I=(D,R,N)=>{let z=D===v-1?D-2:0===D?D:D-1;return z+=N?24575:0,[z,R]};for(let D=0;D<v;++D)r.emplaceBack(...I(D,0,!0));for(let D=0;D<x;++D)for(let R=0;R<v;++R)r.emplaceBack(...I(R,D,(0===R||R===v-1)&&!0));for(let D=0;D<e.length;++D){const R=e[D];for(let N=0;N<v;++N)r.emplaceBack(...I(N,R,!0))}for(let D=0;D<e.length;++D){const R=u.length,N=e[D]+1+2,z=new bn;for(let Q=0;Q<N-1;Q++){const ae=Q===N-2,be=ae?v*(C-e.length+D-Q):v;for(let Re=0;Re<v-1;Re++){const xe=Q*v+Re;0===Q||ae||0===Re||Re===v-2?(z.emplaceBack(xe+1,xe,xe+be),z.emplaceBack(xe+be,xe+be+1,xe+1)):(u.emplaceBack(xe+1,xe,xe+be),u.emplaceBack(xe+be,xe+be+1,xe+1))}}const H=Pr.simpleSegment(0,R,r.length,u.length-R);for(let Q=0;Q<z.uint16.length;Q+=3)u.emplaceBack(z.uint16[Q],z.uint16[Q+1],z.uint16[Q+2]);const $=Pr.simpleSegment(0,R,r.length,u.length-R);m.push({withoutSkirts:H,withSkirts:$})}return{vertices:r,indices:u,segments:m}}_createGrid(i){const e=this._fillGridMeshWithLods(64,lh);this._gridSegments=e.segments,this._gridBuffer=i.createVertexBuffer(e.vertices,sh.members),this._gridIndexBuffer=i.createIndexBuffer(e.indices,!0)}_createPoles(i){const e=new bn;for(let m=0;m<=64;m++)e.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=i.createIndexBuffer(e,!0);const r=new Yi,u=new Yi;this._poleSegments=[];for(let m=0,v=0;m<Lp;m++){const x=360/(1<<m);r.emplaceBack(0,-hs,0,.5,0),u.emplaceBack(0,-hs,0,.5,1);for(let C=0;C<=64;C++){const I=C/64,D=Ei(0,x,I),[R,N,z]=ch(zp,Rg,D,hs);r.emplaceBack(R,N,z,I,0),u.emplaceBack(R,N,z,I,1)}this._poleSegments.push(Pr.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(r,dm,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(u,dm,!1)}getGridBuffers(i,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,e){if(!this._wireframeSegments){const r=new Xr,u=64,m=u+1+2,v=1;this._wireframeSegments=[];for(let x=0,C=0;x<lh.length;x++){const I=lh[x];for(let R=v;R<I+v;R++)for(let N=v;N<u+v;N++){const z=R*m+N;r.emplaceBack(z,z+1),r.emplaceBack(z,z+m),r.emplaceBack(z,z+m+1)}const D=I*u*3;this._wireframeSegments.push(Pr.simpleSegment(0,C,(I+1)*m,D)),C+=D}this._wireframeIndexBuffer=i.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},p.GlyphManager=ml,p.ImagePosition=oy,p.KDBush=Xm,p.LivePerformanceUtils=Dd,p.LngLat=Fi,p.LngLatBounds=Do,p.LocalGlyphMode=ld,p.MAX_MERCATOR_LATITUDE=fo,p.MercatorCoordinate=Ju,p.ONE_EM=xr,p.OverscaledTileID=go,p.PerformanceMarkers=bs,p.Point=Y,p.Properties=Ce,p.RGBAImage=Xi,p.Ray=ah,p.RequestManager=class{constructor(i,e,r){this._transformRequestFn=i,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const i=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",pe,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,e){return this._transformRequestFn&&this._transformRequestFn(i,e)||{url:i}}normalizeStyleURL(i,e){if(!Qe(i))return i;const r=Vt(i);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(i,e){if(!Qe(i))return i;const r=Vt(i);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(i,e,r,u){if(!Qe(i))return i;const m=Vt(i);return m.path=`/v4/${m.authority}.json`,m.params.push("secure"),r&&m.params.push(`language=${r}`),u&&m.params.push(`worldview=${u}`),this._makeAPIURL(m,this._customAccessToken||e)}normalizeSpriteURL(i,e,r,u){const m=Vt(i);return Qe(i)?(m.path=`/styles/v1${m.path}/sprite${e}${r}`,this._makeAPIURL(m,this._customAccessToken||u)):(m.path+=`${e}${r}`,$t(m))}normalizeTileURL(i,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Qe(i))return i;const u=Vt(i);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&"raster"!==u.authority&&512===r?"@2x":""}${Je.supported?".webp":"$1"}`),"raster"===u.authority?u.path=`/${Ge.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${Ge.TILE_URL_VERSION}${u.path}`);const m=this._customAccessToken||function(v){for(const x of v){const C=x.match(/^access_token=(.*)$/);if(C)return C[1]}return null}(u.params)||Ge.ACCESS_TOKEN;return Ge.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,m)}canonicalizeTileURL(i,e){const r=Vt(i);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return i;let u="mapbox://";r.path.match(/^\/raster\/v1\//)?u+=`raster/${r.path.replace(`/${Ge.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${r.path.replace(`/${Ge.TILE_URL_VERSION}/`,"")}`;let m=r.params;return e&&(m=m.filter(v=>!v.match(/^access_token=/))),m.length&&(u+=`?${m.join("&")}`),u}canonicalizeTileset(i,e){const r=!!e&&Qe(e),u=[];for(const m of i.tiles||[])pt(m)?u.push(this.canonicalizeTileURL(m,r)):u.push(m);return u}_makeAPIURL(i,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Vt(Ge.API_URL);if(i.protocol=u.protocol,i.authority=u.authority,"http"===i.protocol){const m=i.params.indexOf("secure");m>=0&&i.params.splice(m,1)}if("/"!==u.path&&(i.path=`${u.path}${i.path}`),!Ge.REQUIRE_ACCESS_TOKEN)return $t(i);if(e=e||Ge.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return i.params=i.params.filter(m=>-1===m.indexOf("access_token")),i.params.push(`access_token=${e||""}`),$t(i)}},p.ResourceType=_r,p.SegmentVector=Pr,p.SourceCache=hu,p.StencilMode=md,p.StructArrayLayout1ui2=Qo,p.StructArrayLayout2f1f2i16=Dn,p.StructArrayLayout2i4=Ut,p.StructArrayLayout2ui4=Xr,p.StructArrayLayout3f12=ii,p.StructArrayLayout3ui6=bn,p.StructArrayLayout4i8=Dt,p.StructArrayLayout5f20=Yi,p.Texture=Za,p.Tile=Kh,p.Transitionable=q,p.Uniform1f=Jf,p.Uniform1i=class extends Sa{constructor(i){super(i),this.current=0}set(i,e,r){this.fetchUniformLocation(i,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},p.Uniform2f=class extends Sa{constructor(i){super(i),this.current=[0,0]}set(i,e,r){this.fetchUniformLocation(i,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},p.Uniform3f=class extends Sa{constructor(i){super(i),this.current=[0,0,0]}set(i,e,r){this.fetchUniformLocation(i,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},p.Uniform4f=Jy,p.UniformColor=Bo,p.UniformMatrix2f=class extends Sa{constructor(i){super(i),this.current=e_}set(i,e,r){if(this.fetchUniformLocation(i,e))for(let u=0;u<4;u++)if(r[u]!==this.current[u]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},p.UniformMatrix3f=class extends Sa{constructor(i){super(i),this.current=Sg}set(i,e,r){if(this.fetchUniformLocation(i,e))for(let u=0;u<9;u++)if(r[u]!==this.current[u]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},p.UniformMatrix4f=class extends Sa{constructor(i){super(i),this.current=em}set(i,e,r){if(this.fetchUniformLocation(i,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let u=1;u<16;u++)if(r[u]!==this.current[u]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},p.UnwrappedTileID=tu,p.ValidationError=pn,p.VectorTileFeature=Kp,p.VectorTileWorkerSource=class extends Cu{constructor(i,e,r,u,m){super(),this.actor=i,this.layerIndex=e,this.availableImages=r,this.loadVectorData=m||H_,this.loading={},this.loaded={},this.deduped=new Dy(i.scheduler),this.isSpriteLoaded=u,this.scheduler=i.scheduler}loadTile(i,e){const r=i.uid,u=i&&i.request,m=u&&u.collectResourceTiming,v=this.loading[r]=new Wv(i);v.abort=this.loadVectorData(i,(x,C)=>{const I=!this.loading[r];if(delete this.loading[r],I||x||!C)return v.status="done",I||(this.loaded[r]=v),e(x);const D=C.rawData,R={};C.expires&&(R.expires=C.expires),C.cacheControl&&(R.cacheControl=C.cacheControl),v.vectorTile=C.vectorTile||new Xp(new km(D));const N=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,(z,H)=>{if(z||!H)return e(z);const $={};if(m){const Q=xs(u);Q.length>0&&($.resourceTiming=JSON.parse(JSON.stringify(Q)))}e(null,ke({rawTileData:D.slice(0)},H,R,$))})};this.isSpriteLoaded?N():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(N,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):N()}),this.loaded=this.loaded||{},this.loaded[r]=v})}reloadTile(i,e){const r=this.loaded,u=i.uid,m=this;if(r&&r[u]){const v=r[u];v.showCollisionBoxes=i.showCollisionBoxes,v.enableTerrain=!!i.enableTerrain,v.projection=i.projection,v.tileTransform=ca(i.tileID.canonical,i.projection);const x=(C,I)=>{const D=v.reloadCallback;D&&(delete v.reloadCallback,v.parse(v.vectorTile,m.layerIndex,this.availableImages,m.actor,D)),e(C,I)};"parsing"===v.status?v.reloadCallback=x:"done"===v.status&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(i,e){const r=i.uid,u=this.loading[r];u&&(u.abort&&u.abort(),delete this.loading[r]),e()}removeTile(i,e){const r=this.loaded,u=i.uid;r&&r[u]&&delete r[u],e()}},p.WritingMode=rs,p.ZoomDependentExpression=Ss,p.add=Ds,p.addDynamicAttributes=_c,p.adjoint=function(i,e){var r=e[0],u=e[1],m=e[2],v=e[3],x=e[4],C=e[5],I=e[6],D=e[7],R=e[8];return i[0]=x*R-C*D,i[1]=m*D-u*R,i[2]=u*C-m*x,i[3]=C*I-v*R,i[4]=r*R-m*I,i[5]=m*v-r*C,i[6]=v*D-x*I,i[7]=u*I-r*D,i[8]=r*x-u*v,i},p.asyncAll=Et,p.bezier=Be,p.bindAll=It,p.boundsAttributes=wy,p.bufferConvexPolygon=function(i,e){const r=[];for(let u=0;u<i.length;u++){const m=ze(u-1,-1,i.length-1),v=ze(u+1,-1,i.length-1),x=i[u],C=i[v],I=i[m].sub(x).unit(),D=C.sub(x).unit(),R=D.angleWithSep(I.x,I.y),N=I.add(D).unit().mult(-1*e/Math.sin(R/2));r.push(x.add(N))}return r},p.cacheEntryPossiblyAdded=function(i){ma++,ma>Qi&&(i.getActor().send("enforceCacheSizeLimit",qo),ma=0)},p.calculateGlobeLabelMatrix=function(i,e){const{x:r,y:u}=i.point,m=o_(r,u,i.worldSize/i._pixelsPerMercatorPixel,0,0);return nc(m,m,pm(Ra(e)))},p.calculateGlobeMatrix=function(i){const{x:e,y:r}=i.point,{lng:u,lat:m}=i._center;return o_(e,r,i.worldSize,u,m)},p.calculateGlobeMercatorMatrix=function(i){const e=i.pixelsPerMeter,r=e/ta(1,i.center.lat),u=es(new Float64Array(16));return Qd(u,u,[i.point.x,i.point.y,0]),Oa(u,u,[r,r,e]),Float32Array.from(u)},p.circumferenceAtLatitude=fm,p.clamp=Ze,p.clearTileCache=function(i){if(!ir())return;const e=ge.caches.delete($i);i&&e.catch(i).then(()=>i())},p.clipLine=dy,p.clone=function(i){var e=new Kr(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},p.clone$1=sn,p.collisionCircleLayout=gc,p.config=Ge,p.conjugate=function(i,e){return i[0]=-e[0],i[1]=-e[1],i[2]=-e[2],i[3]=e[3],i},p.create=function(){var i=new Kr(16);return Kr!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},p.create$1=Is,p.createExpression=$l,p.createLayout=nt,p.createStyleLayer=function(i){return"custom"===i.type?new z_(i):new by[i.type](i)},p.cross=sm,p.degToRad=K,p.distance=function(i,e){return Math.hypot(e[0]-i[0],e[1]-i[1],e[2]-i[2])},p.div=function(i,e,r){return i[0]=e[0]/r[0],i[1]=e[1]/r[1],i[2]=e[2]/r[2],i},p.dot=Qs,p.earthRadius=ph,p.ease=at,p.easeCubicInOut=qe,p.ecefToLatLng=function([i,e,r]){const u=Math.hypot(i,e,r),m=Math.atan2(i,r),v=.5*Math.PI-Math.acos(-e/u);return new Fi(ce(m),ce(v))},p.emitValidationErrors=Gu,p.endsWith=Wt,p.enforceCacheSizeLimit=function(i){Bt(),Si&&Si.then(e=>{e.keys().then(r=>{for(let u=0;u<r.length-i;u++)e.delete(r[u])})})},p.evaluateSizeForFeature=tf,p.evaluateSizeForZoom=Ua,p.evaluateVariableOffset=fy,p.evented=E,p.exactEquals=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]&&i[3]===e[3]},p.exactEquals$1=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]},p.exported=ya,p.exported$1=Je,p.extend=ke,p.extend$1=ui,p.fillExtrusionHeightLift=pc,p.filterObject=Rt,p.fromMat4=function(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],i},p.fromQuat=function(i,e){var r=e[0],u=e[1],m=e[2],v=e[3],x=r+r,C=u+u,I=m+m,D=r*x,R=u*x,N=u*C,z=m*x,H=m*C,$=m*I,Q=v*x,ae=v*C,be=v*I;return i[0]=1-N-$,i[1]=R+be,i[2]=z-ae,i[3]=0,i[4]=R-be,i[5]=1-D-$,i[6]=H+Q,i[7]=0,i[8]=z+ae,i[9]=H-Q,i[10]=1-D-N,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},p.fromRotation=function(i,e){var r=Math.sin(e),u=Math.cos(e);return i[0]=u,i[1]=r,i[2]=0,i[3]=-r,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},p.fromScaling=im,p.furthestTileCorner=function(i){const e=Math.round((i+45+360)%360/90)%4;return _e[e]},p.getAABBPointSquareDist=function(i,e,r){let u=0;for(let m=0;m<2;++m){const v=r?r[m]:0;i[m]>v&&(u+=(i[m]-v)*(i[m]-v)),e[m]<v&&(u+=(v-e[m])*(v-e[m]))}return u},p.getAnchorAlignment=cy,p.getAnchorJustification=Wo,p.getBounds=function(i){let e=1/0,r=1/0,u=-1/0,m=-1/0;for(const v of i)e=Math.min(e,v.x),r=Math.min(r,v.y),u=Math.max(u,v.x),m=Math.max(m,v.y);return{min:new Y(e,r),max:new Y(u,m)}},p.getColumn=cr,p.getDefaultExportFromCjs=te,p.getGridMatrix=function(i,e,r,u){const m=e.getNorth(),v=e.getSouth(),x=e.getWest(),C=e.getEast(),I=1<<i.z,D=C-x,R=m-v,N=D/64,z=-R/lh[r],H=[0,N,0,z,0,0,m,x,0];if(i.z>0){const $=180/u;tc(H,H,[$/D+1,0,0,0,$/R+1,0,-.5*$/N,.5*$/z,1])}return H[2]=I,H[5]=i.x,H[8]=i.y,H},p.getImage=Te,p.getJSON=function(i,e){return si(ke(i,{type:"json"}),e)},p.getLatitudinalLod=function(i){const e=fo-5;i=Ze(i,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(K(i))),3);return Math.round(r*(lh.length-1))},p.getMapSessionAPI=rr,p.getPerformanceMeasurement=xs,p.getProjection=dd,p.getRTLTextPluginStatus=S,p.getReferrer=Oo,p.getTilePoint=function(i,{x:e,y:r},u=0){return new Y(((e-u)*i.scale-i.x)*Sn,(r*i.scale-i.y)*Sn)},p.getTileVec3=function(i,e,r=0){return ic(((e.x-r)*i.scale-i.x)*Sn,(e.y*i.scale-i.y)*Sn,jp(e.z,e.y))},p.getVideo=function(i,e){const r=ge.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let u=0;u<i.length;u++){const m=ge.document.createElement("source");ri(i[u])||(r.crossOrigin="Anonymous"),m.src=i[u],r.appendChild(m)}return{cancel:()=>{}}},p.globeCenterToScreenPoint=function(i){const e=[0,0,0],r=es(new Float64Array(16));return nc(r,i.pixelMatrix,i.globeMatrix),sr(e,e,r),new Y(e[0],e[1])},p.globeDenormalizeECEF=pm,p.globeECEFOrigin=function(i,e){const r=[0,0,0];return sr(r,r,dh(Ra(e.canonical))),sr(r,r,i),r},p.globeMetersToEcef=Ku,p.globeNormalizeECEF=dh,p.globePixelsToTileUnits=function(i,e){return Sn/(512*Math.pow(2,i))*Bp(Ra(e))},p.globePoleMatrixForTile=function(i,e,r){const u=es(new Float64Array(16)),m=(e/(1<<i)-.5)*Math.PI*2;return nm(u,r.globeMatrix,m),Float32Array.from(u)},p.globeTileBounds=Ra,p.globeTiltAtLngLat=s_,p.globeToMercatorTransition=Gc,p.globeUseCustomAntiAliasing=function(i,e,r){const u=Gc(r.zoom),m=i.style.map._antialias,v=!!e.extStandardDerivatives,x=e.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return 0===u&&!m&&!x&&v},p.identity=es,p.identity$1=rh,p.invert=Pp,p.isFullscreen=function(){return!!ge.document.fullscreenElement||!!ge.document.webkitFullscreenElement},p.isLngLatBehindGlobe=hh,p.isMapAuthenticated=function(i){return Jn.has(i)},p.isMapboxURL=Qe,p.isSafariWithAntialiasingBug=function(i){const e=i.navigator?i.navigator.userAgent:null;return!!Cn(i)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},p.latFromMercatorY=ao,p.latLngToECEF=uh,p.len=ih,p.length=eh,p.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},p.lngFromMercatorX=na,p.loadVectorTile=H_,p.makeRequest=si,p.mapValue=function(i,e,r,u,m){return Ze((i-e)/(r-e)*(m-u)+u,u,m)},p.mercatorScale=Lg,p.mercatorXfromLng=Js,p.mercatorYfromLat=ea,p.mercatorZfromAltitude=ta,p.mul=Dg,p.mul$1=am,p.multiply=nc,p.multiply$1=tc,p.multiply$2=Uc,p.nextPowerOfTwo=it,p.normalize=so,p.normalize$1=Xu,p.normalize$2=cm,p.number=Ei,p.ortho=function(i,e,r,u,m,v,x){var C=1/(e-r),I=1/(u-m),D=1/(v-x);return i[0]=-2*C,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*I,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*D,i[11]=0,i[12]=(e+r)*C,i[13]=(m+u)*I,i[14]=(x+v)*D,i[15]=1,i},p.pbf=Ph,p.perspective=function(i,e,r,u,m){var v,x=1/Math.tan(e/2);return i[0]=x/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,null!=m&&m!==1/0?(i[10]=(m+u)*(v=1/(u-m)),i[14]=2*m*u*v):(i[10]=-1,i[14]=-2*u),i},p.pick=function(i,e){const r={};for(let u=0;u<e.length;u++){const m=e[u];m in i&&(r[m]=i[m])}return r},p.plugin=O,p.pointGeometry=G,p.polesInViewport=function(i){const e=es(new Float64Array(16));nc(e,i.pixelMatrix,i.globeMatrix);const r=[0,Vo,0],u=[0,ps,0];return sr(r,r,e),sr(u,u,e),[r[0]>0&&r[0]<=i.width&&r[1]>0&&r[1]<=i.height&&!hh(i,new Fi(i.center.lat,90)),u[0]>0&&u[0]<=i.width&&u[1]>0&&u[1]<=i.height&&!hh(i,new Fi(i.center.lat,-90))]},p.polygonContainsPoint=Wc,p.polygonIntersectsBox=jg,p.polygonIntersectsPolygon=Bg,p.polygonizeBounds=function(i,e,r=0,u=!0){const m=new Y(r,r),v=i.sub(m),x=e.add(m),C=[v,new Y(x.x,v.y),x,new Y(v.x,x.y)];return u&&C.push(v.clone()),C},p.posAttributes=sh,p.postMapLoadEvent=Cr,p.postPerformanceEvent=Ii,p.postTurnstileEvent=ai,p.potpack=ry,p.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},p.radToDeg=ce,p.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],p.registerForPluginStateChange=function(i){return i({pluginStatus:g,pluginURL:o}),E.on("pluginStateChange",i),i},p.removeAuthState=function(i){Jn.delete(i)},p.renderColorRamp=qc,p.resample=Uo,p.rotateX=Jd,p.rotateX$1=n_,p.rotateY=nm,p.rotateY$1=kg,p.rotateZ=function(i,e,r){var u=Math.sin(r),m=Math.cos(r),v=e[0],x=e[1],C=e[2],I=e[3],D=e[4],R=e[5],N=e[6],z=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=v*m+D*u,i[1]=x*m+R*u,i[2]=C*m+N*u,i[3]=I*m+z*u,i[4]=D*m-v*u,i[5]=R*m-x*u,i[6]=N*m-C*u,i[7]=z*m-I*u,i},p.rotateZ$1=function(i,e,r){r*=.5;var u=e[0],m=e[1],v=e[2],x=e[3],C=Math.sin(r),I=Math.cos(r);return i[0]=u*I+m*C,i[1]=m*I-u*C,i[2]=v*I+x*C,i[3]=x*I-v*C,i},p.scale=Oa,p.scale$1=lm,p.scale$2=Ks,p.scaleAndAdd=Yu,p.set=function(i,e,r,u){return i[0]=e,i[1]=r,i[2]=u,i},p.setCacheLimits=function(i,e){qo=i,Qi=e},p.setColumn=function(i,e,r){i[4*e+0]=r[0],i[4*e+1]=r[1],i[4*e+2]=r[2],i[4*e+3]=r[3]},p.setRTLTextPlugin=function(i,e,r=!1){if(g===Vr||g===Wu||g===sl)throw new Error("setRTLTextPlugin cannot be called multiple times.");o=ya.resolveURL(i),g=Vr,zc=e,b(),r||k()},p.smoothstep=Fe,p.spec=Tt,p.squaredLength=function(i){var e=i[0],r=i[1],u=i[2];return e*e+r*r+u*u},p.storeAuthState=function(i,e){e?Jn.add(i):Jn.delete(i)},p.sub=ks,p.subtract=om,p.symbolSize=Ah,p.tileAABB=function(i,e,r,u,m,v,x,C,I){if("globe"===I.name)return function sc(i,e,r){const u=e/i.worldSize,m=i.globeMatrix;if(r.z<=1){const ft=Ra(r).getCorners();return Dv(ft,m,u),jo.fromPoints(ft)}const v=ac(r),x=hm(v);Dv(x,m,u);const C=Number.MAX_VALUE,I=[-C,-C,-C],D=[C,C,C];if(v.contains(i.center)){for(const Ht of x)th(D,D,Ht),Op(I,I,Ht);I[2]=0;const ft=i.point,St=[ft.x*u,ft.y*u,0];return th(D,D,St),Op(I,I,St),new jo(D,I)}const R=[m[12]*u,m[13]*u,m[14]*u],N=v.getCenter(),z=Ze(i.center.lat,-fo,fo),H=Ze(N.lat,-fo,fo),$=Js(i.center.lng),Q=ea(z);let ae=$-Js(N.lng);const be=Q-ea(H);ae>.5?ae-=1:ae<-.5&&(ae+=1);let Re=0;Math.abs(ae)>Math.abs(be)?Re=ae>=0?1:3:(Re=be>=0?0:2,Yu(R,R,[m[4]*u,m[5]*u,m[6]*u],-Math.sin(K(be>=0?v.getSouth():v.getNorth()))*hs));const xe=x[Re],Ae=x[(Re+1)%4],Ve=new Qu(xe,Ae,R),je=[Pg(Ve,0)||xe[0],Pg(Ve,1)||xe[1],Pg(Ve,2)||xe[2]],_t=Gc(i.zoom);if(_t>0){const ft=function({x:Ht,y:bt,z:At},kt,Nt,Gt,Ct){const an=1/(1<<At);let mn=Ht*an,un=mn+an,Bn=bt*an,Xt=Bn+an,Tn=0;const On=(mn+un)/2-Gt;return On>.5?Tn=-1:On<-.5&&(Tn=1),mn=((mn+Tn)*kt-(Gt*=kt))*Nt+Gt,un=((un+Tn)*kt-Gt)*Nt+Gt,Bn=(Bn*kt-(Ct*=kt))*Nt+Ct,Xt=(Xt*kt-Ct)*Nt+Ct,[[mn,Xt,0],[un,Xt,0],[un,Bn,0],[mn,Bn,0]]}(r,e,i._pixelsPerMercatorPixel,$,Q);for(let Ht=0;Ht<x.length;Ht++)oc(x[Ht],ft[Ht],_t);const St=Ds([],ft[Re],ft[(Re+1)%4]);Ks(St,St,.5),oc(je,St,_t)}for(const ft of x)th(D,D,ft),Op(I,I,ft);return D[2]=Math.min(xe[2],Ae[2]),th(D,D,je),Op(I,I,je),new jo(D,I)}(i,e,new Ih(r,u,m));const D=ca({z:r,x:u,y:m},I);return new jo([(v+D.x/D.scale)*e,e*(D.y/D.scale),x],[(v+D.x2/D.scale)*e,e*(D.y2/D.scale),C])},p.tileCornersToBounds=ac,p.tileTransform=ca,p.transformMat3=function(i,e,r){var u=e[0],m=e[1],v=e[2];return i[0]=u*r[0]+m*r[3]+v*r[6],i[1]=u*r[1]+m*r[4]+v*r[7],i[2]=u*r[2]+m*r[5]+v*r[8],i},p.transformMat4=sr,p.transformMat4$1=rc,p.transformQuat=nh,p.transitionTileAABBinECEF=Og,p.translate=Qd,p.transpose=function(i,e){if(i===e){var r=e[1],u=e[2],m=e[5];i[1]=e[3],i[2]=e[6],i[3]=r,i[5]=e[7],i[6]=u,i[7]=m}else i[0]=e[0],i[1]=e[3],i[2]=e[6],i[3]=e[1],i[4]=e[4],i[5]=e[7],i[6]=e[2],i[7]=e[5],i[8]=e[8];return i},p.triggerPluginCompletionEvent=f,p.uniqueId=Ye,p.updateGlobeVertexNormal=function(i,e,r,u,m){const v=5*e+2;i.float32[v+0]=r,i.float32[v+1]=u,i.float32[v+2]=m},p.validateCustomStyleLayer=function(i){const e=[],r=i.id;return void 0===r&&e.push({message:`layers.${r}: missing required property "id"`}),void 0===i.render&&e.push({message:`layers.${r}: missing required method "render"`}),i.renderingMode&&"2d"!==i.renderingMode&&"3d"!==i.renderingMode&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},p.validateFilter=i=>Fo(Fc(i)),p.validateFog=i=>Fo(Zd(i)),p.validateLayer=i=>Fo(Yf(i)),p.validateLight=i=>Fo(ol(i)),p.validateSource=i=>Fo(Xf(i)),p.validateStyle=Mp,p.validateTerrain=i=>Fo(qd(i)),p.values=Ot,p.vectorTile=Ch,p.version=Ee,p.warnOnce=tn,p.window=ge,p.wrap=ze}),en(0,function(p){function ge(Pe){if("number"==typeof Pe||"boolean"==typeof Pe||"string"==typeof Pe||null==Pe)return JSON.stringify(Pe);if(Array.isArray(Pe)){let re="[";for(const Te of Pe)re+=`${ge(Te)},`;return`${re}]`}let ee="{";for(const re of Object.keys(Pe).sort())ee+=`${re}:${ge(Pe[re])},`;return`${ee}}`}function Ee(Pe){let ee="";for(const re of p.refProperties)ee+=`/${ge(Pe[re])}`;return ee}class Le{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,re){for(const Ue of ee)this._layerConfigs[Ue.id]=Ue,(this._layers[Ue.id]=p.createStyleLayer(Ue)).compileFilter(),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id];for(const Ue of re)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const Te=function(Ue,Qe){const pt={};for(let Xe=0;Xe<Ue.length;Xe++){const yt=Qe&&Qe[Ue[Xe].id]||Ee(Ue[Xe]);Qe&&(Qe[Ue[Xe].id]=yt);let Qt=pt[yt];Qt||(Qt=pt[yt]=[]),Qt.push(Ue[Xe])}const dt=[];for(const Xe in pt)dt.push(pt[Xe]);return dt}(p.values(this._layerConfigs),this.keyCache);for(const Ue of Te){const Qe=Ue.map(Vt=>this._layers[Vt.id]),pt=Qe[0];if("none"===pt.visibility)continue;const dt=pt.source||"";let Xe=this.familiesBySource[dt];Xe||(Xe=this.familiesBySource[dt]={});const yt=pt.sourceLayer||"_geojsonTileLayer";let Qt=Xe[yt];Qt||(Qt=Xe[yt]=[]),Qt.push(Qe)}}}class Ge{loadTile(ee,re){const{uid:Te,encoding:Ue,rawImageData:Qe,padding:pt,buildQuadTree:dt}=ee,Xe=p.window.ImageBitmap&&Qe instanceof p.window.ImageBitmap?this.getImageData(Qe,pt):Qe;re(null,new p.DEMData(Te,Xe,Ue,pt<1,dt))}getImageData(ee,re){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);const Te=this.offscreenCanvasContext.getImageData(-re,-re,ee.width+2*re,ee.height+2*re);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Te}}function Je(Pe,ee){if(0!==Pe.length){ot(Pe[0],ee);for(var re=1;re<Pe.length;re++)ot(Pe[re],!ee)}}function ot(Pe,ee){for(var re=0,Te=0,Ue=0,Qe=Pe.length,pt=Qe-1;Ue<Qe;pt=Ue++){var dt=(Pe[Ue][0]-Pe[pt][0])*(Pe[pt][1]+Pe[Ue][1]),Xe=re+dt;Te+=Math.abs(re)>=Math.abs(dt)?re-Xe+dt:dt-Xe+re,re=Xe}re+Te>=0!=!!ee&&Pe.reverse()}var et=p.getDefaultExportFromCjs(function Pe(ee,re){var Te,Ue=ee&&ee.type;if("FeatureCollection"===Ue)for(Te=0;Te<ee.features.length;Te++)Pe(ee.features[Te],re);else if("GeometryCollection"===Ue)for(Te=0;Te<ee.geometries.length;Te++)Pe(ee.geometries[Te],re);else if("Feature"===Ue)Pe(ee.geometry,re);else if("Polygon"===Ue)Je(ee.coordinates,re);else if("MultiPolygon"===Ue)for(Te=0;Te<ee.coordinates.length;Te++)Je(ee.coordinates[Te],re);return ee});const Oe=p.VectorTileFeature.prototype.toGeoJSON;var De={exports:{}},ye=p.pointGeometry,pe=p.vectorTile.VectorTileFeature,te=W;function W(Pe,ee){this.options=ee||{},this.features=Pe,this.length=Pe.length}function ue(Pe,ee){this.id="number"==typeof Pe.id?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=1===Pe.type?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=ee||4096}W.prototype.feature=function(Pe){return new ue(this.features[Pe],this.options.extent)},ue.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var ee=0;ee<Pe.length;ee++){for(var re=Pe[ee],Te=[],Ue=0;Ue<re.length;Ue++)Te.push(new ye(re[Ue][0],re[Ue][1]));this.geometry.push(Te)}return this.geometry},ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,ee=1/0,re=-1/0,Te=1/0,Ue=-1/0,Qe=0;Qe<Pe.length;Qe++)for(var pt=Pe[Qe],dt=0;dt<pt.length;dt++){var Xe=pt[dt];ee=Math.min(ee,Xe.x),re=Math.max(re,Xe.x),Te=Math.min(Te,Xe.y),Ue=Math.max(Ue,Xe.y)}return[ee,Te,re,Ue]},ue.prototype.toGeoJSON=pe.prototype.toGeoJSON;var ne=p.pbf,G=te;function J(Pe){var ee=new ne;return function(re,Te){for(var Ue in re.layers)Te.writeMessage(3,Y,re.layers[Ue])}(Pe,ee),ee.finish()}function Y(Pe,ee){var re;ee.writeVarintField(15,Pe.version||1),ee.writeStringField(1,Pe.name||""),ee.writeVarintField(5,Pe.extent||4096);var Te={keys:[],values:[],keycache:{},valuecache:{}};for(re=0;re<Pe.length;re++)Te.feature=Pe.feature(re),ee.writeMessage(2,le,Te);var Ue=Te.keys;for(re=0;re<Ue.length;re++)ee.writeStringField(3,Ue[re]);var Qe=Te.values;for(re=0;re<Qe.length;re++)ee.writeMessage(4,qe,Qe[re])}function le(Pe,ee){var re=Pe.feature;void 0!==re.id&&ee.writeVarintField(1,re.id),ee.writeMessage(2,Me,Pe),ee.writeVarintField(3,re.type),ee.writeMessage(4,_e,re)}function Me(Pe,ee){var re=Pe.feature,Te=Pe.keys,Ue=Pe.values,Qe=Pe.keycache,pt=Pe.valuecache;for(var dt in re.properties){var Xe=re.properties[dt],yt=Qe[dt];if(null!==Xe){void 0===yt&&(Te.push(dt),Qe[dt]=yt=Te.length-1),ee.writeVarint(yt);var Qt=typeof Xe;"string"!==Qt&&"boolean"!==Qt&&"number"!==Qt&&(Xe=JSON.stringify(Xe));var Vt=Qt+":"+Xe,$t=pt[Vt];void 0===$t&&(Ue.push(Xe),pt[Vt]=$t=Ue.length-1),ee.writeVarint($t)}}}function K(Pe,ee){return(ee<<3)+(7&Pe)}function ce(Pe){return Pe<<1^Pe>>31}function _e(Pe,ee){for(var re=Pe.loadGeometry(),Te=Pe.type,Ue=0,Qe=0,pt=re.length,dt=0;dt<pt;dt++){var Xe=re[dt],yt=1;1===Te&&(yt=Xe.length),ee.writeVarint(K(1,yt));for(var Qt=3===Te?Xe.length-1:Xe.length,Vt=0;Vt<Qt;Vt++){1===Vt&&1!==Te&&ee.writeVarint(K(2,Qt-1));var $t=Xe[Vt].x-Ue,Wn=Xe[Vt].y-Qe;ee.writeVarint(ce($t)),ee.writeVarint(ce(Wn)),Ue+=$t,Qe+=Wn}3===Te&&ee.writeVarint(K(7,1))}}function qe(Pe,ee){var re=typeof Pe;"string"===re?ee.writeStringField(1,Pe):"boolean"===re?ee.writeBooleanField(7,Pe):"number"===re&&(Pe%1!=0?ee.writeDoubleField(3,Pe):Pe<0?ee.writeSVarintField(6,Pe):ee.writeVarintField(5,Pe))}De.exports=J,De.exports.fromVectorTileJs=J,De.exports.fromGeojsonVt=function(Pe,ee){ee=ee||{};var re={};for(var Te in Pe)re[Te]=new G(Pe[Te].features,ee),re[Te].name=Te,re[Te].version=ee.version,re[Te].extent=ee.extent;return J({layers:re})},De.exports.GeoJSONWrapper=G;var Be=p.getDefaultExportFromCjs(De.exports);const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},Ze=Math.fround||(Fe=new Float32Array(1),Pe=>(Fe[0]=+Pe,Fe[0]));var Fe;const ze=3,Et=5,Ot=6;class ke{constructor(ee){this.options=Object.assign(Object.create(at),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:re,minZoom:Te,maxZoom:Ue}=this.options;re&&console.time("total time");const Qe=`prepare ${ee.length} points`;re&&console.time(Qe),this.points=ee;const pt=[];for(let Xe=0;Xe<ee.length;Xe++){const yt=ee[Xe];if(!yt.geometry)continue;const[Qt,Vt]=yt.geometry.coordinates,$t=Ze(Ke(Qt)),Wn=Ze(it(Vt));pt.push($t,Wn,1/0,Xe,-1,1),this.options.reduce&&pt.push(0)}let dt=this.trees[Ue+1]=this._createTree(pt);re&&console.timeEnd(Qe);for(let Xe=Ue;Xe>=Te;Xe--){const yt=+Date.now();dt=this.trees[Xe]=this._createTree(this._cluster(dt,Xe)),re&&console.log("z%d: %d clusters in %dms",Xe,dt.numItems,+Date.now()-yt)}return re&&console.timeEnd("total time"),this}getClusters(ee,re){let Te=((ee[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,ee[1]));let Qe=180===ee[2]?180:((ee[2]+180)%360+360)%360-180;const pt=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)Te=-180,Qe=180;else if(Te>Qe){const Vt=this.getClusters([Te,Ue,180,pt],re),$t=this.getClusters([-180,Ue,Qe,pt],re);return Vt.concat($t)}const dt=this.trees[this._limitZoom(re)],Xe=dt.range(Ke(Te),it(pt),Ke(Qe),it(Ue)),yt=dt.data,Qt=[];for(const Vt of Xe){const $t=this.stride*Vt;Qt.push(yt[$t+Et]>1?Ne(yt,$t,this.clusterProps):this.points[yt[$t+ze]])}return Qt}getChildren(ee){const re=this._getOriginId(ee),Te=this._getOriginZoom(ee),Ue="No cluster with the specified id.",Qe=this.trees[Te];if(!Qe)throw new Error(Ue);const pt=Qe.data;if(re*this.stride>=pt.length)throw new Error(Ue);const dt=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),Xe=Qe.within(pt[re*this.stride],pt[re*this.stride+1],dt),yt=[];for(const Qt of Xe){const Vt=Qt*this.stride;pt[Vt+4]===ee&&yt.push(pt[Vt+Et]>1?Ne(pt,Vt,this.clusterProps):this.points[pt[Vt+ze]])}if(0===yt.length)throw new Error(Ue);return yt}getLeaves(ee,re,Te){const Ue=[];return this._appendLeaves(Ue,ee,re=re||10,Te=Te||0,0),Ue}getTile(ee,re,Te){const Ue=this.trees[this._limitZoom(ee)],Qe=Math.pow(2,ee),{extent:pt,radius:dt}=this.options,Xe=dt/pt,yt=(Te-Xe)/Qe,Qt=(Te+1+Xe)/Qe,Vt={features:[]};return this._addTileFeatures(Ue.range((re-Xe)/Qe,yt,(re+1+Xe)/Qe,Qt),Ue.data,re,Te,Qe,Vt),0===re&&this._addTileFeatures(Ue.range(1-Xe/Qe,yt,1,Qt),Ue.data,Qe,Te,Qe,Vt),re===Qe-1&&this._addTileFeatures(Ue.range(0,yt,Xe/Qe,Qt),Ue.data,-1,Te,Qe,Vt),Vt.features.length?Vt:null}getClusterExpansionZoom(ee){let re=this._getOriginZoom(ee)-1;for(;re<=this.options.maxZoom;){const Te=this.getChildren(ee);if(re++,1!==Te.length)break;ee=Te[0].properties.cluster_id}return re}_appendLeaves(ee,re,Te,Ue,Qe){const pt=this.getChildren(re);for(const dt of pt){const Xe=dt.properties;if(Xe&&Xe.cluster?Qe+Xe.point_count<=Ue?Qe+=Xe.point_count:Qe=this._appendLeaves(ee,Xe.cluster_id,Te,Ue,Qe):Qe<Ue?Qe++:ee.push(dt),ee.length===Te)break}return Qe}_createTree(ee){const re=new p.KDBush(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<ee.length;Te+=this.stride)re.add(ee[Te],ee[Te+1]);return re.finish(),re.data=ee,re}_addTileFeatures(ee,re,Te,Ue,Qe,pt){for(const dt of ee){const Xe=dt*this.stride,yt=re[Xe+Et]>1;let Qt,Vt,$t;if(yt)Qt=Ye(re,Xe,this.clusterProps),Vt=re[Xe],$t=re[Xe+1];else{const Un=this.points[re[Xe+ze]];Qt=Un.properties;const[Kn,ai]=Un.geometry.coordinates;Vt=Ke(Kn),$t=it(ai)}const Wn={type:1,geometry:[[Math.round(this.options.extent*(Vt*Qe-Te)),Math.round(this.options.extent*($t*Qe-Ue))]],tags:Qt};let Xn;Xn=yt||this.options.generateId?re[Xe+ze]:this.points[re[Xe+ze]].id,void 0!==Xn&&(Wn.id=Xn),pt.features.push(Wn)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,re){const{radius:Te,extent:Ue,reduce:Qe,minPoints:pt}=this.options,dt=Te/(Ue*Math.pow(2,re)),Xe=ee.data,yt=[],Qt=this.stride;for(let Vt=0;Vt<Xe.length;Vt+=Qt){if(Xe[Vt+2]<=re)continue;Xe[Vt+2]=re;const $t=Xe[Vt],Wn=Xe[Vt+1],Xn=ee.within(Xe[Vt],Xe[Vt+1],dt),Un=Xe[Vt+Et];let Kn=Un;for(const ai of Xn){const dr=ai*Qt;Xe[dr+2]>re&&(Kn+=Xe[dr+Et])}if(Kn>Un&&Kn>=pt){let ai,dr=$t*Un,Cr=Wn*Un,Ji=-1;const Ii=((Vt/Qt|0)<<5)+(re+1)+this.points.length;for(const qr of Xn){const rr=qr*Qt;if(Xe[rr+2]<=re)continue;Xe[rr+2]=re;const Jn=Xe[rr+Et];dr+=Xe[rr]*Jn,Cr+=Xe[rr+1]*Jn,Xe[rr+4]=Ii,Qe&&(ai||(ai=this._map(Xe,Vt,!0),Ji=this.clusterProps.length,this.clusterProps.push(ai)),Qe(ai,this._map(Xe,rr)))}Xe[Vt+4]=Ii,yt.push(dr/Kn,Cr/Kn,1/0,Ii,-1,Kn),Qe&&yt.push(Ji)}else{for(let ai=0;ai<Qt;ai++)yt.push(Xe[Vt+ai]);if(Kn>1)for(const ai of Xn){const dr=ai*Qt;if(!(Xe[dr+2]<=re)){Xe[dr+2]=re;for(let Cr=0;Cr<Qt;Cr++)yt.push(Xe[dr+Cr])}}}}return yt}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,re,Te){if(ee[re+Et]>1){const pt=this.clusterProps[ee[re+Ot]];return Te?Object.assign({},pt):pt}const Ue=this.points[ee[re+ze]].properties,Qe=this.options.map(Ue);return Te&&Qe===Ue?Object.assign({},Qe):Qe}}function Ne(Pe,ee,re){return{type:"Feature",id:Pe[ee+ze],properties:Ye(Pe,ee,re),geometry:{type:"Point",coordinates:[(Te=Pe[ee],360*(Te-.5)),lt(Pe[ee+1])]}};var Te}function Ye(Pe,ee,re){const Te=Pe[ee+Et],Ue=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,Qe=Pe[ee+Ot],pt=-1===Qe?{}:Object.assign({},re[Qe]);return Object.assign(pt,{cluster:!0,cluster_id:Pe[ee+ze],point_count:Te,point_count_abbreviated:Ue})}function Ke(Pe){return Pe/360+.5}function it(Pe){const ee=Math.sin(Pe*Math.PI/180),re=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return re<0?0:re>1?1:re}function lt(Pe){const ee=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function It(Pe,ee,re,Te){for(var Ue,Qe=Te,pt=re-ee>>1,dt=re-ee,Xe=Pe[ee],yt=Pe[ee+1],Qt=Pe[re],Vt=Pe[re+1],$t=ee+3;$t<re;$t+=3){var Wn=Wt(Pe[$t],Pe[$t+1],Xe,yt,Qt,Vt);if(Wn>Qe)Ue=$t,Qe=Wn;else if(Wn===Qe){var Xn=Math.abs($t-pt);Xn<dt&&(Ue=$t,dt=Xn)}}Qe>Te&&(Ue-ee>3&&It(Pe,ee,Ue,Te),Pe[Ue+2]=Qe,re-Ue>3&&It(Pe,Ue,re,Te))}function Wt(Pe,ee,re,Te,Ue,Qe){var pt=Ue-re,dt=Qe-Te;if(0!==pt||0!==dt){var Xe=((Pe-re)*pt+(ee-Te)*dt)/(pt*pt+dt*dt);Xe>1?(re=Ue,Te=Qe):Xe>0&&(re+=pt*Xe,Te+=dt*Xe)}return(pt=Pe-re)*pt+(dt=ee-Te)*dt}function ct(Pe,ee,re,Te){var Ue={id:void 0===Pe?null:Pe,type:ee,geometry:re,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Qe){var pt=Qe.geometry,dt=Qe.type;if("Point"===dt||"MultiPoint"===dt||"LineString"===dt)Rt(Qe,pt);else if("Polygon"===dt||"MultiLineString"===dt)for(var Xe=0;Xe<pt.length;Xe++)Rt(Qe,pt[Xe]);else if("MultiPolygon"===dt)for(Xe=0;Xe<pt.length;Xe++)for(var yt=0;yt<pt[Xe].length;yt++)Rt(Qe,pt[Xe][yt])}(Ue),Ue}function Rt(Pe,ee){for(var re=0;re<ee.length;re+=3)Pe.minX=Math.min(Pe.minX,ee[re]),Pe.minY=Math.min(Pe.minY,ee[re+1]),Pe.maxX=Math.max(Pe.maxX,ee[re]),Pe.maxY=Math.max(Pe.maxY,ee[re+1])}function sn(Pe,ee,re,Te){if(ee.geometry){var Ue=ee.geometry.coordinates,Qe=ee.geometry.type,pt=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2),dt=[],Xe=ee.id;if(re.promoteId?Xe=ee.properties[re.promoteId]:re.generateId&&(Xe=Te||0),"Point"===Qe)_n(Ue,dt);else if("MultiPoint"===Qe)for(var yt=0;yt<Ue.length;yt++)_n(Ue[yt],dt);else if("LineString"===Qe)tn(Ue,dt,pt,!1);else if("MultiLineString"===Qe){if(re.lineMetrics){for(yt=0;yt<Ue.length;yt++)tn(Ue[yt],dt=[],pt,!1),Pe.push(ct(Xe,"LineString",dt,ee.properties));return}Ln(Ue,dt,pt,!1)}else if("Polygon"===Qe)Ln(Ue,dt,pt,!0);else{if("MultiPolygon"!==Qe){if("GeometryCollection"===Qe){for(yt=0;yt<ee.geometry.geometries.length;yt++)sn(Pe,{id:Xe,geometry:ee.geometry.geometries[yt],properties:ee.properties},re,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(yt=0;yt<Ue.length;yt++){var Qt=[];Ln(Ue[yt],Qt,pt,!0),dt.push(Qt)}}Pe.push(ct(Xe,Qe,dt,ee.properties))}}function _n(Pe,ee){ee.push(vi(Pe[0])),ee.push(hn(Pe[1])),ee.push(0)}function tn(Pe,ee,re,Te){for(var Ue,Qe,pt=0,dt=0;dt<Pe.length;dt++){var Xe=vi(Pe[dt][0]),yt=hn(Pe[dt][1]);ee.push(Xe),ee.push(yt),ee.push(0),dt>0&&(pt+=Te?(Ue*yt-Xe*Qe)/2:Math.sqrt(Math.pow(Xe-Ue,2)+Math.pow(yt-Qe,2))),Ue=Xe,Qe=yt}var Qt=ee.length-3;ee[2]=1,It(ee,0,Qt,re),ee[Qt+2]=1,ee.size=Math.abs(pt),ee.start=0,ee.end=ee.size}function Ln(Pe,ee,re,Te){for(var Ue=0;Ue<Pe.length;Ue++){var Qe=[];tn(Pe[Ue],Qe,re,Te),ee.push(Qe)}}function vi(Pe){return Pe/360+.5}function hn(Pe){var ee=Math.sin(Pe*Math.PI/180),re=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return re<0?0:re>1?1:re}function An(Pe,ee,re,Te,Ue,Qe,pt,dt){if(Te/=ee,Qe>=(re/=ee)&&pt<Te)return Pe;if(pt<re||Qe>=Te)return null;for(var Xe=[],yt=0;yt<Pe.length;yt++){var Qt=Pe[yt],Vt=Qt.geometry,$t=Qt.type,Wn=0===Ue?Qt.minX:Qt.minY,Xn=0===Ue?Qt.maxX:Qt.maxY;if(Wn>=re&&Xn<Te)Xe.push(Qt);else if(!(Xn<re||Wn>=Te)){var Un=[];if("Point"===$t||"MultiPoint"===$t)In(Vt,Un,re,Te,Ue);else if("LineString"===$t)Cn(Vt,Un,re,Te,Ue,!1,dt.lineMetrics);else if("MultiLineString"===$t)cr(Vt,Un,re,Te,Ue,!1);else if("Polygon"===$t)cr(Vt,Un,re,Te,Ue,!0);else if("MultiPolygon"===$t)for(var Kn=0;Kn<Vt.length;Kn++){var ai=[];cr(Vt[Kn],ai,re,Te,Ue,!0),ai.length&&Un.push(ai)}if(Un.length){if(dt.lineMetrics&&"LineString"===$t){for(Kn=0;Kn<Un.length;Kn++)Xe.push(ct(Qt.id,$t,Un[Kn],Qt.tags));continue}"LineString"!==$t&&"MultiLineString"!==$t||(1===Un.length?($t="LineString",Un=Un[0]):$t="MultiLineString"),"Point"!==$t&&"MultiPoint"!==$t||($t=3===Un.length?"Point":"MultiPoint"),Xe.push(ct(Qt.id,$t,Un,Qt.tags))}}}return Xe.length?Xe:null}function In(Pe,ee,re,Te,Ue){for(var Qe=0;Qe<Pe.length;Qe+=3){var pt=Pe[Qe+Ue];pt>=re&&pt<=Te&&(ee.push(Pe[Qe]),ee.push(Pe[Qe+1]),ee.push(Pe[Qe+2]))}}function Cn(Pe,ee,re,Te,Ue,Qe,pt){for(var dt,Xe,yt=bi(Pe),Qt=0===Ue?qo:Qi,Vt=Pe.start,$t=0;$t<Pe.length-3;$t+=3){var Wn=Pe[$t],Xn=Pe[$t+1],Un=Pe[$t+2],Kn=Pe[$t+3],ai=Pe[$t+4],dr=0===Ue?Wn:Xn,Cr=0===Ue?Kn:ai,Ji=!1;pt&&(dt=Math.sqrt(Math.pow(Wn-Kn,2)+Math.pow(Xn-ai,2))),dr<re?Cr>re&&(Xe=Qt(yt,Wn,Xn,Kn,ai,re),pt&&(yt.start=Vt+dt*Xe)):dr>Te?Cr<Te&&(Xe=Qt(yt,Wn,Xn,Kn,ai,Te),pt&&(yt.start=Vt+dt*Xe)):$i(yt,Wn,Xn,Un),Cr<re&&dr>=re&&(Xe=Qt(yt,Wn,Xn,Kn,ai,re),Ji=!0),Cr>Te&&dr<=Te&&(Xe=Qt(yt,Wn,Xn,Kn,ai,Te),Ji=!0),!Qe&&Ji&&(pt&&(yt.end=Vt+dt*Xe),ee.push(yt),yt=bi(Pe)),pt&&(Vt+=dt)}var Ii=Pe.length-3;Wn=Pe[Ii],Xn=Pe[Ii+1],Un=Pe[Ii+2],(dr=0===Ue?Wn:Xn)>=re&&dr<=Te&&$i(yt,Wn,Xn,Un),Ii=yt.length-3,Qe&&Ii>=3&&(yt[Ii]!==yt[0]||yt[Ii+1]!==yt[1])&&$i(yt,yt[0],yt[1],yt[2]),yt.length&&ee.push(yt)}function bi(Pe){var ee=[];return ee.size=Pe.size,ee.start=Pe.start,ee.end=Pe.end,ee}function cr(Pe,ee,re,Te,Ue,Qe){for(var pt=0;pt<Pe.length;pt++)Cn(Pe[pt],ee,re,Te,Ue,Qe,!1)}function $i(Pe,ee,re,Te){Pe.push(ee),Pe.push(re),Pe.push(Te)}function qo(Pe,ee,re,Te,Ue,Qe){var pt=(Qe-ee)/(Te-ee);return Pe.push(Qe),Pe.push(re+(Ue-re)*pt),Pe.push(1),pt}function Qi(Pe,ee,re,Te,Ue,Qe){var pt=(Qe-re)/(Ue-re);return Pe.push(ee+(Te-ee)*pt),Pe.push(Qe),Pe.push(1),pt}function Si(Pe,ee){for(var re=[],Te=0;Te<Pe.length;Te++){var Ue,Qe=Pe[Te],pt=Qe.type;if("Point"===pt||"MultiPoint"===pt||"LineString"===pt)Ue=ur(Qe.geometry,ee);else if("MultiLineString"===pt||"Polygon"===pt){Ue=[];for(var dt=0;dt<Qe.geometry.length;dt++)Ue.push(ur(Qe.geometry[dt],ee))}else if("MultiPolygon"===pt)for(Ue=[],dt=0;dt<Qe.geometry.length;dt++){for(var Xe=[],yt=0;yt<Qe.geometry[dt].length;yt++)Xe.push(ur(Qe.geometry[dt][yt],ee));Ue.push(Xe)}re.push(ct(Qe.id,pt,Ue,Qe.tags))}return re}function ur(Pe,ee){var re=[];re.size=Pe.size,void 0!==Pe.start&&(re.start=Pe.start,re.end=Pe.end);for(var Te=0;Te<Pe.length;Te+=3)re.push(Pe[Te]+ee,Pe[Te+1],Pe[Te+2]);return re}function ir(Pe,ee){if(Pe.transformed)return Pe;var re,Te,Ue,Qe=1<<Pe.z,pt=Pe.x,dt=Pe.y;for(re=0;re<Pe.features.length;re++){var Xe=Pe.features[re],yt=Xe.geometry,Qt=Xe.type;if(Xe.geometry=[],1===Qt)for(Te=0;Te<yt.length;Te+=2)Xe.geometry.push(Bt(yt[Te],yt[Te+1],ee,Qe,pt,dt));else for(Te=0;Te<yt.length;Te++){var Vt=[];for(Ue=0;Ue<yt[Te].length;Ue+=2)Vt.push(Bt(yt[Te][Ue],yt[Te][Ue+1],ee,Qe,pt,dt));Xe.geometry.push(Vt)}}return Pe.transformed=!0,Pe}function Bt(Pe,ee,re,Te,Ue,Qe){return[Math.round(re*(Pe*Te-Ue)),Math.round(re*(ee*Te-Qe))]}function Vn(Pe,ee,re,Te,Ue){for(var Qe=ee===Ue.maxZoom?0:Ue.tolerance/((1<<ee)*Ue.extent),pt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:re,y:Te,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},dt=0;dt<Pe.length;dt++){pt.numFeatures++,ma(pt,Pe[dt],Qe,Ue);var Xe=Pe[dt].minX,yt=Pe[dt].minY,Qt=Pe[dt].maxX,Vt=Pe[dt].maxY;Xe<pt.minX&&(pt.minX=Xe),yt<pt.minY&&(pt.minY=yt),Qt>pt.maxX&&(pt.maxX=Qt),Vt>pt.maxY&&(pt.maxY=Vt)}return pt}function ma(Pe,ee,re,Te){var Ue=ee.geometry,Qe=ee.type,pt=[];if("Point"===Qe||"MultiPoint"===Qe)for(var dt=0;dt<Ue.length;dt+=3)pt.push(Ue[dt]),pt.push(Ue[dt+1]),Pe.numPoints++,Pe.numSimplified++;else if("LineString"===Qe)_r(pt,Ue,Pe,re,!1,!1);else if("MultiLineString"===Qe||"Polygon"===Qe)for(dt=0;dt<Ue.length;dt++)_r(pt,Ue[dt],Pe,re,"Polygon"===Qe,0===dt);else if("MultiPolygon"===Qe)for(var Xe=0;Xe<Ue.length;Xe++){var yt=Ue[Xe];for(dt=0;dt<yt.length;dt++)_r(pt,yt[dt],Pe,re,!0,0===dt)}if(pt.length){var Qt=ee.tags||null;if("LineString"===Qe&&Te.lineMetrics){for(var Vt in Qt={},ee.tags)Qt[Vt]=ee.tags[Vt];Qt.mapbox_clip_start=Ue.start/Ue.size,Qt.mapbox_clip_end=Ue.end/Ue.size}var $t={geometry:pt,type:"Polygon"===Qe||"MultiPolygon"===Qe?3:"LineString"===Qe||"MultiLineString"===Qe?2:1,tags:Qt};null!==ee.id&&($t.id=ee.id),Pe.features.push($t)}}function _r(Pe,ee,re,Te,Ue,Qe){var pt=Te*Te;if(Te>0&&ee.size<(Ue?pt:Te))re.numPoints+=ee.length/3;else{for(var dt=[],Xe=0;Xe<ee.length;Xe+=3)(0===Te||ee[Xe+2]>pt)&&(re.numSimplified++,dt.push(ee[Xe]),dt.push(ee[Xe+1])),re.numPoints++;Ue&&function(yt,Qt){for(var Vt=0,$t=0,Wn=yt.length,Xn=Wn-2;$t<Wn;Xn=$t,$t+=2)Vt+=(yt[$t]-yt[Xn])*(yt[$t+1]+yt[Xn+1]);if(Vt>0===Qt)for($t=0,Wn=yt.length;$t<Wn/2;$t+=2){var Un=yt[$t],Kn=yt[$t+1];yt[$t]=yt[Wn-2-$t],yt[$t+1]=yt[Wn-1-$t],yt[Wn-2-$t]=Un,yt[Wn-1-$t]=Kn}}(dt,Qe),Pe.push(dt)}}function Br(Pe,ee){var re=(ee=this.options=function(Ue,Qe){for(var pt in Qe)Ue[pt]=Qe[pt];return Ue}(Object.create(this.options),ee)).debug;if(re&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ue,Qe,pt,dt,Xe,yt,Te=function(Ue,Qe){var pt=[];if("FeatureCollection"===Ue.type)for(var dt=0;dt<Ue.features.length;dt++)sn(pt,Ue.features[dt],Qe,dt);else sn(pt,"Feature"===Ue.type?Ue:{geometry:Ue},Qe);return pt}(Pe,ee);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),dt=Ue=Te,Xe=An(Ue,1,-1-(pt=(Qe=ee).buffer/Qe.extent),pt,0,-1,2,Qe),yt=An(Ue,1,1-pt,2+pt,0,-1,2,Qe),(Xe||yt)&&(dt=An(Ue,1,-pt,1+pt,0,-1,2,Qe)||[],Xe&&(dt=Si(Xe,1).concat(dt)),yt&&(dt=dt.concat(Si(yt,-1)))),(Te=dt).length&&this.splitTile(Te,0,0,0),re&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Oo(Pe,ee,re){return 32*((1<<Pe)*re+ee)+Pe}function si(Pe,ee){const re=Pe.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const Te=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!Te)return ee(null,null);const Ue=new class{constructor(pt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.EXTENT,this.length=pt.length,this._features=pt}feature(pt){return new class{constructor(dt){this._feature=dt,this.extent=p.EXTENT,this.type=dt.type,this.properties=dt.tags,"id"in dt&&!isNaN(dt.id)&&(this.id=parseInt(dt.id,10))}loadGeometry(){if(1===this._feature.type){const dt=[];for(const Xe of this._feature.geometry)dt.push([new p.Point(Xe[0],Xe[1])]);return dt}{const dt=[];for(const Xe of this._feature.geometry){const yt=[];for(const Qt of Xe)yt.push(new p.Point(Qt[0],Qt[1]));dt.push(yt)}return dt}}toGeoJSON(dt,Xe,yt){return Oe.call(this,dt,Xe,yt)}}(this._features[pt])}}(Te.features);let Qe=Be(Ue);0===Qe.byteOffset&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),ee(null,{vectorTile:Ue,rawData:Qe.buffer})}Br.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Br.prototype.splitTile=function(Pe,ee,re,Te,Ue,Qe,pt){for(var dt=[Pe,ee,re,Te],Xe=this.options,yt=Xe.debug;dt.length;){Te=dt.pop(),re=dt.pop(),ee=dt.pop(),Pe=dt.pop();var Qt=1<<ee,Vt=Oo(ee,re,Te),$t=this.tiles[Vt];if(!$t&&(yt>1&&console.time("creation"),$t=this.tiles[Vt]=Vn(Pe,ee,re,Te,Xe),this.tileCoords.push({z:ee,x:re,y:Te}),yt)){yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,re,Te,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));var Wn="z"+ee;this.stats[Wn]=(this.stats[Wn]||0)+1,this.total++}if($t.source=Pe,Ue){if(ee===Xe.maxZoom||ee===Ue)continue;var Xn=1<<Ue-ee;if(re!==Math.floor(Qe/Xn)||Te!==Math.floor(pt/Xn))continue}else if(ee===Xe.indexMaxZoom||$t.numPoints<=Xe.indexMaxPoints)continue;if($t.source=null,0!==Pe.length){yt>1&&console.time("clipping");var Un,Kn,ai,dr,Cr,Ji,Ii=.5*Xe.buffer/Xe.extent,qr=.5-Ii,rr=.5+Ii,Jn=1+Ii;Un=Kn=ai=dr=null,Cr=An(Pe,Qt,re-Ii,re+rr,0,$t.minX,$t.maxX,Xe),Ji=An(Pe,Qt,re+qr,re+Jn,0,$t.minX,$t.maxX,Xe),Pe=null,Cr&&(Un=An(Cr,Qt,Te-Ii,Te+rr,1,$t.minY,$t.maxY,Xe),Kn=An(Cr,Qt,Te+qr,Te+Jn,1,$t.minY,$t.maxY,Xe),Cr=null),Ji&&(ai=An(Ji,Qt,Te-Ii,Te+rr,1,$t.minY,$t.maxY,Xe),dr=An(Ji,Qt,Te+qr,Te+Jn,1,$t.minY,$t.maxY,Xe),Ji=null),yt>1&&console.timeEnd("clipping"),dt.push(Un||[],ee+1,2*re,2*Te),dt.push(Kn||[],ee+1,2*re,2*Te+1),dt.push(ai||[],ee+1,2*re+1,2*Te),dt.push(dr||[],ee+1,2*re+1,2*Te+1)}}},Br.prototype.getTile=function(Pe,ee,re){var Te=this.options,Ue=Te.extent,Qe=Te.debug;if(Pe<0||Pe>24)return null;var pt=1<<Pe,dt=Oo(Pe,ee=(ee%pt+pt)%pt,re);if(this.tiles[dt])return ir(this.tiles[dt],Ue);Qe>1&&console.log("drilling down to z%d-%d-%d",Pe,ee,re);for(var Xe,yt=Pe,Qt=ee,Vt=re;!Xe&&yt>0;)yt--,Qt=Math.floor(Qt/2),Vt=Math.floor(Vt/2),Xe=this.tiles[Oo(yt,Qt,Vt)];return Xe&&Xe.source?(Qe>1&&console.log("found parent tile z%d-%d-%d",yt,Qt,Vt),Qe>1&&console.time("drilling down"),this.splitTile(Xe.source,yt,Qt,Vt,Pe,ee,re),Qe>1&&console.timeEnd("drilling down"),this.tiles[dt]?ir(this.tiles[dt],Ue):null):null};class ga extends p.VectorTileWorkerSource{constructor(ee,re,Te,Ue,Qe){super(ee,re,Te,Ue,si),Qe&&(this.loadGeoJSON=Qe)}loadData(ee,re){const Te=ee&&ee.request,Ue=Te&&Te.collectResourceTiming;this.loadGeoJSON(ee,(Qe,pt)=>{if(Qe||!pt)return re(Qe);if("object"!=typeof pt)return re(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));{et(pt,!0);try{if(ee.filter){const Xe=p.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Xe.result)throw new Error(Xe.value.map(Qt=>`${Qt.key}: ${Qt.message}`).join(", "));pt={type:"FeatureCollection",features:pt.features.filter(Qt=>Xe.value.evaluate({zoom:0},Qt))}}this._geoJSONIndex=ee.cluster?new ke(function({superclusterOptions:Xe,clusterProperties:yt}){if(!yt||!Xe)return Xe;const Qt={},Vt={},$t={accumulated:null,zoom:0},Wn={properties:null},Xn=Object.keys(yt);for(const Un of Xn){const[Kn,ai]=yt[Un],dr=p.createExpression(ai),Cr=p.createExpression("string"==typeof Kn?[Kn,["accumulated"],["get",Un]]:Kn);Qt[Un]=dr.value,Vt[Un]=Cr.value}return Xe.map=Un=>{Wn.properties=Un;const Kn={};for(const ai of Xn)Kn[ai]=Qt[ai].evaluate($t,Wn);return Kn},Xe.reduce=(Un,Kn)=>{Wn.properties=Kn;for(const ai of Xn)$t.accumulated=Un[ai],Un[ai]=Vt[ai].evaluate($t,Wn)},Xe}(ee)).load(pt.features):new Br(Xe=pt,ee.geojsonVtOptions)}catch(Xe){return re(Xe)}this.loaded={};const dt={};if(Ue){const Xe=p.getPerformanceMeasurement(Te);Xe&&(dt.resourceTiming={},dt.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Xe)))}re(null,dt)}var Xe})}reloadTile(ee,re){const Te=this.loaded;return Te&&Te[ee.uid]?super.reloadTile(ee,re):this.loadTile(ee,re)}loadGeoJSON(ee,re){if(ee.request)p.getJSON(ee.request,re);else{if("string"!=typeof ee.data)return re(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));try{return re(null,JSON.parse(ee.data))}catch{return re(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ee,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(Te){re(Te)}}getClusterChildren(ee,re){try{re(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(Te){re(Te)}}getClusterLeaves(ee,re){try{re(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(Te){re(Te)}}}class ri{constructor(ee){this.self=ee,this.actor=new p.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=p.getProjection({name:"mercator"}),this.workerSourceTypes={vector:p.VectorTileWorkerSource,geojson:ga},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(re,Te)=>{if(this.workerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.workerSourceTypes[re]=Te},this.self.registerRTLTextPlugin=re=>{if(p.plugin.isParsed())throw new Error("RTL text plugin already registered.");p.plugin.applyArabicShaping=re.applyArabicShaping,p.plugin.processBidirectionalText=re.processBidirectionalText,p.plugin.processStyledBidirectionalText=re.processStyledBidirectionalText}}clearCaches(ee,re,Te){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee],Te()}checkIfReady(ee,re,Te){Te()}setReferrer(ee,re){this.referrer=re}spriteLoaded(ee,re){this.isSpriteLoaded[ee]=re;for(const Te in this.workerSources[ee]){const Ue=this.workerSources[ee][Te];for(const Qe in Ue)Ue[Qe]instanceof p.VectorTileWorkerSource&&(Ue[Qe].isSpriteLoaded=re,Ue[Qe].fire(new p.Event("isSpriteLoaded")))}}setImages(ee,re,Te){this.availableImages[ee]=re;for(const Ue in this.workerSources[ee]){const Qe=this.workerSources[ee][Ue];for(const pt in Qe)Qe[pt].availableImages=re}Te()}enableTerrain(ee,re,Te){this.terrain=re,Te()}setProjection(ee,re){this.projections[ee]=p.getProjection(re)}setLayers(ee,re,Te){this.getLayerIndex(ee).replace(re),Te()}updateLayers(ee,re,Te){this.getLayerIndex(ee).update(re.layers,re.removedIds),Te()}loadTile(ee,re,Te){const Ue=this.enableTerrain?p.extend({enableTerrain:this.terrain},re):re;Ue.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,re.type,re.source).loadTile(Ue,Te)}loadDEMTile(ee,re,Te){const Ue=this.enableTerrain?p.extend({buildQuadTree:this.terrain},re):re;this.getDEMWorkerSource(ee,re.source).loadTile(Ue,Te)}reloadTile(ee,re,Te){const Ue=this.enableTerrain?p.extend({enableTerrain:this.terrain},re):re;Ue.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,re.type,re.source).reloadTile(Ue,Te)}abortTile(ee,re,Te){this.getWorkerSource(ee,re.type,re.source).abortTile(re,Te)}removeTile(ee,re,Te){this.getWorkerSource(ee,re.type,re.source).removeTile(re,Te)}removeSource(ee,re,Te){if(!this.workerSources[ee]||!this.workerSources[ee][re.type]||!this.workerSources[ee][re.type][re.source])return;const Ue=this.workerSources[ee][re.type][re.source];delete this.workerSources[ee][re.type][re.source],void 0!==Ue.removeSource?Ue.removeSource(re,Te):Te()}loadWorkerSource(ee,re,Te){try{this.self.importScripts(re.url),Te()}catch(Ue){Te(Ue.toString())}}syncRTLPluginState(ee,re,Te){try{p.plugin.setState(re);const Ue=p.plugin.getPluginURL();if(p.plugin.isLoaded()&&!p.plugin.isParsed()&&null!=Ue){this.self.importScripts(Ue);const Qe=p.plugin.isParsed();Te(Qe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ue}`),Qe)}}catch(Ue){Te(Ue.toString())}}getAvailableImages(ee){let re=this.availableImages[ee];return re||(re=[]),re}getLayerIndex(ee){let re=this.layerIndexes[ee];return re||(re=this.layerIndexes[ee]=new Le),re}getWorkerSource(ee,re,Te){return this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][re]||(this.workerSources[ee][re]={}),this.workerSources[ee][re][Te]||(this.workerSources[ee][re][Te]=new this.workerSourceTypes[re]({send:(Qe,pt,dt,Xe,yt,Qt)=>{this.actor.send(Qe,pt,dt,ee,yt,Qt)},scheduler:this.actor.scheduler},this.getLayerIndex(ee),this.getAvailableImages(ee),this.isSpriteLoaded[ee])),this.workerSources[ee][re][Te]}getDEMWorkerSource(ee,re){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][re]||(this.demWorkerSources[ee][re]=new Ge),this.demWorkerSources[ee][re]}enforceCacheSizeLimit(ee,re){p.enforceCacheSizeLimit(re)}getWorkerPerformanceMetrics(ee,re,Te){Te(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ri(self)),ri}),en(0,function(p){function ge(g,o){if(Array.isArray(g)){if(!Array.isArray(o)||g.length!==o.length)return!1;for(let f=0;f<g.length;f++)if(!ge(g[f],o[f]))return!1;return!0}if("object"==typeof g&&null!==g&&null!==o){if("object"!=typeof o||Object.keys(g).length!==Object.keys(o).length)return!1;for(const f in g)if(!ge(g[f],o[f]))return!1;return!0}return g===o}var Ee=Le;function Le(g){return o=g,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,E,S=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(S);try{E=new Worker(k),b=!0}catch{b=!1}return E&&E.terminate(),URL.revokeObjectURL(k),b}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var b=document.createElement("canvas");b.width=b.height=1;var E=b.getContext("2d");if(!E)return!1;var S=E.getImageData(0,0,1,1);return S&&S.width===b.width}()||(void 0===Ge[f=o&&o.failIfMajorPerformanceCaveat]&&(Ge[f]=function(b){var E,k,O,F,S=(k=b,O=document.createElement("canvas"),(F=Object.create(Le.webGLContextAttributes)).failIfMajorPerformanceCaveat=k,O.getContext("webgl",F)||O.getContext("experimental-webgl",F));if(!S)return!1;try{E=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!E||S.isContextLost())&&(S.shaderSource(E,"void main() {}"),S.compileShader(E),!0===S.getShaderParameter(E,S.COMPILE_STATUS))}(f)),!Ge[f]||document.documentMode));var o,f}var Ge={};function Je(g,o,f){const b=p.window.document.createElement(g);return void 0!==o&&(b.className=o),f&&f.appendChild(b),b}function ot(g,o,f){const b=p.window.document.createElementNS("http://www.w3.org/2000/svg",g);for(const E of Object.keys(o))b.setAttributeNS(null,E,o[E]);return f&&f.appendChild(b),b}Le.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const et=p.window.document&&p.window.document.documentElement.style,Oe=et&&void 0!==et.userSelect?"userSelect":"WebkitUserSelect";let De;function ye(){et&&Oe&&(De=et[Oe],et[Oe]="none")}function pe(){et&&Oe&&(et[Oe]=De)}function te(g){g.preventDefault(),g.stopPropagation(),p.window.removeEventListener("click",te,!0)}function W(){p.window.addEventListener("click",te,!0),p.window.setTimeout(()=>{p.window.removeEventListener("click",te,!0)},0)}function ue(g,o){const f=g.getBoundingClientRect();return J(g,f,o)}function ne(g,o){const f=g.getBoundingClientRect(),b=[];for(let E=0;E<o.length;E++)b.push(J(g,f,o[E]));return b}function G(g){return void 0!==p.window.InstallTrigger&&2===g.button&&g.ctrlKey&&p.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function J(g,o,f){const b=g.offsetWidth===o.width?1:g.offsetWidth/o.width;return new p.Point((f.clientX-o.left)*b,(f.clientY-o.top)*b)}function Y(g,o){var f=o[0],b=o[1],E=o[2],S=o[3],k=f*S-E*b;return k?(g[0]=S*(k=1/k),g[1]=-b*k,g[2]=-E*k,g[3]=f*k,g):null}function le(g){const{userImage:o}=g;return!!(o&&o.render&&o.render())&&(g.data.replace(new Uint8Array(o.data.buffer)),!0)}class Me extends p.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new p.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,callback:b}of this.requestors)this._notify(f,b);this.requestors=[]}}hasImage(o){return!!this.getImage(o)}getImage(o){return this.images[o]}addImage(o,f){this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let b=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new p.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),b=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new p.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),b=!1),this._validateContent(f.content,f)||(this.fire(new p.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),b=!1),b}_validateStretch(o,f){if(!o)return!0;let b=0;for(const E of o){if(E[0]<b||E[1]<E[0]||f<E[1])return!1;b=E[1]}return!0}_validateContent(o,f){return!(o&&(4!==o.length||o[0]<0||f.data.width<o[0]||o[1]<0||f.data.height<o[1]||o[2]<0||f.data.width<o[2]||o[3]<0||f.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,f){f.version=this.images[o].version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,f){let b=!0;if(!this.isLoaded())for(const E of o)this.images[E]||(b=!1);this.isLoaded()||b?this._notify(o,f):this.requestors.push({ids:o,callback:f})}_notify(o,f){const b={};for(const E of o){this.images[E]||this.fire(new p.Event("styleimagemissing",{id:E}));const S=this.images[E];S?b[E]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:p.warnOnce(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,b)}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],b=this.getImage(o);if(!b)return null;if(f&&f.position.version===b.version)return f.position;if(f)f.position.version=b.version;else{const E={w:b.data.width+2,h:b.data.height+2,x:0,y:0},S=new p.ImagePosition(E,b);this.patterns[o]={bin:E,position:S}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p.Texture(o,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const S in this.patterns)o.push(this.patterns[S].bin);const{w:f,h:b}=p.potpack(o),E=this.atlasImage;E.resize({width:f||1,height:b||1});for(const S in this.patterns){const{bin:k}=this.patterns[S],O=k.x+1,F=k.y+1,V=this.images[S].data,U=V.width,q=V.height;p.RGBAImage.copy(V,E,{x:0,y:0},{x:O,y:F},{width:U,height:q}),p.RGBAImage.copy(V,E,{x:0,y:q-1},{x:O,y:F-1},{width:U,height:1}),p.RGBAImage.copy(V,E,{x:0,y:0},{x:O,y:F+q},{width:U,height:1}),p.RGBAImage.copy(V,E,{x:U-1,y:0},{x:O-1,y:F},{width:1,height:q}),p.RGBAImage.copy(V,E,{x:0,y:0},{x:O+U,y:F},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const b=this.images[f];le(b)&&this.updateImage(f,b)}}}const K=new p.Properties({anchor:new p.DataConstantProperty(p.spec.light.anchor),position:new class{constructor(){this.specification=p.spec.light.position}possiblyEvaluate(g,o){return function([f,b,E]){const S=p.degToRad(b+90),k=p.degToRad(E);return{x:f*Math.cos(S)*Math.sin(k),y:f*Math.sin(S)*Math.sin(k),z:f*Math.cos(k),azimuthal:b,polar:E}}(g.expression.evaluate(o))}interpolate(g,o,f){return{x:p.number(g.x,o.x,f),y:p.number(g.y,o.y,f),z:p.number(g.z,o.z,f),azimuthal:p.number(g.azimuthal,o.azimuthal,f),polar:p.number(g.polar,o.polar,f)}}},color:new p.DataConstantProperty(p.spec.light.color),intensity:new p.DataConstantProperty(p.spec.light.intensity)});class ce extends p.Evented{constructor(o){super(),this._transitionable=new p.Transitionable(K),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(p.validateLight,o,f))for(const b in o){const E=o[b];p.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),E):this._transitionable.setValue(b,E)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,b){return(!b||!1!==b.validate)&&p.emitValidationErrors(this,o.call(p.validateStyle,p.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}const _e=new p.Properties({source:new p.DataConstantProperty(p.spec.terrain.source),exaggeration:new p.DataConstantProperty(p.spec.terrain.exaggeration)});let qe=class extends p.Evented{constructor(g,o){super(),this._transitionable=new p.Transitionable(_e),this.set(g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(g){for(const o in g){const f=g[o];p.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-11),f):this._transitionable.setValue(o,f)}}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}};function Be(g,o,f,b){const E=p.smoothstep(45,65,f),[S,k]=at(g,b),O=p.length(o);let F=1-Math.min(1,Math.exp((O-S)/(k-S)*-6));return F*=F*F,F=Math.min(1,1.00747*F),F*E*g.alpha}function at(g,o){const f=.5/Math.tan(.5*o);return[g.range[0]+f,g.range[1]+f]}const Ze=new p.Properties({range:new p.DataConstantProperty(p.spec.fog.range),color:new p.DataConstantProperty(p.spec.fog.color),"high-color":new p.DataConstantProperty(p.spec.fog["high-color"]),"space-color":new p.DataConstantProperty(p.spec.fog["space-color"]),"horizon-blend":new p.DataConstantProperty(p.spec.fog["horizon-blend"]),"star-intensity":new p.DataConstantProperty(p.spec.fog["star-intensity"])});class Fe extends p.Evented{constructor(o,f){super(),this._transitionable=new p.Transitionable(Ze),this.set(o),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const o=this._transform,f="globe"===o.projection.name,b=p.globeToMercatorTransition(o.zoom),E=this.properties.get("range"),S=[.5,3];return{range:f?[p.number(S[0],E[0],b),p.number(S[1],E[1],b)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,f={}){if(!this._validate(p.validateFog,o,f)){for(const b of Object.keys(p.spec.fog))o&&void 0===o[b]&&(o[b]=p.spec.fog[b].default);for(const b in o){const E=o[b];p.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),E):this._transitionable.setValue(b,E)}}}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:p.smoothstep(45,65,o))*f.a}getOpacityAtLatLng(o,f){return this._transform.projection.supportsFog?function(b,E,S){const k=p.MercatorCoordinate.fromLngLat(E),O=S.elevation?S.elevation.getAtPointOrZero(k):0,F=[k.x,k.y,O];return p.transformMat4(F,F,S.mercatorFogMatrix),Be(b,F,S.pitch,S._fov)}(this.state,o,f):0}getFovAdjustedRange(o){return this._transform.projection.supportsFog?at(this.state,o):[0,1]}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,b){return(!b||!1!==b.validate)&&p.emitValidationErrors(this,o.call(p.validateStyle,p.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}class ze{constructor(o,f){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=p.uniqueId();const b=this.workerPool.acquire(this.id);for(let E=0;E<b.length;E++){const S=new ze.Actor(b[E],f,this.id);S.name=`Worker ${E}`,this.actors.push(S)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,f,b){p.asyncAll(this.actors,(E,S)=>{E.send(o,f,S)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Et(g,o,f){return o*(p.EXTENT/(g.tileSize*Math.pow(2,f-g.tileID.overscaledZ)))}ze.Actor=p.Actor;class Ot{constructor(o,f,b,E){this.screenBounds=o,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(o,f){let b,E;if(o instanceof p.Point||"number"==typeof o[0]){const S=p.Point.convert(o);b=[S],E=f.isPointAboveHorizon(S)}else{const S=p.Point.convert(o[0]),k=p.Point.convert(o[1]);b=[S,k],E=p.polygonizeBounds(S,k).every(O=>f.isPointAboveHorizon(O))}return new Ot(b,f.getCameraPoint(),E,f)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(o){return p.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const f=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new p.Point(1,1)):this.screenBounds[1],E=p.polygonizeBounds(f,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<b.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?E[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(E[3]=this.cameraPoint)),p.bufferConvexPolygon(E,o)}bufferedCameraGeometryGlobe(o){const f=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new p.Point(1,1)):this.screenBounds[1],E=p.polygonizeBounds(f,b,o),S=this.cameraPoint.clone();switch(3*((S.y>f.y)+(S.y>b.y))+((S.x>f.x)+(S.x>b.x))){case 0:E[0]=S,E[4]=S.clone();break;case 1:E.splice(1,0,S);break;case 2:E[1]=S;break;case 3:E.splice(4,0,S);break;case 5:E.splice(2,0,S);break;case 6:E[3]=S;break;case 7:E.splice(3,0,S);break;case 8:E[2]=S}return E}containsTile(o,f,b,E=0){const S=o.queryPadding/f._pixelsPerMercatorPixel+1,k=b?this._bufferedCameraMercator(S,f):this._bufferedScreenMercator(S,f);let O=o.tileID.wrap+(k.unwrapped?E:0);const F=k.polygon.map(ve=>p.getTilePoint(o.tileTransform,ve,O));if(!p.polygonIntersectsBox(F,0,0,p.EXTENT,p.EXTENT))return;O=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const V=this.screenGeometryMercator.polygon.map(ve=>p.getTileVec3(o.tileTransform,ve,O)),U=V.map(ve=>new p.Point(ve[0],ve[1])),q=f.getFreeCameraOptions().position||new p.MercatorCoordinate(0,0,0),oe=p.getTileVec3(o.tileTransform,q,O),he=V.map(ve=>{const X=p.sub(ve,ve,oe);return p.normalize(X,X),new p.Ray(oe,X)}),me=Et(o,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:U,tilespaceRays:he,bufferedTilespaceGeometry:F,bufferedTilespaceBounds:(fe=p.getBounds(F),fe.min.x=p.clamp(fe.min.x,0,p.EXTENT),fe.min.y=p.clamp(fe.min.y,0,p.EXTENT),fe.max.x=p.clamp(fe.max.x,0,p.EXTENT),fe.max.y=p.clamp(fe.max.y,0,p.EXTENT),fe),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:me};var fe}_bufferedScreenMercator(o,f){const b=Ye(o);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let E;return E="globe"===f.projection.name?this._projectAndResample(this.bufferedScreenGeometry(o),f):{polygon:this.bufferedScreenGeometry(o).map(S=>f.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[b]=E,E}}_bufferedCameraMercator(o,f){const b=Ye(o);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let E;return E="globe"===f.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),f):{polygon:this.bufferedCameraGeometry(o).map(S=>f.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[b]=E,E}}_projectAndResample(o,f){const b=function(S,k){const O=p.multiply([],k.pixelMatrix,k.globeMatrix),F=[0,-p.GLOBE_RADIUS,0,1],V=[0,p.GLOBE_RADIUS,0,1],U=[0,0,0,1];p.transformMat4$1(F,F,O),p.transformMat4$1(V,V,O),p.transformMat4$1(U,U,O);const q=new p.Point(F[0]/F[3],F[1]/F[3]),oe=new p.Point(V[0]/V[3],V[1]/V[3]),he=p.polygonContainsPoint(S,q)&&F[3]<U[3],me=p.polygonContainsPoint(S,oe)&&V[3]<U[3];if(!he&&!me)return null;const fe=function($e,st,nt){for(let gt=1;gt<$e.length;gt++){const Ut=Ne(st.pointCoordinate3D($e[gt-1]).x),ht=Ne(st.pointCoordinate3D($e[gt]).x);if(nt<0){if(Ut<ht)return{idx:gt,t:-Ut/(ht-1-Ut)}}else if(ht<Ut)return{idx:gt,t:(1-Ut)/(ht+1-Ut)}}return null}(S,k,he?-1:1);if(!fe)return null;const{idx:ve,t:X}=fe;let de=ve>1?ke(S.slice(0,ve),k):[],we=ve<S.length?ke(S.slice(ve),k):[];de=de.map($e=>new p.Point(Ne($e.x),$e.y)),we=we.map($e=>new p.Point(Ne($e.x),$e.y));const Ce=[...de];0===Ce.length&&Ce.push(we[we.length-1]);const He=p.number(Ce[Ce.length-1].y,(0===we.length?de[0]:we[0]).y,X);let We;return We=he?[new p.Point(0,He),new p.Point(0,0),new p.Point(1,0),new p.Point(1,He)]:[new p.Point(1,He),new p.Point(1,1),new p.Point(0,1),new p.Point(0,He)],Ce.push(...We),0===we.length?Ce.push(de[0]):Ce.push(...we),{polygon:Ce.map($e=>new p.MercatorCoordinate($e.x,$e.y)),unwrapped:!1}}(o,f);if(b)return b;const E=function(S,k){let O=!1,F=-1/0,V=0;for(let q=0;q<S.length-1;q++)S[q].x>F&&(F=S[q].x,V=q);for(let q=0;q<S.length-1;q++){const oe=(V+q)%(S.length-1),he=S[oe],me=S[oe+1];Math.abs(he.x-me.x)>.5&&(he.x<me.x?(he.x+=1,0===oe&&(S[S.length-1].x+=1)):(me.x+=1,oe+1===S.length-1&&(S[0].x+=1)),O=!0)}const U=p.mercatorXfromLng(k.center.lng);return O&&U<Math.abs(U-1)&&S.forEach(q=>{q.x-=1}),{polygon:S,unwrapped:O}}(ke(o,f).map(S=>new p.Point(Ne(S.x),S.y)),f);return{polygon:E.polygon.map(S=>new p.MercatorCoordinate(S.x,S.y)),unwrapped:E.unwrapped}}}function ke(g,o){return p.resample(g,f=>{const b=o.pointCoordinate3D(f);f.x=b.x,f.y=b.y},1/256)}function Ne(g){return g<0?1+g%1:g%1}function Ye(g){return 100*g|0}function Ke(g,o,f,b,E){const S=function(k,O){if(k)return E(k);if(O){g.url&&O.tiles&&g.tiles&&delete g.tiles;const F=p.pick(p.extend(O,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(F.vectorLayers=O.vector_layers,F.vectorLayerIds=F.vectorLayers.map(V=>V.id)),F.tiles=o.canonicalizeTileset(F,g.url),E(null,F)}};return g.url?p.getJSON(o.transformRequest(o.normalizeSourceURL(g.url,null,f,b),p.ResourceType.Source),S):p.exported.frame(()=>S(null,g))}class it{constructor(o,f,b){this.bounds=p.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=b||24}validateBounds(o){return Array.isArray(o)&&4===o.length?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),b=Math.floor(p.mercatorXfromLng(this.bounds.getWest())*f),E=Math.floor(p.mercatorYfromLat(this.bounds.getNorth())*f),S=Math.ceil(p.mercatorXfromLng(this.bounds.getEast())*f),k=Math.ceil(p.mercatorYfromLat(this.bounds.getSouth())*f);return o.x>=b&&o.x<S&&o.y>=E&&o.y<k}}class lt{constructor(o,f,b){this.context=o;const E=o.gl;this.buffer=E.createBuffer(),this.dynamicDraw=Boolean(b),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const It={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Wt{constructor(o,f,b,E){this.length=f.length,this.attributes=b,this.itemSize=f.bytesPerElement,this.dynamicDraw=E,this.context=o;const S=o.gl;this.buffer=S.createBuffer(),o.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let b=0;b<this.attributes.length;b++){const E=f.attributes[this.attributes[b].name];void 0!==E&&o.enableVertexAttribArray(E)}}setVertexAttribPointers(o,f,b){for(let E=0;E<this.attributes.length;E++){const S=this.attributes[E],k=f.attributes[S.name];void 0!==k&&o.vertexAttribPointer(k,S.components,o[It[S.type]],!1,this.itemSize,S.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ct{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Rt extends ct{getDefault(){return p.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class sn extends ct{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class _n extends ct{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class tn extends ct{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ln extends ct{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class vi extends ct{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class hn extends ct{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class An extends ct{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class In extends ct{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class Cn extends ct{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class bi extends ct{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class cr extends ct{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class $i extends ct{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class qo extends ct{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Qi extends ct{getDefault(){return p.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Si extends ct{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class ur extends ct{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class ir extends ct{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Bt extends ct{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Vn,ma=class extends ct{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class _r extends ct{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Br extends ct{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Oo extends ct{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class si extends ct{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ga extends ct{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class ri extends ct{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Pe extends ct{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class ee extends ct{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class re extends ct{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Te extends ct{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Ue extends ct{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Qe extends ct{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class pt extends Qe{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class dt extends Qe{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Xe extends dt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class yt{constructor(o,f,b,E){this.context=o,this.width=f,this.height=b;const S=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new pt(o,S),E&&(this.depthAttachment=new dt(o,S))}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const b=this.depthAttachment.get();b&&o.deleteRenderbuffer(b)}o.deleteFramebuffer(this.framebuffer)}}class Qt{constructor(o,f=!1){if(this.gl=o,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const b=o;this.extVertexArrayObject={createVertexArrayOES:b.createVertexArray.bind(o),deleteVertexArrayOES:b.deleteVertexArray.bind(o),bindVertexArrayOES:b.bindVertexArray.bind(o)}}this.clearColor=new Rt(this),this.clearDepth=new sn(this),this.clearStencil=new _n(this),this.colorMask=new tn(this),this.depthMask=new Ln(this),this.stencilMask=new vi(this),this.stencilFunc=new hn(this),this.stencilOp=new An(this),this.stencilTest=new In(this),this.depthRange=new Cn(this),this.depthTest=new bi(this),this.depthFunc=new cr(this),this.blend=new $i(this),this.blendFunc=new qo(this),this.blendColor=new Qi(this),this.blendEquation=new Si(this),this.cullFace=new ur(this),this.cullFaceSide=new ir(this),this.frontFace=new Bt(this),this.program=new ma(this),this.activeTexture=new _r(this),this.viewport=new Br(this),this.bindFramebuffer=new Oo(this),this.bindRenderbuffer=new si(this),this.bindTexture=new ga(this),this.bindVertexBuffer=new ri(this),this.bindElementBuffer=new Pe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ee(this),this.pixelStoreUnpack=new re(this),this.pixelStoreUnpackPremultiplyAlpha=new Te(this),this.pixelStoreUnpackFlipY=new Ue(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=o.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&o.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||o.getExtension("OES_standard_derivatives"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new lt(this,o,f)}createVertexBuffer(o,f,b){return new Wt(this,o,f,b)}createRenderbuffer(o,f,b){const E=this.gl,S=E.createRenderbuffer();return this.bindRenderbuffer.set(S),E.renderbufferStorage(E.RENDERBUFFER,o,f,b),this.bindRenderbuffer.set(null),S}createFramebuffer(o,f,b){return new yt(this,o,f,b)}clear({color:o,depth:f,stencil:b}){const E=this.gl;let S=0;o&&(S|=E.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==f&&(S|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),void 0!==b&&(S|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),E.clear(S)}setCullFace(o){!1===o.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){ge(o.blendFunction,p.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Vt extends p.Evented{constructor(o,f,b,E){if(super(),this.id=o,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,p.extend(this,p.pick(f,["url","scheme","tileSize","promoteId"])),this._options=p.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E),this._tileWorkers={},this._deduped=new p.DedupedRequest}load(o){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=Ke(this._options,this.map._requestManager,f,b,(E,S)=>{this._tileJSONRequest=null,this._loaded=!0,E?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),b&&2!==b.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new p.ErrorEvent(E))):S&&(p.extend(this,S),S.bounds&&(this.tileBounds=new it(S.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(S.tiles,this.map._requestManager._customAccessToken),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),o&&o(E)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}loadTile(o,f){const b=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(b,p.ResourceType.Tile),data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile};if(E.request.collectResourceTiming=this._collectResourceTiming,o.actor&&"expired"!==o.state)"loading"===o.state?o.reloadCallback=f:o.request=o.actor.send("reloadTile",E,S.bind(this));else if(o.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",E,S.bind(this),void 0,!0);else{const k=p.loadVectorTile.call({deduped:this._deduped},E,(O,F)=>{O||!F?S.call(this,O):(E.data={cacheControl:F.cacheControl,expires:F.expires,rawData:F.rawData.slice(0)},o.actor&&o.actor.send("loadTile",E,S.bind(this),void 0,!0))},!0);o.request={cancel:k}}function S(k,O){return delete o.request,o.aborted?f(null):k&&404!==k.status?f(k):(O&&O.resourceTiming&&(o.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&o.setExpiryData(O),o.loadVectorData(O,this.map.painter),p.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id})}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class $t extends p.Evented{constructor(o,f,b,E){super(),this.id=o,this.dispatcher=b,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=p.extend({type:"raster"},f),p.extend(this,p.pick(f,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ke(this._options,this.map._requestManager,null,null,(f,b)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new p.ErrorEvent(f)):b&&(p.extend(this,b),b.bounds&&(this.tileBounds=new it(b.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(b.tiles),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),o&&o(f)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,f){const b=p.exported.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);o.request=p.getImage(this.map._requestManager.transformRequest(E,p.ResourceType.Tile),(S,k,O,F)=>(delete o.request,o.aborted?(o.state="unloaded",f(null)):S?(o.state="errored",f(S)):k?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:O,expires:F}),o.setTexture(k,this.map.painter),o.state="loaded",p.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(o,f,b){o.setTexture(f,b)}static unloadTileData(o,f){o.texture&&f.saveTileTexture(o.texture)}abortTile(o,f){o.request&&(o.request.cancel(),delete o.request),f()}unloadTile(o,f){o.texture&&this.map.painter.saveTileTexture(o.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Wn(g,o,f,b,E,S,k,O){const F=[g,f,E,o,b,S,1,1,1],V=[k,O,1],U=p.adjoint([],F),[q,oe,he]=p.transformMat3(V,V,p.transpose(U,U));return p.multiply$1(F,[q,0,0,0,oe,0,0,0,he],F)}class Xn extends p.Evented{constructor(o,f,b,E){super(),this.id=o,this.dispatcher=b,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=f,this._dirty=!1}load(o,f){this._loaded=f||!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=p.getImage(this.map._requestManager.transformRequest(this.url,p.ResourceType.Image),(b,E)=>{if(this._imageRequest=null,this._loaded=!0,b)this.fire(new p.ErrorEvent(b));else if(E){const{HTMLImageElement:S}=p.window;this.image=E instanceof S?p.exported.getImageData(E):E,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading()}})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(o){this.coordinates=o,this._boundsArray=void 0;const f=o.map(p.MercatorCoordinate.fromLngLat);return this.tileID=function(b){let E=1/0,S=1/0,k=-1/0,O=-1/0;for(const q of b)E=Math.min(E,q.x),S=Math.min(S,q.y),k=Math.max(k,q.x),O=Math.max(O,q.y);const F=Math.max(k-E,O-S),V=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),U=Math.pow(2,V);return new p.CanonicalTileID(V,Math.floor((E+k)/2*U),Math.floor((S+O)/2*U))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(o){for(const F in this.tiles){const V=this.tiles[F];"loaded"!==V.state&&(V.state="loaded",V.texture=this.texture)}if(this._boundsArray)return;const f=p.tileTransform(this.tileID,this.map.transform.projection),[b,E,S,k]=this.coordinates.map(F=>{const V=f.projection.project(F[0],F[1]);return p.getTilePoint(f,V)._round()});this.perspectiveTransform=function(F,V,U,q,oe,he,me,fe,ve,X){const de=Wn(0,0,F,0,0,V,F,V),we=Wn(U,q,oe,he,me,fe,ve,X);return p.multiply$1(we,p.adjoint(de,de),we),[we[6]/we[8]*F/p.EXTENT,we[7]/we[8]*V/p.EXTENT]}(this.width,this.height,b.x,b.y,E.x,E.y,k.x,k.y,S.x,S.y);const O=this._boundsArray=new p.StructArrayLayout4i8;O.emplaceBack(b.x,b.y,0,0),O.emplaceBack(E.x,E.y,p.EXTENT,0),O.emplaceBack(k.x,k.y,0,p.EXTENT),O.emplaceBack(S.x,S.y,p.EXTENT,p.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=o.createVertexBuffer(O,p.boundsAttributes.members),this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const o=this.map.painter.context,f=o.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new p.Texture(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(o)}loadTile(o,f){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},f(null)):(o.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Un={vector:Vt,raster:$t,"raster-dem":class extends $t{constructor(g,o,f,b){super(g,o,f,b),this.type="raster-dem",this.maxzoom=22,this._options=p.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(g,o){const f=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(E,S){E&&(g.state="errored",o(E)),S&&(g.dem=S,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",o(null))}g.request=p.getImage(this.map._requestManager.transformRequest(f,p.ResourceType.Tile),function(E,S,k,O){if(delete g.request,g.aborted)g.state="unloaded",o(null);else if(E)g.state="errored",o(E);else if(S){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:k,expires:O});const F=p.window.ImageBitmap&&S instanceof p.window.ImageBitmap&&(null==Vn&&(Vn=p.window.OffscreenCanvas&&new p.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof p.window.createImageBitmap),Vn),V=1-(S.width-p.prevPowerOfTwo(S.width))/2;V<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const U=F?S:p.exported.getImageData(S,V),q={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:U,encoding:this.encoding,padding:V};g.actor&&"expired"!==g.state||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",q,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(g){const o=g.canonical,f=Math.pow(2,o.z),b=(o.x-1+f)%f,E=0===o.x?g.wrap-1:g.wrap,S=(o.x+1+f)%f,k=o.x+1===f?g.wrap+1:g.wrap,O={};return O[new p.OverscaledTileID(g.overscaledZ,E,o.z,b,o.y).key]={backfilled:!1},O[new p.OverscaledTileID(g.overscaledZ,k,o.z,S,o.y).key]={backfilled:!1},o.y>0&&(O[new p.OverscaledTileID(g.overscaledZ,E,o.z,b,o.y-1).key]={backfilled:!1},O[new p.OverscaledTileID(g.overscaledZ,g.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},O[new p.OverscaledTileID(g.overscaledZ,k,o.z,S,o.y-1).key]={backfilled:!1}),o.y+1<f&&(O[new p.OverscaledTileID(g.overscaledZ,E,o.z,b,o.y+1).key]={backfilled:!1},O[new p.OverscaledTileID(g.overscaledZ,g.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},O[new p.OverscaledTileID(g.overscaledZ,k,o.z,S,o.y+1).key]={backfilled:!1}),O}unloadTile(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded"}},geojson:class extends p.Evented{constructor(g,o,f,b){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(b),this._data=o.data,this._options=p.extend({},o),this._collectResourceTiming=o.collectResourceTiming,void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const E=p.EXTENT/this.tileSize;this.workerOptions=p.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*E,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*E,extent:p.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:p.EXTENT,radius:(void 0!==o.clusterRadius?o.clusterRadius:50)*E,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},o),this}getClusterChildren(g,o){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},o),this}getClusterLeaves(g,o,f,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:o,offset:f},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new p.Event("dataloading",{dataType:"source"})),this._loaded=!1;const g=p.extend({},this.workerOptions),o=this._data;"string"==typeof o?(g.request=this.map._requestManager.transformRequest(p.exported.resolveURL(o),p.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(f,b)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new p.ErrorEvent(f));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(E.resourceTiming=b.resourceTiming[this.id]),this.fire(new p.Event("data",E)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,o){const f=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(f,{type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(b,E)=>(delete g.request,g.unloadVectorData(),g.aborted?o(null):b?o(b):(g.loadVectorData(E,this.map.painter,"reloadTile"===f),o(null))),void 0,"loadTile"===f)}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return p.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Xn{constructor(g,o,f,b){super(g,o,f,b),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const o of g.urls)this.urls.push(this.map._requestManager.transformRequest(o,p.ResourceType.Source).url);p.getVideo(this.urls,(o,f)=>{this._loaded=!0,o?this.fire(new p.ErrorEvent(o)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const o=this.video.seekable;g<o.start(0)||g>o.end(0)?this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const g=this.map.painter.context,o=g.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new p.Texture(g,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Xn,canvas:class extends Xn{constructor(g,o,f,b){super(g,o,f,b),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some(E=>!Array.isArray(E)||2!==E.length||E.some(S=>"number"!=typeof S))||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${g}`,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof p.window.HTMLCanvasElement||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${g}`,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof p.window.HTMLCanvasElement?this.options.canvas:p.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new p.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const o=this.map.painter.context;this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p.Texture(o,this.canvas,o.gl.RGBA,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends p.Evented{constructor(g,o,f,b){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=o,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new p.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new p.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new it(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),p.extend(this,p.pick(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return p.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:o,y:f,z:b}=g.canonical;return this._implementation.hasTile({x:o,y:f,z:b})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,o){const{x:f,y:b,z:E}=g.tileID.canonical,S=new p.window.AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:f,y:b,z:E},{signal:S.signal})).then(function(k){return delete g.request,g.aborted?(g.state="unloaded",o(null)):void 0===k?(g.state="errored",o(null)):null===k?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",o(null)):(O=k)instanceof p.window.ImageData||O instanceof p.window.HTMLCanvasElement||O instanceof p.window.ImageBitmap||O instanceof p.window.HTMLImageElement?(this.loadTileData(g,k),g.state="loaded",void o(null)):(g.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var O}.bind(this)).catch(k=>{20!==k.code&&(g.state="errored",o(k))}),g.request.cancel=()=>S.abort()}loadTileData(g,o){$t.loadTileData(g,o,this._map.painter)}unloadTileData(g){$t.unloadTileData(g,this._map.painter)}unloadTile(g,o){if(this.unloadTileData(g),this._implementation.unloadTile){const{x:f,y:b,z:E}=g.tileID.canonical;this._implementation.unloadTile({x:f,y:b,z:E})}o()}abortTile(g,o){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),o()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Kn=function(g,o,f,b){const E=new Un[o.type](g,o,f,b);if(E.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${E.id}`);return p.bindAll(["load","abort","unload","serialize","prepare"],E),E};function ai(g,o){const f=p.identity([]);return p.scale(f,f,[.5*g.width,.5*-g.height,1]),p.translate(f,f,[1,-1,0]),p.multiply(f,f,g.calculateProjMatrix(o.toUnwrapped())),Float32Array.from(f)}function dr(g,o,f,b,E,S,k,O=!1){const F=g.tilesIn(b,k,O);F.sort(Ji);const V=[];for(const q of F)V.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(o,f,g._state,q,E,S,ai(g.transform,q.tile.tileID),O)});const U=function(q){const oe={},he={};for(const me of q){const fe=me.queryResults,ve=me.wrappedTileID,X=he[ve]=he[ve]||{};for(const de in fe){const we=fe[de],Ce=X[de]=X[de]||{},He=oe[de]=oe[de]||[];for(const We of we)Ce[We.featureIndex]||(Ce[We.featureIndex]=!0,He.push(We))}}return oe}(V);for(const q in U)U[q].forEach(oe=>{const he=oe.feature,me=he.layer;me&&"background"!==me.type&&"sky"!==me.type&&(he.source=me.source,me["source-layer"]&&(he.sourceLayer=me["source-layer"]),he.state=void 0!==he.id?g.getFeatureState(me["source-layer"],he.id):{})});return U}function Cr(g,o){const f=g.getRenderableIds().map(S=>g.getTileByID(S)),b=[],E={};for(let S=0;S<f.length;S++){const k=f[S],O=k.tileID.canonical.key;E[O]||(E[O]=!0,k.querySourceFeatures(b,o))}return b}function Ji(g,o){const f=g.tileID,b=o.tileID;return f.overscaledZ-b.overscaledZ||f.canonical.y-b.canonical.y||f.wrap-b.wrap||f.canonical.x-b.canonical.x}function Ii(){return null!=zc.workerClass?new zc.workerClass:new p.window.Worker(zc.workerUrl)}const qr="mapboxgl_preloaded_worker_pool";class rr{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<rr.workerCount;)this.workers.push(new Ii);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],0===this.numActive()&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qr]}numActive(){return Object.keys(this.active).length}}let Jn;function bs(){return Jn||(Jn=new rr),Jn}function Dd(g,o){const f={};for(const b in g)"ref"!==b&&(f[b]=g[b]);return p.refProperties.forEach(b=>{b in o&&(f[b]=o[b])}),f}function Dl(g){g=g.slice();const o=Object.create(null);for(let f=0;f<g.length;f++)o[g[f].id]=g[f];for(let f=0;f<g.length;f++)"ref"in g[f]&&(g[f]=Dd(g[f],o[g[f].ref]));return g}rr.workerCount=2;const Ti={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function xs(g,o,f){f.push({command:Ti.addSource,args:[g,o[g]]})}function Ls(g,o,f){o.push({command:Ti.removeSource,args:[g]}),f[g]=!0}function xu(g,o,f,b){Ls(g,f,b),xs(g,o,f)}function wu(g,o,f){let b;for(b in g[f])if(g[f].hasOwnProperty(b)&&"data"!==b&&!ge(g[f][b],o[f][b]))return!1;for(b in o[f])if(o[f].hasOwnProperty(b)&&"data"!==b&&!ge(g[f][b],o[f][b]))return!1;return!0}function ws(g,o,f,b,E,S){let k;for(k in o=o||{},g=g||{})g.hasOwnProperty(k)&&(ge(g[k],o[k])||f.push({command:S,args:[b,k,o[k],E]}));for(k in o)o.hasOwnProperty(k)&&!g.hasOwnProperty(k)&&(ge(g[k],o[k])||f.push({command:S,args:[b,k,o[k],E]}))}function ya(g){return g.id}function Eu(g,o){return g[o.id]=o,g}class kl{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(1===this.points.length)return this.points[0];o=p.clamp(o,0,1);let f=1,b=this._distances[f];const E=o*this.paddedLength+this.padding;for(;b<E&&f<this._distances.length;)b=this._distances[++f];const S=f-1,k=this._distances[S],O=b-k,F=O>0?(E-k)/O:0;return this.points[S].mult(1-F).add(this.points[f].mult(F))}}class _a{constructor(o,f,b){const E=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(o/b),this.yCellCount=Math.ceil(f/b);for(let k=0;k<this.xCellCount*this.yCellCount;k++)E.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,b,E,S){this._forEachCell(f,b,E,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(b),this.bboxes.push(E),this.bboxes.push(S)}insertCircle(o,f,b,E){this._forEachCell(f-E,b-E,f+E,b+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(b),this.circles.push(E)}_insertBoxCell(o,f,b,E,S,k){this.boxCells[S].push(k)}_insertCircleCell(o,f,b,E,S,k){this.circleCells[S].push(k)}_query(o,f,b,E,S,k){if(b<0||o>this.width||E<0||f>this.height)return!S&&[];const O=[];if(o<=0&&f<=0&&this.width<=b&&this.height<=E){if(S)return!0;for(let F=0;F<this.boxKeys.length;F++)O.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const V=this.circles[3*F],U=this.circles[3*F+1],q=this.circles[3*F+2];O.push({key:this.circleKeys[F],x1:V-q,y1:U-q,x2:V+q,y2:U+q})}return k?O.filter(k):O}return this._forEachCell(o,f,b,E,this._queryCell,O,{hitTest:S,seenUids:{box:{},circle:{}}},k),S?O.length>0:O}_queryCircle(o,f,b,E,S){const k=o-b,O=o+b,F=f-b,V=f+b;if(O<0||k>this.width||V<0||F>this.height)return!E&&[];const U=[];return this._forEachCell(k,F,O,V,this._queryCellCircle,U,{hitTest:E,circle:{x:o,y:f,radius:b},seenUids:{box:{},circle:{}}},S),E?U.length>0:U}query(o,f,b,E,S){return this._query(o,f,b,E,!1,S)}hitTest(o,f,b,E,S){return this._query(o,f,b,E,!0,S)}hitTestCircle(o,f,b,E){return this._queryCircle(o,f,b,!0,E)}_queryCell(o,f,b,E,S,k,O,F){const V=O.seenUids,U=this.boxCells[S];if(null!==U){const oe=this.bboxes;for(const he of U)if(!V.box[he]){V.box[he]=!0;const me=4*he;if(o<=oe[me+2]&&f<=oe[me+3]&&b>=oe[me+0]&&E>=oe[me+1]&&(!F||F(this.boxKeys[he]))){if(O.hitTest)return k.push(!0),!0;k.push({key:this.boxKeys[he],x1:oe[me],y1:oe[me+1],x2:oe[me+2],y2:oe[me+3]})}}}const q=this.circleCells[S];if(null!==q){const oe=this.circles;for(const he of q)if(!V.circle[he]){V.circle[he]=!0;const me=3*he;if(this._circleAndRectCollide(oe[me],oe[me+1],oe[me+2],o,f,b,E)&&(!F||F(this.circleKeys[he]))){if(O.hitTest)return k.push(!0),!0;{const fe=oe[me],ve=oe[me+1],X=oe[me+2];k.push({key:this.circleKeys[he],x1:fe-X,y1:ve-X,x2:fe+X,y2:ve+X})}}}}}_queryCellCircle(o,f,b,E,S,k,O,F){const V=O.circle,U=O.seenUids,q=this.boxCells[S];if(null!==q){const he=this.bboxes;for(const me of q)if(!U.box[me]){U.box[me]=!0;const fe=4*me;if(this._circleAndRectCollide(V.x,V.y,V.radius,he[fe+0],he[fe+1],he[fe+2],he[fe+3])&&(!F||F(this.boxKeys[me])))return k.push(!0),!0}}const oe=this.circleCells[S];if(null!==oe){const he=this.circles;for(const me of oe)if(!U.circle[me]){U.circle[me]=!0;const fe=3*me;if(this._circlesCollide(he[fe],he[fe+1],he[fe+2],V.x,V.y,V.radius)&&(!F||F(this.circleKeys[me])))return k.push(!0),!0}}}_forEachCell(o,f,b,E,S,k,O,F){const V=this._convertToXCellCoord(o),U=this._convertToYCellCoord(f),q=this._convertToXCellCoord(b),oe=this._convertToYCellCoord(E);for(let he=V;he<=q;he++)for(let me=U;me<=oe;me++)if(S.call(this,o,f,b,E,this.xCellCount*me+he,k,O,F))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,b,E,S,k){const O=E-o,F=S-f,V=b+k;return V*V>O*O+F*F}_circleAndRectCollide(o,f,b,E,S,k,O){const F=(k-E)/2,V=Math.abs(o-(E+F));if(V>F+b)return!1;const U=(O-S)/2,q=Math.abs(f-(S+U));if(q>U+b)return!1;if(V<=F||q<=U)return!0;const oe=V-F,he=q-U;return oe*oe+he*he<=b*b}}const Fs={unknown:0,flipRequired:1,flipNotRequired:2},Cu=Math.tan(85*Math.PI/180);function Tt(g,o,f,b,E,S,k){const O=p.create();if(f)if("globe"===S.name){const F=p.calculateGlobeLabelMatrix(E,o);p.multiply(O,O,F)}else{const F=Y([],k);O[0]=F[0],O[1]=F[1],O[4]=F[2],O[5]=F[3],b||p.rotateZ(O,O,E.angle)}else p.multiply(O,E.labelPlaneMatrix,g);return O}function ui(g,o,f,b,E,S,k){const O=Tt(g,o,f,b,E,S,k);return"globe"===S.name&&f||(O[2]=O[6]=O[10]=O[14]=0),O}function xi(g,o,f,b,E,S,k){if(f){if("globe"===S.name){const O=Tt(g,o,f,b,E,S,k);return p.invert(O,O),p.multiply(O,g,O),O}{const O=p.clone(g),F=p.identity([]);return F[0]=k[0],F[1]=k[1],F[4]=k[2],F[5]=k[3],p.multiply(O,O,F),b||p.rotateZ(O,O,-E.angle),O}}return E.glCoordMatrix}function ki(g,o,f,b){const E=[g,o,f,1];f?p.transformMat4$1(E,E,b):zn(E,E,b);const S=E[3];return E[0]/=S,E[1]/=S,E[2]/=S,E}function Al(g,o){return Math.min(.5+g/o*.5,1.5)}function vr(g,o){const f=g[0]/g[3],b=g[1]/g[3];return f>=-o[0]&&f<=o[0]&&b>=-o[1]&&b<=o[1]}function Su(g,o,f,b,E,S,k,O,F,V){const U=f.transform,q=b?g.textSizeData:g.iconSizeData,oe=p.evaluateSizeForZoom(q,f.transform.zoom),he="globe"===U.projection.name,me=[256/f.width*2+1,256/f.height*2+1],fe=b?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;fe.clear();let ve=null;he&&(ve=b?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const X=g.lineVertexArray,de=b?g.text.placedSymbolArray:g.icon.placedSymbolArray,we=f.transform.width/f.transform.height;let Ce,He=!1;for(let We=0;We<de.length;We++){const $e=de.get(We),{numGlyphs:st,writingMode:nt}=$e;if(nt!==p.WritingMode.vertical||He||Ce===p.WritingMode.horizontal||(He=!0),Ce=nt,($e.hidden||nt===p.WritingMode.vertical)&&!He){Sr(st,fe);continue}He=!1;const gt=new p.Point($e.tileAnchorX,$e.tileAnchorY);let{x:Ut,y:ht,z:Dt}=U.projection.projectTilePoint(gt.x,gt.y,V.canonical);if(F){const[Fn,yn,Dn]=F(gt);Ut+=Fn,ht+=yn,Dt+=Dn}const wt=[Ut,ht,Dt,1];if(p.transformMat4$1(wt,wt,o),!vr(wt,me)){Sr(st,fe);continue}const zt=Al(f.transform.cameraToCenterDistance,wt[3]),mt=p.evaluateSizeForFeature(q,oe,$e),Mt=k?mt/zt:mt*zt,jt=ki(Ut,ht,Dt,E);if(jt[3]<=0){Sr(st,fe);continue}let Lt={};const Yt=k?null:F,En=on($e,Mt,!1,O,o,E,S,g.glyphOffsetArray,X,fe,ve,jt,gt,Lt,we,Yt,U.projection,V,k);He=En.useVertical,Yt&&En.needsFlipping&&(Lt={}),(En.notEnoughRoom||He||En.needsFlipping&&on($e,Mt,!0,O,o,E,S,g.glyphOffsetArray,X,fe,ve,jt,gt,Lt,we,Yt,U.projection,V,k).notEnoughRoom)&&Sr(st,fe)}b?(g.text.dynamicLayoutVertexBuffer.updateData(fe),ve&&g.text.globeExtVertexBuffer.updateData(ve)):(g.icon.dynamicLayoutVertexBuffer.updateData(fe),ve&&g.icon.globeExtVertexBuffer.updateData(ve))}function pp(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe){const{lineStartIndex:ve,glyphStartIndex:X,segment:de}=O,we=X+O.numGlyphs,Ce=ve+O.lineLength,He=o.getoffsetX(X),We=o.getoffsetX(we-1),$e=Ai(g*He,f,b,E,S,k,de,ve,Ce,F,V,U,q,oe,!0,he,me,fe);if(!$e)return null;const st=Ai(g*We,f,b,E,S,k,de,ve,Ce,F,V,U,q,oe,!0,he,me,fe);return st?{first:$e,last:st}:null}function bo(g,o,f,b){return g===p.WritingMode.horizontal&&Math.abs(b)>Math.abs(f)?{useVertical:!0}:g===p.WritingMode.vertical?b>0?{needsFlipping:!0}:null:o!==Fs.unknown&&(0===(E=f)||Math.abs(b/E)>Cu)?o===Fs.flipRequired?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null;var E}function on(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe,ve,X,de){const we=o/24,Ce=g.lineOffsetX*we,He=g.lineOffsetY*we,{lineStartIndex:We,glyphStartIndex:$e,numGlyphs:st,segment:nt,writingMode:gt,flipState:Ut}=g,ht=We+g.lineLength,Dt=wt=>{if(U){const[jt,Lt,Yt]=wt.up,En=V.length;p.updateGlobeVertexNormal(U,En+0,jt,Lt,Yt),p.updateGlobeVertexNormal(U,En+1,jt,Lt,Yt),p.updateGlobeVertexNormal(U,En+2,jt,Lt,Yt),p.updateGlobeVertexNormal(U,En+3,jt,Lt,Yt)}const[zt,mt,Mt]=wt.point;p.addDynamicAttributes(V,zt,mt,Mt,wt.angle)};if(st>1){const wt=pp(we,O,Ce,He,f,q,oe,g,F,S,he,fe,!1,ve,X,de);if(!wt)return{notEnoughRoom:!0};if(b&&!f){let[zt,mt,Mt]=wt.first.point,[jt,Lt,Yt]=wt.last.point;[zt,mt]=ki(zt,mt,Mt,k),[jt,Lt]=ki(jt,Lt,Yt,k);const En=bo(gt,Ut,(jt-zt)*me,Lt-mt);if(g.flipState=En&&En.needsFlipping?Fs.flipRequired:Fs.flipNotRequired,En)return En}Dt(wt.first);for(let zt=$e+1;zt<$e+st-1;zt++){const mt=Ai(we*O.getoffsetX(zt),Ce,He,f,q,oe,nt,We,ht,F,S,he,fe,!1,!1,ve,X,de);if(!mt)return V.length-=4*(zt-$e),{notEnoughRoom:!0};Dt(mt)}Dt(wt.last)}else{if(b&&!f){const zt=ki(oe.x,oe.y,0,E),mt=We+nt+1,Mt=new p.Point(F.getx(mt),F.gety(mt)),jt=ki(Mt.x,Mt.y,0,E),Lt=jt[3]>0?jt:cn(oe,Mt,zt,1,E,void 0,ve,X.canonical),Yt=bo(gt,Ut,(Lt[0]-zt[0])*me,Lt[1]-zt[1]);if(g.flipState=Yt&&Yt.needsFlipping?Fs.flipRequired:Fs.flipNotRequired,Yt)return Yt}const wt=Ai(we*O.getoffsetX($e),Ce,He,f,q,oe,nt,We,ht,F,S,he,fe,!1,!1,ve,X,de);if(!wt)return{notEnoughRoom:!0};Dt(wt)}return{}}function qt(g,o,f,b,E){const{x:S,y:k,z:O}=b.projectTilePoint(g.x,g.y,o);if(!E)return ki(S,k,O,f);const[F,V,U]=E(g);return ki(S+F,k+V,O+U,f)}function cn(g,o,f,b,E,S,k,O){const F=qt(g.sub(o)._unit()._add(g),O,E,k,S);return p.sub(F,f,F),p.normalize(F,F),p.scaleAndAdd(F,f,F,b)}function Ai(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe,ve,X){const de=b?g-o:g+o;let we=de>0?1:-1,Ce=0;b&&(we*=-1,Ce=Math.PI),we<0&&(Ce+=Math.PI);let He=O+k+(we>0?0:1)|0,We=E,$e=E,st=0,nt=0;const gt=Math.abs(de),Ut=[],ht=[];let Dt=S,wt=Dt;const zt=()=>cn(wt,Dt,$e,gt-st+1,U,oe,fe,ve.canonical);for(;st+nt<=gt;){if(He+=we,He<O||He>=F)return null;if($e=We,wt=Dt,Ut.push($e),he&&ht.push(wt),Dt=new p.Point(V.getx(He),V.gety(He)),We=q[He],!We){const Dn=qt(Dt,ve.canonical,U,fe,oe);We=Dn[3]>0?q[He]=Dn:zt()}st+=nt,nt=p.distance($e,We)}me&&oe&&(q[He]&&(We=zt(),nt=p.distance($e,We)),q[He]=We);const mt=(gt-st)/nt,Mt=Dt.sub(wt)._mult(mt)._add(wt),jt=p.sub([],We,$e),Lt=p.scaleAndAdd([],$e,jt,mt);let Yt=[0,0,1],En=jt[0],Fn=jt[1];if(X&&(Yt=fe.upVector(ve.canonical,Mt.x,Mt.y),0!==Yt[0]||0!==Yt[1]||1!==Yt[2])){const Dn=[Yt[2],0,-Yt[0]],oi=p.cross([],Yt,Dn);p.normalize(Dn,Dn),p.normalize(oi,oi),En=p.dot(jt,Dn),Fn=p.dot(jt,oi)}if(f){const Dn=p.cross([],Yt,jt);p.normalize(Dn,Dn),p.scaleAndAdd(Lt,Lt,Dn,f*we)}const yn=Ce+Math.atan2(Fn,En);return Ut.push(Lt),he&&ht.push(Mt),{point:Lt,angle:yn,path:Ut,tilePath:ht,up:Yt}}function Sr(g,o){const f=o.length,b=f+4*g;o.resize(b),o.float32.fill(-1/0,4*f,4*b)}function zn(g,o,f){const b=o[0],E=o[1];return g[0]=f[0]*b+f[4]*E+f[12],g[1]=f[1]*b+f[5]*E+f[13],g[3]=f[3]*b+f[7]*E+f[15],g}const Gi=100;class Ns{constructor(o,f,b=new _a(o.width+200,o.height+200,25),E=new _a(o.width+200,o.height+200,25)){this.transform=o,this.grid=b,this.ignoredGrid=E,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Gi,this.screenBottomBoundary=o.height+Gi,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=f}placeCollisionBox(o,f,b,E,S,k,O,F){let V=b.projectedAnchorX,U=b.projectedAnchorY,q=b.projectedAnchorZ;const oe=b.elevation,he=b.tileID,me=o.getProjection();if(oe&&he){const[We,$e,st]=me.upVector(he.canonical,b.tileAnchorX,b.tileAnchorY),nt=me.upVectorScale(he.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;V+=We*oe*nt,U+=$e*oe*nt,q+=st*oe*nt}const fe=this.projectAndGetPerspectiveRatio(O,V,U,q,b.tileID,"globe"===me.name||!!oe||this.transform.pitch>0,me),ve=k*fe.perspectiveRatio,X=(b.x1*f+E.x-b.padding)*ve+fe.point.x,de=(b.y1*f+E.y-b.padding)*ve+fe.point.y,we=(b.x2*f+E.x+b.padding)*ve+fe.point.x,Ce=(b.y2*f+E.y+b.padding)*ve+fe.point.y,He=fe.perspectiveRatio<=.55||fe.occluded;return!this.isInsideGrid(X,de,we,Ce)||!S&&this.grid.hitTest(X,de,we,Ce,F)||He?{box:[],offscreen:!1,occluded:fe.occluded}:{box:[X,de,we,Ce],offscreen:this.isOffscreen(X,de,we,Ce),occluded:!1}}placeCollisionCircles(o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe){const ve=[],X=this.transform.elevation,de=o.getProjection(),we=X?X.getAtTileOffsetFunc(fe,this.transform.center.lat,this.transform.worldSize,de):null,Ce=new p.Point(b.tileAnchorX,b.tileAnchorY);let{x:He,y:We,z:$e}=de.projectTilePoint(Ce.x,Ce.y,fe.canonical);if(we){const[Mt,jt,Lt]=we(Ce);He+=Mt,We+=jt,$e+=Lt}const st="globe"===de.name,nt=this.projectAndGetPerspectiveRatio(O,He,We,$e,fe,st||!!X||this.transform.pitch>0,de),{perspectiveRatio:gt}=nt,Ut=(q?k/gt:k*gt)/p.ONE_EM,ht=ki(He,We,$e,F),Dt=nt.signedDistanceFromCamera>0?pp(Ut,S,b.lineOffsetX*Ut,b.lineOffsetY*Ut,!1,ht,Ce,b,E,F,{},X&&!q?we:null,q&&!!X,de,fe,q):null;let wt=!1,zt=!1,mt=!0;if(Dt&&!nt.occluded){const Mt=.5*he*gt+me,jt=new p.Point(-100,-100),Lt=new p.Point(this.screenRightBoundary,this.screenBottomBoundary),Yt=new kl,{first:En,last:Fn}=Dt,yn=En.path.length;let Dn=[];for(let bn=yn-1;bn>=1;bn--)Dn.push(En.path[bn]);for(let bn=1;bn<Fn.path.length;bn++)Dn.push(Fn.path[bn]);const oi=2.5*Mt;V&&(Dn=Dn.map(([bn,Pi,qi],Bi)=>(we&&!st&&(qi=we(Bi<yn-1?En.tilePath[yn-1-Bi]:Fn.tilePath[Bi-yn+2])[2]),ki(bn,Pi,qi,V))),Dn.some(bn=>bn[3]<=0)&&(Dn=[]));let ii=[];if(Dn.length>0){let bn=1/0,Pi=-1/0,qi=1/0,Bi=-1/0;for(const Yi of Dn)bn=Math.min(bn,Yi[0]),qi=Math.min(qi,Yi[1]),Pi=Math.max(Pi,Yi[0]),Bi=Math.max(Bi,Yi[1]);Pi>=jt.x&&bn<=Lt.x&&Bi>=jt.y&&qi<=Lt.y&&(ii=[Dn.map(Yi=>new p.Point(Yi[0],Yi[1]))],(bn<jt.x||Pi>Lt.x||qi<jt.y||Bi>Lt.y)&&(ii=p.clipLine(ii,jt.x,jt.y,Lt.x,Lt.y)))}for(const bn of ii){Yt.reset(bn,.25*Mt);let Pi=0;Pi=Yt.length<=.5*Mt?1:Math.ceil(Yt.paddedLength/oi)+1;for(let qi=0;qi<Pi;qi++){const Bi=qi/Math.max(Pi-1,1),Yi=Yt.lerp(Bi),io=Yi.x+Gi,Xr=Yi.y+Gi;ve.push(io,Xr,Mt,0);const Qo=io-Mt,Ts=Xr-Mt,tr=io+Mt,Zi=Xr+Mt;if(mt=mt&&this.isOffscreen(Qo,Ts,tr,Zi),zt=zt||this.isInsideGrid(Qo,Ts,tr,Zi),!f&&this.grid.hitTestCircle(io,Xr,Mt,oe)&&(wt=!0,!U))return{circles:[],offscreen:!1,collisionDetected:wt,occluded:!1}}}}return{circles:!U&&wt||!zt?[]:ve,offscreen:mt,collisionDetected:wt,occluded:nt.occluded}}queryRenderedSymbols(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const f=[];let b=1/0,E=1/0,S=-1/0,k=-1/0;for(const U of o){const q=new p.Point(U.x+Gi,U.y+Gi);b=Math.min(b,q.x),E=Math.min(E,q.y),S=Math.max(S,q.x),k=Math.max(k,q.y),f.push(q)}const O=this.grid.query(b,E,S,k).concat(this.ignoredGrid.query(b,E,S,k)),F={},V={};for(const U of O){const q=U.key;if(void 0===F[q.bucketInstanceId]&&(F[q.bucketInstanceId]={}),F[q.bucketInstanceId][q.featureIndex])continue;const oe=[new p.Point(U.x1,U.y1),new p.Point(U.x2,U.y1),new p.Point(U.x2,U.y2),new p.Point(U.x1,U.y2)];p.polygonIntersectsPolygon(f,oe)&&(F[q.bucketInstanceId][q.featureIndex]=!0,void 0===V[q.bucketInstanceId]&&(V[q.bucketInstanceId]=[]),V[q.bucketInstanceId].push(q.featureIndex))}return V}insertCollisionBox(o,f,b,E,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:E,collisionGroupID:S},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,b,E,S){const k=f?this.ignoredGrid:this.grid,O={bucketInstanceId:b,featureIndex:E,collisionGroupID:S};for(let F=0;F<o.length;F+=4)k.insertCircle(O,o[F],o[F+1],o[F+2])}projectAndGetPerspectiveRatio(o,f,b,E,S,k,O){const F=[f,b,E,1];let V=!1;E||this.transform.pitch>0?(p.transformMat4$1(F,F,o),this.fogState&&S&&"globe"!==O.name&&(V=function(oe,he,me,fe,ve,X){const de=X.calculateFogTileMatrix(ve),we=[he,me,fe];return p.transformMat4(we,we,de),Be(oe,we,X.pitch,X._fov)}(this.fogState,f,b,E,S.toUnwrapped(),this.transform)>.9)):zn(F,F,o);const U=F[3];return{point:new p.Point((F[0]/U+1)/2*this.transform.width+Gi,(-F[1]/U+1)/2*this.transform.height+Gi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/U*.5,1.5),signedDistanceFromCamera:U,occluded:k&&F[2]>U||V}}isOffscreen(o,f,b,E){return b<Gi||o>=this.screenRightBoundary||E<Gi||f>this.screenBottomBoundary}isInsideGrid(o,f,b,E){return b>=0&&o<this.gridRightBoundary&&E>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=p.identity([]);return p.translate(o,o,[-100,-100,0]),o}}function nr(g,o,f){const b=o.createTileMatrix(g,g.worldSize,f.toUnwrapped());return p.multiply(new Float32Array(16),g.projMatrix,b)}function Ro(g,o,f){if(o.projection.name===f.projection.name)return g.projMatrix;const b=f.clone();return b.setProjection(o.projection),nr(b,o.getProjection(),g)}function Wi(g,o,f){return o.name===f.projection.name?g.projMatrix:nr(f,o,g)}class li{constructor(o,f,b,E){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):E&&b?1:0,this.placed=b}isHidden(){return 0===this.opacity&&!this.placed}}class as{constructor(o,f,b,E,S,k=!1){this.text=new li(o?o.text:null,f,b,S),this.icon=new li(o?o.icon:null,f,E,S),this.clipped=k}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ja{constructor(o,f,b,E=!1){this.text=o,this.icon=f,this.skipFade=b,this.clipped=E}}class Tu{constructor(){this.invProjMatrix=p.create(),this.viewportMatrix=p.create(),this.circles=[]}}class Zr{constructor(o,f,b,E,S){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=b,this.bucketIndex=E,this.tileID=S}}class to{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:b=>b.collisionGroupID===f}}return this.collisionGroups[o]}}function va(g,o,f,b,E){const{horizontalAlign:S,verticalAlign:k}=p.getAnchorAlignment(g),O=-(S-.5)*o,F=-(k-.5)*f,V=p.evaluateVariableOffset(g,b);return new p.Point(O+V[0]*E,F+V[1]*E)}function Bs(g,o,f,b,E){const S=new p.Point(g,o);return f&&S._rotate(b?E:-E),S}class Zo{constructor(o,f,b,E,S){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Ns(this.transform,S),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new to(b),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,f,b,E){const S=b.getBucket(f),k=b.latestFeatureIndex;if(!S||!k||f.id!==S.layerIds[0])return;const O=S.layers[0].layout,F=b.collisionBoxArray,V=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),U=b.tileSize/p.EXTENT,q=b.tileID.toUnwrapped();this.transform.setProjection(S.projection);const oe=(he=b.tileID,me=S.getProjection(),fe=this.transform,me.name===this.projection?fe.calculateProjMatrix(he.toUnwrapped()):nr(fe,me,he));var he,me,fe;const ve="map"===O.get("text-pitch-alignment"),X="map"===O.get("text-rotation-alignment");f.compileFilter();const de=f.dynamicFilter(),we=f.dynamicFilterNeedsFeature(),Ce=this.transform.calculatePixelsToTileUnitsMatrix(b),He=ui(oe,b.tileID.canonical,ve,X,this.transform,S.getProjection(),Ce);let We=null;if(ve){const nt=xi(oe,b.tileID.canonical,ve,X,this.transform,S.getProjection(),Ce);We=p.multiply([],this.transform.labelPlaneMatrix,nt)}let $e=null;de&&b.latestFeatureIndex&&($e={unwrappedTileID:q,dynamicFilter:de,dynamicFilterNeedsFeature:we,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[S.bucketInstanceId]=new Zr(S.bucketInstanceId,k,S.sourceLayerIndex,S.index,b.tileID);const st={bucket:S,layout:O,posMatrix:oe,textLabelPlaneMatrix:He,labelToScreenMatrix:We,clippingData:$e,scale:V,textPixelRatio:U,holdingForFade:b.holdingForFade(),collisionBoxArray:F,partiallyEvaluatedTextSize:p.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:p.evaluateSizeForZoom(S.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(E)for(const nt of S.sortKeyRanges){const{sortKey:gt,symbolInstanceStart:Ut,symbolInstanceEnd:ht}=nt;o.push({sortKey:gt,symbolInstanceStart:Ut,symbolInstanceEnd:ht,parameters:st})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:st})}attemptAnchorPlacement(o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe,ve,X,de){const{textOffset0:we,textOffset1:Ce,crossTileID:He}=oe,We=[we,Ce],$e=va(o,b,E,We,S),st=this.collisionIndex.placeCollisionBox(me,S,f,Bs($e.x,$e.y,k,O,this.transform.angle),q,F,V,U.predicate);if(ve){const nt=me.getSymbolInstanceIconSize(de,this.transform.zoom,oe.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(me,nt,ve,Bs($e.x,$e.y,k,O,this.transform.angle),q,F,V,U.predicate).box.length)return}if(st.box.length>0){let nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[He]&&this.prevPlacement.placements[He]&&this.prevPlacement.placements[He].text&&(nt=this.prevPlacement.variableOffsets[He].anchor),this.variableOffsets[He]={textOffset:We,width:b,height:E,anchor:o,textScale:S,prevAnchor:nt},this.markUsedJustification(me,o,oe,fe),me.allowVerticalPlacement&&(this.markUsedOrientation(me,fe,oe),this.placedOrientations[He]=fe),{shift:$e,placedGlyphBoxes:st}}}placeLayerBucketPart(o,f,b,E){const{bucket:S,layout:k,posMatrix:O,textLabelPlaneMatrix:F,labelToScreenMatrix:V,clippingData:U,textPixelRatio:q,holdingForFade:oe,collisionBoxArray:he,partiallyEvaluatedTextSize:me,partiallyEvaluatedIconSize:fe,collisionGroup:ve}=o.parameters,X=k.get("text-optional"),de=k.get("icon-optional"),we=k.get("text-allow-overlap"),Ce=k.get("icon-allow-overlap"),He="map"===k.get("text-rotation-alignment"),We="map"===k.get("text-pitch-alignment"),$e="none"!==k.get("icon-text-fit"),st="viewport-y"===k.get("symbol-z-order");this.transform.setProjection(S.projection);let nt=we&&(Ce||!S.hasIconData()||de),gt=Ce&&(we||!S.hasTextData()||X);!S.collisionArrays&&he&&S.deserializeCollisionBoxes(he),b&&E&&S.updateCollisionDebugBuffers(this.transform.zoom,he);const Ut=(ht,Dt,wt)=>{const{crossTileID:zt,numVerticalGlyphVertices:mt}=ht;if(U){const tr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Zi=null;if(U.dynamicFilterNeedsFeature){const Di=this.retainedQueryData[S.bucketInstanceId];Zi=U.featureIndex.loadFeature({featureIndex:ht.featureIndex,bucketIndex:Di.bucketIndex,sourceLayerIndex:Di.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,U.dynamicFilter)(tr,Zi,this.retainedQueryData[S.bucketInstanceId].tileID.canonical,new p.Point(ht.tileAnchorX,ht.tileAnchorY),this.transform.calculateDistanceTileData(U.unwrappedTileID)))return this.placements[zt]=new Ja(!1,!1,!1,!0),void f.add(zt)}if(f.has(zt))return;if(oe)return void(this.placements[zt]=new Ja(!1,!1,!1));let Mt=!1,jt=!1,Lt=!0,Yt=!1,En=!1,Fn=null,yn={box:null,offscreen:null,occluded:null},Dn={box:null,offscreen:null,occluded:null},oi=null,ii=null,bn=null,Pi=0,qi=0,Bi=0;wt.textFeatureIndex?Pi=wt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(Pi=ht.featureIndex),wt.verticalTextFeatureIndex&&(qi=wt.verticalTextFeatureIndex);const Yi=tr=>{tr.tileID=this.retainedQueryData[S.bucketInstanceId].tileID;const Zi=this.transform.elevation;(Zi||tr.elevation)&&(tr.elevation=Zi?Zi.getAtTileOffset(tr.tileID,tr.tileAnchorX,tr.tileAnchorY):0)},io=wt.textBox;if(io){Yi(io);const tr=Di=>{let br=p.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Di&&this.prevPlacement){const Io=this.prevPlacement.placedOrientations[zt];Io&&(this.placedOrientations[zt]=Io,br=Io,this.markUsedOrientation(S,br,ht))}return br},Zi=(Di,br)=>{if(S.allowVerticalPlacement&&mt>0&&wt.verticalTextBox){for(const Io of S.writingModes)if(Io===p.WritingMode.vertical?(yn=br(),Dn=yn):yn=Di(),yn&&yn.box&&yn.box.length)break}else yn=Di()};if(k.get("text-variable-anchor")){let Di=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[zt]){const or=this.prevPlacement.variableOffsets[zt];Di.indexOf(or.anchor)>0&&(Di=Di.filter(Jo=>Jo!==or.anchor),Di.unshift(or.anchor))}const br=(or,Jo,kp)=>{const jc=S.getSymbolInstanceTextSize(me,ht,this.transform.zoom,Dt),Kl=(or.x2-or.x1)*jc+2*or.padding,ro=(or.y2-or.y1)*jc+2*or.padding,Ms=$e&&!Ce?Jo:null;Ms&&Yi(Ms);let Xs={box:[],offscreen:!1,occluded:!1};const Ql=we?2*Di.length:Di.length;for(let al=0;al<Ql;++al){const gr=this.attemptAnchorPlacement(Di[al%Di.length],or,Kl,ro,jc,He,We,q,O,ve,al>=Di.length,ht,Dt,S,kp,Ms,me,fe);if(gr&&(Xs=gr.placedGlyphBoxes,Xs&&Xs.box&&Xs.box.length)){Mt=!0,Fn=gr.shift;break}}return Xs};Zi(()=>br(io,wt.iconBox,p.WritingMode.horizontal),()=>{const or=wt.verticalTextBox;return or&&Yi(or),S.allowVerticalPlacement&&!(yn&&yn.box&&yn.box.length)&&mt>0&&or?br(or,wt.verticalIconBox,p.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),yn&&(Mt=yn.box,Lt=yn.offscreen,Yt=yn.occluded);const Io=tr(!(!yn||!yn.box));if(!Mt&&this.prevPlacement){const or=this.prevPlacement.variableOffsets[zt];or&&(this.variableOffsets[zt]=or,this.markUsedJustification(S,or.anchor,ht,Io))}}else{const Di=(br,Io)=>{const or=S.getSymbolInstanceTextSize(me,ht,this.transform.zoom,Dt),Jo=this.collisionIndex.placeCollisionBox(S,or,br,new p.Point(0,0),we,q,O,ve.predicate);return Jo&&Jo.box&&Jo.box.length&&(this.markUsedOrientation(S,Io,ht),this.placedOrientations[zt]=Io),Jo};Zi(()=>Di(io,p.WritingMode.horizontal),()=>{const br=wt.verticalTextBox;return S.allowVerticalPlacement&&mt>0&&br?(Yi(br),Di(br,p.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),tr(!!(yn&&yn.box&&yn.box.length))}}if(oi=yn,Mt=oi&&oi.box&&oi.box.length>0,Lt=oi&&oi.offscreen,Yt=oi&&oi.occluded,ht.useRuntimeCollisionCircles){const tr=S.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex>=0?ht.centerJustifiedTextSymbolIndex:ht.verticalPlacedTextSymbolIndex),Zi=p.evaluateSizeForFeature(S.textSizeData,me,tr),Di=k.get("text-padding");ii=this.collisionIndex.placeCollisionCircles(S,we,tr,S.lineVertexArray,S.glyphOffsetArray,Zi,O,F,V,b,We,ve.predicate,ht.collisionCircleDiameter*Zi/p.ONE_EM,Di,this.retainedQueryData[S.bucketInstanceId].tileID),Mt=we||ii.circles.length>0&&!ii.collisionDetected,Lt=Lt&&ii.offscreen,Yt=ii.occluded}if(wt.iconFeatureIndex&&(Bi=wt.iconFeatureIndex),wt.iconBox){const tr=Zi=>{Yi(Zi);const Di=$e&&Fn?Bs(Fn.x,Fn.y,He,We,this.transform.angle):new p.Point(0,0),br=S.getSymbolInstanceIconSize(fe,this.transform.zoom,ht.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(S,br,Zi,Di,Ce,q,O,ve.predicate)};Dn&&Dn.box&&Dn.box.length&&wt.verticalIconBox?(bn=tr(wt.verticalIconBox),jt=bn.box.length>0):(bn=tr(wt.iconBox),jt=bn.box.length>0),Lt=Lt&&bn.offscreen,En=bn.occluded}const Xr=X||0===ht.numHorizontalGlyphVertices&&0===mt,Qo=de||0===ht.numIconVertices;if(Xr||Qo?Qo?Xr||(jt=jt&&Mt):Mt=jt&&Mt:jt=Mt=jt&&Mt,Mt&&oi&&oi.box&&this.collisionIndex.insertCollisionBox(oi.box,k.get("text-ignore-placement"),S.bucketInstanceId,Dn&&Dn.box&&qi?qi:Pi,ve.ID),jt&&bn&&this.collisionIndex.insertCollisionBox(bn.box,k.get("icon-ignore-placement"),S.bucketInstanceId,Bi,ve.ID),ii&&(Mt&&this.collisionIndex.insertCollisionCircles(ii.circles,k.get("text-ignore-placement"),S.bucketInstanceId,Pi,ve.ID),b)){const tr=S.bucketInstanceId;let Zi=this.collisionCircleArrays[tr];void 0===Zi&&(Zi=this.collisionCircleArrays[tr]=new Tu);for(let Di=0;Di<ii.circles.length;Di+=4)Zi.circles.push(ii.circles[Di+0]),Zi.circles.push(ii.circles[Di+1]),Zi.circles.push(ii.circles[Di+2]),Zi.circles.push(ii.collisionDetected?1:0)}const Ts="globe"!==S.projection.name;nt=nt&&(Ts||!Yt),gt=gt&&(Ts||!En),this.placements[zt]=new Ja(Mt||nt,jt||gt,Lt||S.justReloaded),f.add(zt)};if(st){const ht=S.getSortedSymbolIndexes(this.transform.angle);for(let Dt=ht.length-1;Dt>=0;--Dt){const wt=ht[Dt];Ut(S.symbolInstances.get(wt),wt,S.collisionArrays[wt])}}else for(let ht=o.symbolInstanceStart;ht<o.symbolInstanceEnd;ht++)Ut(S.symbolInstances.get(ht),ht,S.collisionArrays[ht]);if(b&&S.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[S.bucketInstanceId];p.invert(ht.invProjMatrix,O),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(o,f,b,E){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:F,crossTileID:V}=b,U=p.getAnchorJustification(f),q=E===p.WritingMode.vertical?F:"left"===U?S:"center"===U?k:"right"===U?O:-1;S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=q>=0&&S!==q?0:V),k>=0&&(o.text.placedSymbolArray.get(k).crossTileID=q>=0&&k!==q?0:V),O>=0&&(o.text.placedSymbolArray.get(O).crossTileID=q>=0&&O!==q?0:V),F>=0&&(o.text.placedSymbolArray.get(F).crossTileID=q>=0&&F!==q?0:V)}markUsedOrientation(o,f,b){const E=f===p.WritingMode.horizontal||f===p.WritingMode.horizontalOnly?f:0,S=f===p.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:F,verticalPlacedTextSymbolIndex:V}=b,U=o.text.placedSymbolArray;k>=0&&(U.get(k).placedOrientation=E),O>=0&&(U.get(O).placedOrientation=E),F>=0&&(U.get(F).placedOrientation=E),V>=0&&(U.get(V).placedOrientation=S)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let b=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const E=f?f.symbolFadeChange(o):1,S=f?f.opacities:{},k=f?f.variableOffsets:{},O=f?f.placedOrientations:{};for(const F in this.placements){const V=this.placements[F],U=S[F];U?(this.opacities[F]=new as(U,E,V.text,V.icon,null,V.clipped),b=b||V.text!==U.text.placed||V.icon!==U.icon.placed):(this.opacities[F]=new as(null,E,V.text,V.icon,V.skipFade,V.clipped),b=b||V.text||V.icon)}for(const F in S){const V=S[F];if(!this.opacities[F]){const U=new as(V,E,!1,!1);U.isHidden()||(this.opacities[F]=U,b=b||V.text.placed||V.icon.placed)}}for(const F in k)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=k[F]);for(const F in O)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=O[F]);b?this.lastPlacementChangeTime=o:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const b=new Set;for(const E of f){const S=E.getBucket(o);S&&E.latestFeatureIndex&&o.id===S.layerIds[0]&&this.updateBucketOpacities(S,b,E.collisionBoxArray)}}updateBucketOpacities(o,f,b){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const E=o.layers[0].layout,S=!!o.layers[0].dynamicFilter(),k=new as(null,0,!1,!1,!0),O=E.get("text-allow-overlap"),F=E.get("icon-allow-overlap"),V=E.get("text-variable-anchor"),U="map"===E.get("text-rotation-alignment"),q="map"===E.get("text-pitch-alignment"),oe="none"!==E.get("icon-text-fit"),he=new as(null,0,O&&(F||!o.hasIconData()||E.get("icon-optional")),F&&(O||!o.hasTextData()||E.get("text-optional")),!0);!o.collisionArrays&&b&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(b);const me=(ve,X,de)=>{for(let we=0;we<X/4;we++)ve.opacityVertexArray.emplaceBack(de)};let fe=0;for(let ve=0;ve<o.symbolInstances.length;ve++){const X=o.symbolInstances.get(ve),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:we,crossTileID:Ce,numIconVertices:He}=X,We=f.has(Ce);let $e=this.opacities[Ce];We?$e=k:$e||($e=he,this.opacities[Ce]=$e),f.add(Ce);const st=de>0||we>0,nt=He>0,gt=this.placedOrientations[Ce],Ut=gt===p.WritingMode.vertical,ht=gt===p.WritingMode.horizontal||gt===p.WritingMode.horizontalOnly;if(!st&&!nt||$e.isHidden()||fe++,st){const Dt=js($e.text);me(o.text,de,Ut?wi:Dt),me(o.text,we,ht?wi:Dt);const wt=$e.text.isHidden(),{leftJustifiedTextSymbolIndex:zt,centerJustifiedTextSymbolIndex:mt,rightJustifiedTextSymbolIndex:Mt,verticalPlacedTextSymbolIndex:jt}=X,Lt=o.text.placedSymbolArray,Yt=wt||Ut?1:0;zt>=0&&(Lt.get(zt).hidden=Yt),mt>=0&&(Lt.get(mt).hidden=Yt),Mt>=0&&(Lt.get(Mt).hidden=Yt),jt>=0&&(Lt.get(jt).hidden=wt||ht?1:0);const En=this.variableOffsets[Ce];En&&this.markUsedJustification(o,En.anchor,X,gt);const Fn=this.placedOrientations[Ce];Fn&&(this.markUsedJustification(o,"left",X,Fn),this.markUsedOrientation(o,Fn,X))}if(nt){const Dt=js($e.icon),{placedIconSymbolIndex:wt,verticalPlacedIconSymbolIndex:zt}=X,mt=o.icon.placedSymbolArray,Mt=$e.icon.isHidden()?1:0;wt>=0&&(me(o.icon,He,Ut?wi:Dt),mt.get(wt).hidden=Mt),zt>=0&&(me(o.icon,X.numVerticalIconVertices,ht?wi:Dt),mt.get(zt).hidden=Mt)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Dt=o.collisionArrays[ve];if(Dt){let wt=new p.Point(0,0),zt=!0;if(Dt.textBox||Dt.verticalTextBox){if(V){const Mt=this.variableOffsets[Ce];Mt?(wt=va(Mt.anchor,Mt.width,Mt.height,Mt.textOffset,Mt.textScale),U&&wt._rotate(q?this.transform.angle:-this.transform.angle)):zt=!1}S&&(zt=!$e.clipped),Dt.textBox&&zs(o.textCollisionBox.collisionVertexArray,$e.text.placed,!zt||Ut,wt.x,wt.y),Dt.verticalTextBox&&zs(o.textCollisionBox.collisionVertexArray,$e.text.placed,!zt||ht,wt.x,wt.y)}const mt=zt&&Boolean(!ht&&Dt.verticalIconBox);Dt.iconBox&&zs(o.iconCollisionBox.collisionVertexArray,$e.icon.placed,mt,oe?wt.x:0,oe?wt.y:0),Dt.verticalIconBox&&zs(o.iconCollisionBox.collisionVertexArray,$e.icon.placed,!mt,oe?wt.x:0,oe?wt.y:0)}}}if(o.fullyClipped=0===fe,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ve.invProjMatrix,o.placementViewportMatrix=ve.viewportMatrix,o.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return 0===this.fadeDuration?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const b=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*b>o}setStale(){this.stale=!0}}function zs(g,o,f,b,E){g.emplaceBack(o?1:0,f?1:0,b||0,E||0),g.emplaceBack(o?1:0,f?1:0,b||0,E||0),g.emplaceBack(o?1:0,f?1:0,b||0,E||0),g.emplaceBack(o?1:0,f?1:0,b||0,E||0)}const xo=Math.pow(2,25),ei=Math.pow(2,24),Rf=Math.pow(2,17),Mu=Math.pow(2,16),wo=Math.pow(2,9),Eo=Math.pow(2,8),Iu=Math.pow(2,1);function js(g){if(0===g.opacity&&!g.placed)return 0;if(1===g.opacity&&g.placed)return 4294967295;const o=g.placed?1:0,f=Math.floor(127*g.opacity);return f*xo+o*ei+f*Rf+o*Mu+f*wo+o*Eo+f*Iu+o}const wi=0;class kd{constructor(o){this._sortAcrossTiles="viewport-y"!==o.layout.get("symbol-z-order")&&void 0!==o.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,f,b,E,S){const k=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(k,E,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((O,F)=>O.sortKey-F.sortKey));this._currentPartIndex<k.length;){const O=k[this._currentPartIndex];if(f.placeLayerBucketPart(O,this._seenCrossTileIDs,b,0===O.symbolInstanceStart),this._currentPartIndex++,S())return!0}return!1}}class Co{constructor(o,f,b,E,S,k,O,F){this.placement=new Zo(o,S,k,O,F),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(o,f,b){const E=p.exported.now(),S=()=>{const k=p.exported.now()-E;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=f[o[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if("symbol"===k.type&&(!k.minzoom||k.minzoom<=O)&&(!k.maxzoom||k.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new kd(k)),this._inProgressLayer.continuePlacement(b[k.source],this.placement,this._showCollisionBoxes,k,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const no=512/p.EXTENT/2;class Ur{constructor(o,f,b){this.tileID=o,this.bucketInstanceId=b,this.index=new p.KDBush(f.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const E=o.canonical.x*p.EXTENT,S=o.canonical.y*p.EXTENT;for(let k=0;k<f.length;k++){const{key:O,crossTileID:F,tileAnchorX:V,tileAnchorY:U}=f.get(k),q=Math.floor((E+V)*no),oe=Math.floor((S+U)*no);this.index.add(q,oe),this.keys.push(O),this.crossTileIDs.push(F)}this.index.finish()}findMatches(o,f,b){const E=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z),S=no/Math.pow(2,f.canonical.z-this.tileID.canonical.z),k=f.canonical.x*p.EXTENT,O=f.canonical.y*p.EXTENT;for(let F=0;F<o.length;F++){const V=o.get(F);if(V.crossTileID)continue;const{key:U,tileAnchorX:q,tileAnchorY:oe}=V,he=Math.floor((k+q)*S),me=Math.floor((O+oe)*S),fe=this.index.range(he-E,me-E,he+E,me+E);for(const ve of fe){const X=this.crossTileIDs[ve];if(this.keys[ve]===U&&!b.has(X)){b.add(X),V.crossTileID=X;break}}}}}class Pl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ol{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(0!==f)for(const b in this.indexes){const E=this.indexes[b],S={};for(const k in E){const O=E[k];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+f),S[O.tileID.key]=O}this.indexes[b]=S}this.lng=o}addBucket(o,f,b){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let S=0;S<f.symbolInstances.length;S++)f.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const E=this.usedCrossTileIDs[o.overscaledZ];for(const S in this.indexes){const k=this.indexes[S];if(Number(S)>o.overscaledZ)for(const O in k){const F=k[O];F.tileID.isChildOf(o)&&F.findMatches(f.symbolInstances,o,E)}else{const O=k[o.scaledTo(Number(S)).key];O&&O.findMatches(f.symbolInstances,o,E)}}for(let S=0;S<f.symbolInstances.length;S++){const k=f.symbolInstances.get(S);k.crossTileID||(k.crossTileID=b.generate(),E.add(k.crossTileID))}return void 0===this.indexes[o.overscaledZ]&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Ur(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const b of f.crossTileIDs)this.usedCrossTileIDs[o].delete(b)}removeStaleBuckets(o){let f=!1;for(const b in this.indexes){const E=this.indexes[b];for(const S in E)o[E[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,E[S]),delete E[S],f=!0)}return f}}class zr{constructor(){this.layerIndexes={},this.crossTileIDs=new Pl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,b,E){let S=this.layerIndexes[o.id];void 0===S&&(S=this.layerIndexes[o.id]=new Ol);let k=!1;const O={};"globe"!==E.name&&S.handleWrapJump(b);for(const F of f){const V=F.getBucket(o);V&&o.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(F.tileID,V,this.crossTileIDs)&&(k=!0),O[V.bucketInstanceId]=!0)}return S.removeStaleBuckets(O)&&(k=!0),k}pruneUnusedLayers(o){const f={};o.forEach(b=>{f[b]=!0});for(const b in this.layerIndexes)f[b]||delete this.layerIndexes[b]}}const el=(g,o)=>p.emitValidationErrors(g,o&&o.filter(f=>"source.canvas"!==f.identifier)),fp=p.pick(Ti,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),mp=p.pick(Ti,["setCenter","setZoom","setBearing","setPitch"]),Du={version:8,layers:[],sources:{}},Ad={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class tl extends p.Evented{constructor(o,f={}){super(),this.map=o,this.dispatcher=new ze(bs(),this),this.imageManager=new Me,this.imageManager.setEventedParent(this),this.glyphManager=new p.GlyphManager(o._requestManager,f.localFontFamily?p.LocalGlyphMode.all:f.localIdeographFontFamily?p.LocalGlyphMode.ideographs:p.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new zr,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",p.getReferrer());const b=this;this._rtlTextPluginCallback=tl.registerForPluginStateChange(E=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(S,k)=>{if(p.triggerPluginCompletionEvent(S),k&&k.every(O=>O))for(const O in b._sourceCaches){const F=b._sourceCaches[O],V=F.getSource().type;"vector"!==V&&"geojson"!==V||F.reload()}})}),this.on("data",E=>{if("source"!==E.dataType||"metadata"!==E.sourceDataType)return;const S=this.getSource(E.sourceId);if(S&&S.vectorLayerIds)for(const k in this._layers){const O=this._layers[k];O.source===S.id&&this._validateLayer(O)}})}loadURL(o,f={}){this.fire(new p.Event("dataloading",{dataType:"style"}));const b="boolean"==typeof f.validate?f.validate:!p.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,f.accessToken);const E=this.map._requestManager.transformRequest(o,p.ResourceType.Style);this._request=p.getJSON(E,(S,k)=>{this._request=null,S?this.fire(new p.ErrorEvent(S)):k&&this._load(k,b)})}loadJSON(o,f={}){this.fire(new p.Event("dataloading",{dataType:"style"})),this._request=p.exported.frame(()=>{this._request=null,this._load(o,!1!==f.validate)})}loadEmpty(){this.fire(new p.Event("dataloading",{dataType:"style"})),this._load(Du,!1)}_updateLayerCount(o,f){const b=f?1:-1;o.is3D()&&(this._num3DLayers+=b),"circle"===o.type&&(this._numCircleLayers+=b),"symbol"===o.type&&(this._numSymbolLayers+=b)}_load(o,f){if(f&&el(this,p.validateStyle(o)))return;this._loaded=!0,this.stylesheet=p.clone$1(o),this._updateMapProjection();for(const E in o.sources)this.addSource(E,o.sources[E],{validate:!1});this._changed=!1,o.sprite?this._loadSprite(o.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(o.glyphs);const b=Dl(this.stylesheet.layers);this._order=b.map(E=>E.id),this._layers={},this._serializedLayers={};for(const E of b){const S=p.createStyleLayer(E);S.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=S,this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ce(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new p.Event("data",{dataType:"style"})),this.fire(new p.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(o){this._spriteRequest=function(f,b,E){let S,k,O;const F=p.exported.devicePixelRatio>1?"@2x":"";let V=p.getJSON(b.transformRequest(b.normalizeSpriteURL(f,F,".json"),p.ResourceType.SpriteJSON),(oe,he)=>{V=null,O||(O=oe,S=he,q())}),U=p.getImage(b.transformRequest(b.normalizeSpriteURL(f,F,".png"),p.ResourceType.SpriteImage),(oe,he)=>{U=null,O||(O=oe,k=he,q())});function q(){if(O)E(O);else if(S&&k){const oe=p.exported.getImageData(k),he={};for(const me in S){const{width:fe,height:ve,x:X,y:de,sdf:we,pixelRatio:Ce,stretchX:He,stretchY:We,content:$e}=S[me],st=new p.RGBAImage({width:fe,height:ve});p.RGBAImage.copy(oe,st,{x:X,y:de},{x:0,y:0},{width:fe,height:ve}),he[me]={data:st,pixelRatio:Ce,sdf:we,stretchX:He,stretchY:We,content:$e}}E(null,he)}}return{cancel(){V&&(V.cancel(),V=null),U&&(U.cancel(),U=null)}}}(o,this.map._requestManager,(f,b)=>{if(this._spriteRequest=null,f)this.fire(new p.ErrorEvent(f));else if(b)for(const E in b)this.imageManager.addImage(E,b[E]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new p.Event("data",{dataType:"style"}))})}_validateLayer(o){const f=this.getSource(o.source);if(!f)return;const b=o.sourceLayer;b&&("geojson"===f.type||f.vectorLayerIds&&-1===f.vectorLayerIds.indexOf(b))&&this.fire(new p.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${f.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const f=[];for(const b of o){const E=this._layers[b];"custom"!==E.type&&f.push(E.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(o){return!!this.terrain&&("function"==typeof o.isLayerDraped?o.isLayerDraped():Ad[o.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(o){if(!this._loaded)return;const f=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(E.length||S.length)&&this._updateWorkerLayers(E,S);for(const k in this._updatedSources){const O=this._updatedSources[k];"reload"===O?this._reloadSource(k):"clear"===O&&this._clearSource(k)}this._updateTilesForChangedImages();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(o);this.light.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this._resetUpdates()}const b={};for(const E in this._sourceCaches){const S=this._sourceCaches[E];b[E]=S.used,S.used=!1}for(const E of this._order){const S=this._layers[E];if(S.recalculate(o,this._availableImages),!S.isHidden(o.zoom)){const O=this._getLayerSourceCache(S);O&&(O.used=!0)}const k=this.map.painter;if(k){const O=S.getProgramIds();if(!O)continue;const F=S.getProgramConfiguration(o.zoom);for(const V of O)k.useProgram(V,F)}}for(const E in b){const S=this._sourceCaches[E];b[E]!==S.used&&S.getSource().fire(new p.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new p.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(o){if(this._checkLoaded(),el(this,p.validateStyle(o)))return!1;(o=p.clone$1(o)).layers=Dl(o.layers);const f=function(E,S){if(!E)return[{command:Ti.setStyle,args:[S]}];let k=[];try{if(!ge(E.version,S.version))return[{command:Ti.setStyle,args:[S]}];ge(E.center,S.center)||k.push({command:Ti.setCenter,args:[S.center]}),ge(E.zoom,S.zoom)||k.push({command:Ti.setZoom,args:[S.zoom]}),ge(E.bearing,S.bearing)||k.push({command:Ti.setBearing,args:[S.bearing]}),ge(E.pitch,S.pitch)||k.push({command:Ti.setPitch,args:[S.pitch]}),ge(E.sprite,S.sprite)||k.push({command:Ti.setSprite,args:[S.sprite]}),ge(E.glyphs,S.glyphs)||k.push({command:Ti.setGlyphs,args:[S.glyphs]}),ge(E.transition,S.transition)||k.push({command:Ti.setTransition,args:[S.transition]}),ge(E.light,S.light)||k.push({command:Ti.setLight,args:[S.light]}),ge(E.fog,S.fog)||k.push({command:Ti.setFog,args:[S.fog]}),ge(E.projection,S.projection)||k.push({command:Ti.setProjection,args:[S.projection]});const O={},F=[];!function(q,oe,he,me){let fe;for(fe in oe=oe||{},q=q||{})q.hasOwnProperty(fe)&&(oe.hasOwnProperty(fe)||Ls(fe,he,me));for(fe in oe){if(!oe.hasOwnProperty(fe))continue;const ve=oe[fe];q.hasOwnProperty(fe)?ge(q[fe],ve)||("geojson"===q[fe].type&&"geojson"===ve.type&&wu(q,oe,fe)?he.push({command:Ti.setGeoJSONSourceData,args:[fe,ve.data]}):xu(fe,oe,he,me)):xs(fe,oe,he)}}(E.sources,S.sources,F,O);const V=[];E.layers&&E.layers.forEach(q=>{q.source&&O[q.source]?k.push({command:Ti.removeLayer,args:[q.id]}):V.push(q)});let U=E.terrain;U&&O[U.source]&&(k.push({command:Ti.setTerrain,args:[void 0]}),U=void 0),k=k.concat(F),ge(U,S.terrain)||k.push({command:Ti.setTerrain,args:[S.terrain]}),function(q,oe,he){oe=oe||[];const me=(q=q||[]).map(ya),fe=oe.map(ya),ve=q.reduce(Eu,{}),X=oe.reduce(Eu,{}),de=me.slice(),we=Object.create(null);let Ce,He,We,$e,st,nt,gt;for(Ce=0,He=0;Ce<me.length;Ce++)We=me[Ce],X.hasOwnProperty(We)?He++:(he.push({command:Ti.removeLayer,args:[We]}),de.splice(de.indexOf(We,He),1));for(Ce=0,He=0;Ce<fe.length;Ce++)We=fe[fe.length-1-Ce],de[de.length-1-Ce]!==We&&(ve.hasOwnProperty(We)?(he.push({command:Ti.removeLayer,args:[We]}),de.splice(de.lastIndexOf(We,de.length-He),1)):He++,nt=de[de.length-Ce],he.push({command:Ti.addLayer,args:[X[We],nt]}),de.splice(de.length-Ce,0,We),we[We]=!0);for(Ce=0;Ce<fe.length;Ce++)if(We=fe[Ce],$e=ve[We],st=X[We],!we[We]&&!ge($e,st))if(ge($e.source,st.source)&&ge($e["source-layer"],st["source-layer"])&&ge($e.type,st.type)){for(gt in ws($e.layout,st.layout,he,We,null,Ti.setLayoutProperty),ws($e.paint,st.paint,he,We,null,Ti.setPaintProperty),ge($e.filter,st.filter)||he.push({command:Ti.setFilter,args:[We,st.filter]}),ge($e.minzoom,st.minzoom)&&ge($e.maxzoom,st.maxzoom)||he.push({command:Ti.setLayerZoomRange,args:[We,st.minzoom,st.maxzoom]}),$e)$e.hasOwnProperty(gt)&&"layout"!==gt&&"paint"!==gt&&"filter"!==gt&&"metadata"!==gt&&"minzoom"!==gt&&"maxzoom"!==gt&&(0===gt.indexOf("paint.")?ws($e[gt],st[gt],he,We,gt.slice(6),Ti.setPaintProperty):ge($e[gt],st[gt])||he.push({command:Ti.setLayerProperty,args:[We,gt,st[gt]]}));for(gt in st)st.hasOwnProperty(gt)&&!$e.hasOwnProperty(gt)&&"layout"!==gt&&"paint"!==gt&&"filter"!==gt&&"metadata"!==gt&&"minzoom"!==gt&&"maxzoom"!==gt&&(0===gt.indexOf("paint.")?ws($e[gt],st[gt],he,We,gt.slice(6),Ti.setPaintProperty):ge($e[gt],st[gt])||he.push({command:Ti.setLayerProperty,args:[We,gt,st[gt]]}))}else he.push({command:Ti.removeLayer,args:[We]}),nt=de[de.lastIndexOf(We)+1],he.push({command:Ti.addLayer,args:[st,nt]})}(V,S.layers,k)}catch(O){console.warn("Unable to compute style diff:",O),k=[{command:Ti.setStyle,args:[S]}]}return k}(this.serialize(),o).filter(E=>!(E.command in mp));if(0===f.length)return!1;const b=f.filter(E=>!(E.command in fp));if(b.length>0)throw new Error(`Unimplemented: ${b.map(E=>E.command).join(", ")}.`);return f.forEach(E=>{"setTransition"!==E.command&&"setProjection"!==E.command&&this[E.command].apply(this,E.args)}),this.stylesheet=o,this._updateMapProjection(),!0}addImage(o,f){return this.getImage(o)?this.fire(new p.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(o,f),this._afterImageUpdated(o),this)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o),this._afterImageUpdated(o),this):this.fire(new p.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new p.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(o,f,b={}){if(this._checkLoaded(),void 0!==this.getSource(o))throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(p.validateSource,`sources.${o}`,f,null,b))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const E=Kn(o,f,this.dispatcher,this);E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(o),source:E.serialize(),sourceId:o}));const S=k=>{const O=(k?"symbol:":"other:")+o,F=this._sourceCaches[O]=new p.SourceCache(O,E,k);(k?this._symbolSourceCaches:this._otherSourceCaches)[o]=F,F.style=this,F.onAdd(this.map)};S(!1),"vector"!==f.type&&"geojson"!==f.type||S(!0),E.onAdd&&E.onAdd(this.map),this._changed=!0}removeSource(o){this._checkLoaded();const f=this.getSource(o);if(!f)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===o)return this.fire(new p.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.get().source===o)return this.fire(new p.ErrorEvent(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(o);for(const E of b)delete this._sourceCaches[E.id],delete this._updatedSources[E.id],E.fire(new p.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles();return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(o,f){this._checkLoaded(),this.getSource(o).setData(f),this._changed=!0}getSource(o){const f=this._getSourceCache(o);return f&&f.getSource()}_getSources(){const o=[];for(const f in this._otherSourceCaches){const b=this._getSourceCache(f);b&&o.push(b.getSource())}return o}addLayer(o,f,b={}){this._checkLoaded();const E=o.id;if(this.getLayer(E))return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${E}" already exists on this map`)));let S;if("custom"===o.type){if(el(this,p.validateCustomStyleLayer(o)))return;S=p.createStyleLayer(o)}else{if("object"==typeof o.source&&(this.addSource(E,o.source),o=p.clone$1(o),o=p.extend(o,{source:E})),this._validate(p.validateLayer,`layers.${E}`,o,{arrayIndex:-1},b))return;S=p.createStyleLayer(o),this._validateLayer(S),S.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}const k=f?this._order.indexOf(f):this._order.length;if(f&&-1===k)return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(k,0,E),this._layerOrderChanged=!0,this._layers[E]=S;const O=this._getLayerSourceCache(S);if(this._removedLayers[E]&&S.source&&O&&"custom"!==S.type){const F=this._removedLayers[E];delete this._removedLayers[E],F.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",O.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const b=this._order.indexOf(o);this._order.splice(b,1);const E=f?this._order.indexOf(f):this._order.length;f&&-1===E?this.fire(new p.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(E,0,o),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const b=this._order.indexOf(o);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}hasLayerType(o){for(const f in this._layers)if(this._layers[f].type===o)return!0;return!1}setLayerZoomRange(o,f,b){this._checkLoaded();const E=this.getLayer(o);E?E.minzoom===f&&E.maxzoom===b||(null!=f&&(E.minzoom=f),null!=b&&(E.maxzoom=b),this._updateLayer(E)):this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(o,f,b={}){this._checkLoaded();const E=this.getLayer(o);if(E){if(!ge(E.filter,f))return null==f?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(p.validateFilter,`layers.${E.id}.filter`,f,{layerType:E.type},b)||(E.filter=p.clone$1(f),this._updateLayer(E)))}else this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be filtered.`)))}getFilter(o){const f=this.getLayer(o);return f&&p.clone$1(f.filter)}setLayoutProperty(o,f,b,E={}){this._checkLoaded();const S=this.getLayer(o);S?ge(S.getLayoutProperty(f),b)||(S.setLayoutProperty(f,b,E),this._updateLayer(S)):this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(o,f){const b=this.getLayer(o);if(b)return b.getLayoutProperty(f);this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style.`)))}setPaintProperty(o,f,b,E={}){this._checkLoaded();const S=this.getLayer(o);S?ge(S.getPaintProperty(f),b)||(S.setPaintProperty(f,b,E)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new p.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(o,f){const b=this.getLayer(o);return b&&b.getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const b=o.source,E=o.sourceLayer,S=this.getSource(b);if(!S)return void this.fire(new p.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const k=S.type;if("geojson"===k&&E)return void this.fire(new p.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===k&&!E)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===o.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided.")));const O=this._getSourceCaches(b);for(const F of O)F.setFeatureState(E,o.id,f)}removeFeatureState(o,f){this._checkLoaded();const b=o.source,E=this.getSource(b);if(!E)return void this.fire(new p.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const S=E.type,k="vector"===S?o.sourceLayer:void 0;if("vector"===S&&!k)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&"string"!=typeof o.id&&"number"!=typeof o.id)return void this.fire(new p.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const O=this._getSourceCaches(b);for(const F of O)F.removeFeatureState(k,o.id,f)}getFeatureState(o){this._checkLoaded();const f=o.source,b=o.sourceLayer,E=this.getSource(f);if(E){if("vector"!==E.type||b)return void 0===o.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(b,o.id);this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return p.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o={};for(const f in this._sourceCaches){const b=this._sourceCaches[f].getSource();o[b.id]||(o[b.id]=b.serialize())}return p.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:o,layers:this._serializeLayers(this._order)},f=>void 0!==f)}_updateLayer(o){this._updatedLayers[o.id]=!0;const f=this._getLayerSourceCache(o);o.source&&!this._updatedSources[o.source]&&f&&"raster"!==f.getSource().type&&(this._updatedSources[o.source]="reload",f.pause()),this._changed=!0,o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const f=k=>"fill-extrusion"===this._layers[k].type,b={},E=[];for(let k=this._order.length-1;k>=0;k--){const O=this._order[k];if(f(O)){b[O]=k;for(const F of o){const V=F[O];if(V)for(const U of V)E.push(U)}}}E.sort((k,O)=>O.intersectionZ-k.intersectionZ);const S=[];for(let k=this._order.length-1;k>=0;k--){const O=this._order[k];if(f(O))for(let F=E.length-1;F>=0;F--){const V=E[F].feature;if(b[V.layer.id]<k)break;S.push(V),E.pop()}else for(const F of o){const V=F[O];if(V)for(const U of V)S.push(U.feature)}}return S}queryRenderedFeatures(o,f,b){f&&f.filter&&this._validate(p.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const E={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new p.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const F of f.layers){const V=this._layers[F];if(!V)return this.fire(new p.ErrorEvent(new Error(`The layer '${F}' does not exist in the map's style and cannot be queried for features.`))),[];E[V.source]=!0}}const S=[];f.availableImages=this._availableImages;const k=f&&f.layers?f.layers.some(F=>{const V=this.getLayer(F);return V&&V.is3D()}):this.has3DLayers(),O=Ot.createFromScreenPoints(o,b);for(const F in this._sourceCaches){const V=this._sourceCaches[F].getSource().id;f.layers&&!E[V]||S.push(dr(this._sourceCaches[F],this._layers,this._serializedLayers,O,f,b,k,!!this.map._showQueryGeometry))}return this.placement&&S.push(function(F,V,U,q,oe,he,me){const fe={},ve=he.queryRenderedSymbols(q),X=[];for(const de of Object.keys(ve).map(Number))X.push(me[de]);X.sort(Ji);for(const de of X){const we=de.featureIndex.lookupSymbolFeatures(ve[de.bucketInstanceId],V,de.bucketIndex,de.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,F);for(const Ce in we){const He=fe[Ce]=fe[Ce]||[],We=we[Ce];We.sort(($e,st)=>{const nt=de.featureSortOrder;if(nt){const gt=nt.indexOf($e.featureIndex);return nt.indexOf(st.featureIndex)-gt}return st.featureIndex-$e.featureIndex});for(const $e of We)He.push($e)}}for(const de in fe)fe[de].forEach(we=>{const Ce=we.feature,He=U(F[de]);if(!He)return;const We=He.getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=We});return fe}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),O.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(o,f){f&&f.filter&&this._validate(p.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const b=this._getSourceCaches(o);let E=[];for(const S of b)E=E.concat(Cr(S,f));return E}addSourceType(o,f,b){return tl.getSourceType(o)?b(new Error(`A source type called "${o}" already exists.`)):(tl.setSourceType(o,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:f.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const b=this.light.getLight();let E=!1;for(const k in o)if(!ge(o[k],b[k])){E=!0;break}if(!E)return;const S=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(o,f),this.light.updateTransitions(S)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(o,f=1){if(this._checkLoaded(),!o)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let b=o;if(1===f){if("object"==typeof b.source){const E="terrain-dem-src";this.addSource(E,b.source),b=p.clone$1(b),b=p.extend(b,{source:E})}if(this._validate(p.validateTerrain,"terrain",b))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!b)return;this._createTerrain(b,f)}else{const E=this.terrain,S=E.get();for(const k of Object.keys(p.spec.terrain))!b.hasOwnProperty(k)&&p.spec.terrain[k].default&&(b[k]=p.spec.terrain[k].default);for(const k in b)if(!ge(b[k],S[k])){E.set(b),this.stylesheet.terrain=b;const O=this._setTransitionParameters({duration:0});E.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const f=this.fog=new Fe(o,this.map.transform);this.stylesheet.fog=o;const b=this._setTransitionParameters({duration:0});f.updateTransitions(b)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,b=f.get();0===Object.keys(o).length&&f.set(o);for(const E in o)if(!ge(o[E],b[E])){f.set(o),this.stylesheet.fog=o;const S=this._setTransitionParameters({duration:0});f.updateTransitions(S);break}}else this._createFog(o);this._markersNeedUpdate=!0}_setTransitionParameters(o){return{now:p.exported.now(),transition:p.extend(o,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const o=this._order.filter(b=>this.isLayerDraped(this._layers[b])),f=this._order.filter(b=>!this.isLayerDraped(this._layers[b]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...f)}_createTerrain(o,f){const b=this.terrain=new qe(o,f);this.stylesheet.terrain=o,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const E=this._setTransitionParameters({duration:0});b.updateTransitions(E)}_force3DLayerUpdate(){for(const o in this._layers){const f=this._layers[o];"fill-extrusion"===f.type&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const f=this._layers[o];"symbol"===f.type&&this._updateLayer(f)}}_validate(o,f,b,E,S={}){return(!S||!1!==S.validate)&&el(this,o.call(p.validateStyle,p.extend({key:f,style:this.serialize(),value:b,styleSpec:p.spec},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),p.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this._sourceCaches)this._sourceCaches[o].clearTiles(),this._sourceCaches[o].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){const f=this._getSourceCaches(o);for(const b of f)b.clearTiles()}_reloadSource(o){const f=this._getSourceCaches(o);for(const b of f)b.resume(),b.reload()}_reloadSources(){for(const o of this._getSources())o.reload&&o.reload()}_updateSources(o){for(const f in this._sourceCaches)this._sourceCaches[f].update(o)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const f=this._sourceCaches[o];f.resume(),f.reload()}}_updatePlacement(o,f,b,E,S=!1){let k=!1,O=!1;const F={};for(const V of this._order){const U=this._layers[V];if("symbol"!==U.type)continue;if(!F[U.source]){const oe=this._getLayerSourceCache(U);if(!oe)continue;F[U.source]=oe.getRenderableIds(!0).map(he=>oe.getTileByID(he)).sort((he,me)=>me.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(me.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(U,F[U.source],o.center.lng,o.projection);k=k||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),S=S||this._layerOrderChanged||0===b,this._layerOrderChanged&&this.fire(new p.Event("neworder")),(S||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.exported.now(),o.zoom))&&(this.pauseablePlacement=new Co(o,this._order,S,f,b,E,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.exported.now()),O=!0),k&&this.pauseablePlacement.placement.setStale()),O||k)for(const V of this._order){const U=this._layers[V];"symbol"===U.type&&this.placement.updateLayerOpacities(U,F[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.exported.now())}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f,b){this.imageManager.getImages(f.icons,b),this._updateTilesForChangedImages();const E=S=>{S&&S.setDependencies(f.tileID.key,f.type,f.icons)};E(this._otherSourceCaches[f.source]),E(this._symbolSourceCaches[f.source])}getGlyphs(o,f,b){this.glyphManager.getGlyphs(f.stacks,b)}getResource(o,f,b){return p.makeRequest(f,b)}_getSourceCache(o){return this._otherSourceCaches[o]}_getLayerSourceCache(o){return"symbol"===o.type?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}_getSourceCaches(o){const f=[];return this._otherSourceCaches[o]&&f.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&f.push(this._symbolSourceCaches[o]),f}_isSourceCacheLoaded(o){const f=this._getSourceCaches(o);return 0===f.length?(this.fire(new p.ErrorEvent(new Error(`There is no source with ID '${o}'`))),!1):f.every(b=>b.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}tl.getSourceType=function(g){return Un[g]},tl.setSourceType=function(g,o){Un[g]=o},tl.registerForPluginStateChange=p.registerForPluginStateChange;var ku="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Rl="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nl="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Pd="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",il="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let Lf={},Au={};const gp=[];wc(ku,gp),wc(nl,gp),wc(Pd,gp),wc(il,gp),Lf=Li("",nl),Au=Li(il,Pd);const Yy=Li("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ff=ku,Od="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Rd={background:Li("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Li("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Li("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Li("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Li("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Li("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Li("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Li("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Li("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Li("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Li("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Li("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Li("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Li("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Li("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Li("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Li("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Li("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Li("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Li("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Li("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Li("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Li("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Li("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Li("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Li("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Rl),skyboxGradient:Li("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Rl),skyboxCapture:Li("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Li("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Li("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function wc(g,o){const f=g.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let b of f)if(b=b.trim(),"#"===b[0]&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const E=b.split(" ");for(const S of E)o.includes(S)||o.push(S)}}function Li(g,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=o.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),E={},S=[...gp];return wc(g,S),wc(o,S),{fragmentSource:g=g.replace(f,(k,O,F,V,U)=>(E[U]=!0,"define"===O?`\n#ifndef HAS_UNIFORM_u_${U}\nvarying ${F} ${V} ${U};\n#else\nuniform ${F} ${V} u_${U};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${U}\n    ${F} ${V} ${U} = u_${U};\n#endif\n`)),vertexSource:o=o.replace(f,(k,O,F,V,U)=>{const q="float"===V?"vec2":"vec4",oe=U.match(/color/)?"color":q;return E[U]?"define"===O?`\n#ifndef HAS_UNIFORM_u_${U}\nuniform lowp float u_${U}_t;\nattribute ${F} ${q} a_${U};\nvarying ${F} ${V} ${U};\n#else\nuniform ${F} ${V} u_${U};\n#endif\n`:"vec4"===oe?`\n#ifndef HAS_UNIFORM_u_${U}\n    ${U} = a_${U};\n#else\n    ${F} ${V} ${U} = u_${U};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${U}\n    ${U} = unpack_mix_${oe}(a_${U}, u_${U}_t);\n#else\n    ${F} ${V} ${U} = u_${U};\n#endif\n`:"define"===O?`\n#ifndef HAS_UNIFORM_u_${U}\nuniform lowp float u_${U}_t;\nattribute ${F} ${q} a_${U};\n#else\nuniform ${F} ${V} u_${U};\n#endif\n`:"vec4"===oe?`\n#ifndef HAS_UNIFORM_u_${U}\n    ${F} ${V} ${U} = a_${U};\n#else\n    ${F} ${V} ${U} = u_${U};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${U}\n    ${F} ${V} ${U} = unpack_mix_${oe}(a_${U}, u_${U}_t);\n#else\n    ${F} ${V} ${U} = u_${U};\n#endif\n`}),staticAttributes:b,usedDefines:S}}class Ev{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,f,b,E,S,k,O){this.context=o;let F=this.boundPaintVertexBuffers.length!==E.length;for(let U=0;!F&&U<E.length;U++)this.boundPaintVertexBuffers[U]!==E[U]&&(F=!0);let V=this.boundDynamicVertexBuffers.length!==O.length;for(let U=0;!V&&U<O.length;U++)this.boundDynamicVertexBuffers[U]!==O[U]&&(V=!0);if(!o.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==b||F||V||this.boundIndexBuffer!==S||this.boundVertexOffset!==k)this.freshBind(f,b,E,S,k,O);else{o.bindVertexArrayOES.set(this.vao);for(const U of O)U&&U.bind();S&&S.dynamicDraw&&S.bind()}}freshBind(o,f,b,E,S,k){let O;const F=o.numAttributes,V=this.context,U=V.gl;if(V.extVertexArrayObject)this.vao&&this.destroy(),this.vao=V.extVertexArrayObject.createVertexArrayOES(),V.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=E,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=k;else{O=V.currentNumAttributes||0;for(let q=F;q<O;q++)U.disableVertexAttribArray(q)}f.enableAttributes(U,o),f.bind(),f.setVertexAttribPointers(U,o,S);for(const q of b)q.enableAttributes(U,o),q.bind(),q.setVertexAttribPointers(U,o,S);for(const q of k)q&&(q.enableAttributes(U,o),q.bind(),q.setVertexAttribPointers(U,o,S));E&&E.bind(),V.currentNumAttributes=F}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Vs(g,o){const f=Math.pow(2,o.canonical.z),b=o.canonical.y;return[new p.MercatorCoordinate(0,b/f).toLngLat().lat,new p.MercatorCoordinate(0,(b+1)/f).toLngLat().lat]}function Nf(g,o,f,b,E,S,k){const O=g.context,F=O.gl,V=f.fbo;if(!V)return;g.prepareDrawTile();const U=g.useProgram("hillshade");O.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,V.colorAttachment.get());const q=((fe,ve,X,de)=>{const we=X.paint.get("hillshade-shadow-color"),Ce=X.paint.get("hillshade-highlight-color"),He=X.paint.get("hillshade-accent-color");let We=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===X.paint.get("hillshade-illumination-anchor")&&(We-=fe.transform.angle);const $e=!fe.options.moving;return{u_matrix:de||fe.transform.calculateProjMatrix(ve.tileID.toUnwrapped(),$e),u_image:0,u_latrange:Vs(0,ve.tileID),u_light:[X.paint.get("hillshade-exaggeration"),We],u_shadow:we,u_highlight:Ce,u_accent:He}})(g,f,b,g.terrain?o.projMatrix:null);g.prepareDrawProgram(O,U,o.toUnwrapped());const{tileBoundsBuffer:oe,tileBoundsIndexBuffer:he,tileBoundsSegments:me}=g.getTileBoundsBuffers(f);U.draw(O,F.TRIANGLES,E,S,k,p.CullFaceMode.disabled,q,b.id,oe,he,me)}function Ll(g,o,f){if(!o.needsDEMTextureUpload)return;const b=g.context,E=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||g.getTileTexture(f.stride);const S=f.getPixels();o.demTexture?o.demTexture.update(S,{premultiply:!1}):o.demTexture=new p.Texture(b,S,E.RGBA,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Bf(g,o,f,b,E,S){const k=g.context,O=k.gl;if(!o.dem)return;const F=o.dem;if(k.activeTexture.set(O.TEXTURE1),Ll(g,o,F),!o.demTexture)return;o.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);const V=F.dim;k.activeTexture.set(O.TEXTURE0);let U=o.fbo;if(!U){const me=new p.Texture(k,{width:V,height:V,data:null},O.RGBA);me.bind(O.LINEAR,O.CLAMP_TO_EDGE),U=o.fbo=k.createFramebuffer(V,V,!0),U.colorAttachment.set(me.texture)}k.bindFramebuffer.set(U.framebuffer),k.viewport.set([0,0,V,V]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:oe,tileBoundsSegments:he}=g.getMercatorTileBoundsBuffers();g.useProgram("hillshadePrepare").draw(k,O.TRIANGLES,b,E,S,p.CullFaceMode.disabled,((me,fe)=>{const ve=fe.stride,X=p.create();return p.ortho(X,0,p.EXTENT,-p.EXTENT,0,0,1),p.translate(X,X,[0,-p.EXTENT,0]),{u_matrix:X,u_image:1,u_dimension:[ve,ve],u_zoom:me.overscaledZ,u_unpack:fe.unpackVector}})(o.tileID,F),f.id,q,oe,he),o.needsHillshadePrepare=!1}const yp=g=>({u_matrix:new p.UniformMatrix4f(g),u_image0:new p.Uniform1i(g),u_skirt_height:new p.Uniform1f(g)}),Ec=(g,o)=>({u_matrix:g,u_image0:0,u_skirt_height:o}),Pu=(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:f,u_zoom_transition:E,u_merc_center:S,u_image0:0,u_frustum_tl:k,u_frustum_tr:O,u_frustum_br:F,u_frustum_bl:V,u_globe_pos:U,u_globe_radius:q,u_viewport:oe,u_grid_matrix:me?Float32Array.from(me):new Float32Array(9),u_skirt_height:he});function Us(g,o){return null!=g&&null!=o&&!(!g.hasData()||!o.hasData())&&null!=g.demTexture&&null!=o.demTexture&&g.tileID.key!==o.tileID.key}const ba=new class{constructor(){this.operations={}}newMorphing(g,o,f,b,E){if(g in this.operations){const S=this.operations[g];S.to.tileID.key!==f.tileID.key&&(S.queued=f)}else this.operations[g]={startTime:b,phase:0,duration:E,from:o,to:f,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const o=this.operations[g];return{from:o.from,to:o.to,phase:o.phase}}update(g){for(const o in this.operations){const f=this.operations[o];for(f.phase=(g-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,g)){delete this.operations[o];break}}}_nextOp(g,o){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=o,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},ls={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ld(g){return 6*Math.pow(1.5,22-g)}function Yo(g,o){const f=1<<g.z;return!o&&(0===g.x||g.x===f-1)||0===g.y||g.y===f-1}const Ou=g=>({u_matrix:g});function Fd(g,o,f,b,E){if(E>0){const S=p.exported.now(),k=(S-g.timeAdded)/E,O=o?(S-o.timeAdded)/E:-1,F=f.getSource(),V=b.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),U=!o||Math.abs(o.tileID.overscaledZ-V)>Math.abs(g.tileID.overscaledZ-V),q=U&&g.refreshedUponExpiration?1:p.clamp(U?k:1-O,0,1);return g.refreshedUponExpiration&&k>=1&&(g.refreshedUponExpiration=!1),o?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Hr extends p.SourceCache{constructor(o){const f={type:"raster-dem",maxzoom:o.transform.maxZoom},b=new ze(bs(),null),E=Kn("mock-dem",f,b,o.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,f){o.state="loaded",f(null)}}class Nd extends p.SourceCache{constructor(o){const f=Kn("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new ze(bs(),null),o.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,f,b){if(o.freezeTileCoverage)return;this.transform=o;const E=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,k)=>{if(S[k.key]="",!this._tiles[k.key]){const O=new p.Tile(k,this._source.tileSize*k.overscaleFactor(),o.tileZoom);O.state="loaded",this._tiles[k.key]=O}return S},{});for(const S in this._tiles)S in E||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(o){const f=this.proxyCachedFBO[o];if(void 0!==f){const b=Object.values(f);this.renderCachePool.push(...b),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fl extends p.OverscaledTileID{constructor(o,f,b){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=f,this.projMatrix=b}}class Lo extends p.Elevation{constructor(o,f){super(),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,E,S]=function(F){const V=new p.StructArrayLayout2i4,U=new p.StructArrayLayout3ui6,q=131;V.reserve(17161),U.reserve(33800);const oe=p.EXTENT/128,he=p.EXTENT+oe/2,me=he+oe;for(let ve=-oe;ve<me;ve+=oe)for(let X=-oe;X<me;X+=oe){const de=X<0||X>he||ve<0||ve>he?24575:0,we=p.clamp(Math.round(X),0,p.EXTENT),Ce=p.clamp(Math.round(ve),0,p.EXTENT);V.emplaceBack(we+de,Ce)}const fe=(ve,X)=>{const de=X*q+ve;U.emplaceBack(de+1,de,de+q),U.emplaceBack(de+q,de+q+1,de+1)};for(let ve=1;ve<129;ve++)for(let X=1;X<129;X++)fe(X,ve);return[0,129].forEach(ve=>{for(let X=0;X<130;X++)fe(X,ve),fe(ve,X)}),[V,U,32768]}(),k=o.context;this.gridBuffer=k.createVertexBuffer(b,p.posAttributes.members),this.gridIndexBuffer=k.createIndexBuffer(E),this.gridSegments=p.SegmentVector.simpleSegment(0,0,b.length,E.length),this.gridNoSkirtSegments=p.SegmentVector.simpleSegment(0,0,b.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Nd(f.map),this.orthoMatrix=p.create(),p.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,p.EXTENT,0,p.EXTENT,0,1);const O=k.gl;this._overlapStencilMode=new p.StencilMode({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Hr(f.map)}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),o.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=o,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,f,b){if(o&&o.terrain){this._style!==o&&(this.style=o),this.enabled=!0;const E=o.terrain.properties;this.sourceCache=0===o.terrain.drapeRenderMode?this._mockSourceCache:o._getSourceCache(E.get("source")),this._exaggeration=E.get("exaggeration");const S=()=>{this.sourceCache.used&&p.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const k=this.getScaledDemTileSize();this.sourceCache.update(f,k,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,S(),this._initializing=!0),S(),f.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const o=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==o.efficiency&&p.warnOnce(`Terrain render cache efficiency is not optimal (${o.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${o.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(o){o.coord&&"source"===o.dataType?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):"style"===o.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._sourceCaches)this._style._sourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=0===b._centerAltitude&&-1===this.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(b.center),-1),this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=f.getIds().map(F=>{const V=f.getTileByID(F).tileID;return V.projMatrix=b.calculateProjMatrix(V.toUnwrapped()),V});(function(F,V){const U=V.transform.pointCoordinate(V.transform.getCameraPoint()),q=new p.Point(U.x,U.y);F.sort((oe,he)=>{if(he.overscaledZ-oe.overscaledZ)return he.overscaledZ-oe.overscaledZ;const me=new p.Point(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),fe=new p.Point(he.canonical.x+(1<<he.canonical.z)*he.wrap,he.canonical.y),ve=q.mult(1<<oe.canonical.z);return ve.x-=.5,ve.y-=.5,ve.distSqr(me)-ve.distSqr(fe)})})(E,this.painter),this._previousZoom=b.zoom;const S=this.proxyToSource||{};this.proxyToSource={},E.forEach(F=>{this.proxyToSource[F.key]={}}),this.terrainTileForTile={};const k=this._style._sourceCaches;for(const F in k){const V=k[F];if(!V.used||(V!==this.sourceCache&&this.resetTileLookupCache(V.id),this._setupProxiedCoordsForOrtho(V,o[F],S),V.usedForTerrain))continue;const U=o[F];V.getSource().reparseOverscaled&&this._assignTerrainTiles(U)}this.proxiedCoords[f.id]=E.map(F=>new Fl(F,F.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1,this._updateTimestamp=p.exported.now();const O={};this._visibleDemTiles=[];for(const F of this.proxyCoords){const V=this.terrainTileForTile[F.key];if(!V)continue;const U=V.tileID.key;U in O||(this._visibleDemTiles.push(V),O[U]=U)}}_assignTerrainTiles(o){this._initializing||o.forEach(f=>{if(this.terrainTileForTile[f.key])return;const b=this._findTileCoveringTileID(f,this.sourceCache);b&&(this.terrainTileForTile[f.key]=b)})}_prepareDEMTextures(){const o=this.painter.context,f=o.gl;for(const b in this.terrainTileForTile){const E=this.terrainTileForTile[b],S=E.dem;!S||E.demTexture&&!E.needsDEMTextureUpload||(o.activeTexture.set(f.TEXTURE1),Ll(this.painter,E,S))}}_prepareDemTileUniforms(o,f,b,E){if(!f||null==f.demTexture)return!1;const S=o.tileID.canonical,k=Math.pow(2,f.tileID.canonical.z-S.z),O=E||"";return b[`u_dem_tl${O}`]=[S.x*k%1,S.y*k%1],b[`u_dem_scale${O}`]=k,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const o=this.painter.context,f=o.gl;if(!this._emptyDepthBufferTexture){const b=new p.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new p.Texture(o,b,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let o=0;const f=this._visibleDemTiles.reduce((b,E)=>{if(!E.dem)return b;const S=E.dem.tree.minimums[0];return S>0&&o++,b+S},0);return o?f/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,f=o.gl;o.activeTexture.set(f.TEXTURE2);const b=this._getLoadedAreaMinimum(),E=new p.RGBAImage({width:1,height:1},new Uint8Array(p.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(E,{premultiply:!1}):S=this._emptyDEMTexture=new p.Texture(o,E,f.RGBA,{premultiply:!1}),S}setupElevationDraw(o,f,b){const E=this.painter.context,S=E.gl,k=(O=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:p.DEMData.getUnpackVector(O),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var O;k.u_dem_size=this.sourceCache.getSource().tileSize,k.u_exaggeration=this.exaggeration();let F=null,V=null,U=1;if(b&&b.morphing&&this._useVertexMorphing){const q=b.morphing.srcDemTile,oe=b.morphing.dstDemTile;U=b.morphing.phase,q&&oe&&(this._prepareDemTileUniforms(o,q,k,"_prev")&&(V=q),this._prepareDemTileUniforms(o,oe,k)&&(F=oe))}if(V&&F?(E.activeTexture.set(S.TEXTURE2),F.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),E.activeTexture.set(S.TEXTURE4),V.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),k.u_dem_lerp=U):(F=this.terrainTileForTile[o.tileID.key],E.activeTexture.set(S.TEXTURE2),(this._prepareDemTileUniforms(o,F,k)?F.demTexture:this.emptyDEMTexture).bind(S.NEAREST,S.CLAMP_TO_EDGE)),E.activeTexture.set(S.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),this._depthFBO&&(k.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),k.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&F){const q=(1<<F.tileID.canonical.z)*p.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;k.u_meter_to_dem=q}if(b&&b.labelPlaneMatrixInv&&(k.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),f.setTerrainUniformValues(E,k),"globe"===this.painter.transform.projection.name){const q=this.globeUniformValues(this.painter.transform,o.tileID.canonical,b&&b.useDenormalizedUpVectorScale);f.setGlobeUniformValues(E,q)}}globeUniformValues(o,f,b){const E=o.projection;return{u_tile_tl_up:E.upVector(f,0,0),u_tile_tr_up:E.upVector(f,p.EXTENT,0),u_tile_br_up:E.upVector(f,p.EXTENT,p.EXTENT),u_tile_bl_up:E.upVector(f,0,p.EXTENT),u_tile_up_scale:b?p.globeMetersToEcef(1):E.upVectorScale(f,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const f=this.painter,b=this.painter.context;0!==o.length&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,S,k,O,F){if("globe"===E.transform.projection.name)!function(V,U,q,oe,he){const me=V.context,fe=me.gl;let ve,X;const de=V.options.showTerrainWireframe?2:0,we=V.transform,Ce=p.globeUseCustomAntiAliasing(V,me,we),He=(zt,mt)=>{if(X===zt)return;const Mt=[ls[zt],"PROJECTION_GLOBE_VIEW"];Ce&&Mt.push("CUSTOM_ANTIALIASING"),mt&&Mt.push(ls[de]),ve=V.useProgram("globeRaster",null,Mt),X=zt},We=V.colorModeForRenderPass(),$e=new p.DepthMode(fe.LEQUAL,p.DepthMode.ReadWrite,V.depthRangeFor3D);ba.update(he);const st=p.calculateGlobeMercatorMatrix(we),nt=[p.mercatorXfromLng(we.center.lng),p.mercatorYfromLat(we.center.lat)],gt=de?[!1,!0]:[!1],Ut=V.globeSharedBuffers,ht=[we.width*p.exported.devicePixelRatio,we.height*p.exported.devicePixelRatio],Dt=Float32Array.from(we.globeMatrix),wt={useDenormalizedUpVectorScale:!0};if(gt.forEach(zt=>{const mt=V.transform,Mt=Ld(mt.zoom)*U.exaggeration();X=-1;const jt=zt?fe.LINES:fe.TRIANGLES;for(const Lt of oe){const Yt=q.getTile(Lt),En=p.StencilMode.disabled,Fn=U.prevTerrainTileForTile[Lt.key],yn=U.terrainTileForTile[Lt.key];Us(Fn,yn)&&ba.newMorphing(Lt.key,Fn,yn,he,250),me.activeTexture.set(fe.TEXTURE0),Yt.texture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);const Dn=ba.getMorphValuesForProxy(Lt.key),oi=Dn?1:0;Dn&&p.extend$1(wt,{morphing:{srcDemTile:Dn.from,dstDemTile:Dn.to,phase:p.easeCubicInOut(Dn.phase)}});const ii=p.tileCornersToBounds(Lt.canonical),bn=p.getLatitudinalLod(ii.getCenter().lat),Pi=p.getGridMatrix(Lt.canonical,ii,bn,mt.worldSize/mt._pixelsPerMercatorPixel),qi=p.globeNormalizeECEF(p.globeTileBounds(Lt.canonical)),Bi=Pu(mt.projMatrix,Dt,st,qi,p.globeToMercatorTransition(mt.zoom),nt,mt.frustumCorners.TL,mt.frustumCorners.TR,mt.frustumCorners.BR,mt.frustumCorners.BL,mt.globeCenterInViewSpace,mt.globeRadius,ht,Mt,Pi);if(He(oi,zt),U.setupElevationDraw(Yt,ve,wt),V.prepareDrawProgram(me,ve,Lt.toUnwrapped()),Ut){const[Yi,io,Xr]=zt?Ut.getWirefameBuffers(V.context,bn):Ut.getGridBuffers(bn,0!==Mt);ve.draw(me,jt,$e,En,We,p.CullFaceMode.backCCW,Bi,"globe_raster",Yi,io,Xr)}}}),Ut){const zt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ce&&zt.push("CUSTOM_ANTIALIASING"),ve=V.useProgram("globeRaster",null,zt);for(const mt of oe){const{x:Mt,y:jt,z:Lt}=mt.canonical,Yt=0===jt,En=jt===(1<<Lt)-1,[Fn,yn,Dn,oi]=Ut.getPoleBuffers(Lt);if(oi&&(Yt||En)){const ii=q.getTile(mt);me.activeTexture.set(fe.TEXTURE0),ii.texture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);let bn=p.globePoleMatrixForTile(Lt,Mt,we);const Pi=p.globeNormalizeECEF(p.globeTileBounds(mt.canonical)),qi=(Bi,Yi)=>Bi.draw(me,fe.TRIANGLES,$e,p.StencilMode.disabled,We,p.CullFaceMode.disabled,Pu(we.projMatrix,bn,bn,Pi,0,nt,we.frustumCorners.TL,we.frustumCorners.TR,we.frustumCorners.BR,we.frustumCorners.BL,we.globeCenterInViewSpace,we.globeRadius,ht,0),"globe_pole_raster",Yi,Dn,oi);U.setupElevationDraw(ii,ve,wt),V.prepareDrawProgram(me,ve,mt.toUnwrapped()),Yt&&qi(ve,Fn),En&&(bn=p.scale(p.create(),bn,[1,-1,1]),qi(ve,yn))}}}}(E,S,k,O,F);else{const V=E.context,U=V.gl;let q,oe;const he=E.options.showTerrainWireframe?2:0,me=(we,Ce)=>{if(oe===we)return;const He=[ls[we]];Ce&&He.push(ls[he]),q=E.useProgram("terrainRaster",null,He),oe=we},fe=E.colorModeForRenderPass(),ve=new p.DepthMode(U.LEQUAL,p.DepthMode.ReadWrite,E.depthRangeFor3D);ba.update(F);const X=E.transform,de=Ld(X.zoom)*S.exaggeration();(he?[!1,!0]:[!1]).forEach(we=>{oe=-1;const Ce=we?U.LINES:U.TRIANGLES,[He,We]=we?S.getWirefameBuffer():[S.gridIndexBuffer,S.gridSegments];for(const $e of O){const st=k.getTile($e),nt=p.StencilMode.disabled,gt=S.prevTerrainTileForTile[$e.key],Ut=S.terrainTileForTile[$e.key];Us(gt,Ut)&&ba.newMorphing($e.key,gt,Ut,F,250),V.activeTexture.set(U.TEXTURE0),st.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const ht=ba.getMorphValuesForProxy($e.key),Dt=ht?1:0;let wt;ht&&(wt={morphing:{srcDemTile:ht.from,dstDemTile:ht.to,phase:p.easeCubicInOut(ht.phase)}});const zt=Ec($e.projMatrix,Yo($e.canonical,X.renderWorldCopies)?de/10:de);me(Dt,we),S.setupElevationDraw(st,q,wt),E.prepareDrawProgram(V,q,$e.toUnwrapped()),q.draw(V,Ce,ve,nt,fe,p.CullFaceMode.backCCW,zt,"terrain_raster",S.gridBuffer,He,We)}})}}(f,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(0===this._drapedRenderBatches.length)return o+1;this.renderingToTexture=!0;const f=this.painter,b=this.painter.context,E=this.proxySourceCache,S=this.proxiedCoords[E.id],k=this._drapedRenderBatches.shift(),O=[],F=f.style.order;let V=0;for(const U of S){const q=E.getTileByID(U.proxyTileKey),oe=E.proxyCachedFBO[U.key]?E.proxyCachedFBO[U.key][o]:void 0,he=void 0!==oe?E.renderCache[oe]:this.pool[V++],me=void 0!==oe;if(q.texture=he.tex,me&&!he.dirty){O.push(q.tileID);continue}let fe;b.bindFramebuffer.set(he.fb.framebuffer),this.renderedToTile=!1,he.dirty&&(b.clear({color:p.Color.transparent,stencil:0}),he.dirty=!1);for(let ve=k.start;ve<=k.end;++ve){const X=f.style._layers[F[ve]];if(X.isHidden(f.transform.zoom))continue;const de=f.style._getLayerSourceCache(X),we=de?this.proxyToSource[U.key][de.id]:[U];if(!we)continue;const Ce=we;b.viewport.set([0,0,he.fb.width,he.fb.height]),fe!==(de?de.id:null)&&(this._setupStencil(he,we,X,de),fe=de?de.id:null),f.renderLayer(f,de,X,Ce)}this.renderedToTile?(he.dirty=!0,O.push(q.tileID)):me||--V,5===V&&(V=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),k.end+1}postRender(){}renderCacheEfficiency(o){const f=o.order.length;if(0===f)return{efficiency:100};let b,E=0,S=0,k=!1;for(let O=0;O<f;++O){const F=o._layers[o.order[O]];this._style.isLayerDraped(F)?(k&&++E,++S):k||(k=!0,b=F.id)}return 0===S?{efficiency:100}:{efficiency:100*(1-E/S),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{o=Math.min(o,f.dem.tree.minimums[0])}),0===o?o:(o-30)*this._exaggeration}raycast(o,f,b){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const k=S.tileID,O=1<<k.overscaledZ,{x:F,y:V}=k.canonical,U=F/O,q=(F+1)/O,oe=V/O,he=(V+1)/O;return{minx:U,miny:oe,maxx:q,maxy:he,t:S.dem.tree.raycastRoot(U,oe,q,he,o,f,b),tile:S}});E.sort((S,k)=>(null!==S.t?S.t:Number.MAX_VALUE)-(null!==k.t?k.t:Number.MAX_VALUE));for(const S of E){if(null==S.t)return null;const k=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,o,f,b);if(null!=k)return k}return null}_createFBO(){const o=this.painter.context,f=o.gl,b=this.drapeBufferSize;o.activeTexture.set(f.TEXTURE0);const E=new p.Texture(o,{width:b[0],height:b[1],data:null},f.RGBA);E.bind(f.LINEAR,f.CLAMP_TO_EDGE);const S=o.createFramebuffer(b[0],b[1],!1);return S.colorAttachment.set(E.texture),S.depthAttachment=new Xe(o,S.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&!o.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:S,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const o in this._style._sourceCaches)if(this._style._sourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const f=this._style._layers[o],b=f.isHidden(this.painter.transform.zoom);return"custom"===f.type?!b&&f.shouldRedrape():!b&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const b of this._style._getSources())if(b instanceof Vt){o=!0;break}if(!o)return;const f={};for(let b=0;b<this._style.order.length;++b){const E=this._style._layers[this._style.order[b]],S=this._style._getLayerSourceCache(E);if(S&&!f[S.id]&&!E.isHidden(this.painter.transform.zoom)&&"line"===E.type&&E.widthExpression()instanceof p.ZoomDependentExpression){f[S.id]=!0;for(const k of this.proxyCoords){const O=this.proxyToSource[k.key][S.id];if(O)for(const F of O)this._clearRenderCacheForTile(S.id,F)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const b in this._style._sourceCaches)if(this._style._sourceCaches[b]._source instanceof $t){o=!0;break}if(!o)return;const f={};for(let b=0;b<this._style.order.length;++b){const E=this._style._layers[this._style.order[b]],S=this._style._getLayerSourceCache(E);if(!S||f[S.id]||E.isHidden(this.painter.transform.zoom)||"raster"!==E.type)continue;const k=E.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const F=this.proxyToSource[O.key][S.id];if(F)for(const V of F){const U=Fd(S.getTile(V),S.findLoadedParent(V,0),S,this.painter.transform,k);(1!==U.opacity||0!==U.mix)&&this._clearRenderCacheForTile(S.id,V)}}}}_setupDrapedRenderBatches(){const o=this._style.order,f=o.length;if(0===f)return;const b=[];let E,S=0,k=this._style._layers[o[S]];for(;!this._style.isLayerDraped(k)&&k.isHidden(this.painter.transform.zoom)&&++S<f;)k=this._style._layers[o[S]];for(;S<f;++S){const O=this._style._layers[o[S]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?void 0===E&&(E=S):void 0!==E&&(b.push({start:E,end:S-1}),E=void 0))}void 0!==E&&b.push({start:E,end:S-1}),this._drapedRenderBatches=b}_setupRenderCache(o){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const k=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let O=0;O<k.length;++O){const F=Object.values(k[O]);f.renderCachePool.push(...F)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,E=this._tilesDirty;for(let k=b.length-1;k>=0;k--){const O=b[k];if(f.getTileByID(O.key),void 0!==f.proxyCachedFBO[O.key]){const F=o[O.key],V=this.proxyToSource[O.key];let U=0;for(const q in V){const oe=V[q],he=F[q];if(!he||he.length!==oe.length||oe.some((me,fe)=>me!==he[fe]||E[q]&&E[q].hasOwnProperty(me.key))){U=-1;break}++U}for(const q in f.proxyCachedFBO[O.key])f.renderCache[f.proxyCachedFBO[O.key][q]].dirty=U<0||U!==Object.values(F).length}}const S=[...this._drapedRenderBatches];S.sort((k,O)=>O.end-O.start-(k.end-k.start));for(const k of S)for(const O of b){if(f.proxyCachedFBO[O.key])continue;let F=f.renderCachePool.pop();void 0===F&&f.renderCache.length<50&&(F=f.renderCache.length,f.renderCache.push(this._createFBO())),void 0!==F&&(f.proxyCachedFBO[O.key]={},f.proxyCachedFBO[O.key][k.start]=F,f.renderCache[F].dirty=!0)}this._tilesDirty={}}_setupStencil(o,f,b,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,k=S.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let O;if(b.isTileClipped())O=f.length,this._overlapStencilMode.test={func:k.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:k.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):p.StencilMode.disabled}_renderTileClippingMasks(o,f){const b=this.painter,E=this.painter.context,S=E.gl;b._tileClippingMaskIDs={},E.setColorMode(p.ColorMode.disabled),E.setDepthMode(p.DepthMode.disabled);const k=b.useProgram("clippingMask");for(const O of o){const F=b._tileClippingMaskIDs[O.key]=--f;k.draw(E,S.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:S.ALWAYS,mask:0},F,255,S.KEEP,S.KEEP,S.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,Ou(O.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(o){const f=this.painter.transform;if(o.x<0||o.x>f.width||o.y<0||o.y>f.height)return null;const b=[o.x,o.y,1,1];p.transformMat4$1(b,b,f.pixelMatrixInverse),p.scale$1(b,b,1/b[3]),b[0]/=f.worldSize,b[1]/=f.worldSize;const E=f._camera.position,S=p.mercatorZfromAltitude(1,f.center.lat),k=[E[0],E[1],E[2]/S,0],O=p.subtract([],b.slice(0,3),k);p.normalize(O,O);const F=this.raycast(k,O,this._exaggeration);return null!==F&&F?(p.scaleAndAdd(k,k,O,F),k[3]=k[2],k[2]*=S,k):null}drawDepth(){const o=this.painter,f=o.context,b=this.proxySourceCache,E=Math.ceil(o.width),S=Math.ceil(o.height);if(!this._depthFBO||this._depthFBO.width===E&&this._depthFBO.height===S||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const k=f.gl,O=f.createFramebuffer(E,S,!0);f.activeTexture.set(k.TEXTURE0);const F=new p.Texture(f,{width:E,height:S,data:null},k.RGBA);F.bind(k.NEAREST,k.CLAMP_TO_EDGE),O.colorAttachment.set(F.texture);const V=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,E,S);O.depthAttachment.set(V),this._depthFBO=O,this._depthTexture=F}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,E,S]),function(k,O,F,V){if("globe"===k.transform.projection.name)return;const U=k.context,q=U.gl;U.clear({depth:1});const oe=k.useProgram("terrainDepth"),he=new p.DepthMode(q.LESS,p.DepthMode.ReadWrite,k.depthRangeFor3D);for(const me of V){const fe=F.getTile(me),ve=Ec(me.projMatrix,0);O.setupElevationDraw(fe,oe),oe.draw(U,q.TRIANGLES,he,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.backCCW,ve,"terrain_depth",O.gridBuffer,O.gridIndexBuffer,O.gridNoSkirtSegments)}}(o,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(o,f,b){if(o.getSource()instanceof Xn)return this._setupProxiedCoordsForImageSource(o,f,b);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const E=this.proxiedCoords[o.id]=[],S=this.proxyCoords;for(let O=0;O<S.length;O++){const F=S[O],V=this._findTileCoveringTileID(F,o);if(V){const U=this._createProxiedId(F,V,b[F.key]&&b[F.key][o.id]);E.push(U),this.proxyToSource[F.key][o.id]=[U]}}let k=!1;for(let O=0;O<f.length;O++){const F=o.getTile(f[O]);if(!F||!F.hasData())continue;const V=this._findTileCoveringTileID(F.tileID,this.proxySourceCache);if(V&&V.tileID.canonical.z!==F.tileID.canonical.z){const U=this.proxyToSource[V.tileID.key][o.id],q=this._createProxiedId(V.tileID,F,b[V.tileID.key]&&b[V.tileID.key][o.id]);U?U.splice(U.length-1,0,q):this.proxyToSource[V.tileID.key][o.id]=[q],E.push(q),k=!0}}this._sourceTilesOverlap[o.id]=k}_setupProxiedCoordsForImageSource(o,f,b){if(!o.getSource().loaded())return;const E=this.proxiedCoords[o.id]=[],S=this.proxyCoords,k=o.getSource(),O=new p.Point(k.tileID.x,k.tileID.y)._div(1<<k.tileID.z),F=k.coordinates.map(p.MercatorCoordinate.fromLngLat).reduce((U,q)=>(U.min.x=Math.min(U.min.x,q.x-O.x),U.min.y=Math.min(U.min.y,q.y-O.y),U.max.x=Math.max(U.max.x,q.x-O.x),U.max.y=Math.max(U.max.y,q.y-O.y),U),{min:new p.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new p.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),V=(U,q)=>{const oe=U.wrap+U.canonical.x/(1<<U.canonical.z),he=U.canonical.y/(1<<U.canonical.z),me=p.EXTENT/(1<<U.canonical.z),fe=q.wrap+q.canonical.x/(1<<q.canonical.z),ve=q.canonical.y/(1<<q.canonical.z);return oe+me<fe+F.min.x||oe>fe+F.max.x||he+me<ve+F.min.y||he>ve+F.max.y};for(let U=0;U<S.length;U++){const q=S[U];for(let oe=0;oe<f.length;oe++){const he=o.getTile(f[oe]);if(!he||!he.hasData()||V(q,he.tileID))continue;const me=this._createProxiedId(q,he,b[q.key]&&b[q.key][o.id]),fe=this.proxyToSource[q.key][o.id];fe?fe.push(me):this.proxyToSource[q.key][o.id]=[me],E.push(me)}}}_createProxiedId(o,f,b){let E=this.orthoMatrix;if(b){const S=b.find(k=>k.key===f.tileID.key);if(S)return S}if(f.tileID.key!==o.key){const S=o.canonical.z-f.tileID.canonical.z;let k,O,F;E=p.create();const V=f.tileID.wrap-o.wrap<<o.overscaledZ;S>0?(k=p.EXTENT>>S,O=k*((f.tileID.canonical.x<<S)-o.canonical.x+V),F=k*((f.tileID.canonical.y<<S)-o.canonical.y)):(k=p.EXTENT<<-S,O=p.EXTENT*(f.tileID.canonical.x-(o.canonical.x+V<<-S)),F=p.EXTENT*(f.tileID.canonical.y-(o.canonical.y<<-S))),p.ortho(E,0,k,0,k,0,1),p.translate(E,E,[O,F,0])}return new Fl(f.tileID,o.key,E)}_findTileCoveringTileID(o,f){let b=f.getTile(o);if(b&&b.hasData())return b;const E=this._findCoveringTileCache[f.id],S=E[o.key];if(b=S?f.getTileByID(S):null,b&&b.hasData()||null===S)return b;let k=b?b.tileID:o,O=k.overscaledZ;const F=f.getSource().minzoom,V=[];if(!S){const q=f.getSource().maxzoom;if(o.canonical.z>=q){const oe=o.canonical.z-q;f.getSource().reparseOverscaled?(O=Math.max(o.canonical.z+2,f.transform.tileZoom),k=new p.OverscaledTileID(O,o.wrap,q,o.canonical.x>>oe,o.canonical.y>>oe)):0!==oe&&(O=q,k=new p.OverscaledTileID(O,o.wrap,q,o.canonical.x>>oe,o.canonical.y>>oe))}k.key!==o.key&&(V.push(k.key),b=f.getTile(k))}const U=q=>{V.forEach(oe=>{E[oe]=q}),V.length=0};for(O-=1;O>=F&&(!b||!b.hasData());O--){b&&U(b.tileID.key);const q=k.calculateScaledKey(O);if(b=f.getTileByID(q),b&&b.hasData())break;const oe=E[q];if(null===oe)break;void 0===oe?V.push(q):b=f.getTileByID(oe)}return U(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,f){let b=this._tilesDirty[o];b||(b=this._tilesDirty[o]={}),b[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const o=function(f){let b=0;const E=new p.StructArrayLayout2ui4,S=131;for(let k=1;k<129;k++){for(let O=1;O<129;O++)b=k*S+O,E.emplaceBack(b,b+1),E.emplaceBack(b,b+S),E.emplaceBack(b+1,b+S),128===k&&E.emplaceBack(b+S,b+S+1);E.emplaceBack(b+1,b+1+S)}return E}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(o),this.wireframeSegments=p.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,o.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ei{static cacheKey(o,f,b,E){let S=`${f}${E?E.cacheKey:""}`;for(const k of b)o.usedDefines.includes(k)&&(S+=`/${k}`);return S}constructor(o,f,b,E,S,k){const O=o.gl;this.program=O.createProgram();const F=function(X){const de=[];for(let we=0;we<X.length;we++){if(null===X[we])continue;const Ce=X[we].split(" ");de.push(Ce.pop())}return de}(b.staticAttributes),V=E?E.getBinderAttributes():[],U=F.concat(V);let q=E?E.defines():[];q=q.concat(k.map(X=>`#define ${X}`));const oe=o.isWebGL2?"#version 300 es\n":"",he=oe+q.concat(o.extStandardDerivatives&&0===oe.length?"#extension GL_OES_standard_derivatives : enable\n".concat(Od):Od,Od,Ff,Yy.fragmentSource,Au.fragmentSource,b.fragmentSource).join("\n"),me=oe+q.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ff,Yy.vertexSource,Au.vertexSource,Lf.vertexSource,b.vertexSource).join("\n"),fe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(fe,he),O.compileShader(fe),O.attachShader(this.program,fe);const ve=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(ve,me),O.compileShader(ve),O.attachShader(this.program,ve),this.attributes={},this.numAttributes=U.length;for(let X=0;X<this.numAttributes;X++)U[X]&&(O.bindAttribLocation(this.program,X,U[X]),this.attributes[U[X]]=X);O.linkProgram(this.program),O.deleteShader(ve),O.deleteShader(fe),this.fixedUniforms=S(o),this.binderUniforms=E?E.getUniforms(o):[],k.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new p.Uniform1i(X=o),u_dem_prev:new p.Uniform1i(X),u_dem_unpack:new p.Uniform4f(X),u_dem_tl:new p.Uniform2f(X),u_dem_scale:new p.Uniform1f(X),u_dem_tl_prev:new p.Uniform2f(X),u_dem_scale_prev:new p.Uniform1f(X),u_dem_size:new p.Uniform1f(X),u_dem_lerp:new p.Uniform1f(X),u_exaggeration:new p.Uniform1f(X),u_depth:new p.Uniform1i(X),u_depth_size_inv:new p.Uniform2f(X),u_meter_to_dem:new p.Uniform1f(X),u_label_plane_matrix_inv:new p.UniformMatrix4f(X)}),k.includes("GLOBE")&&(this.globeUniforms=(X=>({u_tile_tl_up:new p.Uniform3f(X),u_tile_tr_up:new p.Uniform3f(X),u_tile_br_up:new p.Uniform3f(X),u_tile_bl_up:new p.Uniform3f(X),u_tile_up_scale:new p.Uniform1f(X)}))(o)),k.includes("FOG")&&(this.fogUniforms=(X=>({u_fog_matrix:new p.UniformMatrix4f(X),u_fog_range:new p.Uniform2f(X),u_fog_color:new p.Uniform4f(X),u_fog_horizon_blend:new p.Uniform1f(X),u_fog_temporal_offset:new p.Uniform1f(X),u_frustum_tl:new p.Uniform3f(X),u_frustum_tr:new p.Uniform3f(X),u_frustum_br:new p.Uniform3f(X),u_frustum_bl:new p.Uniform3f(X),u_globe_pos:new p.Uniform3f(X),u_globe_radius:new p.Uniform1f(X),u_globe_transition:new p.Uniform1f(X),u_is_globe:new p.Uniform1i(X),u_viewport:new p.Uniform2f(X)}))(o))}var X}setTerrainUniformValues(o,f){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const E in f)b[E]&&b[E].set(this.program,E,f[E])}}setGlobeUniformValues(o,f){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const E in f)b[E]&&b[E].set(this.program,E,f[E])}}setFogUniformValues(o,f){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const E in f)b[E].set(this.program,E,f[E])}}draw(o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe){const ve=o.gl;if(this.failedToCreate)return;o.program.set(this.program),o.setDepthMode(b),o.setStencilMode(E),o.setColorMode(S),o.setCullFace(k);for(const de of Object.keys(this.fixedUniforms))this.fixedUniforms[de].set(this.program,de,O[de]);me&&me.setUniforms(this.program,o,this.binderUniforms,oe,{zoom:he});const X={[ve.LINES]:2,[ve.TRIANGLES]:3,[ve.LINE_STRIP]:1}[f];for(const de of q.get()){const we=de.vaos||(de.vaos={});(we[F]||(we[F]=new Ev)).bind(o,this,V,me?me.getPaintVertexBuffers():[],U,de.vertexOffset,fe||[]),ve.drawElements(f,de.primitiveLength*X,ve.UNSIGNED_SHORT,de.primitiveOffset*X*2)}}}function Cc(g,o){const f=Math.pow(2,o.tileID.overscaledZ),b=o.tileSize*Math.pow(2,g.transform.tileZoom)/f,E=b*(o.tileID.canonical.x+o.tileID.wrap*f),S=b*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_tile_units_to_pixels:1/Et(o,1,g.transform.tileZoom),u_pixel_coord_upper:[E>>16,S>>16],u_pixel_coord_lower:[65535&E,65535&S]}}const Nl=p.create(),ho=(g,o,f,b,E,S,k,O,F,V,U)=>{const q=o.style.light,oe=q.properties.get("position"),he=[oe.x,oe.y,oe.z],me=p.create$1();"viewport"===q.properties.get("anchor")&&(p.fromRotation(me,-o.transform.angle),p.transformMat3(he,he,me));const fe=q.properties.get("color"),ve=o.transform,X={u_matrix:g,u_lightpos:he,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[fe.r,fe.g,fe.b],u_vertical_gradient:+f,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Nl,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:E,u_edge_radius:S};return"globe"===ve.projection.name&&(X.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],X.u_zoom_transition=F,X.u_inv_rot_matrix=U,X.u_merc_center=V,X.u_up_dir=ve.projection.upVector(new p.CanonicalTileID(0,0,0),V[0]*p.EXTENT,V[1]*p.EXTENT),X.u_height_lift=O),X},ug=(g,o,f,b,E,S,k,O,F,V,U,q)=>{const oe=ho(g,o,f,b,E,S,k,F,V,U,q),he={u_height_factor:-Math.pow(2,k.overscaledZ)/O.tileSize/8};return p.extend(oe,Cc(o,O),he)},Hs=g=>({u_matrix:g}),_p=(g,o,f)=>p.extend(Hs(g),Cc(o,f)),rl=(g,o)=>({u_matrix:g,u_world:o}),zf=(g,o,f,b)=>p.extend(_p(g,o,f),{u_world:b}),jf=p.create(),ti=(g,o,f,b,E,S)=>{const k=g.transform,O="globe"===k.projection.name;let F;if("map"===S.paint.get("circle-pitch-alignment"))if(O){const U=p.globePixelsToTileUnits(k.zoom,o.canonical)*k._pixelsPerMercatorPixel;F=Float32Array.from([U,0,0,U])}else F=k.calculatePixelsToTileUnitsMatrix(f);else F=new Float32Array([k.pixelsToGLUnits[0],0,0,k.pixelsToGLUnits[1]]);const V={u_camera_to_center_distance:k.cameraToCenterDistance,u_matrix:g.translatePosMatrix(o.projMatrix,f,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_device_pixel_ratio:p.exported.devicePixelRatio,u_extrude_scale:F,u_inv_rot_matrix:jf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){V.u_inv_rot_matrix=b,V.u_merc_center=E,V.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],V.u_zoom_transition=p.globeToMercatorTransition(k.zoom);const U=E[0]*p.EXTENT,q=E[1]*p.EXTENT;V.u_up_dir=k.projection.upVector(new p.CanonicalTileID(0,0,0),U,q)}return V},mr=g=>{const o=[];return"map"===g.paint.get("circle-pitch-alignment")&&o.push("PITCH_WITH_MAP"),"map"===g.paint.get("circle-pitch-scale")&&o.push("SCALE_WITH_MAP"),o},dg=(g,o,f,b)=>{const E=p.EXTENT/f.tileSize;return{u_matrix:g,u_camera_to_center_distance:o.getCameraToCenterDistance(b),u_extrude_scale:[o.pixelsToGLUnits[0]/E,o.pixelsToGLUnits[1]/E]}},vp=(g,o,f=1)=>({u_matrix:g,u_color:o,u_overlay:0,u_overlay_scale:f}),hg=p.create(),pg=(g,o,f,b,E,S,k)=>{const O=g.transform,F="globe"===O.projection.name,V=F?p.globePixelsToTileUnits(O.zoom,o.canonical)*O._pixelsPerMercatorPixel:Et(f,1,S),U={u_matrix:o.projMatrix,u_extrude_scale:V,u_intensity:k,u_inv_rot_matrix:hg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(F){U.u_inv_rot_matrix=b,U.u_merc_center=E,U.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],U.u_zoom_transition=p.globeToMercatorTransition(O.zoom);const q=E[0]*p.EXTENT,oe=E[1]*p.EXTENT;U.u_up_dir=O.projection.upVector(new p.CanonicalTileID(0,0,0),q,oe)}return U},fg=(g,o,f,b,E,S,k)=>{const O=g.transform,F=O.calculatePixelsToTileUnitsMatrix(o);return{u_matrix:Zt(g,o,f,b),u_pixels_to_tile_units:F,u_device_pixel_ratio:S,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:E,u_texsize:Ci(f)?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Bl(o,g.transform),u_alpha_discard_threshold:0,u_trim_offset:k}},Ru=(g,o,f,b,E)=>{const S=g.transform;return{u_matrix:Zt(g,o,f,b),u_texsize:o.imageAtlasTexture.size,u_pixels_to_tile_units:S.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:E,u_image:0,u_tile_units_to_pixels:Bl(o,S),u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Bl(g,o){return 1/Et(g,1,o.tileZoom)}function Zt(g,o,f,b){return g.translatePosMatrix(b||o.tileID.projMatrix,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Ci(g){const o=g.paint.get("line-dasharray").value;return o.value||"constant"!==o.kind}const bp=(g,o,f,b,E,S)=>{return{u_matrix:g,u_tl_parent:o,u_scale_parent:f,u_fade_t:b.mix,u_opacity:b.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(O=E.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(k=E.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:cs(E.paint.get("raster-hue-rotate")),u_perspective_transform:S};var k,O};function cs(g){g*=Math.PI/180;const o=Math.sin(g),f=Math.cos(g);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const jr=p.create(),Bd=(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe)=>{const ve=E.transform,X={u_is_size_zoom_constant:+("constant"===g||"source"===g),u_is_size_feature_constant:+("constant"===g||"camera"===g),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ve.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:ve.width/ve.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:k,u_coord_matrix:O,u_is_text:+F,u_pitch_with_map:+b,u_texsize:V,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:jr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:jr,u_up_vector:[0,-1,0]};return"globe"===fe.name&&(X.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],X.u_zoom_transition=q,X.u_inv_rot_matrix=he,X.u_merc_center=oe,X.u_camera_forward=ve._camera.forward(),X.u_ecef_origin=p.globeECEFOrigin(ve.globeMatrix,U.toUnwrapped()),X.u_tile_matrix=Float32Array.from(ve.globeMatrix),X.u_up_vector=me),X},$s=(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe,ve)=>p.extend(Bd(g,o,f,b,E,S,k,O,F,V,q,oe,he,me,fe,ve),{u_gamma_scale:b?E.transform.cameraToCenterDistance*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:p.exported.devicePixelRatio,u_is_halo:+U}),So=(g,o,f,b,E,S,k,O,F,V,U,q,oe,he,me,fe)=>p.extend($s(g,o,f,b,E,S,k,O,!0,F,!0,U,q,oe,he,me,fe),{u_texsize_icon:V,u_texture_icon:1}),zd=(g,o,f)=>({u_matrix:g,u_opacity:o,u_color:f}),Vf=(g,o,f,b,E)=>p.extend(function(S,k,O){const F=k.imageManager.getPattern(S.toString()),{width:V,height:U}=k.imageManager.getPixelSize(),q=Math.pow(2,O.tileID.overscaledZ),oe=O.tileSize*Math.pow(2,k.transform.tileZoom)/q,he=oe*(O.tileID.canonical.x+O.tileID.wrap*q),me=oe*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:F.tl,u_pattern_br:F.br,u_texsize:[V,U],u_pattern_size:F.displaySize,u_tile_units_to_pixels:1/Et(O,1,k.transform.tileZoom),u_pixel_coord_upper:[he>>16,me>>16],u_pixel_coord_lower:[65535&he,65535&me]}}(b,f,E),{u_matrix:g,u_opacity:o}),jd={fillExtrusion:g=>({u_matrix:new p.UniformMatrix4f(g),u_lightpos:new p.Uniform3f(g),u_lightintensity:new p.Uniform1f(g),u_lightcolor:new p.Uniform3f(g),u_vertical_gradient:new p.Uniform1f(g),u_opacity:new p.Uniform1f(g),u_edge_radius:new p.Uniform1f(g),u_ao:new p.Uniform2f(g),u_tile_id:new p.Uniform3f(g),u_zoom_transition:new p.Uniform1f(g),u_inv_rot_matrix:new p.UniformMatrix4f(g),u_merc_center:new p.Uniform2f(g),u_up_dir:new p.Uniform3f(g),u_height_lift:new p.Uniform1f(g)}),fillExtrusionPattern:g=>({u_matrix:new p.UniformMatrix4f(g),u_lightpos:new p.Uniform3f(g),u_lightintensity:new p.Uniform1f(g),u_lightcolor:new p.Uniform3f(g),u_vertical_gradient:new p.Uniform1f(g),u_height_factor:new p.Uniform1f(g),u_edge_radius:new p.Uniform1f(g),u_ao:new p.Uniform2f(g),u_tile_id:new p.Uniform3f(g),u_zoom_transition:new p.Uniform1f(g),u_inv_rot_matrix:new p.UniformMatrix4f(g),u_merc_center:new p.Uniform2f(g),u_up_dir:new p.Uniform3f(g),u_height_lift:new p.Uniform1f(g),u_image:new p.Uniform1i(g),u_texsize:new p.Uniform2f(g),u_pixel_coord_upper:new p.Uniform2f(g),u_pixel_coord_lower:new p.Uniform2f(g),u_tile_units_to_pixels:new p.Uniform1f(g),u_opacity:new p.Uniform1f(g)}),fill:g=>({u_matrix:new p.UniformMatrix4f(g)}),fillPattern:g=>({u_matrix:new p.UniformMatrix4f(g),u_image:new p.Uniform1i(g),u_texsize:new p.Uniform2f(g),u_pixel_coord_upper:new p.Uniform2f(g),u_pixel_coord_lower:new p.Uniform2f(g),u_tile_units_to_pixels:new p.Uniform1f(g)}),fillOutline:g=>({u_matrix:new p.UniformMatrix4f(g),u_world:new p.Uniform2f(g)}),fillOutlinePattern:g=>({u_matrix:new p.UniformMatrix4f(g),u_world:new p.Uniform2f(g),u_image:new p.Uniform1i(g),u_texsize:new p.Uniform2f(g),u_pixel_coord_upper:new p.Uniform2f(g),u_pixel_coord_lower:new p.Uniform2f(g),u_tile_units_to_pixels:new p.Uniform1f(g)}),circle:g=>({u_camera_to_center_distance:new p.Uniform1f(g),u_extrude_scale:new p.UniformMatrix2f(g),u_device_pixel_ratio:new p.Uniform1f(g),u_matrix:new p.UniformMatrix4f(g),u_inv_rot_matrix:new p.UniformMatrix4f(g),u_merc_center:new p.Uniform2f(g),u_tile_id:new p.Uniform3f(g),u_zoom_transition:new p.Uniform1f(g),u_up_dir:new p.Uniform3f(g)}),collisionBox:g=>({u_matrix:new p.UniformMatrix4f(g),u_camera_to_center_distance:new p.Uniform1f(g),u_extrude_scale:new p.Uniform2f(g)}),collisionCircle:g=>({u_matrix:new p.UniformMatrix4f(g),u_inv_matrix:new p.UniformMatrix4f(g),u_camera_to_center_distance:new p.Uniform1f(g),u_viewport_size:new p.Uniform2f(g)}),debug:g=>({u_color:new p.UniformColor(g),u_matrix:new p.UniformMatrix4f(g),u_overlay:new p.Uniform1i(g),u_overlay_scale:new p.Uniform1f(g)}),clippingMask:g=>({u_matrix:new p.UniformMatrix4f(g)}),heatmap:g=>({u_extrude_scale:new p.Uniform1f(g),u_intensity:new p.Uniform1f(g),u_matrix:new p.UniformMatrix4f(g),u_inv_rot_matrix:new p.UniformMatrix4f(g),u_merc_center:new p.Uniform2f(g),u_tile_id:new p.Uniform3f(g),u_zoom_transition:new p.Uniform1f(g),u_up_dir:new p.Uniform3f(g)}),heatmapTexture:g=>({u_image:new p.Uniform1i(g),u_color_ramp:new p.Uniform1i(g),u_opacity:new p.Uniform1f(g)}),hillshade:g=>({u_matrix:new p.UniformMatrix4f(g),u_image:new p.Uniform1i(g),u_latrange:new p.Uniform2f(g),u_light:new p.Uniform2f(g),u_shadow:new p.UniformColor(g),u_highlight:new p.UniformColor(g),u_accent:new p.UniformColor(g)}),hillshadePrepare:g=>({u_matrix:new p.UniformMatrix4f(g),u_image:new p.Uniform1i(g),u_dimension:new p.Uniform2f(g),u_zoom:new p.Uniform1f(g),u_unpack:new p.Uniform4f(g)}),line:g=>({u_matrix:new p.UniformMatrix4f(g),u_pixels_to_tile_units:new p.UniformMatrix2f(g),u_device_pixel_ratio:new p.Uniform1f(g),u_units_to_pixels:new p.Uniform2f(g),u_dash_image:new p.Uniform1i(g),u_gradient_image:new p.Uniform1i(g),u_image_height:new p.Uniform1f(g),u_texsize:new p.Uniform2f(g),u_tile_units_to_pixels:new p.Uniform1f(g),u_alpha_discard_threshold:new p.Uniform1f(g),u_trim_offset:new p.Uniform2f(g)}),linePattern:g=>({u_matrix:new p.UniformMatrix4f(g),u_texsize:new p.Uniform2f(g),u_pixels_to_tile_units:new p.UniformMatrix2f(g),u_device_pixel_ratio:new p.Uniform1f(g),u_image:new p.Uniform1i(g),u_units_to_pixels:new p.Uniform2f(g),u_tile_units_to_pixels:new p.Uniform1f(g),u_alpha_discard_threshold:new p.Uniform1f(g)}),raster:g=>({u_matrix:new p.UniformMatrix4f(g),u_tl_parent:new p.Uniform2f(g),u_scale_parent:new p.Uniform1f(g),u_fade_t:new p.Uniform1f(g),u_opacity:new p.Uniform1f(g),u_image0:new p.Uniform1i(g),u_image1:new p.Uniform1i(g),u_brightness_low:new p.Uniform1f(g),u_brightness_high:new p.Uniform1f(g),u_saturation_factor:new p.Uniform1f(g),u_contrast_factor:new p.Uniform1f(g),u_spin_weights:new p.Uniform3f(g),u_perspective_transform:new p.Uniform2f(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new p.Uniform1i(g),u_is_size_feature_constant:new p.Uniform1i(g),u_size_t:new p.Uniform1f(g),u_size:new p.Uniform1f(g),u_camera_to_center_distance:new p.Uniform1f(g),u_rotate_symbol:new p.Uniform1i(g),u_aspect_ratio:new p.Uniform1f(g),u_fade_change:new p.Uniform1f(g),u_matrix:new p.UniformMatrix4f(g),u_label_plane_matrix:new p.UniformMatrix4f(g),u_coord_matrix:new p.UniformMatrix4f(g),u_is_text:new p.Uniform1i(g),u_pitch_with_map:new p.Uniform1i(g),u_texsize:new p.Uniform2f(g),u_tile_id:new p.Uniform3f(g),u_zoom_transition:new p.Uniform1f(g),u_inv_rot_matrix:new p.UniformMatrix4f(g),u_merc_center:new p.Uniform2f(g),u_camera_forward:new p.Uniform3f(g),u_tile_matrix:new p.UniformMatrix4f(g),u_up_vector:new p.Uniform3f(g),u_ecef_origin:new p.Uniform3f(g),u_texture:new p.Uniform1i(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new p.Uniform1i(g),u_is_size_feature_constant:new p.Uniform1i(g),u_size_t:new p.Uniform1f(g),u_size:new p.Uniform1f(g),u_camera_to_center_distance:new p.Uniform1f(g),u_rotate_symbol:new p.Uniform1i(g),u_aspect_ratio:new p.Uniform1f(g),u_fade_change:new p.Uniform1f(g),u_matrix:new p.UniformMatrix4f(g),u_label_plane_matrix:new p.UniformMatrix4f(g),u_coord_matrix:new p.UniformMatrix4f(g),u_is_text:new p.Uniform1i(g),u_pitch_with_map:new p.Uniform1i(g),u_texsize:new p.Uniform2f(g),u_texture:new p.Uniform1i(g),u_gamma_scale:new p.Uniform1f(g),u_device_pixel_ratio:new p.Uniform1f(g),u_tile_id:new p.Uniform3f(g),u_zoom_transition:new p.Uniform1f(g),u_inv_rot_matrix:new p.UniformMatrix4f(g),u_merc_center:new p.Uniform2f(g),u_camera_forward:new p.Uniform3f(g),u_tile_matrix:new p.UniformMatrix4f(g),u_up_vector:new p.Uniform3f(g),u_ecef_origin:new p.Uniform3f(g),u_is_halo:new p.Uniform1i(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new p.Uniform1i(g),u_is_size_feature_constant:new p.Uniform1i(g),u_size_t:new p.Uniform1f(g),u_size:new p.Uniform1f(g),u_camera_to_center_distance:new p.Uniform1f(g),u_rotate_symbol:new p.Uniform1i(g),u_aspect_ratio:new p.Uniform1f(g),u_fade_change:new p.Uniform1f(g),u_matrix:new p.UniformMatrix4f(g),u_label_plane_matrix:new p.UniformMatrix4f(g),u_coord_matrix:new p.UniformMatrix4f(g),u_is_text:new p.Uniform1i(g),u_pitch_with_map:new p.Uniform1i(g),u_texsize:new p.Uniform2f(g),u_texsize_icon:new p.Uniform2f(g),u_texture:new p.Uniform1i(g),u_texture_icon:new p.Uniform1i(g),u_gamma_scale:new p.Uniform1f(g),u_device_pixel_ratio:new p.Uniform1f(g),u_is_halo:new p.Uniform1i(g)}),background:g=>({u_matrix:new p.UniformMatrix4f(g),u_opacity:new p.Uniform1f(g),u_color:new p.UniformColor(g)}),backgroundPattern:g=>({u_matrix:new p.UniformMatrix4f(g),u_opacity:new p.Uniform1f(g),u_image:new p.Uniform1i(g),u_pattern_tl:new p.Uniform2f(g),u_pattern_br:new p.Uniform2f(g),u_texsize:new p.Uniform2f(g),u_pattern_size:new p.Uniform2f(g),u_pixel_coord_upper:new p.Uniform2f(g),u_pixel_coord_lower:new p.Uniform2f(g),u_tile_units_to_pixels:new p.Uniform1f(g)}),terrainRaster:yp,terrainDepth:yp,skybox:g=>({u_matrix:new p.UniformMatrix4f(g),u_sun_direction:new p.Uniform3f(g),u_cubemap:new p.Uniform1i(g),u_opacity:new p.Uniform1f(g),u_temporal_offset:new p.Uniform1f(g)}),skyboxGradient:g=>({u_matrix:new p.UniformMatrix4f(g),u_color_ramp:new p.Uniform1i(g),u_center_direction:new p.Uniform3f(g),u_radius:new p.Uniform1f(g),u_opacity:new p.Uniform1f(g),u_temporal_offset:new p.Uniform1f(g)}),skyboxCapture:g=>({u_matrix_3f:new p.UniformMatrix3f(g),u_sun_direction:new p.Uniform3f(g),u_sun_intensity:new p.Uniform1f(g),u_color_tint_r:new p.Uniform4f(g),u_color_tint_m:new p.Uniform4f(g),u_luminance:new p.Uniform1f(g)}),globeRaster:g=>({u_proj_matrix:new p.UniformMatrix4f(g),u_globe_matrix:new p.UniformMatrix4f(g),u_normalize_matrix:new p.UniformMatrix4f(g),u_merc_matrix:new p.UniformMatrix4f(g),u_zoom_transition:new p.Uniform1f(g),u_merc_center:new p.Uniform2f(g),u_image0:new p.Uniform1i(g),u_grid_matrix:new p.UniformMatrix3f(g),u_skirt_height:new p.Uniform1f(g),u_frustum_tl:new p.Uniform3f(g),u_frustum_tr:new p.Uniform3f(g),u_frustum_br:new p.Uniform3f(g),u_frustum_bl:new p.Uniform3f(g),u_globe_pos:new p.Uniform3f(g),u_globe_radius:new p.Uniform1f(g),u_viewport:new p.Uniform2f(g)}),globeAtmosphere:g=>({u_frustum_tl:new p.Uniform3f(g),u_frustum_tr:new p.Uniform3f(g),u_frustum_br:new p.Uniform3f(g),u_frustum_bl:new p.Uniform3f(g),u_horizon:new p.Uniform1f(g),u_transition:new p.Uniform1f(g),u_fadeout_range:new p.Uniform1f(g),u_color:new p.Uniform4f(g),u_high_color:new p.Uniform4f(g),u_space_color:new p.Uniform4f(g),u_star_intensity:new p.Uniform1f(g),u_star_density:new p.Uniform1f(g),u_star_size:new p.Uniform1f(g),u_temporal_offset:new p.Uniform1f(g),u_horizon_angle:new p.Uniform1f(g),u_rotation_matrix:new p.UniformMatrix4f(g)})};let Vd;function Lu(g,o,f,b,E,S,k){const O=g.context,F=O.gl,V=g.transform,U=g.useProgram("collisionBox"),q=[];let oe=0,he=0;for(let Ce=0;Ce<b.length;Ce++){const He=b[Ce],We=o.getTile(He),$e=We.getBucket(f);if(!$e)continue;const st=Ro(He,$e,V);let nt=st;0===E[0]&&0===E[1]||(nt=g.translatePosMatrix(st,We,E,S));const gt=k?$e.textCollisionBox:$e.iconCollisionBox,Ut=$e.collisionCircleArray;if(Ut.length>0){const ht=p.create(),Dt=nt;p.mul(ht,$e.placementInvProjMatrix,V.glCoordMatrix),p.mul(ht,ht,$e.placementViewportMatrix),q.push({circleArray:Ut,circleOffset:he,transform:Dt,invTransform:ht,projection:$e.getProjection()}),oe+=Ut.length/4,he=oe}gt&&(g.terrain&&g.terrain.setupElevationDraw(We,U),U.draw(O,F.LINES,p.DepthMode.disabled,p.StencilMode.disabled,g.colorModeForRenderPass(),p.CullFaceMode.disabled,dg(nt,V,We,$e.getProjection()),f.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,null,V.zoom,null,[gt.collisionVertexBuffer,gt.collisionVertexBufferExt]))}if(!k||!q.length)return;const me=g.useProgram("collisionCircle"),fe=new p.StructArrayLayout2f1f2i16;fe.resize(4*oe),fe._trim();let ve=0;for(const Ce of q)for(let He=0;He<Ce.circleArray.length/4;He++){const We=4*He,$e=Ce.circleArray[We+0],st=Ce.circleArray[We+1],nt=Ce.circleArray[We+2],gt=Ce.circleArray[We+3];fe.emplace(ve++,$e,st,nt,gt,0),fe.emplace(ve++,$e,st,nt,gt,1),fe.emplace(ve++,$e,st,nt,gt,2),fe.emplace(ve++,$e,st,nt,gt,3)}(!Vd||Vd.length<2*oe)&&(Vd=function(Ce){const He=2*Ce,We=new p.StructArrayLayout3ui6;We.resize(He),We._trim();for(let $e=0;$e<He;$e++){const st=6*$e;We.uint16[st+0]=4*$e+0,We.uint16[st+1]=4*$e+1,We.uint16[st+2]=4*$e+2,We.uint16[st+3]=4*$e+2,We.uint16[st+4]=4*$e+3,We.uint16[st+5]=4*$e+0}return We}(oe));const X=O.createIndexBuffer(Vd,!0),de=O.createVertexBuffer(fe,p.collisionCircleLayout.members,!0);for(const Ce of q){const He={u_matrix:Ce.transform,u_inv_matrix:Ce.invTransform,u_camera_to_center_distance:(we=V).getCameraToCenterDistance(Ce.projection),u_viewport_size:[we.width,we.height]};me.draw(O,F.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,g.colorModeForRenderPass(),p.CullFaceMode.disabled,He,f.id,de,X,p.SegmentVector.simpleSegment(0,2*Ce.circleOffset,Ce.circleArray.length,Ce.circleArray.length/2),null,V.zoom)}var we;de.destroy(),X.destroy()}const To=p.create();function Es({width:g,height:o,anchor:f,textOffset:b,textScale:E},S){const{horizontalAlign:k,verticalAlign:O}=p.getAnchorAlignment(f),F=-(k-.5)*g,V=-(O-.5)*o,U=p.evaluateVariableOffset(f,b);return new p.Point((F/E+U[0])*S,(V/E+U[1])*S)}function xp(g,o,f,b,E,S,k,O,F,V,U){const q=g.text.placedSymbolArray,oe=g.text.dynamicLayoutVertexArray,he=g.icon.dynamicLayoutVertexArray,me={},fe=g.getProjection(),ve=Wi(O,fe,S),X=S.elevation,de=fe.upVectorScale(O.canonical,S.center.lat,S.worldSize).metersToTile;oe.clear();for(let we=0;we<q.length;we++){const Ce=q.get(we),{tileAnchorX:He,tileAnchorY:We,numGlyphs:$e}=Ce,st=Ce.hidden||!Ce.crossTileID||g.allowVerticalPlacement&&!Ce.placedOrientation?null:b[Ce.crossTileID];if(st){let nt=0,gt=0,Ut=0;if(X){const Yt=X?X.getAtTileOffset(O,He,We):0,[En,Fn,yn]=fe.upVector(O.canonical,He,We);nt=Yt*En*de,gt=Yt*Fn*de,Ut=Yt*yn*de}let[ht,Dt,wt,zt]=ki(Ce.projectedAnchorX+nt,Ce.projectedAnchorY+gt,Ce.projectedAnchorZ+Ut,f?ve:k);const mt=Al(S.getCameraToCenterDistance(fe),zt);let Mt=E.evaluateSizeForFeature(g.textSizeData,V,Ce)*mt/p.ONE_EM;f&&(Mt*=g.tilePixelRatio/F);const jt=Es(st,Mt);f?(({x:ht,y:Dt,z:wt}=fe.projectTilePoint(He+jt.x,We+jt.y,O.canonical)),[ht,Dt,wt]=ki(ht+nt,Dt+gt,wt+Ut,k)):(o&&jt._rotate(-S.angle),ht+=jt.x,Dt+=jt.y,wt=0);const Lt=g.allowVerticalPlacement&&Ce.placedOrientation===p.WritingMode.vertical?Math.PI/2:0;for(let Yt=0;Yt<$e;Yt++)p.addDynamicAttributes(oe,ht,Dt,wt,Lt);U&&Ce.associatedIconIndex>=0&&(me[Ce.associatedIconIndex]={x:ht,y:Dt,z:wt,angle:Lt})}else Sr($e,oe)}if(U){he.clear();const we=g.icon.placedSymbolArray;for(let Ce=0;Ce<we.length;Ce++){const He=we.get(Ce),{numGlyphs:We}=He,$e=me[Ce];if(He.hidden||!$e)Sr(We,he);else{const{x:st,y:nt,z:gt,angle:Ut}=$e;for(let ht=0;ht<We;ht++)p.addDynamicAttributes(he,st,nt,gt,Ut)}}g.icon.dynamicLayoutVertexBuffer.updateData(he)}g.text.dynamicLayoutVertexBuffer.updateData(oe)}function zl(g,o,f){return f.iconsInText&&o?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function xa(g,o,f,b,E,S,k,O,F,V,U,q){const oe=g.context,he=oe.gl,me=g.transform,fe="map"===O,ve="map"===F,X=fe&&"point"!==f.layout.get("symbol-placement"),de=fe&&!ve&&!X,we=void 0!==f.layout.get("symbol-sort-key").constantOr(1);let Ce=!1;const He=g.depthModeForSublayer(0,p.DepthMode.ReadOnly),We=[p.mercatorXfromLng(me.center.lng),p.mercatorYfromLat(me.center.lat)],$e=f.layout.get("text-variable-anchor"),st="globe"===me.projection.name,nt=[],gt=[0,-1,0];let Ut=gt;!st&&!me.mercatorFromTransition||fe||(Ut=function(ht){const Dt=ht._camera.getWorldToCamera(ht.worldSize,1),wt=p.multiply([],Dt,ht.globeMatrix);p.invert(wt,wt);const zt=[0,0,0],mt=[0,1,0,0];return p.transformMat4$1(mt,mt,wt),zt[0]=mt[0],zt[1]=mt[1],zt[2]=mt[2],p.normalize(zt,zt),zt}(me));for(const ht of b){const Dt=o.getTile(ht),wt=Dt.getBucket(f);if(!wt||"mercator"===wt.projection.name&&st)continue;const zt=E?wt.text:wt.icon;if(!zt||wt.fullyClipped||!zt.segments.get().length)continue;const mt=zt.programConfigurations.get(f.id),Mt=E||wt.sdfIcons,jt=E?wt.textSizeData:wt.iconSizeData,Lt=ve||0!==me.pitch,Yt=p.evaluateSizeForZoom(jt,me.zoom);let En,Fn,yn,Dn,oi=[0,0],ii=null;if(E)Fn=Dt.glyphAtlasTexture,yn=he.LINEAR,En=Dt.glyphAtlasTexture.size,wt.iconsInText&&(oi=Dt.imageAtlasTexture.size,ii=Dt.imageAtlasTexture,Dn=Lt||g.options.rotating||g.options.zooming||"composite"===jt.kind||"camera"===jt.kind?he.LINEAR:he.NEAREST);else{const ro=1!==f.layout.get("icon-size").constantOr(0)||wt.iconsNeedLinear;Fn=Dt.imageAtlasTexture,yn=Mt||g.options.rotating||g.options.zooming||ro||Lt?he.LINEAR:he.NEAREST,En=Dt.imageAtlasTexture.size}const bn="globe"===wt.projection.name,Pi=bn?Ut:gt,qi=bn?p.globeToMercatorTransition(me.zoom):0,Bi=Wi(ht,wt.getProjection(),me),Yi=me.calculatePixelsToTileUnitsMatrix(Dt),io=Tt(Bi,Dt.tileID.canonical,ve,fe,me,wt.getProjection(),Yi),Xr=g.terrain&&ve&&X?p.invert(p.create(),io):To,Qo=xi(Bi,Dt.tileID.canonical,ve,fe,me,wt.getProjection(),Yi),Ts=$e&&wt.hasTextData(),tr="none"!==f.layout.get("icon-text-fit")&&Ts&&wt.hasIconData();if(X){const ro=me.elevation,Ms=ro?ro.getAtTileOffsetFunc(ht,me.center.lat,me.worldSize,wt.getProjection()):null,Xs=ui(Bi,Dt.tileID.canonical,ve,fe,me,wt.getProjection(),Yi);Su(wt,Bi,g,E,Xs,Qo,ve,V,Ms,ht)}const Zi=X||E&&$e||tr,Di=g.translatePosMatrix(Bi,Dt,S,k),br=Zi?To:io,Io=g.translatePosMatrix(Qo,Dt,S,k,!0),or=wt.getProjection().createInversionMatrix(me,ht.canonical),Jo=[];g.terrainRenderModeElevated()&&ve&&Jo.push("PITCH_WITH_MAP_TERRAIN"),bn&&Jo.push("PROJECTION_GLOBE_VIEW"),Zi&&Jo.push("PROJECTED_POS_ON_VIEWPORT");const kp=Mt&&0!==f.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1);let jc;jc=Mt?wt.iconsInText?So(jt.kind,Yt,de,ve,g,Di,br,Io,En,oi,ht,qi,We,or,Pi,wt.getProjection()):$s(jt.kind,Yt,de,ve,g,Di,br,Io,E,En,!0,ht,qi,We,or,Pi,wt.getProjection()):Bd(jt.kind,Yt,de,ve,g,Di,br,Io,E,En,ht,qi,We,or,Pi,wt.getProjection());const Kl={program:g.useProgram(zl(Mt,E,wt),mt,Jo),buffers:zt,uniformValues:jc,atlasTexture:Fn,atlasTextureIcon:ii,atlasInterpolation:yn,atlasInterpolationIcon:Dn,isSDF:Mt,hasHalo:kp,tile:Dt,labelPlaneMatrixInv:Xr};if(we&&wt.canOverlap){Ce=!0;const ro=zt.segments.get();for(const Ms of ro)nt.push({segments:new p.SegmentVector([Ms]),sortKey:Ms.sortKey,state:Kl})}else nt.push({segments:zt.segments,sortKey:0,state:Kl})}Ce&&nt.sort((ht,Dt)=>ht.sortKey-Dt.sortKey);for(const ht of nt){const Dt=ht.state;if(g.terrain&&g.terrain.setupElevationDraw(Dt.tile,Dt.program,{useDepthForOcclusion:!st,labelPlaneMatrixInv:Dt.labelPlaneMatrixInv}),oe.activeTexture.set(he.TEXTURE0),Dt.atlasTexture.bind(Dt.atlasInterpolation,he.CLAMP_TO_EDGE),Dt.atlasTextureIcon&&(oe.activeTexture.set(he.TEXTURE1),Dt.atlasTextureIcon&&Dt.atlasTextureIcon.bind(Dt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),Dt.isSDF){const wt=Dt.uniformValues;Dt.hasHalo&&(wt.u_is_halo=1,Ud(Dt.buffers,ht.segments,f,g,Dt.program,He,U,q,wt)),wt.u_is_halo=0}Ud(Dt.buffers,ht.segments,f,g,Dt.program,He,U,q,Dt.uniformValues)}}function Ud(g,o,f,b,E,S,k,O,F){const V=b.context,U=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.globeExtVertexBuffer];E.draw(V,V.gl.TRIANGLES,S,k,O,p.CullFaceMode.disabled,F,f.id,g.layoutVertexBuffer,g.indexBuffer,o,f.paint,b.transform.zoom,g.programConfigurations.get(f.id),U)}function Uf(g,o,f,b,E,S,k){const O=g.context.gl,F=f.paint.get("fill-pattern"),V=F&&F.constantOr(1);let U,q,oe,he,me;k?(q=V&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=O.LINES):(q=V?"fillPattern":"fill",U=O.TRIANGLES);for(const fe of b){const ve=o.getTile(fe);if(V&&!ve.patternsLoaded())continue;const X=ve.getBucket(f);if(!X)continue;g.prepareDrawTile();const de=X.programConfigurations.get(f.id),we=g.useProgram(q,de);V&&(g.context.activeTexture.set(O.TEXTURE0),ve.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),de.updatePaintBuffers());const Ce=F.constantOr(null);if(Ce&&ve.imageAtlas){const We=ve.imageAtlas.patternPositions[Ce.toString()];We&&de.setConstantPatternPositions(We)}const He=g.translatePosMatrix(fe.projMatrix,ve,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(k){he=X.indexBuffer2,me=X.segments2;const We=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];oe="fillOutlinePattern"===q&&V?zf(He,g,ve,We):rl(He,We)}else he=X.indexBuffer,me=X.segments,oe=V?_p(He,g,ve):Hs(He);g.prepareDrawProgram(g.context,we,fe.toUnwrapped()),we.draw(g.context,U,E,g.stencilModeForClipping(fe),S,p.CullFaceMode.disabled,oe,f.id,X.layoutVertexBuffer,he,me,f.paint,g.transform.zoom,de)}}function wp(g,o,f,b,E,S,k){const O=g.context,F=O.gl,V=g.transform,U=f.paint.get("fill-extrusion-pattern"),q=U.constantOr(1),oe=f.paint.get("fill-extrusion-opacity"),he=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],me=f.layout.get("fill-extrusion-edge-radius"),fe=me>0&&!f.paint.get("fill-extrusion-rounded-roof"),ve=fe?0:me,X="globe"===V.projection.name?p.fillExtrusionHeightLift():0,de="globe"===V.projection.name,we=de?p.globeToMercatorTransition(V.zoom):0,Ce=[p.mercatorXfromLng(V.center.lng),p.mercatorYfromLat(V.center.lat)],He=[];de&&He.push("PROJECTION_GLOBE_VIEW"),he[0]>0&&He.push("FAUX_AO"),fe&&He.push("ZERO_ROOF_RADIUS");for(const We of b){const $e=o.getTile(We),st=$e.getBucket(f);if(!st||st.projection.name!==V.projection.name)continue;const nt=st.programConfigurations.get(f.id),gt=g.useProgram(q?"fillExtrusionPattern":"fillExtrusion",nt,He);if(g.terrain){const Mt=g.terrain;if(g.style.terrainSetForDrapingOnly())Mt.setupElevationDraw($e,gt,{useMeterToDem:!0});else{if(!st.enableTerrain)continue;if(Mt.setupElevationDraw($e,gt,{useMeterToDem:!0}),mg(O,o,We,st,f,Mt),!st.centroidVertexBuffer){const jt=gt.attributes.a_centroid_pos;void 0!==jt&&F.vertexAttrib2f(jt,0,0)}}}q&&(g.context.activeTexture.set(F.TEXTURE0),$e.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),nt.updatePaintBuffers());const Ut=U.constantOr(null);if(Ut&&$e.imageAtlas){const Mt=$e.imageAtlas.patternPositions[Ut.toString()];Mt&&nt.setConstantPatternPositions(Mt)}const ht=g.translatePosMatrix(We.projMatrix,$e,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Dt=V.projection.createInversionMatrix(V,We.canonical),wt=f.paint.get("fill-extrusion-vertical-gradient"),zt=q?ug(ht,g,wt,oe,he,ve,We,$e,X,we,Ce,Dt):ho(ht,g,wt,oe,he,ve,We,X,we,Ce,Dt);g.prepareDrawProgram(O,gt,We.toUnwrapped());const mt=[];g.terrain&&mt.push(st.centroidVertexBuffer),de&&mt.push(st.layoutVertexExtBuffer),gt.draw(O,O.gl.TRIANGLES,E,S,k,p.CullFaceMode.backCCW,zt,f.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,f.paint,g.transform.zoom,nt,mt)}}function mg(g,o,f,b,E,S){const k=[X=>{let de=X.canonical.x-1,we=X.wrap;return de<0&&(de=(1<<X.canonical.z)-1,we--),new p.OverscaledTileID(X.overscaledZ,we,X.canonical.z,de,X.canonical.y)},X=>{let de=X.canonical.x+1,we=X.wrap;return de===1<<X.canonical.z&&(de=0,we++),new p.OverscaledTileID(X.overscaledZ,we,X.canonical.z,de,X.canonical.y)},X=>new p.OverscaledTileID(X.overscaledZ,X.wrap,X.canonical.z,X.canonical.x,(0===X.canonical.y?1<<X.canonical.z:X.canonical.y)-1),X=>new p.OverscaledTileID(X.overscaledZ,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y===(1<<X.canonical.z)-1?0:X.canonical.y+1)],O=X=>{const de=o.getSource().minzoom,we=He=>{const We=o.getTileByID(He);if(We&&We.hasData())return We.getBucket(E)},Ce=[0,-1,1];for(const He of Ce){if(X.overscaledZ+He<de)continue;const We=we(X.calculateScaledKey(X.overscaledZ+He));if(We)return We}},F=[0,0,0],V=(X,de)=>(F[0]=Math.min(X.min.y,de.min.y),F[1]=Math.max(X.max.y,de.max.y),F[2]=p.EXTENT-de.min.x>X.max.x?de.min.x-p.EXTENT:X.max.x,F),U=(X,de)=>(F[0]=Math.min(X.min.x,de.min.x),F[1]=Math.max(X.max.x,de.max.x),F[2]=p.EXTENT-de.min.y>X.max.y?de.min.y-p.EXTENT:X.max.y,F),q=[(X,de)=>V(X,de),(X,de)=>V(de,X),(X,de)=>U(X,de),(X,de)=>U(de,X)],oe=new p.Point(0,0);let he,me,fe;const ve=(X,de,we,Ce,He)=>{const We=[[Ce?we:X,Ce?X:we,0],[Ce?we:de,Ce?de:we,0]],$e=He<0?p.EXTENT+He:He,st=[Ce?$e:(X+de)/2,Ce?(X+de)/2:$e,0];return 0===we&&He<0||0!==we&&He>0?S.getForTilePoints(fe,[st],!0,me):We.push(st),S.getForTilePoints(f,We,!0,he),Math.max(We[0][2],We[1][2],st[2])/S.exaggeration()};for(let X=0;X<4;X++){const de=(X<2?1:5)-X,we=b.borders[X];if(0===we.length)continue;const Ce=fe=k[X](f),He=O(Ce);if(!(He&&He instanceof p.FillExtrusionBucket&&He.enableTerrain)||b.borderDoneWithNeighborZ[X]===He.canonical.z&&He.borderDoneWithNeighborZ[de]===b.canonical.z||(me=S.findDEMTileFor(Ce),!me||!me.dem))continue;if(!he){const nt=S.findDEMTileFor(f);if(!nt||!nt.dem)return;he=nt}const We=He.borders[de];let $e=0;const st=He.borderDoneWithNeighborZ[de]!==b.canonical.z;if(b.canonical.z===He.canonical.z){for(let nt=0;nt<we.length;nt++){const gt=b.featuresOnBorder[we[nt]],Ut=gt.borders[X];let ht;for(;$e<We.length&&(ht=He.featuresOnBorder[We[$e]],!(ht.borders[de][1]>Ut[0]+3));)st&&He.encodeCentroid(void 0,ht,!1),$e++;if(ht&&$e<We.length){const Dt=$e;let wt=0;for(;!(ht.borders[de][0]>Ut[1]-3)&&(wt++,++$e!==We.length);)ht=He.featuresOnBorder[We[$e]];if(ht=He.featuresOnBorder[We[Dt]],gt.intersectsCount()>1||ht.intersectsCount()>1||1!==wt){1!==wt&&($e=Dt),b.encodeCentroid(void 0,gt,!1),st&&He.encodeCentroid(void 0,ht,!1);continue}const zt=q[X](gt,ht),mt=X%2?p.EXTENT-1:0;oe.x=ve(zt[0],Math.min(p.EXTENT-1,zt[1]),mt,X<2,zt[2]),oe.y=0,b.encodeCentroid(oe,gt,!1),st&&He.encodeCentroid(oe,ht,!1)}else b.encodeCentroid(void 0,gt,!1)}b.borderDoneWithNeighborZ[X]=He.canonical.z,b.needsCentroidUpdate=!0,st&&(He.borderDoneWithNeighborZ[de]=b.canonical.z,He.needsCentroidUpdate=!0)}else{for(const nt of we)b.encodeCentroid(void 0,b.featuresOnBorder[nt],!1);if(st){for(const nt of We)He.encodeCentroid(void 0,He.featuresOnBorder[nt],!1);He.borderDoneWithNeighborZ[de]=b.canonical.z,He.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[X]=He.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&0!==b.centroidVertexArray.length)&&b.uploadCentroid(g)}const jl=new p.Color(1,0,0,1),Hf=new p.Color(0,1,0,1),gg=new p.Color(0,0,1,1),$f=new p.Color(1,0,1,1),yg=new p.Color(0,1,1,1);function _g(g,o,f){const b=g.context,E=g.transform,S=b.gl,k="globe"===E.projection.name,O=k?["PROJECTION_GLOBE_VIEW"]:null;let F=f.projMatrix;if(k&&p.globeToMercatorTransition(E.zoom)>0){const gt=p.transitionTileAABBinECEF(f.canonical,E),Ut=p.globeDenormalizeECEF(gt);F=p.multiply(new Float32Array(16),E.globeMatrix,Ut),p.multiply(F,E.projMatrix,F)}const V=g.useProgram("debug",null,O),U=o.getTileByID(f.key);g.terrain&&g.terrain.setupElevationDraw(U,V);const q=p.DepthMode.disabled,oe=p.StencilMode.disabled,he=g.colorModeForRenderPass();b.activeTexture.set(S.TEXTURE0),g.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),k?U._makeGlobeTileDebugBuffers(g.context,E):U._makeDebugTileBoundsBuffers(g.context,E.projection);const fe=U._tileDebugBuffer||g.debugBuffer,ve=U._tileDebugIndexBuffer||g.debugIndexBuffer,X=U._tileDebugSegments||g.debugSegments;V.draw(b,S.LINE_STRIP,q,oe,he,p.CullFaceMode.disabled,vp(F,p.Color.red),"$debug",fe,ve,X,null,null,null,[U._globeTileDebugBorderBuffer]);const de=U.latestRawTileData,we=Math.floor((de&&de.byteLength||0)/1024),Ce=o.getTile(f).tileSize,He=512/Math.min(Ce,512)*(f.overscaledZ/E.zoom)*.5;let We=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(We+=` => ${f.overscaledZ}`),We+=` ${we}kb`,function(gt,Ut){gt.initDebugOverlayCanvas();const ht=gt.debugOverlayCanvas,Dt=gt.context.gl,wt=gt.debugOverlayCanvas.getContext("2d");wt.clearRect(0,0,ht.width,ht.height),wt.shadowColor="white",wt.shadowBlur=2,wt.lineWidth=1.5,wt.strokeStyle="white",wt.textBaseline="top",wt.font="bold 36px Open Sans, sans-serif",wt.fillText(Ut,5,5),wt.strokeText(Ut,5,5),gt.debugOverlayTexture.update(ht),gt.debugOverlayTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE)}(g,We);const $e=U._tileDebugTextBuffer||g.debugBuffer,st=U._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,nt=U._tileDebugTextSegments||g.debugSegments;V.draw(b,S.TRIANGLES,q,oe,p.ColorMode.alphaBlended,p.CullFaceMode.disabled,vp(F,p.Color.transparent,He),"$debug",$e,st,nt,null,null,null,[U._globeTileDebugTextBuffer])}function Hd(g,o,f,b){Sc(g,0,o+f/2,g.transform.width,f,b)}function Fu(g,o,f,b){Sc(g,o-f/2,0,f,g.transform.height,b)}function Sc(g,o,f,b,E,S){const k=g.context,O=k.gl;O.enable(O.SCISSOR_TEST),O.scissor(o*p.exported.devicePixelRatio,f*p.exported.devicePixelRatio,b*p.exported.devicePixelRatio,E*p.exported.devicePixelRatio),k.clear({color:S}),O.disable(O.SCISSOR_TEST)}const Gf=p.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Wf}=Gf;function Gs(g,o,f,b){g.emplaceBack(o,f,b)}class Ep{constructor(o){this.vertexArray=new p.StructArrayLayout3f12,this.indices=new p.StructArrayLayout3ui6,Gs(this.vertexArray,-1,-1,1),Gs(this.vertexArray,1,-1,1),Gs(this.vertexArray,-1,1,1),Gs(this.vertexArray,1,1,1),Gs(this.vertexArray,-1,-1,-1),Gs(this.vertexArray,1,-1,-1),Gs(this.vertexArray,-1,1,-1),Gs(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,Wf),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=p.SegmentVector.simpleSegment(0,0,36,12)}}function Cs(g,o,f,b,E,S){const k=g.gl,O=o.paint.get("sky-atmosphere-color"),F=o.paint.get("sky-atmosphere-halo-color"),V=o.paint.get("sky-atmosphere-sun-intensity"),U={u_matrix_3f:p.fromMat4(p.create$1(),b),u_sun_direction:E,u_sun_intensity:V,u_color_tint_r:[(me=O).r,me.g,me.b,me.a],u_color_tint_m:[(fe=F).r,fe.g,fe.b,fe.a],u_luminance:5e-5};var me,fe;k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+S,o.skyboxTexture,0),f.draw(g,k.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.frontCW,U,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Yr=p.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Vl{constructor(o){const f=new p.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const b=new p.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(f,Yr.members),this.indexBuffer=o.createIndexBuffer(b),this.segments=p.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const er={symbol:function(g,o,f,b,E){if("translucent"!==g.renderPass)return;const S=p.StencilMode.disabled,k=g.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(O,F,V,U,q,oe,he){const me=F.transform,fe="map"===q,ve="map"===oe;for(const X of O){const de=U.getTile(X),we=de.getBucket(V);if(!we||!we.text||!we.text.segments.get().length)continue;const Ce=p.evaluateSizeForZoom(we.textSizeData,me.zoom),He=Wi(X,we.getProjection(),me),We=me.calculatePixelsToTileUnitsMatrix(de),$e=Tt(He,de.tileID.canonical,ve,fe,me,we.getProjection(),We),st="none"!==V.layout.get("icon-text-fit")&&we.hasIconData();if(Ce){const nt=Math.pow(2,me.zoom-de.tileID.overscaledZ);xp(we,fe,ve,he,p.symbolSize,me,$e,X,nt,Ce,st)}}}(b,g,f,o,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),E),0!==f.paint.get("icon-opacity").constantOr(1)&&xa(g,o,f,b,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),S,k),0!==f.paint.get("text-opacity").constantOr(1)&&xa(g,o,f,b,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),S,k),o.map.showCollisionBoxes&&(Lu(g,o,f,b,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Lu(g,o,f,b,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(g,o,f,b){if("translucent"!==g.renderPass)return;const E=f.paint.get("circle-opacity"),S=f.paint.get("circle-stroke-width"),k=f.paint.get("circle-stroke-opacity"),O=void 0!==f.layout.get("circle-sort-key").constantOr(1);if(0===E.constantOr(1)&&(0===S.constantOr(1)||0===k.constantOr(1)))return;const F=g.context,V=F.gl,U=g.transform,q=g.depthModeForSublayer(0,p.DepthMode.ReadOnly),oe=p.StencilMode.disabled,he=g.colorModeForRenderPass(),me="globe"===U.projection.name,fe=[p.mercatorXfromLng(U.center.lng),p.mercatorYfromLat(U.center.lat)],ve=[];for(let de=0;de<b.length;de++){const we=b[de],Ce=o.getTile(we),He=Ce.getBucket(f);if(!He||He.projection.name!==U.projection.name)continue;const We=He.programConfigurations.get(f.id),$e=mr(f);me&&$e.push("PROJECTION_GLOBE_VIEW");const st=g.useProgram("circle",We,$e),nt=He.layoutVertexBuffer,gt=He.globeExtVertexBuffer,Ut=He.indexBuffer,ht=U.projection.createInversionMatrix(U,we.canonical),Dt={programConfiguration:We,program:st,layoutVertexBuffer:nt,globeExtVertexBuffer:gt,indexBuffer:Ut,uniformValues:ti(g,we,Ce,ht,fe,f),tile:Ce};if(O){const wt=He.segments.get();for(const zt of wt)ve.push({segments:new p.SegmentVector([zt]),sortKey:zt.sortKey,state:Dt})}else ve.push({segments:He.segments,sortKey:0,state:Dt})}O&&ve.sort((de,we)=>de.sortKey-we.sortKey);const X={useDepthForOcclusion:!me};for(const de of ve){const{programConfiguration:we,program:Ce,layoutVertexBuffer:He,globeExtVertexBuffer:We,indexBuffer:$e,uniformValues:st,tile:nt}=de.state,gt=de.segments;g.terrain&&g.terrain.setupElevationDraw(nt,Ce,X),g.prepareDrawProgram(F,Ce,nt.tileID.toUnwrapped()),Ce.draw(F,V.TRIANGLES,q,oe,he,p.CullFaceMode.disabled,st,f.id,He,$e,gt,f.paint,U.zoom,we,[We])}},heatmap:function(g,o,f,b){if(0!==f.paint.get("heatmap-opacity"))if("offscreen"===g.renderPass){const E=g.context,S=E.gl,k=p.StencilMode.disabled,O=new p.ColorMode([S.ONE,S.ONE],p.Color.transparent,[!0,!0,!0,!0]);(function(he,me,fe,ve){const X=he.gl,de=me.width*ve,we=me.height*ve;he.activeTexture.set(X.TEXTURE1),he.viewport.set([0,0,de,we]);let Ce=fe.heatmapFbo;if(!Ce||Ce&&(Ce.width!==de||Ce.height!==we)){Ce&&Ce.destroy();const He=X.createTexture();X.bindTexture(X.TEXTURE_2D,He),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.LINEAR),Ce=fe.heatmapFbo=he.createFramebuffer(de,we,!1),function(We,$e,st,nt,gt,Ut){const ht=We.gl;ht.texImage2D(ht.TEXTURE_2D,0,We.isWebGL2&&We.extRenderToTextureHalfFloat?ht.RGBA16F:ht.RGBA,gt,Ut,0,ht.RGBA,We.extRenderToTextureHalfFloat?We.isWebGL2?ht.HALF_FLOAT:We.extTextureHalfFloat.HALF_FLOAT_OES:ht.UNSIGNED_BYTE,null),nt.colorAttachment.set(st)}(he,0,He,Ce,de,we)}else X.bindTexture(X.TEXTURE_2D,Ce.colorAttachment.get()),he.bindFramebuffer.set(Ce.framebuffer)})(E,g,f,"globe"===g.transform.projection.name?.5:.25),E.clear({color:p.Color.transparent});const F=g.transform,V="globe"===F.projection.name,U=V?["PROJECTION_GLOBE_VIEW"]:null,q=V?p.CullFaceMode.frontCCW:p.CullFaceMode.disabled,oe=[p.mercatorXfromLng(F.center.lng),p.mercatorYfromLat(F.center.lat)];for(let he=0;he<b.length;he++){const me=b[he];if(o.hasRenderableParent(me))continue;const fe=o.getTile(me),ve=fe.getBucket(f);if(!ve||ve.projection.name!==F.projection.name)continue;const X=ve.programConfigurations.get(f.id),de=g.useProgram("heatmap",X,U),{zoom:we}=g.transform;g.terrain&&g.terrain.setupElevationDraw(fe,de),g.prepareDrawProgram(E,de,me.toUnwrapped());const Ce=F.projection.createInversionMatrix(F,me.canonical);de.draw(E,S.TRIANGLES,p.DepthMode.disabled,k,O,q,pg(g,me,fe,Ce,oe,we,f.paint.get("heatmap-intensity")),f.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,f.paint,g.transform.zoom,X,V?[ve.globeExtVertexBuffer]:null)}E.viewport.set([0,0,g.width,g.height])}else"translucent"===g.renderPass&&(g.context.setColorMode(g.colorModeForRenderPass()),function(E,S){const k=E.context,O=k.gl,F=S.heatmapFbo;if(!F)return;k.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,F.colorAttachment.get()),k.activeTexture.set(O.TEXTURE1);let V=S.colorRampTexture;V||(V=S.colorRampTexture=new p.Texture(k,S.colorRamp,O.RGBA)),V.bind(O.LINEAR,O.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(k,O.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,E.colorModeForRenderPass(),p.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:S.paint.get("heatmap-opacity")},S.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,S.paint,E.transform.zoom)}(g,f))},line:function(g,o,f,b){if("translucent"!==g.renderPass)return;const E=f.paint.get("line-opacity"),S=f.paint.get("line-width");if(0===E.constantOr(1)||0===S.constantOr(1))return;const k=g.depthModeForSublayer(0,p.DepthMode.ReadOnly),O=g.colorModeForRenderPass(),F=g.terrain&&g.terrain.renderingToTexture?1:p.exported.devicePixelRatio,V=f.paint.get("line-dasharray"),U=V.constantOr(1),q=f.layout.get("line-cap"),oe=f.paint.get("line-pattern"),he=oe.constantOr(1),me=f.paint.get("line-gradient"),fe=he?"linePattern":"line",ve=g.context,X=ve.gl,de=(Ce=>{const He=[];Ci(Ce)&&He.push("RENDER_LINE_DASH"),Ce.paint.get("line-gradient")&&He.push("RENDER_LINE_GRADIENT");const We=Ce.paint.get("line-trim-offset");0===We[0]&&0===We[1]||He.push("RENDER_LINE_TRIM_OFFSET");const $e=Ce.paint.get("line-pattern").constantOr(1),st=1!==Ce.paint.get("line-opacity").constantOr(1);return!$e&&st&&He.push("RENDER_LINE_ALPHA_DISCARD"),He})(f);let we=de.includes("RENDER_LINE_ALPHA_DISCARD");g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(we=!1);for(const Ce of b){const He=o.getTile(Ce);if(he&&!He.patternsLoaded())continue;const We=He.getBucket(f);if(!We)continue;g.prepareDrawTile();const $e=We.programConfigurations.get(f.id),st=g.useProgram(fe,$e,de),nt=oe.constantOr(null);if(nt&&He.imageAtlas){const Mt=He.imageAtlas.patternPositions[nt.toString()];Mt&&$e.setConstantPatternPositions(Mt)}const gt=V.constantOr(null),Ut=q.constantOr(null);if(!he&&gt&&Ut&&He.lineAtlas){const Mt=He.lineAtlas.getDash(gt,Ut);Mt&&$e.setConstantPatternPositions(Mt)}let[ht,Dt]=f.paint.get("line-trim-offset");("round"===Ut||"square"===Ut)&&ht!==Dt&&(0===ht&&(ht-=1),1===Dt&&(Dt+=1));const wt=g.terrain?Ce.projMatrix:null,zt=he?Ru(g,He,f,wt,F):fg(g,He,f,wt,We.lineClipsArray.length,F,[ht,Dt]);if(me){const Mt=We.gradients[f.id];let jt=Mt.texture;if(f.gradientVersion!==Mt.version){let Lt=256;if(f.stepInterpolant){const Yt=o.getSource().maxzoom,En=Ce.canonical.z===Yt?Math.ceil(1<<g.transform.maxZoom-Ce.canonical.z):1;Lt=p.clamp(p.nextPowerOfTwo(We.maxLineLength/p.EXTENT*1024*En),256,ve.maxTextureSize)}Mt.gradient=p.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:Lt,image:Mt.gradient||void 0,clips:We.lineClipsArray}),Mt.texture?Mt.texture.update(Mt.gradient):Mt.texture=new p.Texture(ve,Mt.gradient,X.RGBA),Mt.version=f.gradientVersion,jt=Mt.texture}ve.activeTexture.set(X.TEXTURE1),jt.bind(f.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}U&&(ve.activeTexture.set(X.TEXTURE0),He.lineAtlasTexture.bind(X.LINEAR,X.REPEAT),$e.updatePaintBuffers()),he&&(ve.activeTexture.set(X.TEXTURE0),He.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),$e.updatePaintBuffers()),g.prepareDrawProgram(ve,st,Ce.toUnwrapped());const mt=Mt=>{st.draw(ve,X.TRIANGLES,k,Mt,O,p.CullFaceMode.disabled,zt,f.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,f.paint,g.transform.zoom,$e,[We.layoutVertexBuffer2])};if(we){const Mt=g.stencilModeForClipping(Ce).ref;0===Mt&&g.terrain&&ve.clear({stencil:0});const jt={func:X.EQUAL,mask:255};zt.u_alpha_discard_threshold=.8,mt(new p.StencilMode(jt,Mt,255,X.KEEP,X.KEEP,X.INVERT)),zt.u_alpha_discard_threshold=0,mt(new p.StencilMode(jt,Mt,255,X.KEEP,X.KEEP,X.KEEP))}else mt(g.stencilModeForClipping(Ce))}we&&(g.resetStencilClippingMasks(),g.terrain&&ve.clear({stencil:0}))},fill:function(g,o,f,b){const E=f.paint.get("fill-color"),S=f.paint.get("fill-opacity");if(0===S.constantOr(1))return;const k=g.colorModeForRenderPass(),O=f.paint.get("fill-pattern"),F=g.opaquePassEnabledForLayer()&&!O.constantOr(1)&&1===E.constantOr(p.Color.transparent).a&&1===S.constantOr(0)?"opaque":"translucent";if(g.renderPass===F){const V=g.depthModeForSublayer(1,"opaque"===g.renderPass?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly);Uf(g,o,f,b,V,k,!1)}if("translucent"===g.renderPass&&f.paint.get("fill-antialias")){const V=g.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,p.DepthMode.ReadOnly);Uf(g,o,f,b,V,k,!0)}},"fill-extrusion":function(g,o,f,b){const E=f.paint.get("fill-extrusion-opacity");if(0!==E&&"translucent"===g.renderPass){const S=new p.DepthMode(g.context.gl.LEQUAL,p.DepthMode.ReadWrite,g.depthRangeFor3D);if(1!==E||f.paint.get("fill-extrusion-pattern").constantOr(1))wp(g,o,f,b,S,p.StencilMode.disabled,p.ColorMode.disabled),wp(g,o,f,b,S,g.stencilModeFor3D(),g.colorModeForRenderPass()),g.resetStencilClippingMasks();else{const k=g.colorModeForRenderPass();wp(g,o,f,b,S,p.StencilMode.disabled,k)}}},hillshade:function(g,o,f,b){if("offscreen"!==g.renderPass&&"translucent"!==g.renderPass)return;const E=g.context,S=g.depthModeForSublayer(0,p.DepthMode.ReadOnly),k=g.colorModeForRenderPass(),O=g.terrain&&g.terrain.renderingToTexture,[F,V]="translucent"!==g.renderPass||O?[{},b]:g.stencilConfigForOverlap(b);for(const U of V){const q=o.getTile(U);if(q.needsHillshadePrepare&&"offscreen"===g.renderPass)Bf(g,q,f,S,p.StencilMode.disabled,k);else if("translucent"===g.renderPass){const oe=O&&g.terrain?g.terrain.stencilModeForRTTOverlap(U):F[U.overscaledZ];Nf(g,U,q,f,S,oe,k)}}E.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,o,f,b,E,S){if("translucent"!==g.renderPass||0===f.paint.get("raster-opacity")||!b.length)return;const k=g.context,O=k.gl,F=o.getSource(),V=g.useProgram("raster"),U=g.colorModeForRenderPass(),q=g.terrain&&g.terrain.renderingToTexture,[oe,he]=F instanceof Xn||q?[{},b]:g.stencilConfigForOverlap(b),me=he[he.length-1].overscaledZ,fe=!g.options.moving;for(const ve of he){const X=q?p.DepthMode.disabled:g.depthModeForSublayer(ve.overscaledZ-me,1===f.paint.get("raster-opacity")?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly,O.LESS),de=ve.toUnwrapped(),we=o.getTile(ve);if(q&&(!we||!we.hasData()))continue;const Ce=q?ve.projMatrix:g.transform.calculateProjMatrix(de,fe),He=g.terrain&&q?g.terrain.stencilModeForRTTOverlap(ve):oe[ve.overscaledZ],We=S?0:f.paint.get("raster-fade-duration");we.registerFadeDuration(We);const $e=o.findLoadedParent(ve,0),st=Fd(we,$e,o,g.transform,We);let nt,gt;g.terrain&&g.terrain.prepareDrawTile();const Ut="nearest"===f.paint.get("raster-resampling")?O.NEAREST:O.LINEAR;k.activeTexture.set(O.TEXTURE0),we.texture.bind(Ut,O.CLAMP_TO_EDGE),k.activeTexture.set(O.TEXTURE1),$e?($e.texture.bind(Ut,O.CLAMP_TO_EDGE),nt=Math.pow(2,$e.tileID.overscaledZ-we.tileID.overscaledZ),gt=[we.tileID.canonical.x*nt%1,we.tileID.canonical.y*nt%1]):we.texture.bind(Ut,O.CLAMP_TO_EDGE),we.texture.useMipmap&&k.extTextureFilterAnisotropic&&g.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax);const ht=bp(Ce,gt||[0,0],nt||1,st,f,F instanceof Xn?F.perspectiveTransform:[0,0]);if(g.prepareDrawProgram(k,V,de),F instanceof Xn)F.boundsBuffer&&F.boundsSegments&&V.draw(k,O.TRIANGLES,X,p.StencilMode.disabled,U,p.CullFaceMode.disabled,ht,f.id,F.boundsBuffer,g.quadTriangleIndexBuffer,F.boundsSegments);else{const{tileBoundsBuffer:Dt,tileBoundsIndexBuffer:wt,tileBoundsSegments:zt}=g.getTileBoundsBuffers(we);V.draw(k,O.TRIANGLES,X,He,U,p.CullFaceMode.disabled,ht,f.id,Dt,wt,zt)}}g.resetStencilClippingMasks()},background:function(g,o,f,b){const E=f.paint.get("background-color"),S=f.paint.get("background-opacity");if(0===S)return;const k=g.context,O=k.gl,F=g.transform,V=F.tileSize,U=f.paint.get("background-pattern");if(g.isPatternMissing(U))return;const q=!U&&1===E.a&&1===S&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==q)return;const oe=p.StencilMode.disabled,he=g.depthModeForSublayer(0,"opaque"===q?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly),me=g.colorModeForRenderPass(),fe=g.useProgram(U?"backgroundPattern":"background");let ve,X=b;X||(ve=g.getBackgroundTiles(),X=Object.values(ve).map(de=>de.tileID)),U&&(k.activeTexture.set(O.TEXTURE0),g.imageManager.bind(g.context));for(const de of X){const we=de.toUnwrapped(),Ce=b?de.projMatrix:g.transform.calculateProjMatrix(we);g.prepareDrawTile();const He=o?o.getTile(de):ve?ve[de.key]:new p.Tile(de,V,F.zoom,g),We=U?Vf(Ce,S,g,U,{tileID:de,tileSize:V}):zd(Ce,S,E);g.prepareDrawProgram(k,fe,we);const{tileBoundsBuffer:$e,tileBoundsIndexBuffer:st,tileBoundsSegments:nt}=g.getTileBoundsBuffers(He);fe.draw(k,O.TRIANGLES,he,oe,me,p.CullFaceMode.disabled,We,f.id,$e,st,nt)}},sky:function(g,o,f){const b=g.transform,E="mercator"===b.projection.name||"globe"===b.projection.name?1:p.smoothstep(7,8,b.zoom),S=f.paint.get("sky-opacity")*E;if(0===S)return;const k=g.context,O=f.paint.get("sky-type"),F=new p.DepthMode(k.gl.LEQUAL,p.DepthMode.ReadOnly,[0,1]),V=g.frameCounter/1e3%1;"atmosphere"===O?"offscreen"===g.renderPass?f.needsSkyboxCapture(g)&&(function(U,q,oe,he){const me=U.context,fe=me.gl;let ve=q.skyboxFbo;if(!ve){ve=q.skyboxFbo=me.createFramebuffer(32,32,!1),q.skyboxGeometry=new Ep(me),q.skyboxTexture=me.gl.createTexture(),fe.bindTexture(fe.TEXTURE_CUBE_MAP,q.skyboxTexture),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_MAG_FILTER,fe.LINEAR);for(let Ce=0;Ce<6;++Ce)fe.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,fe.RGBA,32,32,0,fe.RGBA,fe.UNSIGNED_BYTE,null)}me.bindFramebuffer.set(ve.framebuffer),me.viewport.set([0,0,32,32]);const X=q.getCenter(U,!0),de=U.useProgram("skyboxCapture"),we=new Float64Array(16);p.identity(we),p.rotateY(we,we,.5*-Math.PI),Cs(me,q,de,we,X,0),p.identity(we),p.rotateY(we,we,.5*Math.PI),Cs(me,q,de,we,X,1),p.identity(we),p.rotateX(we,we,.5*-Math.PI),Cs(me,q,de,we,X,2),p.identity(we),p.rotateX(we,we,.5*Math.PI),Cs(me,q,de,we,X,3),p.identity(we),Cs(me,q,de,we,X,4),p.identity(we),p.rotateY(we,we,Math.PI),Cs(me,q,de,we,X,5),me.viewport.set([0,0,U.width,U.height])}(g,f),f.markSkyboxValid(g)):"sky"===g.renderPass&&function(U,q,oe,he,me){const fe=U.context,ve=fe.gl,X=U.transform,de=U.useProgram("skybox");fe.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_CUBE_MAP,q.skyboxTexture);const we={u_matrix:X.skyboxMatrix,u_sun_direction:q.getCenter(U,!1),u_cubemap:0,u_opacity:he,u_temporal_offset:me};U.prepareDrawProgram(fe,de),de.draw(fe,ve.TRIANGLES,oe,p.StencilMode.disabled,U.colorModeForRenderPass(),p.CullFaceMode.backCW,we,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(g,f,F,S,V):"gradient"===O&&"sky"===g.renderPass&&function(U,q,oe,he,me){const fe=U.context,ve=fe.gl,X=U.transform,de=U.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Ep(fe)),fe.activeTexture.set(ve.TEXTURE0);let we=q.colorRampTexture;we||(we=q.colorRampTexture=new p.Texture(fe,q.colorRamp,ve.RGBA)),we.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const Ce=(He=X.skyboxMatrix,We=q.getCenter(U,!1),$e=q.paint.get("sky-gradient-radius"),st=he,nt=me,{u_matrix:He,u_color_ramp:0,u_center_direction:We,u_radius:p.degToRad($e),u_opacity:st,u_temporal_offset:nt});var He,We,$e,st,nt;U.prepareDrawProgram(fe,de),de.draw(fe,ve.TRIANGLES,oe,p.StencilMode.disabled,U.colorModeForRenderPass(),p.CullFaceMode.backCW,Ce,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(g,f,F,S,V)},debug:function(g,o,f){for(let b=0;b<f.length;b++)_g(g,o,f[b])},custom:function(g,o,f,b){const E=g.context,S=f.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||"offscreen"===g.renderPass)&&f.isLayerDraped()){if("offscreen"===g.renderPass){const k=S.prerender;if(k){if(g.setCustomLayerDefaults(),E.setColorMode(g.colorModeForRenderPass()),"globe"===g.transform.projection.name){const O=g.transform.pointMerc;k.call(S,E.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(g.transform.zoom),[O.x,O.y],g.transform.pixelsPerMeterRatio)}else k.call(S,E.gl,g.transform.customLayerMatrix());E.setDirty(),g.setBaseState()}}else if("translucent"===g.renderPass){if(g.terrain&&g.terrain.renderingToTexture){const O=S.renderToTile;if(O){const F=b[0].canonical,V=new p.MercatorCoordinate(F.x+b[0].wrap*(1<<F.z),F.y,F.z);E.setDepthMode(p.DepthMode.disabled),E.setStencilMode(p.StencilMode.disabled),E.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),O.call(S,E.gl,V),E.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),E.setColorMode(g.colorModeForRenderPass()),E.setStencilMode(p.StencilMode.disabled);const k="3d"===S.renderingMode?new p.DepthMode(g.context.gl.LEQUAL,p.DepthMode.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,p.DepthMode.ReadOnly);if(E.setDepthMode(k),"globe"===g.transform.projection.name){const O=g.transform.pointMerc;S.render(E.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(g.transform.zoom),[O.x,O.y],g.transform.pixelsPerMeterRatio)}else S.render(E.gl,g.transform.customLayerMatrix());E.setDirty(),g.setBaseState(),E.bindFramebuffer.set(null)}}else p.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Tc{constructor(o,f,b=!1){this.context=new Qt(o,b),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=p.SourceCache.maxUnderzooming+p.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(o,f){const b=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Lo(this,o));const E=this._terrain;this.transform.elevation=b?E:null,E.update(o,this.transform,f)}_updateFog(o){const f=o.fog;if(!f||"globe"===this.transform.projection.name||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,E]=f.getFovAdjustedRange(this.transform._fov);if(b>E)return void(this.transform.fogCullDistSq=null);const S=b+.78*(E-b);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(o,f){if(this.width=o*p.exported.devicePixelRatio,this.height=f*p.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const o=this.context,f=new p.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(p.EXTENT,0),f.emplaceBack(0,p.EXTENT),f.emplaceBack(p.EXTENT,p.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(f,p.posAttributes.members),this.tileExtentSegments=p.SegmentVector.simpleSegment(0,0,4,2);const b=new p.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(p.EXTENT,0),b.emplaceBack(0,p.EXTENT),b.emplaceBack(p.EXTENT,p.EXTENT),this.debugBuffer=o.createVertexBuffer(b,p.posAttributes.members),this.debugSegments=p.SegmentVector.simpleSegment(0,0,4,5);const E=new p.StructArrayLayout2i4;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(E,p.posAttributes.members),this.viewportSegments=p.SegmentVector.simpleSegment(0,0,4,2);const S=new p.StructArrayLayout4i8;S.emplaceBack(0,0,0,0),S.emplaceBack(p.EXTENT,0,p.EXTENT,0),S.emplaceBack(0,p.EXTENT,0,p.EXTENT),S.emplaceBack(p.EXTENT,p.EXTENT,p.EXTENT,p.EXTENT),this.mercatorBoundsBuffer=o.createVertexBuffer(S,p.boundsAttributes.members),this.mercatorBoundsSegments=p.SegmentVector.simpleSegment(0,0,4,2);const k=new p.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(k);const O=new p.StructArrayLayout1ui2;for(const V of[0,1,3,2,0])O.emplaceBack(V);this.debugIndexBuffer=o.createIndexBuffer(O),this.emptyTexture=new p.Texture(o,new p.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA),this.identityMat=p.create();const F=this.context.gl;this.stencilClearMode=new p.StencilMode({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO),this.loadTimeStamps.push(p.window.performance.now()),this.atmosphereBuffer=new Vl(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(o,f.TRIANGLES,p.DepthMode.disabled,this.stencilClearMode,p.ColorMode.disabled,p.CullFaceMode.disabled,Ou(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,f,b){if(!f||this.currentStencilSource===f.id||!o.isTileClipped()||!b||0===b.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const F of b)if(void 0===this._tileClippingMaskIDs[F.key]){O=!0;break}if(!O)return}this.currentStencilSource=f.id;const E=this.context,S=E.gl;this.nextStencilID+b.length>256&&this.clearStencil(),E.setColorMode(p.ColorMode.disabled),E.setDepthMode(p.DepthMode.disabled);const k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of b){const F=f.getTile(O),V=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:U,tileBoundsIndexBuffer:q,tileBoundsSegments:oe}=this.getTileBoundsBuffers(F);k.draw(E,S.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:S.ALWAYS,mask:0},V,255,S.KEEP,S.KEEP,S.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,Ou(O.projMatrix),"$clipping",U,q,oe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new p.StencilMode({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const f=this.context.gl;return new p.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(o){const f=this.context.gl,b=o.sort((k,O)=>O.overscaledZ-k.overscaledZ),E=b[b.length-1].overscaledZ,S=b[0].overscaledZ-E+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const k={};for(let O=0;O<S;O++)k[O+E]=new p.StencilMode({func:f.GEQUAL,mask:255},O+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=S,[k,b]}return[{[E]:p.StencilMode.disabled},b]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new p.ColorMode([o.CONSTANT_COLOR,o.ONE],new p.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?p.ColorMode.unblended:p.ColorMode.alphaBlended}depthModeForSublayer(o,f,b){if(!this.opaquePassEnabledForLayer())return p.DepthMode.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new p.DepthMode(b||this.context.gl.LEQUAL,f,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){this.style=o,this.options=f,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(p.exported.now()),this.imageManager.beginFrame();const b=this.style.order,E=this.style._sourceCaches;for(const V in E){const U=E[V];U.used&&U.prepare(this.context)}const S={},k={},O={};for(const V in E){const U=E[V];S[V]=U.getVisibleCoordinates(),k[V]=S[V].slice().reverse(),O[V]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<b.length;V++)if(this.style._layers[b[V]].is3D()){this.opaquePassCutoff=V;break}if(this.terrain&&(this.terrain.updateTileBinding(O),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new p.GlobeSharedBuffers(this.context)),!p.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const V of b){const U=this.style._layers[V],q=o._getLayerSourceCache(U);if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;const oe=q?k[q.id]:void 0;("custom"===U.type||U.isSky()||oe&&oe.length)&&this.renderLayer(this,q,U,oe)}this.depthRangeFor3D=[0,1-(o.order.length+2)*this.numSublayers*this.depthEpsilon];const F=this.terrain;if(F&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&F.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?p.Color.black:p.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[b[this.currentLayer]],U=o._getLayerSourceCache(V);if(V.isSky())continue;const q=U?k[U.id]:void 0;this._renderTileClippingMasks(V,U,q),this.renderLayer(this,U,V,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(V,U){const q=V.context,oe=q.gl,he=V.transform,me=new p.DepthMode(oe.LEQUAL,p.DepthMode.ReadOnly,[0,1]),fe=V.useProgram("globeAtmosphere",null,"globe"===he.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ve=p.globeToMercatorTransition(he.zoom),X=U.properties.get("color").toArray01(),de=U.properties.get("high-color").toArray01(),we=U.properties.get("space-color").toArray01PremultipliedAlpha(),Ce=p.identity$1([]);p.rotateY$1(Ce,Ce,-p.degToRad(he._center.lng)),p.rotateX$1(Ce,Ce,p.degToRad(he._center.lat)),p.rotateZ$1(Ce,Ce,he.angle),p.rotateX$1(Ce,Ce,-he._pitch);const He=p.fromQuat(new Float32Array(16),Ce),We=p.mapValue(U.properties.get("star-intensity"),0,1,0,.25),st=p.mapValue(U.properties.get("horizon-blend"),0,1,5e-4,.25),nt=p.globeUseCustomAntiAliasing(V,q,he)&&5e-4===st?he.worldSize/(2*Math.PI*1.025)-1:he.globeRadius,gt=V.frameCounter/1e3%1,Ut=p.length(he.globeCenterInViewSpace),ht=Math.sqrt(Math.pow(Ut,2)-Math.pow(nt,2)),Dt=Math.acos(ht/Ut),wt={u_frustum_tl:he.frustumCorners.TL,u_frustum_tr:he.frustumCorners.TR,u_frustum_br:he.frustumCorners.BR,u_frustum_bl:he.frustumCorners.BL,u_horizon:he.frustumCorners.horizon,u_transition:ve,u_fadeout_range:st,u_color:X,u_high_color:de,u_space_color:we,u_star_intensity:We,u_star_size:5*p.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:gt,u_horizon_angle:Dt,u_rotation_matrix:He};V.prepareDrawProgram(q,fe);const zt=V.atmosphereBuffer;zt&&fe.draw(q,oe.TRIANGLES,me,p.StencilMode.disabled,p.ColorMode.alphaBlended,p.CullFaceMode.backCW,wt,"skybox",zt.vertexBuffer,zt.indexBuffer,zt.segments)}(this,this.style.fog),this.renderPass="sky",(p.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const V=this.style._layers[b[this.currentLayer]],U=o._getLayerSourceCache(V);V.isSky()&&this.renderLayer(this,U,V,U?k[U.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const V=this.style._layers[b[this.currentLayer]],U=o._getLayerSourceCache(V);if(V.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(V)){if(V.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=U?("symbol"===V.type?O:k)[U.id]:void 0;this._renderTileClippingMasks(V,U,U?S[U.id]:void 0),this.renderLayer(this,U,V,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let V=null;p.values(this.style._layers).forEach(U=>{const q=o._getLayerSourceCache(U);q&&!U.isHidden(this.transform.zoom)&&(!V||V.getSource().maxzoom<q.getSource().maxzoom)&&(V=q)}),V&&this.options.showTileBoundaries&&er.debug(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const U=V.transform.padding;Hd(V,V.transform.height-(U.top||0),3,jl),Hd(V,U.bottom||0,3,Hf),Fu(V,U.left||0,3,gg),Fu(V,V.transform.width-(U.right||0),3,$f);const q=V.transform.centerPoint;var oe,he,me,fe;Sc(oe=V,(he=q.x)-1,(me=V.transform.height-q.y)-10,2,20,fe=yg),Sc(oe,he-10,me-1,20,2,fe)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(p.window.performance.now()),this.saveCanvasCopy())}renderLayer(o,f,b,E){b.isHidden(this.transform.zoom)||("background"===b.type||"sky"===b.type||"custom"===b.type||E&&E.length)&&(this.id=b.id,this.gpuTimingStart(b),(!o.transform.projection.unsupportedLayers||!o.transform.projection.unsupportedLayers.includes(b.type)||o.terrain&&"custom"===b.type)&&er[b.type](o,f,b,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let b=this.gpuTimers[o.id];b||(b=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),b.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,f=o.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),o.beginQueryEXT(o.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const f={};for(const b in o){const E=o[b],S=this.context.extTimerQuery,k=S.getQueryObjectEXT(E.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(E.query),f[b]=k}return f}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let b=0;for(const E of o)b+=f.getQueryObjectEXT(E,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(E);return b}translatePosMatrix(o,f,b,E,S){if(!b[0]&&!b[1])return o;const k=S?"map"===E?this.transform.angle:0:"viewport"===E?-this.transform.angle:0;if(k){const V=Math.sin(k),U=Math.cos(k);b=[b[0]*U-b[1]*V,b[0]*V+b[1]*U]}const O=[S?b[0]:Et(f,b[0],this.transform.zoom),S?b[1]:Et(f,b[1],this.transform.zoom),0],F=new Float32Array(16);return p.translate(F,o,O),F}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){return null===o||void 0!==o&&!this.imageManager.getPattern(o.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const o=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&0===this.terrain.exaggeration(),b=this.style&&this.style.fog,E=[];return this.terrainRenderModeElevated()&&E.push("TERRAIN"),"globe"===this.transform.projection.name&&E.push("GLOBE"),f&&E.push("ZERO_EXAGGERATION"),b&&!o&&0!==b.getOpacity(this.transform.pitch)&&E.push("FOG"),o&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}useProgram(o,f,b){this.cache=this.cache||{};const E=b||[],S=this.currentGlobalDefines().concat(E),k=Ei.cacheKey(Rd[o],o,S,f);return this.cache[k]||(this.cache[k]=new Ei(this.context,o,Rd[o],f,jd[o],S)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=p.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(o,f,b){if(this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const S=E.getOpacity(this.transform.pitch),k=((O,F,V,U,q,oe,he,me,fe,ve,X)=>{const de=O.transform,we=F.properties.get("color").toArray01();we[3]=U;const Ce=O.frameCounter/1e3%1;return{u_fog_matrix:V?de.calculateFogTileMatrix(V):O.identityMat,u_fog_range:F.getFovAdjustedRange(de._fov),u_fog_color:we,u_fog_horizon_blend:F.properties.get("horizon-blend"),u_fog_temporal_offset:Ce,u_frustum_tl:q,u_frustum_tr:oe,u_frustum_br:he,u_frustum_bl:me,u_globe_pos:fe,u_globe_radius:ve,u_viewport:X,u_globe_transition:p.globeToMercatorTransition(de.zoom),u_is_globe:+("globe"===de.projection.name)}})(this,E,b,S,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*p.exported.devicePixelRatio,this.transform.height*p.exported.devicePixelRatio]);f.setFogUniformValues(o,k)}}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,f=o.createTexture();return o.bindTexture(o.TEXTURE_2D,f),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&0!==o.getOpacity(this.transform.pitch)}getBackgroundTiles(){const o=this._backgroundTiles,f=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const E of b)f[E.key]=o[E.key]||new p.Tile(E,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class Nu{constructor(o=0,f=0,b=0,E=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(b)||b<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=b,this.right=E}interpolate(o,f,b){return null!=f.top&&null!=o.top&&(this.top=p.number(o.top,f.top,b)),null!=f.bottom&&null!=o.bottom&&(this.bottom=p.number(o.bottom,f.bottom,b)),null!=f.left&&null!=o.left&&(this.left=p.number(o.left,f.left,b)),null!=f.right&&null!=o.right&&(this.right=p.number(o.right,f.right,b)),this}getCenter(o,f){const b=p.clamp((this.left+o-this.right)/2,0,o),E=p.clamp((this.top+f-this.bottom)/2,0,f);return new p.Point(b,E)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Nu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ul(g,o){const f=p.getColumn(g,3);p.fromQuat(g,o),p.setColumn(g,3,f)}function di(g,o){const f=p.identity$1([]);return p.rotateZ$1(f,f,-o),p.rotateX$1(f,f,-g),f}function Bu(g,o){const f=[g[0],g[1],0],b=[o[0],o[1],0];if(p.length(f)>=1e-15){const k=p.normalize([],f);p.scale$2(b,k,p.dot(b,k)),o[0]=b[0],o[1]=b[1]}const E=p.cross([],o,g);if(p.len(E)<1e-15)return null;const S=Math.atan2(-E[1],E[0]);return di(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),S)}class zu{constructor(o,f){this.position=o,this.orientation=f}get position(){return this._position}set position(o){if(o){const f=o instanceof p.MercatorCoordinate?o:new p.MercatorCoordinate(o[0],o[1],o[2]);this._renderWorldCopies&&(f.x=p.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(o,f){if(this.orientation=null,!this.position)return;const b=this.position,E=this._elevation?this._elevation.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(o)):0,S=p.MercatorCoordinate.fromLngLat(o,E),k=[S.x-b.x,S.y-b.y,S.z-b.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=Bu(k,f)}setPitchBearing(o,f){this.orientation=di(p.degToRad(o),p.degToRad(-f))}}class Hl{constructor(o,f){this._transform=p.identity([]),this.orientation=f,this.position=o}get mercatorPosition(){const o=this.position;return new p.MercatorCoordinate(o[0],o[1],o[2])}get position(){const o=p.getColumn(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var f;o&&p.setColumn(this._transform,3,[(f=o)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||p.identity$1([]),o&&Ul(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,f){this._orientation=di(o,f),Ul(this._transform,this._orientation)}forward(){const o=p.getColumn(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=p.getColumn(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=p.getColumn(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,f){const b=new Float64Array(16);return p.invert(b,this.getWorldToCamera(o,f)),b}getWorldToCameraPosition(o,f,b){const E=this.position;p.scale$2(E,E,-o);const S=new Float64Array(16);return p.fromScaling(S,[b,b,b]),p.translate(S,S,E),S[10]*=f,S}getWorldToCamera(o,f){const b=new Float64Array(16),E=new Float64Array(4),S=this.position;return p.conjugate(E,this._orientation),p.scale$2(S,S,-o),p.fromQuat(b,E),p.translate(b,b,S),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=f,b[9]*=f,b[10]*=f,b[11]*=f,b}getCameraToClipPerspective(o,f,b,E){const S=new Float64Array(16);return p.perspective(S,o,f,b,E),S}getDistanceToElevation(o,f=!1){const b=0===o?0:p.mercatorZfromAltitude(o,f?p.latFromMercatorY(this.position[1]):this.position[1]),E=this.forward();return(b-this.position[2])/E[2]}clone(){return new Hl([...this.position],[...this.orientation])}}function Ws(g,o){const f=Mc(g.projection,g.zoom,g.width,g.height),b=function(S,k,O,F,V){const U=new p.LngLat(O.lng-180*qs,O.lat),q=new p.LngLat(O.lng+180*qs,O.lat),oe=S.project(U.lng,U.lat),he=S.project(q.lng,q.lat),me=-Math.atan2(he.y-oe.y,he.x-oe.x),fe=p.MercatorCoordinate.fromLngLat(O);fe.y=p.clamp(fe.y,-1+qs,1-qs);const ve=fe.toLngLat(),X=S.project(ve.lng,ve.lat),de=p.MercatorCoordinate.fromLngLat(ve);de.x+=qs;const we=de.toLngLat(),Ce=S.project(we.lng,we.lat),He=us(Ce.x-X.x,Ce.y-X.y,me),We=p.MercatorCoordinate.fromLngLat(ve);We.y+=qs;const $e=We.toLngLat(),st=S.project($e.lng,$e.lat),nt=us(st.x-X.x,st.y-X.y,me),gt=Math.abs(He.x)/Math.abs(nt.y),Ut=p.identity([]);p.rotateZ(Ut,Ut,-me*(1-(V?0:F)));const ht=p.identity([]);return p.scale(ht,ht,[1,1-(1-gt)*F,1]),ht[4]=-nt.x/nt.y*F,p.rotateZ(ht,ht,me),p.multiply(ht,Ut,ht),ht}(g.projection,0,g.center,f,o),E=ju(g);return p.scale(b,b,[E,E,1]),b}function ju(g){const o=g.projection,f=Mc(g.projection,g.zoom,g.width,g.height),b=qf(o,g.center),E=qf(o,p.LngLat.convert(o.center));return Math.pow(2,b*f+(1-f)*E)}function Mc(g,o,f,b,E=1/0){const S=g.range;if(!S)return 0;const k=Math.min(E,Math.max(f,b)),O=Math.log(k/1024)/Math.LN2;return p.smoothstep(S[0]+O,S[1]+O,o)}const qs=1/4e4;function qf(g,o){const f=p.clamp(o.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),b=new p.LngLat(o.lng-180*qs,f),E=new p.LngLat(o.lng+180*qs,f),S=g.project(b.lng,f),k=g.project(E.lng,f),O=p.MercatorCoordinate.fromLngLat(b),F=p.MercatorCoordinate.fromLngLat(E),V=k.x-S.x,U=k.y-S.y,q=F.x-O.x,oe=F.y-O.y,he=Math.sqrt((q*q+oe*oe)/(V*V+U*U));return Math.log(he)/Math.LN2}function us(g,o,f){const b=Math.cos(f),E=Math.sin(f);return{x:g*b-o*E,y:g*E+o*b}}class Xo{constructor(o,f,b,E,S,k,O){this.tileSize=512,this._renderWorldCopies=void 0===S||S,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=b??0,this._maxPitch=E??60,this.setProjection(k),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new p.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Nu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Hl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const o=new Xo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(o,f=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||b)&&this._updateCameraOnTerrain(),(o||b)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return p.pick(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=p.getProjection(this.projectionOptions);const b=!ge(f,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=p.getProjection({name:"mercator"});const f=o!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(o){void 0===o?o=!0:null===o&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return p.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new p.Point(this.width,this.height)}get bearing(){return p.wrap(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const f=-o*Math.PI/180;var b,E,S,k,O,F,V,U,q,oe;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(b=new p.ARRAY_TYPE(4),p.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),E=this.rotationMatrix,k=this.angle,O=(S=this.rotationMatrix)[0],F=S[1],V=S[2],U=S[3],q=Math.sin(k),oe=Math.cos(k),E[0]=O*oe+V*q,E[1]=F*oe+U*q,E[2]=O*-q+V*oe,E[3]=F*-q+U*oe)}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const f=p.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=p.degToRad(o),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const f=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const o=this._elevation;this._centerAltitude=o.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=o.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let E=0,S=0;for(let k=0;k<f.length;k++){const O=new p.Point(f[k][0]*this.width,b+f[k][1]*(this.height-b)),F=o.pointCoordinate(O);if(!F)continue;const V=1/Math.hypot(F[0]-this._camera.position[0],F[1]-this._camera.position[1]);E+=F[3]*V,S+=V}return 0===S?NaN:E/S}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const o=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*f,E=this._mercatorZfromZoom(o),S=this._mercatorZfromZoom(this._maxZoom),k=Math.max(E-b,S);this._setZoom(this._zoomFromMercatorZ(k))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let b;b=o.z<this._camera.position[2]?[f.x,f.y,f.z]:[o.x,o.y,o.z];const E=p.length(p.sub([],this._camera.position,b));return p.clamp(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let f=!1;if(o.orientation&&!p.exactEquals(o.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(o.orientation)),o.position){const b=[o.position.x,o.position.y,o.position.z];p.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,f=new zu;return f.position=new p.MercatorCoordinate(o[0],o[1],o[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(o){if(!p.length$1(o))return!1;p.normalize$1(o,o);const f=p.transformQuat([],[0,0,-1],o),b=p.transformQuat([],[0,-1,0],o);if(b[2]<0)return!1;const E=Bu(f,b);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(o){const f=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;o[2]=p.clamp(o[2],E/b,E/f),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,b){this._unmodified=!1,this._edgeInsets.interpolate(o,f,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const f=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(o){const f=[new p.UnwrappedTileID(0,o)];if(this.renderWorldCopies){const b=this.pointCoordinate(new p.Point(0,0)),E=this.pointCoordinate(new p.Point(this.width,0)),S=this.pointCoordinate(new p.Point(this.width,this.height)),k=this.pointCoordinate(new p.Point(0,this.height)),O=Math.floor(Math.min(b.x,E.x,S.x,k.x)),F=Math.floor(Math.max(b.x,E.x,S.x,k.x)),V=1;for(let U=O-V;U<=F+V;U++)0!==U&&f.push(new p.UnwrappedTileID(U,o))}return f}coveringTiles(o){let f=this.coveringZoomLevel(o);const b=f,E=this.elevation&&!o.isTerrainDEM,S="mercator"===this.projection.name;if(void 0!==o.minzoom&&f<o.minzoom)return[];void 0!==o.maxzoom&&f>o.maxzoom&&(f=o.maxzoom);const k=this.locationCoordinate(this.center),O=this.center.lat,F=1<<f,V=[F*k.x,F*k.y,0],U="globe"===this.projection.name,q=!U,oe=p.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,q),he=U?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),me=F*p.mercatorZfromAltitude(1,this.center.lat),fe=this._camera.position[2]/p.mercatorZfromAltitude(1,this.center.lat),ve=[F*he.x,F*he.y,fe*(q?1:me)],X=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),de=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,we=o.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Ce=o.isTerrainDEM?-we:this._elevation?this._elevation.getMinElevationBelowMSL():0,He=this.projection.isReprojectedInTileSpace?ju(this):1,We=mt=>{const jt=new p.MercatorCoordinate(mt.x+25e-6,mt.y,mt.z),Lt=new p.MercatorCoordinate(mt.x,mt.y+25e-6,mt.z),Yt=mt.toLngLat(),En=jt.toLngLat(),Fn=Lt.toLngLat(),yn=this.locationCoordinate(Yt),Dn=this.locationCoordinate(En),oi=this.locationCoordinate(Fn),ii=Math.hypot(Dn.x-yn.x,Dn.y-yn.y),bn=Math.hypot(oi.x-yn.x,oi.y-yn.y);return Math.sqrt(ii*bn)*He/25e-6},$e=mt=>{const Mt=we,jt=Ce;return{aabb:p.tileAABB(this,F,0,0,0,mt,jt,Mt,this.projection),zoom:0,x:0,y:0,minZ:jt,maxZ:Mt,wrap:mt,fullyVisible:!1}},st=[];let nt=[];const gt=f,Ut=o.reparseOverscaled?b:f,ht=mt=>mt*mt,Dt=ht((fe-this._centerAltitude)*me),wt=mt=>{if(!this._elevation||!mt.tileID||!S)return;const Mt=this._elevation.getMinMaxForTile(mt.tileID),jt=mt.aabb;Mt?(jt.min[2]=Mt.min,jt.max[2]=Mt.max,jt.center[2]=(jt.min[2]+jt.max[2])/2):(mt.shouldSplit=zt(mt),mt.shouldSplit||(jt.min[2]=jt.max[2]=jt.center[2]=this._centerAltitude))},zt=mt=>{if(mt.zoom<de)return!0;if(mt.zoom===gt)return!1;if(null!=mt.shouldSplit)return mt.shouldSplit;const Mt=mt.aabb.distanceX(ve),jt=mt.aabb.distanceY(ve);let Lt=Dt,Yt=1;if(U){Lt=ht(mt.aabb.distanceZ(ve));const yn=Math.pow(2,mt.zoom),Dn=p.latFromMercatorY((mt.y+1)/yn),oi=p.latFromMercatorY(mt.y/yn),ii=Math.min(Math.max(O,Dn),oi),bn=p.circumferenceAtLatitude(ii)/p.circumferenceAtLatitude(O);if(Yt=ii===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,bn/this._mercatorScaleRatio),this.zoom<=p.GLOBE_ZOOM_THRESHOLD_MIN&&mt.zoom===gt-1&&bn>=.9)return!0}else if(E&&(Lt=ht(mt.aabb.distanceZ(ve)*me)),this.projection.isReprojectedInTileSpace&&b<=5){const yn=Math.pow(2,mt.zoom),Dn=We(new p.MercatorCoordinate((mt.x+.5)/yn,(mt.y+.5)/yn));Yt=Dn>.85?1:Dn}const En=Mt*Mt+jt*jt+Lt;return En<ht((1<<gt-mt.zoom)*X*Yt*((yn,Dn)=>{if(Dn*ht(.707)<yn)return 1;const oi=Math.sqrt(Dn/yn);return oi/(1.4144271570014144+(Math.pow(1.1,oi-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Lt,Dt),En))};if(this.renderWorldCopies)for(let mt=1;mt<=3;mt++)st.push($e(-mt)),st.push($e(mt));for(st.push($e(0));st.length>0;){const mt=st.pop(),Mt=mt.x,jt=mt.y;let Lt=mt.fullyVisible;if(!Lt){const Yt=mt.aabb.intersects(oe);if(0===Yt)continue;Lt=2===Yt}if(mt.zoom!==gt&&zt(mt))for(let Yt=0;Yt<4;Yt++){const En=(Mt<<1)+Yt%2,Fn=(jt<<1)+(Yt>>1),yn={aabb:S?mt.aabb.quadrant(Yt):p.tileAABB(this,F,mt.zoom+1,En,Fn,mt.wrap,mt.minZ,mt.maxZ,this.projection),zoom:mt.zoom+1,x:En,y:Fn,wrap:mt.wrap,fullyVisible:Lt,tileID:void 0,shouldSplit:void 0,minZ:mt.minZ,maxZ:mt.maxZ};E&&!U&&(yn.tileID=new p.OverscaledTileID(mt.zoom+1===gt?Ut:mt.zoom+1,mt.wrap,mt.zoom+1,En,Fn),wt(yn)),st.push(yn)}else{const Yt=mt.zoom===gt?Ut:mt.zoom;if(o.minzoom&&o.minzoom>Yt)continue;const En=V[0]-(.5+Mt+(mt.wrap<<mt.zoom))*(1<<f-mt.zoom),Fn=V[1]-.5-jt,yn=mt.tileID?mt.tileID:new p.OverscaledTileID(Yt,mt.wrap,mt.zoom,Mt,jt);nt.push({tileID:yn,distanceSq:En*En+Fn*Fn})}}if(this.fogCullDistSq){const mt=this.fogCullDistSq,Mt=this.horizonLineFromTop();nt=nt.filter(jt=>{const Lt=[0,0,0,1],Yt=[p.EXTENT,p.EXTENT,0,1],En=this.calculateFogTileMatrix(jt.tileID.toUnwrapped());p.transformMat4$1(Lt,Lt,En),p.transformMat4$1(Yt,Yt,En);const Fn=p.getAABBPointSquareDist(Lt,Yt);if(0===Fn)return!0;let yn=!1;const Dn=this._elevation;if(Dn&&Fn>mt&&0!==Mt){const oi=this.calculateProjMatrix(jt.tileID.toUnwrapped());let ii;o.isTerrainDEM||(ii=Dn.getMinMaxForTile(jt.tileID)),ii||(ii={min:Ce,max:we});const bn=p.furthestTileCorner(this.rotation),Pi=[bn[0]*p.EXTENT,bn[1]*p.EXTENT,ii.max];p.transformMat4(Pi,Pi,oi),yn=(1-Pi[1])*this.height*.5<Mt}return Fn<mt||yn})}return nt.sort((mt,Mt)=>mt.distanceSq-Mt.distanceSq).map(mt=>mt.tileID)}resize(o,f){this.width=o,this.height=f,this.pixelsToGLUnits=[2/o,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const f=p.clamp(o.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),b=this.projection.project(o.lng,f);return new p.Point(b.x*this.worldSize,b.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/p.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,f){let b,E;const S=this.centerPoint;if("globe"===this.projection.name){const O=this.worldSize;b=(f.x-S.x)/O,E=(f.y-S.y)/O}else{const O=this.pointCoordinate(f),F=this.pointCoordinate(S);b=O.x-F.x,E=O.y-F.y}const k=this.locationCoordinate(o);this.setLocation(new p.MercatorCoordinate(k.x-b,k.y-E))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o){return this.projection.locationPoint(this,o)}locationPoint3D(o){return this.projection.locationPoint(this,o,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o){return this.coordinateLocation(this.pointCoordinate3D(o))}locationCoordinate(o,f){const b=f?p.mercatorZfromAltitude(f,o.lat):void 0,E=this.projection.project(o.lng,o.lat);return new p.MercatorCoordinate(E.x,E.y,b)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,f){const b=f??this._centerAltitude,E=[o.x,o.y,0,1],S=[o.x,o.y,1,1];p.transformMat4$1(E,E,this.pixelMatrixInverse),p.transformMat4$1(S,S,this.pixelMatrixInverse);const k=S[3];p.scale$1(E,E,1/E[3]),p.scale$1(S,S,1/k);const O=E[2],F=S[2];return{p0:E,p1:S,t:O===F?0:(b-O)/(F-O)}}screenPointToMercatorRay(o){const f=[o.x,o.y,0,1],b=[o.x,o.y,1,1];return p.transformMat4$1(f,f,this.pixelMatrixInverse),p.transformMat4$1(b,b,this.pixelMatrixInverse),p.scale$1(f,f,1/f[3]),p.scale$1(b,b,1/b[3]),f[2]=p.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,b[2]=p.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,p.scale$1(f,f,1/this.worldSize),p.scale$1(b,b,1/this.worldSize),new p.Ray([f[0],f[1],f[2]],p.normalize([],p.sub([],b,f)))}rayIntersectionCoordinate(o){const{p0:f,p1:b,t:E}=o,S=p.mercatorZfromAltitude(f[2],this._center.lat),k=p.mercatorZfromAltitude(b[2],this._center.lat);return new p.MercatorCoordinate(p.number(f[0],b[0],E)/this.worldSize,p.number(f[1],b[1],E)/this.worldSize,p.number(S,k,E))}pointCoordinate(o,f=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,f)}pointCoordinate3D(o){if(!this.elevation)return this.pointCoordinate(o);let f=this.projection.pointCoordinate3D(this,o.x,o.y);if(f)return new p.MercatorCoordinate(f[0],f[1],f[2]);let b=0,E=this.horizonLineFromTop();if(o.y>E)return this.pointCoordinate(o);const S=.02*E,k=o.clone();for(let O=0;O<10&&E-b>S;O++){k.y=p.number(b,E,.66);const F=this.projection.pointCoordinate3D(this,k.x,k.y);F?(E=k.y,f=F):b=k.y}return f?new p.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(o);const f=this.pointCoordinate(o);return f.y>=0&&f.y<=1}_coordinatePoint(o,f){const b=f&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,E=[o.x*this.worldSize,o.y*this.worldSize,b+o.toAltitude(),1];return p.transformMat4$1(E,E,this.pixelMatrix),E[3]>0?new p.Point(E[0]/E[3],E[1]/E[3]):new p.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:f}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,S=this.pointLocation3D(new p.Point(f,o)),k=this.pointLocation3D(new p.Point(E,o)),O=this.pointLocation3D(new p.Point(E,b)),F=this.pointLocation3D(new p.Point(f,b));let V=Math.min(S.lng,k.lng,O.lng,F.lng),U=Math.max(S.lng,k.lng,O.lng,F.lng),q=Math.min(S.lat,k.lat,O.lat,F.lat),oe=Math.max(S.lat,k.lat,O.lat,F.lat);const he=Math.pow(2,-this.zoom)/16*270,me="globe"===this.projection.name?1:4,fe=(ve,X,de,we,Ce)=>{const He=(ve+de)/2,We=(X+we)/2,$e=new p.Point(He,We),{lng:st,lat:nt}=this.pointLocation3D($e),gt=Math.max(0,V-st,q-nt,st-U,nt-oe);V=Math.min(V,st),U=Math.max(U,st),q=Math.min(q,nt),oe=Math.max(oe,nt),(Ce<me||gt>he)&&(fe(ve,X,He,We,Ce+1),fe(He,We,de,we,Ce+1))};if(fe(f,o,E,o,1),fe(E,o,E,b,1),fe(E,b,f,b,1),fe(f,b,f,o,1),"globe"===this.projection.name){const[ve,X]=p.polesInViewport(this);ve?(oe=90,U=180,V=-180):X&&(q=-90,U=180,V=-180)}return new p.LngLatBounds(new p.LngLat(V,q),new p.LngLat(U,oe))}_getBoundsRectangular(o,f){const{top:b,left:E}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,k=this.width-this._edgeInsets.right,O=new p.Point(E,b),F=new p.Point(k,b),V=new p.Point(k,S),U=new p.Point(E,S);let q=this.pointCoordinate(O,o),oe=this.pointCoordinate(F,o);const he=this.pointCoordinate(V,f),me=this.pointCoordinate(U,f),fe=(ve,X)=>(X.y-ve.y)/(X.x-ve.x);return q.y>1&&oe.y>=0?q=new p.MercatorCoordinate((1-me.y)/fe(me,q)+me.x,1):q.y<0&&oe.y<=1&&(q=new p.MercatorCoordinate(-me.y/fe(me,q)+me.x,0)),oe.y>1&&q.y>=0?oe=new p.MercatorCoordinate((1-he.y)/fe(he,oe)+he.x,1):oe.y<0&&q.y<=1&&(oe=new p.MercatorCoordinate(-he.y/fe(he,oe)+he.x,0)),(new p.LngLatBounds).extend(this.coordinateLocation(q)).extend(this.coordinateLocation(oe)).extend(this.coordinateLocation(me)).extend(this.coordinateLocation(he))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=o.visibleDemTiles.reduce((b,E)=>{if(E.dem){const S=E.dem.tree;b.min=Math.min(b.min,S.minimums[0]),b.max=Math.max(b.max,S.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*o.exaggeration(),f.max*o.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-f*(1-this._horizonShift);return o?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-p.MAX_MERCATOR_LATITUDE,this.maxLat=p.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=p.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=p.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=p.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=p.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,f){return this.projection.createTileMatrix(this,f,o)}calculateDistanceTileData(o){const f=o.key,b=this._distanceTileDataCache;if(b[f])return b[f];const E=o.canonical,S=1/this.height,k=this.cameraWorldSize,O=k/this.zoomScale(E.z),F=(E.x+Math.pow(2,E.z)*o.wrap)*O,V=E.y*O,U=this.point;U.x*=k/this.worldSize,U.y*=k/this.worldSize;const q=this.angle,oe=Math.sin(-q),he=-Math.cos(-q);return b[f]={bearing:[oe,he],center:[(U.x-F)*S,(U.y-V)*S],scale:O/p.EXTENT*S},b[f]}calculateFogTileMatrix(o){const f=o.key,b=this._fogTileMatrixCache;if(b[f])return b[f];const E=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return p.multiply(E,this.worldToFogMatrix,E),b[f]=new Float32Array(E),b[f]}calculateProjMatrix(o,f=!1){const b=o.key,E=f?this._alignedProjMatrixCache:this._projMatrixCache;if(E[b])return E[b];const S=this.calculatePosMatrix(o,this.worldSize);return p.multiply(S,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,S),E[b]=new Float32Array(S),E[b]}calculatePixelsToTileUnitsMatrix(o){const f=o.tileID.key,b=this._pixelsToTileUnitsCache;if(b[f])return b[f];const E=function(S,k){const{scale:O}=S.tileTransform,F=O*p.EXTENT/(S.tileSize*Math.pow(2,k.zoom-S.tileID.overscaledZ+S.tileID.canonical.z));return V=new Float32Array(4),oe=(U=k.inverseAdjustmentMatrix)[1],he=U[2],me=U[3],ve=(q=[F,F])[1],V[0]=U[0]*(fe=q[0]),V[1]=oe*fe,V[2]=he*ve,V[3]=me*ve,V;var V,U,q,oe,he,me,fe,ve}(o,this);return b[f]=E,b[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const o=1/this.worldSize,f=p.fromScaling([],[o,o,o]);return p.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const o=this._elevation;this._updateCameraState();const f=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),E=this._camera.forward(),S=p.mercatorZfromAltitude(1,this._center.lat);b[2]/=S,E[2]/=S,p.normalize(E,E);const k=o.raycast(b,E,o.exaggeration());if(k){const O=p.scaleAndAdd([],b,E,k),F=new p.MercatorCoordinate(O[0],O[1],p.mercatorZfromAltitude(O[2],p.latFromMercatorY(O[1]))),V=(F.z+p.length([F.x-b[0],F.y-b[1],F.z-b[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(V),this._centerAltitude=F.toAltitude(),this._center=this.coordinateLocation(F),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const f=this._elevation,b=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(b),S=f.getAtPointOrZero(new p.MercatorCoordinate(...E)),k=this.pixelsPerMeter/this.worldSize*S,O=this._minimumHeightOverTerrain(),F=E[2]-k;if(F<=O)if(F<0||o){const V=this.locationCoordinate(this._center,this._centerAltitude),U=[E[0],E[1],V.z-E[2]],q=p.length(U);U[2]-=(O-F)/this._pixelsPerMercatorPixel;const oe=p.length(U);if(0===oe)return;p.scale$2(U,U,q/oe*this._pixelsPerMercatorPixel),this._camera.position=[E[0],E[1],V.z*this._pixelsPerMercatorPixel-U[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const oe=this.center;return oe.lat=p.clamp(oe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(oe.lng=p.clamp(oe.lng,this.minLng,this.maxLng)),this.center=oe,void(this._constraining=!1)}const f=this._unmodified,{x:b,y:E}=this.point;let S=0,k=b,O=E;const F=this.width/2,V=this.height/2,U=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(E-V<U&&(O=U+V),E+V>q&&(O=q-V),q-U<this.height&&(S=Math.max(S,this.height/(q-U)),O=(q+U)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const oe=this.worldMinX*this.scale,he=this.worldMaxX*this.scale,me=this.worldSize/2-(oe+he)/2;k=(b+me+this.worldSize)%this.worldSize-me,k-F<oe&&(k=oe+F),k+F>he&&(k=he-F),he-oe<this.width&&(S=Math.max(S,this.width/(he-oe)),k=(he+oe)/2)}k===b&&O===E||(this.center=this.unproject(new p.Point(k,O))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,f=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=p.mercatorZfromAltitude(1,this.center.lat)/p.mercatorZfromAltitude(1,p.GLOBE_SCALE_MATCH_LATITUDE));const b=Mc(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E="meters"===this.projection.zAxisUnit?f:1,S=this._camera.getWorldToCamera(this.worldSize,E),k=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);k[8]=2*-o.x/this.width,k[9]=2*o.y/this.height;let O=p.mul([],k,S);if(this.projection.isReprojectedInTileSpace){const We=this.locationCoordinate(this.center),$e=p.identity([]);p.translate($e,$e,[We.x*this.worldSize,We.y*this.worldSize,0]),p.multiply($e,$e,Ws(this)),p.translate($e,$e,[-We.x*this.worldSize,-We.y*this.worldSize,0]),p.multiply(O,O,$e),this.inverseAdjustmentMatrix=function(st){const nt=Ws(st,!0);return Y([],[nt[0],nt[1],nt[4],nt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=p.scale([],O,[this.worldSize,this.worldSize,this.worldSize/E,1]),this.projMatrix=O,this.invProjMatrix=p.invert(new Float64Array(16),this.projMatrix);const F=p.invert([],k);this.frustumCorners=p.FrustumCorners.fromInvProjectionMatrix(F,this.horizonLineFromTop(),this.height);const V=new Float32Array(16);p.identity(V),p.scale(V,V,[1,-1,1]),p.rotateX(V,V,this._pitch),p.rotateZ(V,V,this.angle);const U=p.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;U[8]=2*-o.x/this.width,U[9]=2*(o.y+q)/this.height,this.skyboxMatrix=p.multiply(V,U,V);const oe=this.point,he=oe.x,me=oe.y,fe=this.width%2/2,ve=this.height%2/2,X=Math.cos(this.angle),de=Math.sin(this.angle),we=he-Math.round(he)+X*fe+de*ve,Ce=me-Math.round(me)+X*ve+de*fe,He=new Float64Array(O);if(p.translate(He,He,[we>.5?we-1:we,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=He,O=p.create(),p.scale(O,O,[this.width/2,-this.height/2,1]),p.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=p.create(),p.scale(O,O,[1,-1,1]),p.translate(O,O,[-1,-1,0]),p.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=p.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},O=p.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=p.calculateGlobeMatrix(this);const We=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=p.transformMat4(We,We,S),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,b=this._camera.position,E=1/this.height/this._pixelsPerMercatorPixel,S=[o,o,f];p.scale$2(S,S,E),p.scale$2(b,b,-1),p.multiply$2(b,b,S);const k=p.create();p.translate(k,k,b),p.scale(k,k,S),this.mercatorFogMatrix=k,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,f,E)}_computeCameraPosition(o){const f=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),E=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-o/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-b[0]*S,E.y/this.worldSize-b[1]*S,o/this.worldSize*this._centerAltitude-b[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],E=o[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),E>0&&(S=Math.min((f-b)/E,1)),this._camera.position=p.scaleAndAdd([],this._camera.position,o,S),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,f=this._camera.forward(),{pitch:b,bearing:E}=this._camera.getPitchBearing(),S=p.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,k=this._mercatorZfromZoom(this._maxZoom)*Math.cos(p.degToRad(this._maxPitch)),O=Math.max((o[2]-S)/Math.cos(b),k),F=this._zoomFromMercatorZ(O);p.scaleAndAdd(o,o,f,O),this._pitch=p.clamp(b,p.degToRad(this.minPitch),p.degToRad(this.maxPitch)),this.angle=p.wrap(E,-Math.PI,Math.PI),this._setZoom(p.clamp(F,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new p.MercatorCoordinate(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let f=0,b=p.GLOBE_ZOOM_THRESHOLD_MAX,E=0,S=1/0;for(;b-f>1e-6&&b>f;){const k=f+.5*(b-f),O=this.tileSize*Math.pow(2,k),F=this.getCameraToCenterDistance(this.projection,k,O),V=this.scaleZoom(F/(o*this.tileSize)),U=Math.abs(k-V);U<S&&(S=U,E=k),k<V?f=k:b=k}return E}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(p.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,f){const b=Math.min(o.x,f.x),E=Math.max(o.x,f.x),S=Math.min(o.y,f.y),k=Math.max(o.y,f.y);if(S<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const O=[new p.Point(b,S),new p.Point(E,k),new p.Point(b,k),new p.Point(E,S)],F=this.renderWorldCopies?-3:0,V=this.renderWorldCopies?4:1;for(const U of O){const q=this.pointRayIntersection(U);if(q.t<0)return!0;const oe=this.rayIntersectionCoordinate(q);if(oe.x<F||oe.y<0||oe.x>V||oe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+p.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new p.Point(0,0),new p.Point(this.width,this.height))}zoomDeltaToMovement(o,f){const b=p.length(p.sub([],this._camera.position,o)),E=this._zoomFromMercatorZ(b)+f;return b-this._mercatorZfromZoom(E)}getCameraPoint(){if("globe"===this.projection.name){const o=function([f,b,E],S){const k=[f,b,E,1];p.transformMat4$1(k,k,S);const O=k[3]=Math.max(k[3],1e-6);return k[0]/=O,k[1]/=O,k[2]/=O,k}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new p.Point(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new p.Point(0,o))}}getCameraToCenterDistance(o,f=this.zoom,b=this.worldSize){const E=Mc(o,f,this.width,this.height,1024),S=o.pixelSpaceConversion(this.center.lat,b,E);return.5/Math.tan(.5*this._fov)*this.height*S}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&p.multiply(o,o,this.globeMatrix),o}}function $l(g,o){let f=!1,b=null;const E=()=>{b=null,f&&(g(),b=setTimeout(E,o),f=!1)};return()=>(f=!0,b||E(),b)}class Cp{constructor(o){this._hashName=o&&encodeURIComponent(o),p.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=$l(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,p.window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),p.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const f=Ss(o);if(this._hashName){const b=this._hashName;let E=!1;const S=p.window.location.hash.slice(1).split("&").map(k=>{const O=k.split("=")[0];return O===b?(E=!0,`${O}=${f}`):k}).filter(k=>k);return E||S.push(`${b}=${f}`),`#${S.join("&")}`}return`#${f}`}_getCurrentHash(){const o=p.window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(f=b)}),(f&&f[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(b=>isNaN(b))){const b=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(f[3]||0):o.getBearing();return o.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:b,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=p.window.location.href.replace(/(#.+)?$/,this.getHashString());p.window.history.replaceState(p.window.history.state,null,o)}}function Ss(g,o){const f=g.getCenter(),b=Math.round(100*g.getZoom())/100,E=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,E),k=Math.round(f.lng*S)/S,O=Math.round(f.lat*S)/S,F=g.getBearing(),V=g.getPitch();let U=o?`/${k}/${O}/${b}`:`${b}/${O}/${k}`;return(F||V)&&(U+="/"+Math.round(10*F)/10),V&&(U+=`/${Math.round(V)}`),U}const Ic={linearity:.3,easing:p.bezier(0,0,.3,1)},Dc=p.extend({deceleration:2500,maxSpeed:1400},Ic),Vu=p.extend({deceleration:20,maxSpeed:1400},Ic),pn=p.extend({deceleration:1e3,maxSpeed:360},Ic),Zs=p.extend({deceleration:1e3,maxSpeed:90},Ic);class $d{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=p.exported.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new p.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)f.zoom+=S.zoomDelta||0,f.bearing+=S.bearingDelta||0,f.pitch+=S.pitchDelta||0,S.panDelta&&f.pan._add(S.panDelta),S.around&&(f.around=S.around),S.pinchAround&&(f.pinchAround=S.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(f.pan.mag()){const S=Gl(f.pan.mag(),b,p.extend({},Dc,o||{}));E.offset=f.pan.mult(S.amount/f.pan.mag()),E.center=this._map.transform.center,kc(E,S)}if(f.zoom){const S=Gl(f.zoom,b,Vu);E.zoom=this._map.transform.zoom+S.amount,kc(E,S)}if(f.bearing){const S=Gl(f.bearing,b,pn);E.bearing=this._map.transform.bearing+p.clamp(S.amount,-179,179),kc(E,S)}if(f.pitch){const S=Gl(f.pitch,b,Zs);E.pitch=this._map.transform.pitch+S.amount,kc(E,S)}if(E.zoom||E.bearing){const S=void 0===f.pinchAround?f.around:f.pinchAround;E.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function kc(g,o){(!g.duration||g.duration<o.duration)&&(g.duration=o.duration,g.easing=o.easing)}function Gl(g,o,f){const{maxSpeed:b,linearity:E,deceleration:S}=f,k=p.clamp(g*E/(o/1e3),-b,b),O=Math.abs(k)/(S*E);return{easing:f.easing,duration:1e3*O,amount:k*(O/2)}}class Tr extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,b,E={}){const S=ue(f.getCanvasContainer(),b),k=f.unproject(S);super(o,p.extend({point:S,lngLat:k,originalEvent:b},E)),this._defaultPrevented=!1,this.target=f}}class Ac extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,b){const E="touchend"===o?b.changedTouches:b.touches,S=ne(f.getCanvasContainer(),E),k=S.map(F=>f.unproject(F)),O=S.reduce((F,V,U,q)=>F.add(V.div(q.length)),new p.Point(0,0));super(o,{points:S,point:O,lngLats:k,lngLat:f.unproject(O),originalEvent:b}),this._defaultPrevented=!1}}class Pc extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,b){super(o,{originalEvent:b}),this._defaultPrevented=!1}}class Wl{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Pc(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new Tr(o.type,this._map,o))}mouseup(o){this._map.fire(new Tr(o.type,this._map,o))}preclick(o){const f=p.extend({},o);f.type="preclick",this._map.fire(new Tr(f.type,this._map,f))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Tr(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Tr(o.type,this._map,o))}mouseover(o){this._map.fire(new Tr(o.type,this._map,o))}mouseout(o){this._map.fire(new Tr(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Ac(o.type,this._map,o))}touchmove(o){this._map.fire(new Ac(o.type,this._map,o))}touchend(o){this._map.fire(new Ac(o.type,this._map,o))}touchcancel(o){this._map.fire(new Ac(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ql{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Tr(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Tr(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zl{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&0===o.button&&(ye(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const b=f,E=this._startPos,S=this._lastPos;if(!E||!S||S.equals(b)||!this._box&&b.dist(E)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=Je("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const k=Math.min(E.x,b.x),O=Math.max(E.x,b.x),F=Math.min(E.y,b.y),V=Math.max(E.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${k}px,${F}px)`,this._box.style.width=O-k+"px",this._box.style.height=V-F+"px")})}mouseupWindow(o,f){if(!this._active)return;const b=this._startPos,E=f;if(b&&0===o.button){if(this.reset(),W(),b.x!==E.x||b.y!==E.y)return this._map.fire(new p.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:S=>S.fitScreenCoordinates(b,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&27===o.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),pe(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new p.Event(o,{originalEvent:f}))}}function Oc(g,o){const f={};for(let b=0;b<g.length;b++)f[g[b].identifier]=o[b];return f}class Ys{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,f,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=o.timeStamp),b.length===this.numTouches&&(this.centroid=function(E){const S=new p.Point(0,0);for(const k of E)S._add(k);return S.div(E.length)}(f),this.touches=Oc(b,f)))}touchmove(o,f,b){if(this.aborted||!this.centroid)return;const E=Oc(b,f);for(const S in this.touches){const k=E[S];(!k||k.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(o,f,b){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),0===b.length){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class Sp{constructor(o){this.singleTap=new Ys(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,f,b){this.singleTap.touchstart(o,f,b)}touchmove(o,f,b){this.singleTap.touchmove(o,f,b)}touchend(o,f,b){const E=this.singleTap.touchend(o,f,b);if(E){const S=o.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(E)<30;if(S&&k||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Zf{constructor(){this._zoomIn=new Sp({numTouches:1,numTaps:2}),this._zoomOut=new Sp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,b){this._zoomIn.touchstart(o,f,b),this._zoomOut.touchstart(o,f,b)}touchmove(o,f,b){this._zoomIn.touchmove(o,f,b),this._zoomOut.touchmove(o,f,b)}touchend(o,f,b){const E=this._zoomIn.touchend(o,f,b),S=this._zoomOut.touchend(o,f,b);return E?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(E)},{originalEvent:o})}):S?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(S)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Uu={0:1,2:2};class Yl{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,f){return!1}_move(o,f){return{}}mousedown(o,f){if(this._lastPoint)return;const b=G(o);this._correctButton(o,b)&&(this._lastPoint=f,this._eventButton=b)}mousemoveWindow(o,f){const b=this._lastPoint;if(b)if(o.preventDefault(),null!=this._eventButton&&function(E,S){const k=Uu[S];return void 0===E.buttons||(E.buttons&k)!==k}(o,this._eventButton))this.reset();else if(this._moved||!(f.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(b,f)}mouseupWindow(o){this._lastPoint&&G(o)===this._eventButton&&(this._moved&&W(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ds extends Yl{mousedown(o,f){super.mousedown(o,f),this._lastPoint&&(this._active=!0)}_correctButton(o,f){return 0===f&&!o.ctrlKey}_move(o,f){return{around:f,panDelta:f.sub(o)}}}class Gd extends Yl{_correctButton(o,f){return 0===f&&o.ctrlKey||2===f}_move(o,f){const b=.8*(f.x-o.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(o){o.preventDefault()}}class Rc extends Yl{_correctButton(o,f){return 0===f&&o.ctrlKey||2===f}_move(o,f){const b=-.5*(f.y-o.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(o){o.preventDefault()}}class Lc{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),p.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new p.Point(0,0)}touchstart(o,f,b){return this._calculateTransform(o,f,b)}touchmove(o,f,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===b.length&&!p.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,f,b)}}touchend(o,f,b){this._calculateTransform(o,f,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,b){b.length>0&&(this._active=!0);const E=Oc(b,f),S=new p.Point(0,0),k=new p.Point(0,0);let O=0;for(const V in E){const U=E[V],q=this._touches[V];q&&(S._add(U),k._add(U.sub(q)),O++,E[V]=U)}if(this._touches=E,O<this._minTouches||!k.mag())return;const F=k.div(O);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(O),panDelta:F}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Je("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Fc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,f,b){return{}}touchstart(o,f,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,b){const E=this._firstTwoTouches;if(!E)return;o.preventDefault();const[S,k]=E,O=wa(b,f,S),F=wa(b,f,k);if(!O||!F)return;const V=this._aroundCenter?null:O.add(F).div(2);return this._move([O,F],V,o)}touchend(o,f,b){if(!this._firstTwoTouches)return;const[E,S]=this._firstTwoTouches,k=wa(b,f,E),O=wa(b,f,S);k&&O||(this._active&&W(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function wa(g,o,f){for(let b=0;b<g.length;b++)if(g[b].identifier===f)return o[b]}function Wd(g,o){return Math.log(g/o)/Math.LN2}class vg extends Fc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const b=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Wd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wd(this._distance,b),pinchAround:f}}}function Hu(g,o){return 180*g.angleWith(o)/Math.PI}class Yf extends Fc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f){const b=this._vector;if(this._vector=o[0].sub(o[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Hu(this._vector,b),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const E=Hu(o,b);return Math.abs(E)<f}}function Ea(g){return Math.abs(g.y)>Math.abs(g.x)}class Tp extends Fc{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Ea(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,b){const E=this._lastPoints;if(!E)return;const S=o[0].sub(E[0]),k=o[1].sub(E[1]);return this._map._cooperativeGestures&&!p.isFullscreen()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(S,k,b.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(S.y+k.y)/2*-.5})}gestureBeginsVertically(o,f,b){if(void 0!==this._valid)return this._valid;const E=o.mag()>=2,S=f.mag()>=2;if(!E&&!S)return;if(!E||!S)return null==this._firstMove&&(this._firstMove=b),b-this._firstMove<100&&void 0;const k=o.y>0==f.y>0;return Ea(o)&&Ea(f)&&k}}const Xf={panStep:100,bearingStep:15,pitchStep:10};class $u{constructor(){const o=Xf;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,b=0,E=0,S=0,k=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?b=-1:(o.preventDefault(),S=-1);break;case 39:o.shiftKey?b=1:(o.preventDefault(),S=1);break;case 38:o.shiftKey?E=1:(o.preventDefault(),k=-1);break;case 40:o.shiftKey?E=-1:(o.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(b=0,E=0),{cameraAnimation:O=>{const F=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:ol,zoom:f?Math.round(F)+f*(o.shiftKey?2:1):F,bearing:O.getBearing()+b*this._bearingStep,pitch:O.getPitch()+E*this._pitchStep,offset:[-S*this._panStep,-k*this._panStep],center:O.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ol(g){return g*(2-g)}const qd=4.000244140625;class Zd{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,p.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||p.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=o.deltaMode===p.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const b=p.exported.now(),E=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,0!==f&&f%qd==0?this._type="wheel":0!==f&&Math.abs(f)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(E*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=ue(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;"wheel"===this._type&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(0!==this._delta){const F="wheel"===this._type&&Math.abs(this._delta)>qd?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&0!==V&&(V=1/V);const U=f(),q=Math.pow(2,U),oe="number"==typeof this._targetZoom?o.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(oe*V))),"wheel"===this._type&&(this._startZoom=U,this._easing=this._smoothOutEasing(200)),this._delta=0}const b="number"==typeof this._targetZoom?this._targetZoom:f(),E=this._startZoom,S=this._easing;let k,O=!1;if("wheel"===this._type&&E&&S){const F=Math.min((p.exported.now()-this._lastWheelEventTime)/200,1),V=S(F);k=p.number(E,b,V),F<1?this._frameId||(this._frameId=!0):O=!0}else k=b,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:k-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=p.ease;if(this._prevEase){const b=this._prevEase,E=(p.exported.now()-b.start)/b.duration,S=b.easing(E+.01)-b.easing(E),k=.27/Math.sqrt(S*S+1e-4)*.01,O=Math.sqrt(.0729-k*k);f=p.bezier(k,O,.25,1)}return this._prevEase={start:p.exported.now(),duration:o,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Je("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(p.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Yd{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Mr{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,f){return o.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(o.shiftKey?-1:1),around:b.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xy{constructor(){this._tap=new Sp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,f,b){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=f[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(o,f,b))}touchmove(o,f,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const E=f[0],S=E.y-this._swipePoint.y;return this._swipePoint=E,o.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(o,f,b)}touchend(o,f,b){this._tapTime?this._swipePoint&&0===b.length&&this.reset():this._tap.touchend(o,f,b)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mp{constructor(o,f,b){this._el=o,this._mousePan=f,this._touchPan=b}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Kf{constructor(o,f,b){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=f,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class bg{constructor(o,f,b,E){this._el=o,this._touchZoom=f,this._touchRotate=b,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Fo=g=>g.zoom||g.drag||g.pitch||g.rotate;class Gu extends p.Event{}class Ko{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,f){const b=p.sub([],f,o);this.radius=p.length(b[2]<0?p.div([],b,this.constants):[b[0],b[1],0])}projectRay(o){p.div(o,o,this.constants),p.normalize(o,o),p.mul$1(o,o,this.constants);const f=p.scale$2([],o,this.radius);if(f[2]>0){const b=p.scale$2([],[0,0,1],p.dot(f,[0,0,1])),E=p.scale$2([],p.normalize([],[f[0],f[1],0]),this.radius),S=p.add([],f,p.scale$2([],p.sub([],p.add([],E,b),f),2));f[0]=S[0],f[1]=S[1]}return f}}function po(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Mo{constructor(o,f){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $d(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ko,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),p.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[p.window.document,"mousemove",{capture:!0}],[p.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[p.window,"blur",void 0]];for(const[E,S,k]of this._listeners)E.addEventListener(S,E===p.window.document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[o,f,b]of this._listeners)o.removeEventListener(f,o===p.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(o){const f=this._map,b=f.getCanvasContainer();this._add("mapEvent",new Wl(f,o));const E=f.boxZoom=new Zl(f,o);this._add("boxZoom",E);const S=new Zf,k=new Mr;f.doubleClickZoom=new Yd(k,S),this._add("tapZoom",S),this._add("clickZoom",k);const O=new Xy;this._add("tapDragZoom",O);const F=f.touchPitch=new Tp(f);this._add("touchPitch",F);const V=new Gd(o),U=new Rc(o);f.dragRotate=new Kf(o,V,U),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);const q=new ds(o),oe=new Lc(f,o);f.dragPan=new Mp(b,q,oe),this._add("mousePan",q),this._add("touchPan",oe,["touchZoom","touchRotate"]);const he=new Yf,me=new vg;f.touchZoomRotate=new bg(b,me,he,O),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ql(f));const fe=f.scrollZoom=new Zd(f,this);this._add("scrollZoom",fe,["mousePan"]);const ve=f.keyboard=new $u;this._add("keyboard",ve);for(const X of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[X]&&f[X].enable(o[X])}_add(o,f,b){this._handlers.push({handlerName:o,handler:f,allowed:b}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Fo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,f,b){for(const E in o)if(E!==b&&(!f||f.indexOf(E)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const f=[];for(const b of o)this._el.contains(b.target)&&f.push(b);return f}handleEvent(o,f){this._updatingCamera=!0;const b="renderFrame"===o.type,E=b?void 0:o,S={needsRenderFrame:!1},k={},O={},F=o.touches?this._getMapTouches(o.touches):void 0,V=F?ne(this._el,F):b?void 0:ue(this._el,o);for(const{handlerName:oe,handler:he,allowed:me}of this._handlers){if(!he.isEnabled())continue;let fe;this._blockedByActive(O,me,oe)?he.reset():he[f||o.type]&&(fe=he[f||o.type](o,V,F),this.mergeHandlerResult(S,k,fe,oe,E),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||he.isActive())&&(O[oe]=he)}const U={};for(const oe in this._previousActiveHandlers)O[oe]||(U[oe]=E);this._previousActiveHandlers=O,(Object.keys(U).length||po(S))&&(this._changes.push([S,k,U]),this._triggerRenderFrame()),(Object.keys(O).length||po(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=S;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(o,f,b,E,S){if(!b)return;p.extend(o,b);const k={handlerName:E,originalEvent:b.originalEvent||S};void 0!==b.zoomDelta&&(f.zoom=k),void 0!==b.panDelta&&(f.drag=k),void 0!==b.pitchDelta&&(f.pitch=k),void 0!==b.bearingDelta&&(f.rotate=k)}_applyChanges(){const o={},f={},b={};for(const[E,S,k]of this._changes)E.panDelta&&(o.panDelta=(o.panDelta||new p.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+E.pitchDelta),void 0!==E.around&&(o.around=E.around),void 0!==E.aroundCoord&&(o.aroundCoord=E.aroundCoord),void 0!==E.pinchAround&&(o.pinchAround=E.pinchAround),E.noInertia&&(o.noInertia=E.noInertia),p.extend(f,S),p.extend(b,k);this._updateMapTransform(o,f,b),this._changes=[]}_updateMapTransform(o,f,b){const E=this._map,S=E.transform,k=de=>[de.x,de.y,de.z];if((de=>{const we=this._eventsInProgress.drag;return we&&!this._handlersById[we.handlerName].isActive()})()&&!po(o)){const de=S.zoom;S.cameraElevationReference="sea",S.recenterOnTerrain(),S.cameraElevationReference="ground",de!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&E._stop(!0),!po(o))return void this._fireEvents(f,b,!0);let{panDelta:O,zoomDelta:F,bearingDelta:V,pitchDelta:U,around:q,aroundCoord:oe,pinchAround:he}=o;S._isCameraConstrained&&(F>0&&(F=0),S._isCameraConstrained=!1),void 0!==he&&(q=he),(F||(de=>f.drag&&!this._eventsInProgress.drag)())&&q&&(this._dragOrigin=k(S.pointCoordinate3D(q)),this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",E._stop(!0),q=q||E.transform.centerPoint,V&&(S.bearing+=V),U&&(S.pitch+=U),S._updateCameraState();const me=[0,0,0];if(O)if("mercator"===S.projection.name){const de=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(q).dir),we=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(q.sub(O)).dir);me[0]=we[0]-de[0],me[1]=we[1]-de[1]}else{const de=S.pointCoordinate(q);if("globe"===S.projection.name){O=O.rotate(-S.angle);const we=S._pixelsPerMercatorPixel/S.worldSize;me[0]=-O.x*p.mercatorScale(p.latFromMercatorY(de.y))*we,me[1]=-O.y*p.mercatorScale(S.center.lat)*we}else{const we=S.pointCoordinate(q.sub(O));de&&we&&(me[0]=we.x-de.x,me[1]=we.y-de.y)}}const fe=S.zoom,ve=[0,0,0];if(F){const de=k(oe||S.pointCoordinate3D(q)),we={dir:p.normalize([],p.sub([],de,S._camera.position))};if(we.dir[2]<0){const Ce=S.zoomDeltaToMovement(de,F);p.scale$2(ve,we.dir,Ce)}}const X=p.add(me,me,ve);S._translateCameraConstrained(X),F&&Math.abs(S.zoom-fe)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,b,!0)}_fireEvents(o,f,b){const E=Fo(this._eventsInProgress),S=Fo(o),k={};for(const U in o){const{originalEvent:q}=o[U];this._eventsInProgress[U]||(k[`${U}start`]=q),this._eventsInProgress[U]=o[U]}!E&&S&&this._fireEvent("movestart",S.originalEvent);for(const U in k)this._fireEvent(U,k[U]);S&&this._fireEvent("move",S.originalEvent);for(const U in o){const{originalEvent:q}=o[U];this._fireEvent(U,q)}const O={};let F;for(const U in this._eventsInProgress){const{handlerName:q,originalEvent:oe}=this._eventsInProgress[U];this._handlersById[q].isActive()||(delete this._eventsInProgress[U],F=f[q]||oe,O[`${U}end`]=F)}for(const U in O)this._fireEvent(U,O[U]);const V=Fo(this._eventsInProgress);if(b&&(E||S)&&!V){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=oe=>0!==oe&&-this._bearingSnap<oe&&oe<this._bearingSnap;U?(q(U.bearing||this._map.getBearing())&&(U.bearing=0),this._map.easeTo(U,{originalEvent:F})):(this._map.fire(new p.Event("moveend",{originalEvent:F})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new p.Event(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Gu("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const No="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xl extends p.Evented{constructor(o,f){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=f.bearingSnap,this._respectPrefersReducedMotion=!1!==f.respectPrefersReducedMotion,p.bindAll(["_renderFrameCallback"],this)}getCenter(){return new p.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}panBy(o,f,b){return o=p.Point.convert(o).mult(-1),this.panTo(this.transform.center,p.extend({offset:o},f),b)}panTo(o,f,b){return this.easeTo(p.extend({center:o},f),b)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,b){return this.easeTo(p.extend({zoom:o},f),b)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,b){return this.easeTo(p.extend({bearing:o},f),b)}resetNorth(o,f){return this.rotateTo(0,p.extend({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(p.extend({bearing:0,pitch:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}cameraForBounds(o,f){o=p.LngLatBounds.convert(o);const b=f&&f.bearing||0,E=f&&f.pitch||0,S=o.getNorthWest(),k=o.getSouthEast();return this._cameraForBounds(this.transform,S,k,b,E,f)}_extendCameraOptions(o){const f={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=p.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){const b=o.padding;o.padding={top:b,bottom:b,right:b,left:b}}return o.padding=p.extend(f,o.padding),o}_minimumAABBFrustumDistance(o,f){const b=f.max[0]-f.min[0],E=f.max[1]-f.min[1];return b/E>o.aspect?b/(2*Math.tan(.5*o.fovX)*o.aspect):E/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,f,b,E,S,k){const O=o.clone(),F=this._extendCameraOptions(k);O.bearing=E,O.pitch=S;const V=p.LngLat.convert(f),U=p.LngLat.convert(b),q=.5*(V.lat+U.lat),oe=.5*(V.lng+U.lng),he=p.latLngToECEF(q,oe),me=p.normalize([],he),fe=p.normalize([],p.cross([],me,[0,1,0])),ve=p.cross([],fe,me),X=[fe[0],fe[1],fe[2],0,ve[0],ve[1],ve[2],0,me[0],me[1],me[2],0,0,0,0,1],de=[he,p.latLngToECEF(V.lat,V.lng),p.latLngToECEF(U.lat,V.lng),p.latLngToECEF(U.lat,U.lng),p.latLngToECEF(V.lat,U.lng),p.latLngToECEF(q,V.lng),p.latLngToECEF(q,U.lng),p.latLngToECEF(V.lat,oe),p.latLngToECEF(U.lat,oe)];let we=p.Aabb.fromPoints(de.map(Lt=>[p.dot(fe,Lt),p.dot(ve,Lt),p.dot(me,Lt)]));const Ce=p.transformMat4([],we.center,X);0===p.squaredLength(Ce)&&p.set(Ce,0,0,1),p.normalize(Ce,Ce),p.scale$2(Ce,Ce,p.GLOBE_RADIUS),O.center=p.ecefToLatLng(Ce);const He=O.getWorldToCameraMatrix(),We=p.invert(new Float64Array(16),He);we=p.Aabb.applyTransform(we,p.multiply([],He,X)),p.transformMat4(Ce,Ce,He);const $e=.5*(we.max[2]-we.min[2]),st=this._minimumAABBFrustumDistance(O,we),nt=p.scale$2([],[0,0,1],$e),gt=p.add(nt,Ce,nt),Ut=st+(0===O.pitch?0:p.distance(Ce,gt)),ht=O.globeCenterInViewSpace,Dt=p.sub([],Ce,[ht[0],ht[1],ht[2]]);p.normalize(Dt,Dt),p.scale$2(Dt,Dt,Ut);const wt=p.add([],Ce,Dt);p.transformMat4(wt,wt,We);const zt=p.earthRadius/p.GLOBE_RADIUS,mt=p.length(wt),Mt=p.mercatorZfromAltitude(Math.max(mt*zt-p.earthRadius,Number.EPSILON),0),jt=Math.min(O.zoomFromMercatorZAdjusted(Mt),F.maxZoom);return jt>.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"mercator"}),O.zoom=jt,this._cameraForBounds(O,f,b,E,S,k)):{center:O.center,zoom:jt,bearing:E,pitch:S}}queryTerrainElevation(o,f){const b=this.transform.elevation;return b?(f=p.extend({},{exaggerated:!0},f),b.getAtPoint(p.MercatorCoordinate.fromLngLat(o),null,f.exaggerated)):null}_cameraForBounds(o,f,b,E,S,k){if("globe"===o.projection.name)return this._cameraForBoundsOnGlobe(o,f,b,E,S,k);const O=o.clone(),F=this._extendCameraOptions(k),V=O.padding;O.bearing=E,O.pitch=S;const U=p.LngLat.convert(f),q=p.LngLat.convert(b),oe=new p.LngLat(U.lng,q.lat),he=new p.LngLat(q.lng,U.lat),me=O.project(U),fe=O.project(q),ve=this.queryTerrainElevation(U),X=this.queryTerrainElevation(q),de=this.queryTerrainElevation(oe),we=this.queryTerrainElevation(he),Ce=[[me.x,me.y,Math.min(ve||0,X||0,de||0,we||0)],[fe.x,fe.y,Math.max(ve||0,X||0,de||0,we||0)]];let He=p.Aabb.fromPoints(Ce);const We=O.getWorldToCameraMatrix(),$e=p.invert(new Float64Array(16),We);He=p.Aabb.applyTransform(He,We);const st=p.sub([],He.max,He.min),nt=V.left||0,gt=V.right||0,Ut=V.bottom||0,ht=V.top||0,{left:Dt,right:wt,top:zt,bottom:mt}=F.padding,Mt=.5*(nt+gt),jt=.5*(ht+Ut),Lt=Math.min(O.scaleZoom(O.scale*Math.min((O.width-(nt+gt+Dt+wt))/st[0],(O.height-(Ut+ht+mt+zt))/st[1])),F.maxZoom),Yt=O.scale/O.zoomScale(Lt);He=new p.Aabb([He.min[0]-(Dt+Mt)*Yt,He.min[1]-(mt+jt)*Yt,He.min[2]],[He.max[0]+(wt+Mt)*Yt,He.max[1]+(zt+jt)*Yt,He.max[2]]);const En=.5*st[2],Fn=this._minimumAABBFrustumDistance(O,He),yn=[0,0,1,0];p.transformMat4$1(yn,yn,We),p.normalize$2(yn,yn);const Dn=p.scale$2([],yn,Fn+En),oi=p.add([],He.center,Dn),ii=("number"==typeof F.offset.x&&"number"==typeof F.offset.y?new p.Point(F.offset.x,F.offset.y):p.Point.convert(F.offset)).rotate(-p.degToRad(E));He.center[0]-=ii.x*Yt,He.center[1]+=ii.y*Yt,p.transformMat4(He.center,He.center,$e),p.transformMat4(oi,oi,$e);const bn=[He.center[0],He.center[1],oi[2]*O.pixelsPerMeter];p.scale$2(bn,bn,1/O.worldSize);const Pi=p.lngFromMercatorX(bn[0]),qi=p.latFromMercatorY(bn[1]),Bi=Math.min(O._zoomFromMercatorZ(bn[2]),F.maxZoom),Yi=new p.LngLat(Pi,qi);return O.mercatorFromTransition&&Bi<.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"globe"}),O.zoom=Bi,this._cameraForBounds(O,f,b,E,S,k)):{center:Yi,zoom:Bi,bearing:E,pitch:S}}fitBounds(o,f,b){const E=this.cameraForBounds(o,f);return this._fitInternal(E,f,b)}fitScreenCoordinates(o,f,b,E,S){const k=p.Point.convert(o),O=p.Point.convert(f),F=new p.Point(Math.min(k.x,O.x),Math.min(k.y,O.y)),V=new p.Point(Math.max(k.x,O.x),Math.max(k.y,O.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(k,O))return this;const U=this.transform.pointLocation3D(F),q=this.transform.pointLocation3D(V),oe=this.transform.pointLocation3D(new p.Point(F.x,V.y)),he=this.transform.pointLocation3D(new p.Point(V.x,F.y)),me=[Math.min(U.lng,q.lng,oe.lng,he.lng),Math.min(U.lat,q.lat,oe.lat,he.lat)],fe=[Math.max(U.lng,q.lng,oe.lng,he.lng),Math.max(U.lat,q.lat,oe.lat,he.lat)],ve=E&&E.pitch?E.pitch:this.getPitch(),X=this._cameraForBounds(this.transform,me,fe,b,ve,E);return this._fitInternal(X,E,S)}_fitInternal(o,f,b){return o?(delete(f=p.extend(o,f)).padding,f.linear?this.easeTo(f,b):this.flyTo(f,b)):this}jumpTo(o,f){this.stop();const b=o.preloadOnly?this.transform.clone():this.transform;let E=!1,S=!1,k=!1;return"zoom"in o&&b.zoom!==+o.zoom&&(E=!0,b.zoom=+o.zoom),void 0!==o.center&&(b.center=p.LngLat.convert(o.center)),"bearing"in o&&b.bearing!==+o.bearing&&(S=!0,b.bearing=+o.bearing),"pitch"in o&&b.pitch!==+o.pitch&&(k=!0,b.pitch=+o.pitch),null==o.padding||b.isPaddingEqual(o.padding)||(b.padding=o.padding),o.preloadOnly?(this._preloadTiles(b),this):(this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),E&&this.fire(new p.Event("zoomstart",f)).fire(new p.Event("zoom",f)).fire(new p.Event("zoomend",f)),S&&this.fire(new p.Event("rotatestart",f)).fire(new p.Event("rotate",f)).fire(new p.Event("rotateend",f)),k&&this.fire(new p.Event("pitchstart",f)).fire(new p.Event("pitch",f)).fire(new p.Event("pitchend",f)),this.fire(new p.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||p.warnOnce(No),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,f){const b=this.transform;if(!b.projection.supportsFreeCamera)return p.warnOnce(No),this;this.stop();const E=b.zoom,S=b.pitch,k=b.bearing;b.setFreeCameraOptions(o);const O=E!==b.zoom,F=S!==b.pitch,V=k!==b.bearing;return this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),O&&this.fire(new p.Event("zoomstart",f)).fire(new p.Event("zoom",f)).fire(new p.Event("zoomend",f)),V&&this.fire(new p.Event("rotatestart",f)).fire(new p.Event("rotate",f)).fire(new p.Event("rotateend",f)),F&&this.fire(new p.Event("pitchstart",f)).fire(new p.Event("pitch",f)).fire(new p.Event("pitchend",f)),this.fire(new p.Event("moveend",f)),this}easeTo(o,f){this._stop(!1,o.easeId),(!1===(o=p.extend({offset:[0,0],duration:500,easing:p.ease},o)).animate||this._prefersReducedMotion(o))&&(o.duration=0);const b=this.transform,E=this.getZoom(),S=this.getBearing(),k=this.getPitch(),O=this.getPadding(),F="zoom"in o?+o.zoom:E,V="bearing"in o?this._normalizeBearing(o.bearing,S):S,U="pitch"in o?+o.pitch:k,q="padding"in o?o.padding:b.padding,oe=p.Point.convert(o.offset);let he,me,fe;if("globe"===b.projection.name){const nt=p.MercatorCoordinate.fromLngLat(b.center),gt=oe.rotate(-b.angle);nt.x+=gt.x/b.worldSize,nt.y+=gt.y/b.worldSize;const Ut=nt.toLngLat(),ht=p.LngLat.convert(o.center||Ut);this._normalizeCenter(ht),he=b.centerPoint.add(gt),me=new p.Point(nt.x,nt.y).mult(b.worldSize),fe=new p.Point(p.mercatorXfromLng(ht.lng),p.mercatorYfromLat(ht.lat)).mult(b.worldSize).sub(me)}else{he=b.centerPoint.add(oe);const nt=b.pointLocation(he),gt=p.LngLat.convert(o.center||nt);this._normalizeCenter(gt),me=b.project(nt),fe=b.project(gt).sub(me)}const ve=b.zoomScale(F-E);let X,de;o.around&&(X=p.LngLat.convert(o.around),de=b.locationPoint(X));const we=this._zooming||F!==E,Ce=this._rotating||S!==V,He=this._pitching||U!==k,We=!b.isPaddingEqual(q),$e=nt=>gt=>{if(we&&(nt.zoom=p.number(E,F,gt)),Ce&&(nt.bearing=p.number(S,V,gt)),He&&(nt.pitch=p.number(k,U,gt)),We&&(nt.interpolatePadding(O,q,gt),he=nt.centerPoint.add(oe)),X)nt.setLocationAtPoint(X,de);else{const Ut=nt.zoomScale(nt.zoom-E),ht=F>E?Math.min(2,ve):Math.max(.5,ve),Dt=Math.pow(ht,1-gt),wt=nt.unproject(me.add(fe.mult(gt*Dt)).mult(Ut));nt.setLocationAtPoint(nt.renderWorldCopies?wt.wrap():wt,he)}return o.preloadOnly||this._fireMoveEvents(f),nt};if(o.preloadOnly){const nt=this._emulate($e,o.duration,b);return this._preloadTiles(nt),this}const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=we,this._rotating=Ce,this._pitching=He,this._padding=We,this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,st),this._ease($e(b),nt=>{b.recenterOnTerrain(),this._afterEase(f,nt)},o),this}_prepareEase(o,f,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||b.moving||this.fire(new p.Event("movestart",o)),this._zooming&&!b.zooming&&this.fire(new p.Event("zoomstart",o)),this._rotating&&!b.rotating&&this.fire(new p.Event("rotatestart",o)),this._pitching&&!b.pitching&&this.fire(new p.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new p.Event("move",o)),this._zooming&&this.fire(new p.Event("zoom",o)),this._rotating&&this.fire(new p.Event("rotate",o)),this._pitching&&this.fire(new p.Event("pitch",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,E=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new p.Event("zoomend",o)),E&&this.fire(new p.Event("rotateend",o)),S&&this.fire(new p.Event("pitchend",o)),this.fire(new p.Event("moveend",o))}flyTo(o,f){if(this._prefersReducedMotion(o)){const Lt=p.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Lt,f)}this.stop(),o=p.extend({offset:[0,0],speed:1.2,curve:1.42,easing:p.ease},o);const b=this.transform,E=this.getZoom(),S=this.getBearing(),k=this.getPitch(),O=this.getPadding(),F="zoom"in o?p.clamp(+o.zoom,b.minZoom,b.maxZoom):E,V="bearing"in o?this._normalizeBearing(o.bearing,S):S,U="pitch"in o?+o.pitch:k,q="padding"in o?o.padding:b.padding,oe=b.zoomScale(F-E),he=p.Point.convert(o.offset);let me=b.centerPoint.add(he);const fe=b.pointLocation(me),ve=p.LngLat.convert(o.center||fe);this._normalizeCenter(ve);const X=b.project(fe),de=b.project(ve).sub(X);let we=o.curve;const Ce=Math.max(b.width,b.height),He=Ce/oe,We=de.mag();if("minZoom"in o){const Lt=p.clamp(Math.min(o.minZoom,E,F),b.minZoom,b.maxZoom),Yt=Ce/b.zoomScale(Lt-E);we=Math.sqrt(Yt/We*2)}const $e=we*we;function st(Lt){const Yt=(He*He-Ce*Ce+(Lt?-1:1)*$e*$e*We*We)/(2*(Lt?He:Ce)*$e*We);return Math.log(Math.sqrt(Yt*Yt+1)-Yt)}function nt(Lt){return(Math.exp(Lt)-Math.exp(-Lt))/2}function gt(Lt){return(Math.exp(Lt)+Math.exp(-Lt))/2}const Ut=st(0);let ht=function(Lt){return gt(Ut)/gt(Ut+we*Lt)},Dt=function(Lt){return Ce*((gt(Ut)*(nt(Yt=Ut+we*Lt)/gt(Yt))-nt(Ut))/$e)/We;var Yt},wt=(st(1)-Ut)/we;if(Math.abs(We)<1e-6||!isFinite(wt)){if(Math.abs(Ce-He)<1e-6)return this.easeTo(o,f);const Lt=He<Ce?-1:1;wt=Math.abs(Math.log(He/Ce))/we,Dt=function(){return 0},ht=function(Yt){return Math.exp(Lt*we*Yt)}}o.duration="duration"in o?+o.duration:1e3*wt/("screenSpeed"in o?+o.screenSpeed/we:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const zt=S!==V,mt=U!==k,Mt=!b.isPaddingEqual(q),jt=Lt=>Yt=>{const En=Yt*wt,Fn=1/ht(En);Lt.zoom=1===Yt?F:E+Lt.scaleZoom(Fn),zt&&(Lt.bearing=p.number(S,V,Yt)),mt&&(Lt.pitch=p.number(k,U,Yt)),Mt&&(Lt.interpolatePadding(O,q,Yt),me=Lt.centerPoint.add(he));const yn=1===Yt?ve:Lt.unproject(X.add(de.mult(Dt(En))).mult(Fn));return Lt.setLocationAtPoint(Lt.renderWorldCopies?yn.wrap():yn,me),Lt._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(f),Lt};if(o.preloadOnly){const Lt=this._emulate(jt,o.duration,b);return this._preloadTiles(Lt),this}return this._zooming=!0,this._rotating=zt,this._pitching=mt,this._padding=Mt,this._prepareEase(f,!1),this._ease(jt(b),()=>this._afterEase(f),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,f)}if(!o){const b=this.handlers;b&&b.stop(!1)}return this}_ease(o,f,b){!1===b.animate||0===b.duration?(o(1),f()):(this._easeStart=p.exported.now(),this._easeOptions=b,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((p.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,f){o=p.wrap(o,-180,180);const b=Math.abs(o-f);return Math.abs(o-360-f)<b&&(o-=360),Math.abs(o+360-f)<b&&(o+=360),o}_normalizeCenter(o){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const b=o.lng-f.center.lng;o.lng+=b>180?-360:b<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&p.exported.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,f,b){const E=Math.ceil(15*f/1e3),S=[],k=o(b.clone());for(let O=0;O<=E;O++){const F=k(O/E);S.push(F.clone())}return S}}class fn{constructor(o={}){this.options=o,p.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const f=this.options&&this.options.compact;return this._map=o,this._container=Je("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Je("button","mapboxgl-ctrl-attrib-button",this._container),Je("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Je("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===f&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const b=this._map._getUIString(`AttributionControl.${f}`);o.setAttribute("aria-label",b),o.removeAttribute("title"),o.firstElementChild&&o.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||p.config.ACCESS_TOKEN}];if(o){const b=f.reduce((E,S,k)=>(S.value&&(E+=`${S.key}=${S.value}${k<f.length-1?"&":""}`),E),"?");o.href=`${p.config.FEEDBACK_URL}/${b}#${Ss(this._map,!0)}`,o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}}_updateData(o){!o||"metadata"!==o.sourceDataType&&"visibility"!==o.sourceDataType&&"style"!==o.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const f=this._map.style._sourceCaches;for(const E in f){const S=f[E];if(S.used){const k=S.getSource();k.attribution&&o.indexOf(k.attribution)<0&&o.push(k.attribution)}}o.sort((E,S)=>E.length-S.length),o=o.filter((E,S)=>{for(let k=S+1;k<o.length;k++)if(o[k].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const b=o.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ca{constructor(){p.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=Je("div","mapboxgl-ctrl");const f=Je("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&"metadata"!==o.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(0===Object.entries(o).length)return!0;for(const f in o){const b=o[f].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const f=o[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class Ip{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,b=f?this._queue.concat(f):this._queue;for(const E of b)if(E.id===o)return void(E.cancelled=!0)}run(o=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const b of f)if(!b.cancelled&&(b.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function zi(g,o,f){if(g=new p.LngLat(g.lng,g.lat),o){const b=new p.LngLat(g.lng-360,g.lat),E=new p.LngLat(g.lng+360,g.lat),S=360*Math.ceil(Math.abs(g.lng-f.center.lng)/360),k=f.locationPoint(g).distSqr(o),O=o.x<0||o.y<0||o.x>f.width||o.y>f.height;f.locationPoint(b).distSqr(o)<k&&(O||Math.abs(b.lng-f.center.lng)<S)?g=b:f.locationPoint(E).distSqr(o)<k&&(O||Math.abs(E.lng-f.center.lng)<S)&&(g=E)}for(;Math.abs(g.lng-f.center.lng)>180;){const b=f.locationPoint(g);if(b.x>=0&&b.y>=0&&b.x<=f.width&&b.y<=f.height)break;g.lng>f.center.lng?g.lng-=360:g.lng+=360}return g}const Nc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class dn extends p.Evented{constructor(o,f){if(super(),(o instanceof p.window.HTMLElement||f)&&(o=p.extend({element:o},f)),p.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=o&&o.occludedOpacity||.2,o&&o.element)this._element=o.element,this._offset=p.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=Je("div");const E=41,S=27,k=ot("svg",{display:"block",height:E*this._scale+"px",width:S*this._scale+"px",viewBox:`0 0 ${S} ${E}`},this._element),O=ot("radialGradient",{id:"shadowGradient"},ot("defs",{},k));ot("stop",{offset:"10%","stop-opacity":.4},O),ot("stop",{offset:"100%","stop-opacity":.05},O),ot("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},k),ot("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},k),ot("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},k),ot("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},k),this._offset=p.Point.convert(o&&o.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",E=>{E.preventDefault()}),this._element.addEventListener("mousedown",E=>{E.preventDefault()});const b=this._element.classList;for(const E in Nc)b.remove(`mapboxgl-marker-anchor-${E}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=p.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const E=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(24.6+E)],"bottom-right":[-E,-1*(24.6+E)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,o._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const f=o.code,b=o.charCode||o.keyCode;"Space"!==f&&"Enter"!==f&&32!==b&&13!==b||this.togglePopup()}_onMapClick(o){const f=o.originalEvent.target,b=this._element;this._popup&&(f===b||b.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,f=this._pos;if(!o||!f)return!1;const b=o.unproject(f),E=o.getFreeCameraOptions();if(!E.position)return!1;const S=E.position.toLngLat();return S.distanceTo(b)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const f=this._pos;if(!f||f.x<0||f.x>o.transform.width||f.y<0||f.y>o.transform.height)return void this._clearFadeTimer();const b=o.unproject(f);let E;o._showingGlobe()&&p.isLngLatBehindGlobe(o.transform,this._lngLat)?E=0:(E=1-o._queryFogOpacity(b),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(E*=this._occludedOpacity)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${o.x}px,${o.y}px)\n            ${Nc[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${f.x}px,${f.y}px)\n        `}_calculateXYTransform(){const o=this._pos,f=this._map,b=this.getPitchAlignment();if(!f||!o||"map"!==b)return"";if(!f._showingGlobe()){const F=f.getPitch();return F?`rotateX(${F}deg)`:""}const E=p.radToDeg(p.globeTiltAtLngLat(f.transform,this._lngLat)),S=o.sub(p.globeCenterToScreenPoint(f.transform)),k=Math.abs(S.x)+Math.abs(S.y);if(0===k)return"";const O=E/k;return`rotateX(${-S.y*O}deg) rotateY(${S.x*O}deg)`}_calculateZTransform(){const o=this._pos,f=this._map;if(!f||!o)return"";let b=0;const E=this.getRotationAlignment();if("map"===E)if(f._showingGlobe()){const S=f.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),k=f.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);b=p.radToDeg(Math.atan2(k.y,k.x))-90}else b=-f.getBearing();else if("horizon"===E){const S=p.smoothstep(4,6,f.getZoom()),k=p.globeCenterToScreenPoint(f.transform);k.y+=S*f.transform.height;const O=o.sub(k),F=p.radToDeg(Math.atan2(O.y,O.x));b=(F>90?F-270:F+90)*(1-S)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(o){p.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=zi(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),!0===o?this._updateFrameId=p.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=p.Point.convert(o),this._update(),this}_onMove(o){const f=this._map;if(!f)return;const b=this._pointerdownPos,E=this._positionDelta;if(b&&E){if(!this._isDragging){const S=this._clickTolerance||f._clickTolerance;if(o.point.dist(b)<S)return;this._isDragging=!0}this._pos=o.point.sub(E),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new p.Event("dragstart"))),this.fire(new p.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new p.Event("dragend")),this._state="inactive"}_addDragHandler(o){const f=this._map,b=this._pos;f&&b&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(b),this._pointerdownPos=o.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const f=this._map;return f&&(o?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Bc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ky=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xg(g=new p.Point(0,0),o="bottom"){if("number"==typeof g){const f=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(o){case"top":return new p.Point(0,g);case"top-left":return new p.Point(f,f);case"top-right":return new p.Point(-f,f);case"bottom":return new p.Point(0,-g);case"bottom-left":return new p.Point(f,-f);case"bottom-right":return new p.Point(-f,-f);case"left":return new p.Point(g,0);case"right":return new p.Point(-g,0)}return new p.Point(0,0)}return g instanceof p.Point||Array.isArray(g)?p.Point.convert(g):p.Point.convert(g[o]||[0,0])}class Dp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const f=p.easeCubicInOut((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,f,b){this._start=this.getValue(f),this._end=o,this._startTime=f,this._endTime=f+b}}const wg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},$r={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Cv={showCompass:!0,showZoom:!0,visualizePitch:!1};class Sv{constructor(o,f,b=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new Gd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,b&&(this.mousePitch=new Rc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),p.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(o,f){this.mouseRotate.mousedown(o,f),this.mousePitch&&this.mousePitch.mousedown(o,f),ye()}move(o,f){const b=this.map,E=this.mouseRotate.mousemoveWindow(o,f),S=E&&E.bearingDelta;if(S&&b.setBearing(b.getBearing()+S),this.mousePitch){const k=this.mousePitch.mousemoveWindow(o,f),O=k&&k.pitchDelta;O&&b.setPitch(b.getPitch()+O)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){pe(),p.window.removeEventListener("mousemove",this.mousemove),p.window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(p.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),ue(this.element,o)),p.window.addEventListener("mousemove",this.mousemove),p.window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,ue(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){1!==o.targetTouches.length?this.reset():(this._startPos=this._lastPos=ne(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){1!==o.targetTouches.length?this.reset():(this._lastPos=ne(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){0===o.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Vr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Wu={maxWidth:100,unit:"metric"},sl={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},zc={version:p.version,supported:Ee,setRTLTextPlugin:p.setRTLTextPlugin,getRTLTextPluginStatus:p.getRTLTextPluginStatus,Map:class extends Xl{constructor(g){if(p.LivePerformanceUtils.mark(p.PerformanceMarkers.create),null!=(g=p.extend({},$r,g)).minZoom&&null!=g.maxZoom&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=g.minPitch&&null!=g.maxPitch&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=g.minPitch&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=g.maxPitch&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&p.isSafariWithAntialiasingBug(p.window)&&(g.antialias=!1,p.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xo(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._useWebGL2=g.useWebGL2,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._optimizeForTerrain=g.optimizeForTerrain,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new Ip,this._domRenderTaskQueue=new Ip,this._controls=[],this._markers=[],this._popups=[],this._mapId=p.uniqueId(),this._locale=p.extend({},wg,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Dp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new p.RequestManager(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,"string"==typeof g.container){if(this._container=p.window.document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof p.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&p.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),p.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==p.window&&(p.window.addEventListener("online",this._onWindowOnline,!1),p.window.addEventListener("resize",this._onWindowResize,!1),p.window.addEventListener("orientationchange",this._onWindowResize,!1),p.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Mo(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this._hash=g.hash&&new Cp("string"==typeof g.hash&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,p.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),g.attributionControl&&this.addControl(new fn({customAttribution:g.customAttribution})),this._logoControl=new Ca,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update("style"===o.dataType),this.fire(new p.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new p.Event(`${o.dataType}dataloading`,o))})}_getMapId(){return this._mapId}addControl(g,o){if(void 0===o&&(o=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=g.onAdd(this);this._controls.push(g);const b=this._controlPositions[o];return-1!==o.indexOf("bottom")?b.insertBefore(f,b.firstChild):b.appendChild(f),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(g);return o>-1&&this._controls.splice(o,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new p.Event("movestart",g)).fire(new p.Event("move",g)),this.fire(new p.Event("resize",g)),o&&this.fire(new p.Event("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(p.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return"auto"===g?p.window.navigator.language:Array.isArray(g)?0===g.length?void 0:g.map(o=>"auto"===o?p.window.navigator.language:o):g}setLanguage(g){const o=this._parseLanguage(g);if(!this.style||o===this._language)return this;this._language=o,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(g){return this._lazyInitEmptyStyle(),g?"string"==typeof g&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const g=this.transform,o=g.projection.name;let f;"globe"===o&&g.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?(g.setMercatorFromTransition(),f=!0):"mercator"===o&&g.zoom<p.GLOBE_ZOOM_THRESHOLD_MAX&&(g.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,o){return this._updateProjection(g||o||{name:"mercator"})}_updateProjection(g){let o;if(o="globe"===g.name&&this.transform.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),o){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(g){return this.transform.locationPoint3D(p.LngLat.convert(g))}unproject(g){return this.transform.pointLocation3D(p.Point.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,o,f){if("mouseenter"===g||"mouseover"===g){let b=!1;const E=k=>{const O=o.filter(V=>this.getLayer(V)),F=O.length?this.queryRenderedFeatures(k.point,{layers:O}):[];F.length?b||(b=!0,f.call(this,new Tr(g,this,k.originalEvent,{features:F}))):b=!1},S=()=>{b=!1};return{layers:new Set(o),listener:f,delegates:{mousemove:E,mouseout:S}}}if("mouseleave"===g||"mouseout"===g){let b=!1;const E=k=>{const O=o.filter(F=>this.getLayer(F));(O.length?this.queryRenderedFeatures(k.point,{layers:O}):[]).length?b=!0:b&&(b=!1,f.call(this,new Tr(g,this,k.originalEvent)))},S=k=>{b&&(b=!1,f.call(this,new Tr(g,this,k.originalEvent)))};return{layers:new Set(o),listener:f,delegates:{mousemove:E,mouseout:S}}}{const b=E=>{const S=o.filter(O=>this.getLayer(O)),k=S.length?this.queryRenderedFeatures(E.point,{layers:S}):[];k.length&&(E.features=k,f.call(this,E),delete E.features)};return{layers:new Set(o),listener:f,delegates:{[g]:b}}}}on(g,o,f){if(void 0===f)return super.on(g,o);Array.isArray(o)||(o=[o]);const b=this._createDelegatedListener(g,o,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(b);for(const E in b.delegates)this.on(E,b.delegates[E]);return this}once(g,o,f){if(void 0===f)return super.once(g,o);Array.isArray(o)||(o=[o]);const b=this._createDelegatedListener(g,o,f);for(const E in b.delegates)this.once(E,b.delegates[E]);return this}off(g,o,f){if(void 0===f)return super.off(g,o);o=new Set(Array.isArray(o)?o:[o]);const b=(S,k)=>{if(S.size!==k.size)return!1;for(const O of S)if(!k.has(O))return!1;return!0},E=this._delegatedListeners?this._delegatedListeners[g]:void 0;return E&&(S=>{for(let k=0;k<S.length;k++){const O=S[k];if(O.listener===f&&b(O.layers,o)){for(const F in O.delegates)this.off(F,O.delegates[F]);return S.splice(k,1),this}}})(E),this}queryRenderedFeatures(g,o){return this.style?(void 0!==o||void 0===g||g instanceof p.Point||Array.isArray(g)||(o=g,g=void 0),this.style.queryRenderedFeatures(g=g||[[0,0],[this.transform.width,this.transform.height]],o=o||{},this.transform)):[]}querySourceFeatures(g,o){return this.style.querySourceFeatures(g,o)}isPointOnSurface(g){const{name:o}=this.transform.projection;return"globe"!==o&&"mercator"!==o&&p.warnOnce(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(p.Point.convert(g))}setStyle(g,o){return!1!==(o=p.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o)).diff&&o.localIdeographFontFamily===this._localIdeographFontFamily&&o.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(g,o))}_getUIString(g){const o=this._locale[g];if(null==o)throw new Error(`Missing UI string '${g}'`);return o}_updateStyle(g,o){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new tl(this,o||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof g?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new tl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,o){if("string"==typeof g){const f=this._requestManager.normalizeStyleURL(g),b=this._requestManager.transformRequest(f,p.ResourceType.Style);p.getJSON(b,(E,S)=>{E?this.fire(new p.ErrorEvent(E)):S&&this._updateDiff(S,o)})}else"object"==typeof g&&this._updateDiff(g,o)}_updateDiff(g,o){try{this.style.setState(g)&&this._update(!0)}catch(f){p.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(g,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(p.warnOnce("There is no style added to the map."),!1)}addSource(g,o){return this._lazyInitEmptyStyle(),this.style.addSource(g,o),this._update(!0)}isSourceLoaded(g){return!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){const g=this.style&&this.style._sourceCaches;for(const o in g){const f=g[o]._tiles;for(const b in f){const E=f[b];if("loaded"!==E.state&&"errored"!==E.state)return!1}}return!0}addSourceType(g,o,f){this._lazyInitEmptyStyle(),this.style.addSourceType(g,o,f)}removeSource(g){return this.style.removeSource(g),this._updateTerrain(),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,o,{pixelRatio:f=1,sdf:b=!1,stretchX:E,stretchY:S,content:k}={}){if(this._lazyInitEmptyStyle(),o instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&o instanceof p.window.ImageBitmap){const{width:O,height:F,data:V}=p.exported.getImageData(o);this.style.addImage(g,{data:new p.RGBAImage({width:O,height:F},V),pixelRatio:f,stretchX:E,stretchY:S,content:k,sdf:b,version:0})}else if(void 0===o.width||void 0===o.height)this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:F}=o,V=o;this.style.addImage(g,{data:new p.RGBAImage({width:O,height:F},new Uint8Array(V.data)),pixelRatio:f,stretchX:E,stretchY:S,content:k,sdf:b,version:0,userImage:V}),V.onAdd&&V.onAdd(this,g)}}updateImage(g,o){const f=this.style.getImage(g);if(!f)return void this.fire(new p.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=o instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&o instanceof p.window.ImageBitmap?p.exported.getImageData(o):o,{width:E,height:S}=b;void 0!==E&&void 0!==S?E===f.data.width&&S===f.data.height?(f.data.replace(b.data,!(o instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&o instanceof p.window.ImageBitmap)),this.style.updateImage(g,f)):this.fire(new p.ErrorEvent(new Error(`The width and height of the updated image (${E}, ${S})\n                must be that same as the previous version of the image\n                (${f.data.width}, ${f.data.height})`))):this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new p.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,o){p.getImage(this._requestManager.transformRequest(g,p.ResourceType.Image),(f,b)=>{o(f,b instanceof p.window.HTMLImageElement?p.exported.getImageData(b):b)})}listImages(){return this.style.listImages()}addLayer(g,o){return this._lazyInitEmptyStyle(),this.style.addLayer(g,o),this._update(!0)}moveLayer(g,o){return this.style.moveLayer(g,o),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,o,f){return this.style.setLayerZoomRange(g,o,f),this._update(!0)}setFilter(g,o,f={}){return this.style.setFilter(g,o,f),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,o,f,b={}){return this.style.setPaintProperty(g,o,f,b),this._update(!0)}getPaintProperty(g,o){return this.style.getPaintProperty(g,o)}setLayoutProperty(g,o,f,b={}){return this.style.setLayoutProperty(g,o,f,b),this._update(!0)}getLayoutProperty(g,o){return this.style.getLayoutProperty(g,o)}setLight(g,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,o),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(p.LngLat.convert(g),this.transform):0}setFeatureState(g,o){return this.style.setFeatureState(g,o),this._update()}removeFeatureState(g,o){return this.style.removeFeatureState(g,o),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let f,b,E,S=this._container;for(;S&&(!b||!E);){const k=p.window.getComputedStyle(S).transform;k&&"none"!==k&&(f=k.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&"0"!==f[0]&&"1"!==f[0]&&(b=f[0]),f[3]&&"0"!==f[3]&&"1"!==f[3]&&(E=f[3])),S=S.parentElement}this._containerWidth=b?Math.abs(g/b):g,this._containerHeight=E?Math.abs(o/E):o}_detectMissingCSS(){"rgb(250, 128, 114)"!==p.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&p.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=Je("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=Je("div","mapboxgl-canvas-container",g);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=Je("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=Je("div","mapboxgl-control-container",g),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=Je("div",`mapboxgl-ctrl-${E}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,o){const f=p.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(g),this._canvas.height=f*Math.ceil(o),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${o}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const o=this._markers.indexOf(g);-1!==o&&this._markers.splice(o,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const o=this._popups.indexOf(g);-1!==o&&this._popups.splice(o,1)}_setupPainter(){const g=p.extend({},Ee.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._useWebGL2&&this._canvas.getContext("webgl2",g),f=o||this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);f?(this._useWebGL2&&!o&&p.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),p.storeAuthState(f,!0),this.painter=new Tc(f,this.transform,!!o),this.on("data",b=>{"source"===b.dataType&&this.painter.setTileLoadedFlag(!0)}),p.exported$1.testSupport(f)):this.fire(new p.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new p.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new p.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let o;const f=this.painter.context.extTimerQuery,b=p.exported.now();if(this.listens("gpu-timing-frame")&&(o=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],p.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],p.window.performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const E=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,F=this.transform.pitch,V=p.exported.now(),U=new p.EvaluationParameters(O,{now:V,fadeDuration:E,pitch:F,transition:this.style.getTransition()});this.style.update(U)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let S=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),S=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):S=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,E,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new p.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new p.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const O=p.exported.now()-b;f.endQueryEXT(f.TIME_ELAPSED_EXT,o),setTimeout(()=>{const F=f.getQueryObjectEXT(o,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(o),this.fire(new p.Event("gpu-timing-frame",{cpuTime:O,gpuTime:F})),p.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:F}})},50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout(()=>{const F=this.painter.queryGpuTimers(O);this.fire(new p.Event("gpu-timing-layer",{layerTimes:F}))},50)}if(this.listens("gpu-timing-deferred-render")){const O=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const F=this.painter.queryGpuTimeDeferredRender(O);this.fire(new p.Event("gpu-timing-deferred-render",{gpuTime:F}))},50)}const k=this._sourcesDirty||this._styleDirty||this._placementDirty||S;if(k||this._repaint)this.triggerRepaint();else{const O=!this.isMoving()&&this.loaded();if(O&&(S=this._updateAverageElevation(b,!0)),S)this.triggerRepaint();else if(this._triggerFrame(!1),O&&(this.fire(new p.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const F=this._calculateSpeedIndex();this.fire(new p.Event("speedindexcompleted",{speedIndex:F})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,p.LivePerformanceUtils.mark(p.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&p.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const o of this._markers)g&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!g||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(g,o=!1){const f=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&f(0);if((o||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const b=this.transform.averageElevation;let E=this.transform.sampleAverageElevation(),S=!1;this.transform.elevation&&(S=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=g;const k=Math.abs(b-E);if(k>1){if(this._isInitialLoad||S)return this._averageElevation.jumpTo(E),f(E);this._averageElevation.easeTo(E,g,300)}else if(k>1e-4)return this._averageElevation.jumpTo(E),f(E)}return!!this._averageElevation.isEasing(g)&&f(this._averageElevation.getValue(g))}_authenticate(){p.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===p.AUTH_ERR_MSG||401===g.status)){const o=this.painter.context.gl;p.storeAuthState(o,!1),this._logoControl instanceof Ca&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new p.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),p.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const f=this.painter.context.gl,b=f.createFramebuffer();function E(S){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,S,0);const k=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,k),k}return f.bindFramebuffer(f.FRAMEBUFFER,b),this._canvasPixelComparison(E(g),o.canvasCopies.map(E),o.timeStamps)}_canvasPixelComparison(g,o,f){let b=f[1]-f[0];const E=g.length/4;for(let S=0;S<o.length;S++){const k=o[S];let O=0;for(let F=0;F<k.length;F+=4)k[F]===g[F]&&k[F+1]===g[F+1]&&k[F+2]===g[F+2]&&k[F+3]===g[F+3]&&(O+=1);b+=(f[S+2]-f[S+1])*(1-O/E)}return b}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==p.window&&(p.window.removeEventListener("resize",this._onWindowResize,!1),p.window.removeEventListener("orientationchange",this._onWindowResize,!1),p.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.removeEventListener("online",this._onWindowOnline,!1),p.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),p.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new p.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=p.exported.frame(o=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(o)}))}_preloadTiles(g){const o=this.style?Object.values(this.style._sourceCaches):[];return p.asyncAll(o,(f,b)=>f._preloadTiles(g,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){"hidden"===p.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,o){p.setCacheLimits(g,o)}get version(){return p.version}},NavigationControl:class{constructor(g){this.options=p.extend({},Cv,g),this._container=Je("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(p.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),Je("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),Je("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(p.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:o}):f.resetNorth({},{originalEvent:o}))}),this._compassIcon=Je("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const o=g.getZoom(),f=o===g.getMaxZoom(),b=o===g.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Sv(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,o){const f=Je("button",g,this._container);return f.type="button",f.addEventListener("click",o),f}_setButtonTitle(g,o){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${o}`);g.setAttribute("aria-label",f),g.firstElementChild&&g.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends p.Evented{constructor(g){super(),this.options=p.extend({geolocation:p.window.navigator.geolocation},Vr,g),p.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=$l(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=Je("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const o=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,g(f)};void 0!==this._supportsGeolocation?g(this._supportsGeolocation):void 0!==p.window.navigator.permissions?p.window.navigator.permissions.query({name:"geolocation"}).then(f=>o("denied"!==f.state)).catch(()=>o()):o()}_isOutOfMapMaxBounds(g){const o=this._map.getMaxBounds(),f=g.coords;return!!o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new p.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(g),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("geolocate",g)),this._finish()}}_updateCamera(g){const o=new p.LngLat(g.coords.longitude,g.coords.latitude),f=g.coords.accuracy,b=this._map.getBearing(),E=p.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(f),E,{geolocateSource:!0})}_updateMarker(g){if(g){const o=new p.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,o=p.mercatorZfromAltitude(1,g._center.lat)*g.worldSize,f=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(1===g.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===g.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=Je("button","mapboxgl-ctrl-geolocate",this._container),Je("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===g){p.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Je("div","mapboxgl-user-location"),this._dotElement.appendChild(Je("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Je("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new dn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Je("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new dn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||"ACTIVE_LOCK"!==this._watchState||o.originalEvent&&"resize"===o.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new p.Event("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:!0===g.absolute&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return p.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new p.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new p.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new p.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{p.window.addEventListener("ondeviceorientationabsolute"in p.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==p.window.DeviceMotionEvent&&"function"==typeof p.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(o=>{"granted"===o&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),p.window.removeEventListener("deviceorientation",this._onDeviceOrientation),p.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:fn,ScaleControl:class{constructor(g){this.options=p.extend({},Wu,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),p.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,o=this._map,f=o._containerHeight/2,b=o._containerWidth/2-g/2,E=o.unproject([b,f]),S=o.unproject([b+g,f]),k=E.distanceTo(S);if("imperial"===this.options.unit){const O=3.2808*k;O>5280?this._setScale(g,O/5280,"mile"):this._setScale(g,O,"foot")}else"nautical"===this.options.unit?this._setScale(g,k/1852,"nautical-mile"):k>=1e3?this._setScale(g,k/1e3,"kilometer"):this._setScale(g,k,"meter")}_setScale(g,o,f){this._map._requestDomTask(()=>{const b=function(S){const k=Math.pow(10,`${Math.floor(S)}`.length-1);let O=S/k;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(F){const V=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*V)/V}(O),k*O}(o),E=b/o;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==f?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:f}).format(b):`${b}&nbsp;${sl[f]}`,this._container.style.width=g*E+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=Je("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof p.window.HTMLElement?this._container=g.container:p.warnOnce("Full screen control 'container' must be a DOM element.")),p.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in p.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in p.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=Je("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",p.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,p.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!p.window.document.fullscreenEnabled&&!p.window.document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=Je("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Je("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),p.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(p.window.document.fullscreenElement||p.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?p.window.document.exitFullscreen?p.window.document.exitFullscreen():p.window.document.webkitCancelFullScreen&&p.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends p.Evented{constructor(g){super(),this.options=p.extend(Object.create(Bc),g),p.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new p.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new p.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=p.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(p.window.document.createTextNode(g))}setHTML(g){const o=p.window.document.createDocumentFragment(),f=p.window.document.createElement("body");let b;for(f.innerHTML=g;b=f.firstChild,b;)o.appendChild(b);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=Je("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(g),this.options.closeButton){const f=this._closeButton=Je("button","mapboxgl-popup-close-button",o);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let o;return this._classList.delete(g)?o=!1:(this._classList.add(g),o=!0),this._updateClassList(),o}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const o=this._map,f=this._container,b=this._pos;if(!o||!f||!b)return"bottom";const E=f.offsetWidth,S=f.offsetHeight,k=b.x<E/2,O=b.x>o.transform.width-E/2;if(b.y+g<S)return k?"top-left":O?"top-right":"top";if(b.y>o.transform.height-S){if(k)return"bottom-left";if(O)return"bottom-right"}return k?"left":O?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),g.className=o.join(" ")}_update(g){const o=this._map,f=this._content;if(!o||!this._lngLat&&!this._trackPointer||!f)return;let b=this._container;if(b||(b=this._container=Je("div","mapboxgl-popup",o.getContainer()),this._tip=Je("div","mapboxgl-popup-tip",b),b.appendChild(f)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zi(this._lngLat,this._pos,o.transform)),!this._trackPointer||g){const E=this._pos=this._trackPointer&&g?g:o.project(this._lngLat),S=xg(this.options.offset),k=this._anchor=this._getAnchor(S.y),O=xg(this.options.offset,k),F=E.add(O).round();o._requestDomTask(()=>{this._container&&k&&(this._container.style.transform=`${Nc[k]} translate(${F.x}px,${F.y}px)`)})}if(!this._marker&&o._showingGlobe()){const E=p.isLngLatBehindGlobe(o.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Ky);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:dn,Style:tl,LngLat:p.LngLat,LngLatBounds:p.LngLatBounds,Point:p.Point,MercatorCoordinate:p.MercatorCoordinate,FreeCameraOptions:zu,Evented:p.Evented,config:p.config,prewarm:function(){bs().acquire(qr)},clearPrewarmedResources:function(){const g=Jn;g&&(g.isPreloaded()&&1===g.numActive()?(g.release(qr),Jn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return p.config.ACCESS_TOKEN},set accessToken(g){p.config.ACCESS_TOKEN=g},get baseApiUrl(){return p.config.API_URL},set baseApiUrl(g){p.config.API_URL=g},get workerCount(){return rr.workerCount},set workerCount(g){rr.workerCount=g},get maxParallelImageRequests(){return p.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){p.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){p.clearTileCache(g)},workerUrl:"",workerClass:null,setNow:p.exported.setNow,restoreNow:p.exported.restoreNow};return zc}),t}()},918:function(_i,gn,ut){!function(t,en,Pt){"use strict";var p=function Le(Ge){Ge&&Object.assign(this,Ge)},ge=function(){function Le(Ge,Je){this.el=Ge,this.ngZone=Je,this.onAddressChange=new Pt.EventEmitter}return Le.prototype.ngAfterViewInit=function(){this.options||(this.options=new p),this.initialize()},Le.prototype.isGoogleLibExists=function(){return!(!google||!google.maps||!google.maps.places)},Le.prototype.initialize=function(){var Ge=this;if(!this.isGoogleLibExists())throw new Error("Google maps library can not be found");if(this.autocomplete=new google.maps.places.Autocomplete(this.el.nativeElement,this.options),!this.autocomplete)throw new Error("Autocomplete is not initialized");null!=!this.autocomplete.addListener&&(this.eventListener=this.autocomplete.addListener("place_changed",function(){Ge.handleChangeEvent()})),this.el.nativeElement.addEventListener("keydown",function(Je){Je.key&&"enter"==Je.key.toLowerCase()&&Je.target===Ge.el.nativeElement&&(Je.preventDefault(),Je.stopPropagation())}),window&&window.navigator&&window.navigator.userAgent&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&setTimeout(function(){var Je=document.getElementsByClassName("pac-container");if(Je){var ot=Array.from(Je);if(ot)for(var et=0,Oe=ot;et<Oe.length;et++){var De=Oe[et];De&&De.addEventListener("touchend",function(ye){ye.stopImmediatePropagation()})}}},500)},Le.prototype.reset=function(){this.autocomplete.setComponentRestrictions(this.options.componentRestrictions),this.autocomplete.setTypes(this.options.types)},Le.prototype.handleChangeEvent=function(){var Ge=this;this.ngZone.run(function(){Ge.place=Ge.autocomplete.getPlace(),Ge.place&&Ge.onAddressChange.emit(Ge.place)})},Le.ctorParameters=function(){return[{type:Pt.ElementRef},{type:Pt.NgZone}]},Le.propDecorators={options:[{type:Pt.Input,args:["options"]}],onAddressChange:[{type:Pt.Output}]},Le.\u0275fac=function(Je){return new(Je||Le)(t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.NgZone))},Le.\u0275dir=t.\u0275\u0275defineDirective({type:Le,selectors:[["","ngx-google-places-autocomplete",""]],inputs:{options:"options"},outputs:{onAddressChange:"onAddressChange"},exportAs:["ngx-places"]}),Le}(),Ee=function(){function Le(){}return Le.ctorParameters=function(){return[]},Le.\u0275fac=function(Je){return new(Je||Le)},Le.\u0275mod=t.\u0275\u0275defineNgModule({type:Le}),Le.\u0275inj=t.\u0275\u0275defineInjector({}),Le}();en.GooglePlaceModule=Ee,en.GooglePlaceDirective=ge,Object.defineProperty(en,"__esModule",{value:!0})}(ut(256),gn,ut(256))},751:(_i,gn,ut)=>{"use strict";ut.d(gn,{y:()=>Ge});var t=ut(930),en=ut(727),Pt=ut(822),p=ut(635),ge=ut(416),Ee=ut(576),Le=ut(806);let Ge=(()=>{class Oe{constructor(ye){ye&&(this._subscribe=ye)}lift(ye){const pe=new Oe;return pe.source=this,pe.operator=ye,pe}subscribe(ye,pe,te){const W=function et(Oe){return Oe&&Oe instanceof t.Lv||function ot(Oe){return Oe&&(0,Ee.m)(Oe.next)&&(0,Ee.m)(Oe.error)&&(0,Ee.m)(Oe.complete)}(Oe)&&(0,en.Nn)(Oe)}(ye)?ye:new t.Hp(ye,pe,te);return(0,Le.x)(()=>{const{operator:ue,source:ne}=this;W.add(ue?ue.call(W,ne):ne?this._subscribe(W):this._trySubscribe(W))}),W}_trySubscribe(ye){try{return this._subscribe(ye)}catch(pe){ye.error(pe)}}forEach(ye,pe){return new(pe=Je(pe))((te,W)=>{const ue=new t.Hp({next:ne=>{try{ye(ne)}catch(G){W(G),ue.unsubscribe()}},error:W,complete:te});this.subscribe(ue)})}_subscribe(ye){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(ye)}[Pt.L](){return this}pipe(...ye){return(0,p.U)(ye)(this)}toPromise(ye){return new(ye=Je(ye))((pe,te)=>{let W;this.subscribe(ue=>W=ue,ue=>te(ue),()=>pe(W))})}}return Oe.create=De=>new Oe(De),Oe})();function Je(Oe){var De;return null!==(De=Oe??ge.v.Promise)&&void 0!==De?De:Promise}},579:(_i,gn,ut)=>{"use strict";ut.d(gn,{x:()=>Le});var t=ut(751),en=ut(727);const p=(0,ut(888).d)(Je=>function(){Je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=ut(737),Ee=ut(806);let Le=(()=>{class Je extends t.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(et){const Oe=new Ge(this,this);return Oe.operator=et,Oe}_throwIfClosed(){if(this.closed)throw new p}next(et){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(et)}})}error(et){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=et;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(et)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:et}=this;for(;et.length;)et.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var et;return(null===(et=this.observers)||void 0===et?void 0:et.length)>0}_trySubscribe(et){return this._throwIfClosed(),super._trySubscribe(et)}_subscribe(et){return this._throwIfClosed(),this._checkFinalizedStatuses(et),this._innerSubscribe(et)}_innerSubscribe(et){const{hasError:Oe,isStopped:De,observers:ye}=this;return Oe||De?en.Lc:(this.currentObservers=null,ye.push(et),new en.w0(()=>{this.currentObservers=null,(0,ge.P)(ye,et)}))}_checkFinalizedStatuses(et){const{hasError:Oe,thrownError:De,isStopped:ye}=this;Oe?et.error(De):ye&&et.complete()}asObservable(){const et=new t.y;return et.source=this,et}}return Je.create=(ot,et)=>new Ge(ot,et),Je})();class Ge extends Le{constructor(ot,et){super(),this.destination=ot,this.source=et}next(ot){var et,Oe;null===(Oe=null===(et=this.destination)||void 0===et?void 0:et.next)||void 0===Oe||Oe.call(et,ot)}error(ot){var et,Oe;null===(Oe=null===(et=this.destination)||void 0===et?void 0:et.error)||void 0===Oe||Oe.call(et,ot)}complete(){var ot,et;null===(et=null===(ot=this.destination)||void 0===ot?void 0:ot.complete)||void 0===et||et.call(ot)}_subscribe(ot){var et,Oe;return null!==(Oe=null===(et=this.source)||void 0===et?void 0:et.subscribe(ot))&&void 0!==Oe?Oe:en.Lc}}},930:(_i,gn,ut)=>{"use strict";ut.d(gn,{Hp:()=>te,Lv:()=>Oe});var t=ut(576),en=ut(727),Pt=ut(416),p=ut(849),ge=ut(32);const Ee=Je("C",void 0,void 0);function Je(J,Y,le){return{kind:J,value:Y,error:le}}var ot=ut(410),et=ut(806);class Oe extends en.w0{constructor(Y){super(),this.isStopped=!1,Y?(this.destination=Y,(0,en.Nn)(Y)&&Y.add(this)):this.destination=G}static create(Y,le,Me){return new te(Y,le,Me)}next(Y){this.isStopped?ne(function Ge(J){return Je("N",J,void 0)}(Y),this):this._next(Y)}error(Y){this.isStopped?ne(function Le(J){return Je("E",void 0,J)}(Y),this):(this.isStopped=!0,this._error(Y))}complete(){this.isStopped?ne(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Y){this.destination.next(Y)}_error(Y){try{this.destination.error(Y)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const De=Function.prototype.bind;function ye(J,Y){return De.call(J,Y)}class pe{constructor(Y){this.partialObserver=Y}next(Y){const{partialObserver:le}=this;if(le.next)try{le.next(Y)}catch(Me){W(Me)}}error(Y){const{partialObserver:le}=this;if(le.error)try{le.error(Y)}catch(Me){W(Me)}else W(Y)}complete(){const{partialObserver:Y}=this;if(Y.complete)try{Y.complete()}catch(le){W(le)}}}class te extends Oe{constructor(Y,le,Me){let K;if(super(),(0,t.m)(Y)||!Y)K={next:Y??void 0,error:le??void 0,complete:Me??void 0};else{let ce;this&&Pt.v.useDeprecatedNextContext?(ce=Object.create(Y),ce.unsubscribe=()=>this.unsubscribe(),K={next:Y.next&&ye(Y.next,ce),error:Y.error&&ye(Y.error,ce),complete:Y.complete&&ye(Y.complete,ce)}):K=Y}this.destination=new pe(K)}}function W(J){Pt.v.useDeprecatedSynchronousErrorHandling?(0,et.O)(J):(0,p.h)(J)}function ne(J,Y){const{onStoppedNotification:le}=Pt.v;le&&ot.z.setTimeout(()=>le(J,Y))}const G={closed:!0,next:ge.Z,error:function ue(J){throw J},complete:ge.Z}},727:(_i,gn,ut)=>{"use strict";ut.d(gn,{Lc:()=>Ee,w0:()=>ge,Nn:()=>Le});var t=ut(576);const Pt=(0,ut(888).d)(Je=>function(et){Je(this),this.message=et?`${et.length} errors occurred during unsubscription:\n${et.map((Oe,De)=>`${De+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=et});var p=ut(737);class ge{constructor(ot){this.initialTeardown=ot,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ot;if(!this.closed){this.closed=!0;const{_parentage:et}=this;if(et)if(this._parentage=null,Array.isArray(et))for(const ye of et)ye.remove(this);else et.remove(this);const{initialTeardown:Oe}=this;if((0,t.m)(Oe))try{Oe()}catch(ye){ot=ye instanceof Pt?ye.errors:[ye]}const{_finalizers:De}=this;if(De){this._finalizers=null;for(const ye of De)try{Ge(ye)}catch(pe){ot=ot??[],pe instanceof Pt?ot=[...ot,...pe.errors]:ot.push(pe)}}if(ot)throw new Pt(ot)}}add(ot){var et;if(ot&&ot!==this)if(this.closed)Ge(ot);else{if(ot instanceof ge){if(ot.closed||ot._hasParent(this))return;ot._addParent(this)}(this._finalizers=null!==(et=this._finalizers)&&void 0!==et?et:[]).push(ot)}}_hasParent(ot){const{_parentage:et}=this;return et===ot||Array.isArray(et)&&et.includes(ot)}_addParent(ot){const{_parentage:et}=this;this._parentage=Array.isArray(et)?(et.push(ot),et):et?[et,ot]:ot}_removeParent(ot){const{_parentage:et}=this;et===ot?this._parentage=null:Array.isArray(et)&&(0,p.P)(et,ot)}remove(ot){const{_finalizers:et}=this;et&&(0,p.P)(et,ot),ot instanceof ge&&ot._removeParent(this)}}ge.EMPTY=(()=>{const Je=new ge;return Je.closed=!0,Je})();const Ee=ge.EMPTY;function Le(Je){return Je instanceof ge||Je&&"closed"in Je&&(0,t.m)(Je.remove)&&(0,t.m)(Je.add)&&(0,t.m)(Je.unsubscribe)}function Ge(Je){(0,t.m)(Je)?Je():Je.unsubscribe()}},416:(_i,gn,ut)=>{"use strict";ut.d(gn,{v:()=>t});const t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_i,gn,ut)=>{"use strict";ut.d(gn,{E:()=>en});const en=new(ut(751).y)(ge=>ge.complete())},76:(_i,gn,ut)=>{"use strict";ut.d(gn,{D:()=>Me});var t=ut(421),en=ut(672),Pt=ut(482),p=ut(403);function ge(K,ce=0){return(0,Pt.e)((_e,qe)=>{_e.subscribe((0,p.x)(qe,Be=>(0,en.f)(qe,K,()=>qe.next(Be),ce),()=>(0,en.f)(qe,K,()=>qe.complete(),ce),Be=>(0,en.f)(qe,K,()=>qe.error(Be),ce)))})}function Ee(K,ce=0){return(0,Pt.e)((_e,qe)=>{qe.add(K.schedule(()=>_e.subscribe(qe),ce))})}var Je=ut(751),et=ut(202),Oe=ut(576);function ye(K,ce){if(!K)throw new Error("Iterable cannot be null");return new Je.y(_e=>{(0,en.f)(_e,ce,()=>{const qe=K[Symbol.asyncIterator]();(0,en.f)(_e,ce,()=>{qe.next().then(Be=>{Be.done?_e.complete():_e.next(Be.value)})},0,!0)})})}var pe=ut(670),te=ut(239),W=ut(144),ue=ut(495),ne=ut(206),G=ut(532),J=ut(260);function Me(K,ce){return ce?function le(K,ce){if(null!=K){if((0,pe.c)(K))return function Le(K,ce){return(0,t.Xf)(K).pipe(Ee(ce),ge(ce))}(K,ce);if((0,W.z)(K))return function ot(K,ce){return new Je.y(_e=>{let qe=0;return ce.schedule(function(){qe===K.length?_e.complete():(_e.next(K[qe++]),_e.closed||this.schedule())})})}(K,ce);if((0,te.t)(K))return function Ge(K,ce){return(0,t.Xf)(K).pipe(Ee(ce),ge(ce))}(K,ce);if((0,ne.D)(K))return ye(K,ce);if((0,ue.T)(K))return function De(K,ce){return new Je.y(_e=>{let qe;return(0,en.f)(_e,ce,()=>{qe=K[et.h](),(0,en.f)(_e,ce,()=>{let Be,at;try{({value:Be,done:at}=qe.next())}catch(Ze){return void _e.error(Ze)}at?_e.complete():_e.next(Be)},0,!0)}),()=>(0,Oe.m)(qe?.return)&&qe.return()})}(K,ce);if((0,J.L)(K))return function Y(K,ce){return ye((0,J.Q)(K),ce)}(K,ce)}throw(0,G.z)(K)}(K,ce):(0,t.Xf)(K)}},421:(_i,gn,ut)=>{"use strict";ut.d(gn,{Xf:()=>De});var t=ut(582),en=ut(144),Pt=ut(239),p=ut(751),ge=ut(670),Ee=ut(206),Le=ut(532),Ge=ut(495),Je=ut(260),ot=ut(576),et=ut(849),Oe=ut(822);function De(J){if(J instanceof p.y)return J;if(null!=J){if((0,ge.c)(J))return function ye(J){return new p.y(Y=>{const le=J[Oe.L]();if((0,ot.m)(le.subscribe))return le.subscribe(Y);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(J);if((0,en.z)(J))return function pe(J){return new p.y(Y=>{for(let le=0;le<J.length&&!Y.closed;le++)Y.next(J[le]);Y.complete()})}(J);if((0,Pt.t)(J))return function te(J){return new p.y(Y=>{J.then(le=>{Y.closed||(Y.next(le),Y.complete())},le=>Y.error(le)).then(null,et.h)})}(J);if((0,Ee.D)(J))return ue(J);if((0,Ge.T)(J))return function W(J){return new p.y(Y=>{for(const le of J)if(Y.next(le),Y.closed)return;Y.complete()})}(J);if((0,Je.L)(J))return function ne(J){return ue((0,Je.Q)(J))}(J)}throw(0,Le.z)(J)}function ue(J){return new p.y(Y=>{(function G(J,Y){var le,Me,K,ce;return(0,t.mG)(this,void 0,void 0,function*(){try{for(le=(0,t.KL)(J);!(Me=yield le.next()).done;)if(Y.next(Me.value),Y.closed)return}catch(_e){K={error:_e}}finally{try{Me&&!Me.done&&(ce=le.return)&&(yield ce.call(le))}finally{if(K)throw K.error}}Y.complete()})})(J,Y).catch(le=>Y.error(le))})}},403:(_i,gn,ut)=>{"use strict";ut.d(gn,{x:()=>en});var t=ut(930);function en(p,ge,Ee,Le,Ge){return new Pt(p,ge,Ee,Le,Ge)}class Pt extends t.Lv{constructor(ge,Ee,Le,Ge,Je,ot){super(ge),this.onFinalize=Je,this.shouldUnsubscribe=ot,this._next=Ee?function(et){try{Ee(et)}catch(Oe){ge.error(Oe)}}:super._next,this._error=Ge?function(et){try{Ge(et)}catch(Oe){ge.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(et){ge.error(et)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4:(_i,gn,ut)=>{"use strict";ut.d(gn,{U:()=>Pt});var t=ut(482),en=ut(403);function Pt(p,ge){return(0,t.e)((Ee,Le)=>{let Ge=0;Ee.subscribe((0,en.x)(Le,Je=>{Le.next(p.call(ge,Je,Ge++))}))})}},189:(_i,gn,ut)=>{"use strict";ut.d(gn,{J:()=>Pt});var t=ut(577),en=ut(671);function Pt(p=1/0){return(0,t.z)(en.y,p)}},577:(_i,gn,ut)=>{"use strict";ut.d(gn,{z:()=>Ge});var t=ut(4),en=ut(421),Pt=ut(482),p=ut(672),ge=ut(403),Le=ut(576);function Ge(Je,ot,et=1/0){return(0,Le.m)(ot)?Ge((Oe,De)=>(0,t.U)((ye,pe)=>ot(Oe,ye,De,pe))((0,en.Xf)(Je(Oe,De))),et):("number"==typeof ot&&(et=ot),(0,Pt.e)((Oe,De)=>function Ee(Je,ot,et,Oe,De,ye,pe,te){const W=[];let ue=0,ne=0,G=!1;const J=()=>{G&&!W.length&&!ue&&ot.complete()},Y=Me=>ue<Oe?le(Me):W.push(Me),le=Me=>{ye&&ot.next(Me),ue++;let K=!1;(0,en.Xf)(et(Me,ne++)).subscribe((0,ge.x)(ot,ce=>{De?.(ce),ye?Y(ce):ot.next(ce)},()=>{K=!0},void 0,()=>{if(K)try{for(ue--;W.length&&ue<Oe;){const ce=W.shift();pe?(0,p.f)(ot,pe,()=>le(ce)):le(ce)}J()}catch(ce){ot.error(ce)}}))};return Je.subscribe((0,ge.x)(ot,Y,()=>{G=!0,J()})),()=>{te?.()}}(Oe,De,Je,et)))}},410:(_i,gn,ut)=>{"use strict";ut.d(gn,{z:()=>t});const t={setTimeout(en,Pt,...p){const{delegate:ge}=t;return ge?.setTimeout?ge.setTimeout(en,Pt,...p):setTimeout(en,Pt,...p)},clearTimeout(en){const{delegate:Pt}=t;return(Pt?.clearTimeout||clearTimeout)(en)},delegate:void 0}},202:(_i,gn,ut)=>{"use strict";ut.d(gn,{h:()=>en});const en=function t(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},822:(_i,gn,ut)=>{"use strict";ut.d(gn,{L:()=>t});const t="function"==typeof Symbol&&Symbol.observable||"@@observable"},669:(_i,gn,ut)=>{"use strict";ut.d(gn,{_6:()=>Ee,jO:()=>p,yG:()=>ge});var t=ut(576);function Pt(Le){return Le[Le.length-1]}function p(Le){return(0,t.m)(Pt(Le))?Le.pop():void 0}function ge(Le){return function en(Le){return Le&&(0,t.m)(Le.schedule)}(Pt(Le))?Le.pop():void 0}function Ee(Le,Ge){return"number"==typeof Pt(Le)?Le.pop():Ge}},737:(_i,gn,ut)=>{"use strict";function t(en,Pt){if(en){const p=en.indexOf(Pt);0<=p&&en.splice(p,1)}}ut.d(gn,{P:()=>t})},888:(_i,gn,ut)=>{"use strict";function t(en){const p=en(ge=>{Error.call(ge),ge.stack=(new Error).stack});return p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p}ut.d(gn,{d:()=>t})},806:(_i,gn,ut)=>{"use strict";ut.d(gn,{O:()=>p,x:()=>Pt});var t=ut(416);let en=null;function Pt(ge){if(t.v.useDeprecatedSynchronousErrorHandling){const Ee=!en;if(Ee&&(en={errorThrown:!1,error:null}),ge(),Ee){const{errorThrown:Le,error:Ge}=en;if(en=null,Le)throw Ge}}else ge()}function p(ge){t.v.useDeprecatedSynchronousErrorHandling&&en&&(en.errorThrown=!0,en.error=ge)}},672:(_i,gn,ut)=>{"use strict";function t(en,Pt,p,ge=0,Ee=!1){const Le=Pt.schedule(function(){p(),Ee?en.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(en.add(Le),!Ee)return Le}ut.d(gn,{f:()=>t})},671:(_i,gn,ut)=>{"use strict";function t(en){return en}ut.d(gn,{y:()=>t})},144:(_i,gn,ut)=>{"use strict";ut.d(gn,{z:()=>t});const t=en=>en&&"number"==typeof en.length&&"function"!=typeof en},206:(_i,gn,ut)=>{"use strict";ut.d(gn,{D:()=>en});var t=ut(576);function en(Pt){return Symbol.asyncIterator&&(0,t.m)(Pt?.[Symbol.asyncIterator])}},576:(_i,gn,ut)=>{"use strict";function t(en){return"function"==typeof en}ut.d(gn,{m:()=>t})},670:(_i,gn,ut)=>{"use strict";ut.d(gn,{c:()=>Pt});var t=ut(822),en=ut(576);function Pt(p){return(0,en.m)(p[t.L])}},495:(_i,gn,ut)=>{"use strict";ut.d(gn,{T:()=>Pt});var t=ut(202),en=ut(576);function Pt(p){return(0,en.m)(p?.[t.h])}},239:(_i,gn,ut)=>{"use strict";ut.d(gn,{t:()=>en});var t=ut(576);function en(Pt){return(0,t.m)(Pt?.then)}},260:(_i,gn,ut)=>{"use strict";ut.d(gn,{L:()=>p,Q:()=>Pt});var t=ut(582),en=ut(576);function Pt(ge){return(0,t.FC)(this,arguments,function*(){const Le=ge.getReader();try{for(;;){const{value:Ge,done:Je}=yield(0,t.qq)(Le.read());if(Je)return yield(0,t.qq)(void 0);yield yield(0,t.qq)(Ge)}}finally{Le.releaseLock()}})}function p(ge){return(0,en.m)(ge?.getReader)}},482:(_i,gn,ut)=>{"use strict";ut.d(gn,{A:()=>en,e:()=>Pt});var t=ut(576);function en(p){return(0,t.m)(p?.lift)}function Pt(p){return ge=>{if(en(ge))return ge.lift(function(Ee){try{return p(Ee,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},32:(_i,gn,ut)=>{"use strict";function t(){}ut.d(gn,{Z:()=>t})},635:(_i,gn,ut)=>{"use strict";ut.d(gn,{U:()=>Pt,z:()=>en});var t=ut(671);function en(...p){return Pt(p)}function Pt(p){return 0===p.length?t.y:1===p.length?p[0]:function(Ee){return p.reduce((Le,Ge)=>Ge(Le),Ee)}}},849:(_i,gn,ut)=>{"use strict";ut.d(gn,{h:()=>Pt});var t=ut(416),en=ut(410);function Pt(p){en.z.setTimeout(()=>{const{onUnhandledError:ge}=t.v;if(!ge)throw p;ge(p)})}},532:(_i,gn,ut)=>{"use strict";function t(en){return new TypeError(`You provided ${null!==en&&"object"==typeof en?"an invalid object":`'${en}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ut.d(gn,{z:()=>t})},256:(_i,gn,ut)=>{"use strict";ut.r(gn),ut.d(gn,{ANALYZE_FOR_ENTRY_COMPONENTS:()=>Nc,ANIMATION_MODULE_TYPE:()=>Px,APP_BOOTSTRAP_LISTENER:()=>db,APP_ID:()=>Dx,APP_INITIALIZER:()=>Q1,ApplicationInitStatus:()=>gv,ApplicationModule:()=>Rs,ApplicationRef:()=>xv,Attribute:()=>Ip,COMPILER_OPTIONS:()=>nb,CUSTOM_ELEMENTS_SCHEMA:()=>Qo,ChangeDetectionStrategy:()=>Ii,ChangeDetectorRef:()=>wb,Compiler:()=>Lx,CompilerFactory:()=>Fx,Component:()=>Tx,ComponentFactory:()=>_m,ComponentFactoryResolver:()=>Gp,ComponentRef:()=>gi,ContentChild:()=>xg,ContentChildren:()=>Ky,DEFAULT_CURRENCY_CODE:()=>Ox,DebugElement:()=>Wy,DebugEventListener:()=>tw,DebugNode:()=>Z0,DefaultIterableDiffer:()=>T,Directive:()=>z0,ENVIRONMENT_INITIALIZER:()=>gh,ElementRef:()=>Na,EmbeddedViewRef:()=>ew,EnvironmentInjector:()=>Xi,ErrorHandler:()=>uc,EventEmitter:()=>Ka,Host:()=>gt,HostBinding:()=>Ix,HostListener:()=>K1,INJECTOR:()=>ed,Inject:()=>We,InjectFlags:()=>Bt,Injectable:()=>pc,InjectionToken:()=>zi,Injector:()=>Jc,Input:()=>Mx,IterableDiffers:()=>Jt,KeyValueDiffers:()=>Zn,LOCALE_ID:()=>lg,MissingTranslationStrategy:()=>ss,ModuleWithComponentFactories:()=>tb,NO_ERRORS_SCHEMA:()=>Ts,NgModule:()=>Sw,NgModuleFactory:()=>u0,NgModuleRef:()=>ip,NgProbeToken:()=>Gx,NgZone:()=>Il,Optional:()=>$e,Output:()=>X1,PACKAGE_ROOT_URL:()=>Iw,PLATFORM_ID:()=>Mw,PLATFORM_INITIALIZER:()=>Ax,Pipe:()=>Y1,PlatformRef:()=>q0,Query:()=>Bc,QueryList:()=>sp,ReflectiveInjector:()=>is,ReflectiveKey:()=>oa,Renderer2:()=>bh,RendererFactory2:()=>Ir,RendererStyleFlags2:()=>gr,ResolvedReflectiveFactory:()=>kh,Sanitizer:()=>wh,SecurityContext:()=>Or,Self:()=>st,SimpleChange:()=>Nf,SkipSelf:()=>nt,TRANSLATIONS:()=>Gy,TRANSLATIONS_FORMAT:()=>Rx,TemplateRef:()=>ap,Testability:()=>$x,TestabilityRegistry:()=>cb,Type:()=>Wu,VERSION:()=>Yc,Version:()=>qp,ViewChild:()=>wg,ViewChildren:()=>Dp,ViewContainerRef:()=>cv,ViewEncapsulation:()=>qr,ViewRef:()=>Cb,asNativeElements:()=>nw,assertPlatform:()=>fb,createComponent:()=>ni,createEnvironmentInjector:()=>tg,createNgModule:()=>Q_,createNgModuleRef:()=>b1,createPlatform:()=>pb,createPlatformFactory:()=>vv,defineInjectable:()=>An,destroyPlatform:()=>cg,enableProdMode:()=>Xx,forwardRef:()=>ne,getDebugNode:()=>qy,getModuleFactory:()=>Kx,getNgModuleById:()=>Qx,getPlatform:()=>bv,importProvidersFrom:()=>u_,inject:()=>Wn,isDevMode:()=>Yx,isStandalone:()=>Al,makeEnvironmentProviders:()=>jg,platformCore:()=>bu,reflectComponentType:()=>Ki,resolveForwardRef:()=>G,setTestabilityGetter:()=>ub,\u0275ALLOW_MULTIPLE_PLATFORMS:()=>G0,\u0275APP_ID_RANDOM_PROVIDER:()=>Tw,\u0275ComponentFactory:()=>_m,\u0275Console:()=>Dw,\u0275DEFAULT_LOCALE_ID:()=>Wr,\u0275INJECTOR_SCOPE:()=>$g,\u0275LContext:()=>Jy,\u0275LifecycleHooksFeature:()=>fy,\u0275LocaleDataIndex:()=>jn,\u0275NG_COMP_DEF:()=>bs,\u0275NG_DIR_DEF:()=>Dd,\u0275NG_ELEMENT_ID:()=>Ls,\u0275NG_INJ_DEF:()=>Si,\u0275NG_MOD_DEF:()=>Ti,\u0275NG_PIPE_DEF:()=>Dl,\u0275NG_PROV_DEF:()=>Qi,\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR:()=>dl,\u0275NO_CHANGE:()=>Hn,\u0275NgModuleFactory:()=>By,\u0275NoopNgZone:()=>ab,\u0275ReflectionCapabilities:()=>we,\u0275Render3ComponentFactory:()=>ou,\u0275Render3ComponentRef:()=>hy,\u0275Render3NgModuleRef:()=>J_,\u0275RuntimeError:()=>K,\u0275TESTABILITY:()=>lb,\u0275TESTABILITY_GETTER:()=>H0,\u0275ViewRef:()=>Ga,\u0275XSS_SECURITY_URL:()=>Me,\u0275_sanitizeHtml:()=>cc,\u0275_sanitizeUrl:()=>hh,\u0275allowSanitizationBypassAndThrow:()=>ac,\u0275bypassSanitizationTrustHtml:()=>ch,\u0275bypassSanitizationTrustResourceUrl:()=>r_,\u0275bypassSanitizationTrustScript:()=>Np,\u0275bypassSanitizationTrustStyle:()=>uh,\u0275bypassSanitizationTrustUrl:()=>Bp,\u0275clearResolutionOfComponentResourcesQueue:()=>Fn,\u0275coerceToBoolean:()=>Td,\u0275compileComponent:()=>V1,\u0275compileDirective:()=>N0,\u0275compileNgModule:()=>F1,\u0275compileNgModuleDefs:()=>D0,\u0275compileNgModuleFactory:()=>hb,\u0275compilePipe:()=>ag,\u0275convertToBitFlags:()=>Xn,\u0275createInjector:()=>hi,\u0275defaultIterableDiffers:()=>Er,\u0275defaultKeyValueDiffers:()=>Qa,\u0275detectChanges:()=>vy,\u0275devModeEqual:()=>B_,\u0275findLocaleData:()=>Tf,\u0275flushModuleScopingQueueAsMuchAsPossible:()=>wx,\u0275formatRuntimeError:()=>ce,\u0275getDebugNode:()=>qy,\u0275getDebugNodeR2:()=>sw,\u0275getDirectives:()=>Df,\u0275getHostElement:()=>ig,\u0275getInjectableDef:()=>Cn,\u0275getLContext:()=>Bo,\u0275getLocaleCurrencyCode:()=>Cl,\u0275getLocalePluralCase:()=>Km,\u0275getSanitizationBypassType:()=>hm,\u0275getUnknownElementStrictMode:()=>Di,\u0275getUnknownPropertyStrictMode:()=>or,\u0275global:()=>si,\u0275injectChangeDetectorRef:()=>Eb,\u0275internalCreateApplication:()=>qx,\u0275isBoundToModule:()=>_v,\u0275isEnvironmentProviders:()=>Y,\u0275isInjectable:()=>bi,\u0275isNgModule:()=>cp,\u0275isObservable:()=>wy,\u0275isPromise:()=>Xh,\u0275isSubscribable:()=>xy,\u0275makeDecorator:()=>No,\u0275noSideEffects:()=>Ji,\u0275patchComponentDefWithScope:()=>R0,\u0275publishDefaultGlobalUtils:()=>Bx,\u0275publishGlobalUtil:()=>Ml,\u0275registerLocaleData:()=>Ay,\u0275resetCompiledComponents:()=>P0,\u0275resetJitOptions:()=>bx,\u0275resolveComponentResources:()=>mt,\u0275setAllowDuplicateNgModuleIdsForTest:()=>Xr,\u0275setClassMetadata:()=>nx,\u0275setCurrentInjector:()=>yt,\u0275setDocument:()=>cl,\u0275setLocaleId:()=>Qm,\u0275setUnknownElementStrictMode:()=>Zi,\u0275setUnknownPropertyStrictMode:()=>Io,\u0275store:()=>pd,\u0275stringify:()=>te,\u0275transitiveScopesFor:()=>Cd,\u0275unregisterLocaleData:()=>Sl,\u0275unwrapSafeValue:()=>sc,\u0275\u0275CopyDefinitionFeature:()=>F_,\u0275\u0275FactoryTarget:()=>$r,\u0275\u0275HostDirectivesFeature:()=>lu,\u0275\u0275InheritDefinitionFeature:()=>Wo,\u0275\u0275NgOnChangesFeature:()=>Ll,\u0275\u0275ProvidersFeature:()=>c0,\u0275\u0275StandaloneFeature:()=>h0,\u0275\u0275advance:()=>hc,\u0275\u0275attribute:()=>zm,\u0275\u0275attributeInterpolate1:()=>yf,\u0275\u0275attributeInterpolate2:()=>qh,\u0275\u0275attributeInterpolate3:()=>hd,\u0275\u0275attributeInterpolate4:()=>As,\u0275\u0275attributeInterpolate5:()=>_y,\u0275\u0275attributeInterpolate6:()=>_f,\u0275\u0275attributeInterpolate7:()=>jm,\u0275\u0275attributeInterpolate8:()=>Zh,\u0275\u0275attributeInterpolateV:()=>Yh,\u0275\u0275classMap:()=>D,\u0275\u0275classMapInterpolate1:()=>$n,\u0275\u0275classMapInterpolate2:()=>kn,\u0275\u0275classMapInterpolate3:()=>Qn,\u0275\u0275classMapInterpolate4:()=>wn,\u0275\u0275classMapInterpolate5:()=>qn,\u0275\u0275classMapInterpolate6:()=>ji,\u0275\u0275classMapInterpolate7:()=>fi,\u0275\u0275classMapInterpolate8:()=>Oi,\u0275\u0275classMapInterpolateV:()=>Vi,\u0275\u0275classProp:()=>x,\u0275\u0275contentQuery:()=>C0,\u0275\u0275defineComponent:()=>wu,\u0275\u0275defineDirective:()=>Cu,\u0275\u0275defineInjectable:()=>hn,\u0275\u0275defineInjector:()=>In,\u0275\u0275defineNgModule:()=>kl,\u0275\u0275definePipe:()=>Tt,\u0275\u0275directiveInject:()=>Ua,\u0275\u0275disableBindings:()=>Bl,\u0275\u0275element:()=>Hm,\u0275\u0275elementContainer:()=>ha,\u0275\u0275elementContainerEnd:()=>Ya,\u0275\u0275elementContainerStart:()=>gs,\u0275\u0275elementEnd:()=>Um,\u0275\u0275elementStart:()=>bf,\u0275\u0275enableBindings:()=>Ru,\u0275\u0275getCurrentView:()=>vc,\u0275\u0275getInheritedFactory:()=>Mp,\u0275\u0275hostProperty:()=>_d,\u0275\u0275i18n:()=>n0,\u0275\u0275i18nApply:()=>o0,\u0275\u0275i18nAttributes:()=>r0,\u0275\u0275i18nEnd:()=>Z_,\u0275\u0275i18nExp:()=>Y_,\u0275\u0275i18nPostprocess:()=>s0,\u0275\u0275i18nStart:()=>m1,\u0275\u0275inject:()=>Vt,\u0275\u0275injectAttribute:()=>Gu,\u0275\u0275invalidFactory:()=>Ah,\u0275\u0275invalidFactoryDep:()=>$t,\u0275\u0275listener:()=>$m,\u0275\u0275loadQuery:()=>S0,\u0275\u0275namespaceHTML:()=>Ul,\u0275\u0275namespaceMathML:()=>Nu,\u0275\u0275namespaceSVG:()=>Tc,\u0275\u0275nextContext:()=>qm,\u0275\u0275ngDeclareClassMetadata:()=>Id,\u0275\u0275ngDeclareComponent:()=>Ib,\u0275\u0275ngDeclareDirective:()=>Md,\u0275\u0275ngDeclareFactory:()=>Zy,\u0275\u0275ngDeclareInjectable:()=>Db,\u0275\u0275ngDeclareInjector:()=>kb,\u0275\u0275ngDeclareNgModule:()=>Pn,\u0275\u0275ngDeclarePipe:()=>Yn,\u0275\u0275pipe:()=>M1,\u0275\u0275pipeBind1:()=>g0,\u0275\u0275pipeBind2:()=>y0,\u0275\u0275pipeBind3:()=>sv,\u0275\u0275pipeBind4:()=>ax,\u0275\u0275pipeBindV:()=>lx,\u0275\u0275projection:()=>Sy,\u0275\u0275projectionDef:()=>Cy,\u0275\u0275property:()=>Za,\u0275\u0275propertyInterpolate:()=>vl,\u0275\u0275propertyInterpolate1:()=>xf,\u0275\u0275propertyInterpolate2:()=>Ty,\u0275\u0275propertyInterpolate3:()=>My,\u0275\u0275propertyInterpolate4:()=>fd,\u0275\u0275propertyInterpolate5:()=>wf,\u0275\u0275propertyInterpolate6:()=>bc,\u0275\u0275propertyInterpolate7:()=>bl,\u0275\u0275propertyInterpolate8:()=>md,\u0275\u0275propertyInterpolateV:()=>pa,\u0275\u0275pureFunction0:()=>ix,\u0275\u0275pureFunction1:()=>rx,\u0275\u0275pureFunction2:()=>ox,\u0275\u0275pureFunction3:()=>w1,\u0275\u0275pureFunction4:()=>m0,\u0275\u0275pureFunction5:()=>E1,\u0275\u0275pureFunction6:()=>C1,\u0275\u0275pureFunction7:()=>S1,\u0275\u0275pureFunction8:()=>nv,\u0275\u0275pureFunctionV:()=>rg,\u0275\u0275queryRefresh:()=>sg,\u0275\u0275reference:()=>by,\u0275\u0275registerNgModuleType:()=>Bi,\u0275\u0275resetView:()=>cs,\u0275\u0275resolveBody:()=>Yp,\u0275\u0275resolveDocument:()=>mo,\u0275\u0275resolveWindow:()=>za,\u0275\u0275restoreView:()=>bp,\u0275\u0275sanitizeHtml:()=>a_,\u0275\u0275sanitizeResourceUrl:()=>fh,\u0275\u0275sanitizeScript:()=>Up,\u0275\u0275sanitizeStyle:()=>La,\u0275\u0275sanitizeUrl:()=>ia,\u0275\u0275sanitizeUrlOrResourceUrl:()=>zg,\u0275\u0275setComponentScope:()=>ws,\u0275\u0275setNgModuleScope:()=>_a,\u0275\u0275styleMap:()=>C,\u0275\u0275styleMapInterpolate1:()=>ar,\u0275\u0275styleMapInterpolate2:()=>yr,\u0275\u0275styleMapInterpolate3:()=>Dr,\u0275\u0275styleMapInterpolate4:()=>Ui,\u0275\u0275styleMapInterpolate5:()=>Lr,\u0275\u0275styleMapInterpolate6:()=>kr,\u0275\u0275styleMapInterpolate7:()=>hr,\u0275\u0275styleMapInterpolate8:()=>Mi,\u0275\u0275styleMapInterpolateV:()=>Ar,\u0275\u0275styleProp:()=>v,\u0275\u0275stylePropInterpolate1:()=>Hi,\u0275\u0275stylePropInterpolate2:()=>vo,\u0275\u0275stylePropInterpolate3:()=>pr,\u0275\u0275stylePropInterpolate4:()=>Fr,\u0275\u0275stylePropInterpolate5:()=>lr,\u0275\u0275stylePropInterpolate6:()=>fr,\u0275\u0275stylePropInterpolate7:()=>Nr,\u0275\u0275stylePropInterpolate8:()=>Os,\u0275\u0275stylePropInterpolateV:()=>fu,\u0275\u0275syntheticHostListener:()=>Kh,\u0275\u0275syntheticHostProperty:()=>xl,\u0275\u0275template:()=>vf,\u0275\u0275templateRefExtractor:()=>_x,\u0275\u0275text:()=>Nt,\u0275\u0275textInterpolate:()=>Gt,\u0275\u0275textInterpolate1:()=>Ct,\u0275\u0275textInterpolate2:()=>an,\u0275\u0275textInterpolate3:()=>mn,\u0275\u0275textInterpolate4:()=>un,\u0275\u0275textInterpolate5:()=>Bn,\u0275\u0275textInterpolate6:()=>Xt,\u0275\u0275textInterpolate7:()=>Tn,\u0275\u0275textInterpolate8:()=>On,\u0275\u0275textInterpolateV:()=>yi,\u0275\u0275trustConstantHtml:()=>mh,\u0275\u0275trustConstantResourceUrl:()=>Bg,\u0275\u0275validateIframeAttribute:()=>hs,\u0275\u0275viewQuery:()=>Ed});var t=ut(579),en=ut(727),Pt=ut(751),p=ut(189),ge=ut(421),Ee=ut(515),Le=ut(669),Ge=ut(76),ot=ut(930),et=ut(482);function De(s,c,...h){if(!0===c)return void s();if(!1===c)return;const y=new ot.Hp({next:()=>{y.unsubscribe(),s()}});return(0,ge.Xf)(c(...h)).subscribe(y)}function ye(s){for(let c in s)if(s[c]===ye)return c;throw Error("Could not find renamed property on target object.")}function pe(s,c){for(const h in c)c.hasOwnProperty(h)&&!s.hasOwnProperty(h)&&(s[h]=c[h])}function te(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(te).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const c=s.toString();if(null==c)return""+c;const h=c.indexOf("\n");return-1===h?c:c.substring(0,h)}function W(s,c){return null==s||""===s?null===c?"":c:null==c||""===c?s:s+" "+c}const ue=ye({__forward_ref__:ye});function ne(s){return s.__forward_ref__=ne,s.toString=function(){return te(this())},s}function G(s){return J(s)?s():s}function J(s){return"function"==typeof s&&s.hasOwnProperty(ue)&&s.__forward_ref__===ne}function Y(s){return s&&!!s.\u0275providers}const Me="https://g.co/ng/security#xss";class K extends Error{constructor(c,h){super(ce(c,h)),this.code=c}}function ce(s,c){return`NG0${Math.abs(s)}${c?": "+c.trim():""}`}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function qe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function Fe(s,c){throw new K(-201,!1)}function _n(s,c,h,y){throw new Error(`ASSERTION ERROR: ${s}`+(null==y?"":` [Expected=> ${h} ${y} ${c} <=Actual]`))}function hn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}const An=hn;function In(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return cr(s,Qi)||cr(s,ur)}function bi(s){return null!==Cn(s)}function cr(s,c){return s.hasOwnProperty(c)?s[c]:null}function qo(s){return s&&(s.hasOwnProperty(Si)||s.hasOwnProperty(ir))?s[Si]:null}const Qi=ye({\u0275prov:ye}),Si=ye({\u0275inj:ye}),ur=ye({ngInjectableDef:ye}),ir=ye({ngInjectorDef:ye});var Bt=(()=>((Bt=Bt||{})[Bt.Default=0]="Default",Bt[Bt.Host=1]="Host",Bt[Bt.Self=2]="Self",Bt[Bt.SkipSelf=4]="SkipSelf",Bt[Bt.Optional=8]="Optional",Bt))();let Vn;function _r(s){const c=Vn;return Vn=s,c}function Br(s,c,h){const y=Cn(s);return y&&"root"==y.providedIn?void 0===y.value?y.value=y.factory():y.value:h&Bt.Optional?null:void 0!==c?c:void Fe(te(s))}const si=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ee={},re="__NG_DI_FLAG__",Te="ngTempTokenPath",Ue="ngTokenPath",Qe=/\n/gm,pt="\u0275",dt="__source";let Xe;function yt(s){const c=Xe;return Xe=s,c}function Qt(s,c=Bt.Default){if(void 0===Xe)throw new K(-203,!1);return null===Xe?Br(s,void 0,c):Xe.get(s,c&Bt.Optional?null:void 0,c)}function Vt(s,c=Bt.Default){return(function ma(){return Vn}()||Qt)(G(s),c)}function $t(s){throw new K(202,!1)}function Wn(s,c=Bt.Default){return Vt(s,Xn(c))}function Xn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Un(s){const c=[];for(let h=0;h<s.length;h++){const y=G(s[h]);if(Array.isArray(y)){if(0===y.length)throw new K(900,!1);let w,M=Bt.Default;for(let A=0;A<y.length;A++){const L=y[A],j=ai(L);"number"==typeof j?-1===j?w=L.token:M|=j:w=L}c.push(Vt(w,M))}else c.push(Vt(y))}return c}function Kn(s,c){return s[re]=c,s.prototype[re]=c,s}function ai(s){return s[re]}function Ji(s){return{toString:s}.toString()}var Ii=(()=>((Ii=Ii||{})[Ii.OnPush=0]="OnPush",Ii[Ii.Default=1]="Default",Ii))(),qr=(()=>{return(s=qr||(qr={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",qr;var s})();const rr={},Jn=[],bs=ye({\u0275cmp:ye}),Dd=ye({\u0275dir:ye}),Dl=ye({\u0275pipe:ye}),Ti=ye({\u0275mod:ye}),xs=ye({\u0275fac:ye}),Ls=ye({__NG_ELEMENT_ID__:ye});let xu=0;function wu(s){return Ji(()=>{const c=Su(s),h={...c,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Ii.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||qr.Emulated,id:"c"+xu++,styles:s.styles||Jn,_:null,schemas:s.schemas||null,tView:null};pp(h);const y=s.dependencies;return h.directiveDefs=bo(y,!1),h.pipeDefs=bo(y,!0),h})}function ws(s,c,h){const y=s.\u0275cmp;y.directiveDefs=bo(c,!1),y.pipeDefs=bo(h,!0)}function ya(s){return ui(s)||xi(s)}function Eu(s){return null!==s}function kl(s){return Ji(()=>({type:s.type,bootstrap:s.bootstrap||Jn,declarations:s.declarations||Jn,imports:s.imports||Jn,exports:s.exports||Jn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function _a(s,c){return Ji(()=>{const h=vr(s,!0);h.declarations=c.declarations||Jn,h.imports=c.imports||Jn,h.exports=c.exports||Jn})}function Fs(s,c){if(null==s)return rr;const h={};for(const y in s)if(s.hasOwnProperty(y)){let w=s[y],M=w;Array.isArray(w)&&(M=w[1],w=w[0]),h[w]=y,c&&(c[w]=M)}return h}function Cu(s){return Ji(()=>{const c=Su(s);return pp(c),c})}function Tt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ui(s){return s[bs]||null}function xi(s){return s[Dd]||null}function ki(s){return s[Dl]||null}function Al(s){const c=ui(s)||xi(s)||ki(s);return null!==c&&c.standalone}function vr(s,c){const h=s[Ti]||null;if(!h&&!0===c)throw new Error(`Type ${te(s)} does not have '\u0275mod' property.`);return h}function Su(s){const c={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Jn,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fs(s.inputs,c),outputs:Fs(s.outputs)}}function pp(s){s.features?.forEach(c=>c(s))}function bo(s,c){if(!s)return null;const h=c?ki:ya;return()=>("function"==typeof s?s():s).map(y=>h(y)).filter(Eu)}const on=0,qt=1,cn=2,Ai=3,Sr=4,zn=5,Gi=6,Ns=7,nr=8,Ro=9,Wi=10,li=11,as=12,Ja=13,Tu=14,Zr=15,to=16,va=17,Bs=18,Zo=19,zs=20,xo=21,ei=22,Mu=1,wo=2,Eo=7,Iu=8,js=9,wi=10;function Co(s){return Array.isArray(s)&&"object"==typeof s[Mu]}function no(s){return Array.isArray(s)&&!0===s[Mu]}function Ur(s){return 0!=(4&s.flags)}function Pl(s){return s.componentOffset>-1}function Ol(s){return 1==(1&s.flags)}function zr(s){return!!s.template}function el(s){return 0!=(256&s[cn])}function Vs(s,c){return s.hasOwnProperty(xs)?s[xs]:null}class Nf{constructor(c,h,y){this.previousValue=c,this.currentValue=h,this.firstChange=y}isFirstChange(){return this.firstChange}}function Ll(){return Bf}function Bf(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ec),yp}function yp(){const s=Us(this),c=s?.current;if(c){const h=s.previous;if(h===rr)s.previous=c;else for(let y in c)h[y]=c[y];s.current=null,this.ngOnChanges(c)}}function Ec(s,c,h,y){const w=this.declaredInputs[h],M=Us(s)||function ba(s,c){return s[Pu]=c}(s,{previous:rr,current:null}),A=M.current||(M.current={}),L=M.previous,j=L[w];A[w]=new Nf(j&&j.currentValue,c,L===rr),s[y]=c}Ll.ngInherit=!0;const Pu="__ngSimpleChanges__";function Us(s){return s[Pu]||null}let ls=null;const Ld=s=>{ls=s},Yo=function(s,c,h){ls?.(s,c,h)},Ou="svg",Fd="math";function Hr(s){for(;Array.isArray(s);)s=s[on];return s}function Fl(s,c){return Hr(c[s])}function Lo(s,c){return Hr(c[s.index])}function Cc(s,c){return s.data[c]}function Nl(s,c){return s[c]}function ho(s,c){const h=c[s];return Co(h)?h:h[on]}function Hs(s){return 64==(64&s[cn])}function rl(s,c){return null==c?null:s[c]}function zf(s){s[Bs]=0}function jf(s,c){s[zn]+=c;let h=s,y=s[Ai];for(;null!==y&&(1===c&&1===h[zn]||-1===c&&0===h[zn]);)y[zn]+=c,h=y,y=y[Ai]}const ti={lFrame:Sc(null),bindingsEnabled:!0};function fg(){return ti.bindingsEnabled}function Ru(){ti.bindingsEnabled=!0}function Bl(){ti.bindingsEnabled=!1}function Zt(){return ti.lFrame.lView}function Ci(){return ti.lFrame.tView}function bp(s){return ti.lFrame.contextLView=s,s[nr]}function cs(s){return ti.lFrame.contextLView=null,s}function jr(){let s=Bd();for(;null!==s&&64===s.type;)s=s.parent;return s}function Bd(){return ti.lFrame.currentTNode}function $s(){const s=ti.lFrame,c=s.currentTNode;return s.isParent?c:c.parent}function So(s,c){const h=ti.lFrame;h.currentTNode=s,h.isParent=c}function zd(){return ti.lFrame.isParent}function Vf(){ti.lFrame.isParent=!1}function To(){const s=ti.lFrame;let c=s.bindingRootIndex;return-1===c&&(c=s.bindingRootIndex=s.tView.bindingStartIndex),c}function Es(){return ti.lFrame.bindingIndex}function xp(s){return ti.lFrame.bindingIndex=s}function zl(){return ti.lFrame.bindingIndex++}function xa(s){const c=ti.lFrame,h=c.bindingIndex;return c.bindingIndex=c.bindingIndex+s,h}function Uf(s){ti.lFrame.inI18n=s}function wp(s,c){const h=ti.lFrame;h.bindingIndex=h.bindingRootIndex=s,jl(c)}function jl(s){ti.lFrame.currentDirectiveIndex=s}function Hf(s){const c=ti.lFrame.currentDirectiveIndex;return-1===c?null:s[c]}function gg(){return ti.lFrame.currentQueryIndex}function $f(s){ti.lFrame.currentQueryIndex=s}function yg(s){const c=s[qt];return 2===c.type?c.declTNode:1===c.type?s[Gi]:null}function _g(s,c,h){if(h&Bt.SkipSelf){let w=c,M=s;for(;!(w=w.parent,null!==w||h&Bt.Host||(w=yg(M),null===w||(M=M[Zr],10&w.type))););if(null===w)return!1;c=w,s=M}const y=ti.lFrame=Fu();return y.currentTNode=c,y.lView=s,!0}function Hd(s){const c=Fu(),h=s[qt];ti.lFrame=c,c.currentTNode=h.firstChild,c.lView=s,c.tView=h,c.contextLView=s,c.bindingIndex=h.bindingStartIndex,c.inI18n=!1}function Fu(){const s=ti.lFrame,c=null===s?null:s.child;return null===c?Sc(s):c}function Sc(s){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=c),c}function Gf(){const s=ti.lFrame;return ti.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Wf=Gf;function Gs(){const s=Gf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Yr(){return ti.lFrame.selectedIndex}function Vl(s){ti.lFrame.selectedIndex=s}function er(){const s=ti.lFrame;return Cc(s.tView,s.selectedIndex)}function Tc(){ti.lFrame.currentNamespace=Ou}function Nu(){ti.lFrame.currentNamespace=Fd}function Ul(){!function di(){ti.lFrame.currentNamespace=null}()}function Hl(s,c){for(let h=c.directiveStart,y=c.directiveEnd;h<y;h++){const M=s.data[h].type.prototype,{ngAfterContentInit:A,ngAfterContentChecked:L,ngAfterViewInit:j,ngAfterViewChecked:Z,ngOnDestroy:se}=M;A&&(s.contentHooks??(s.contentHooks=[])).push(-h,A),L&&((s.contentHooks??(s.contentHooks=[])).push(h,L),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(h,L)),j&&(s.viewHooks??(s.viewHooks=[])).push(-h,j),Z&&((s.viewHooks??(s.viewHooks=[])).push(h,Z),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(h,Z)),null!=se&&(s.destroyHooks??(s.destroyHooks=[])).push(h,se)}}function Ws(s,c,h){qs(s,c,3,h)}function ju(s,c,h,y){(3&s[cn])===h&&qs(s,c,h,y)}function Mc(s,c){let h=s[cn];(3&h)===c&&(h&=2047,h+=1,s[cn]=h)}function qs(s,c,h,y){const M=y??-1,A=c.length-1;let L=0;for(let j=void 0!==y?65535&s[Bs]:0;j<A;j++)if("number"==typeof c[j+1]){if(L=c[j],null!=y&&L>=y)break}else c[j]<0&&(s[Bs]+=65536),(L<M||-1==M)&&(qf(s,h,c,j),s[Bs]=(4294901760&s[Bs])+j+2),j++}function qf(s,c,h,y){const w=h[y]<0,M=h[y+1],L=s[w?-h[y]:h[y]];if(w){if(s[cn]>>11<s[Bs]>>16&&(3&s[cn])===c){s[cn]+=2048,Yo(4,L,M);try{M.call(L)}finally{Yo(5,L,M)}}}else{Yo(4,L,M);try{M.call(L)}finally{Yo(5,L,M)}}}const us=-1;class Xo{constructor(c,h,y){this.factory=c,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=y}}function $d(s,c,h){let y=0;for(;y<h.length;){const w=h[y];if("number"==typeof w){if(0!==w)break;y++;const M=h[y++],A=h[y++],L=h[y++];s.setAttribute(c,A,L,M)}else{const M=w,A=h[++y];Gl(M)?s.setProperty(c,M,A):s.setAttribute(c,M,A),y++}}return y}function kc(s){return 3===s||4===s||6===s}function Gl(s){return 64===s.charCodeAt(0)}function Tr(s,c){if(null!==c&&0!==c.length)if(null===s||0===s.length)s=c.slice();else{let h=-1;for(let y=0;y<c.length;y++){const w=c[y];"number"==typeof w?h=w:0===h||Ac(s,h,w,null,-1===h||2===h?c[++y]:null)}}return s}function Ac(s,c,h,y,w){let M=0,A=s.length;if(-1===c)A=-1;else for(;M<s.length;){const L=s[M++];if("number"==typeof L){if(L===c){A=-1;break}if(L>c){A=M-1;break}}}for(;M<s.length;){const L=s[M];if("number"==typeof L)break;if(L===h){if(null===y)return void(null!==w&&(s[M+1]=w));if(y===s[M+1])return void(s[M+2]=w)}M++,null!==y&&M++,null!==w&&M++}-1!==A&&(s.splice(A,0,c),M=A+1),s.splice(M++,0,h),null!==y&&s.splice(M++,0,y),null!==w&&s.splice(M++,0,w)}function Pc(s){return s!==us}function Wl(s){return 32767&s}function Zl(s,c){let h=function ql(s){return s>>16}(s),y=c;for(;h>0;)y=y[Zr],h--;return y}let Oc=!0;function Ys(s){const c=Oc;return Oc=s,c}const Zf=255,Uu=5;let Yl=0;const ds={};function Rc(s,c){const h=Fc(s,c);if(-1!==h)return h;const y=c[qt];y.firstCreatePass&&(s.injectorIndex=c.length,Lc(y.data,s),Lc(c,null),Lc(y.blueprint,null));const w=wa(s,c),M=s.injectorIndex;if(Pc(w)){const A=Wl(w),L=Zl(w,c),j=L[qt].data;for(let Z=0;Z<8;Z++)c[M+Z]=L[A+Z]|j[A+Z]}return c[M+8]=w,M}function Lc(s,c){s.push(0,0,0,0,0,0,0,0,c)}function Fc(s,c){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===c[s.injectorIndex+8]?-1:s.injectorIndex}function wa(s,c){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let h=0,y=null,w=c;for(;null!==w;){if(y=Fo(w),null===y)return us;if(h++,w=w[Zr],-1!==y.injectorIndex)return y.injectorIndex|h<<16}return us}function Wd(s,c,h){!function Gd(s,c,h){let y;"string"==typeof h?y=h.charCodeAt(0)||0:h.hasOwnProperty(Ls)&&(y=h[Ls]),null==y&&(y=h[Ls]=Yl++);const w=y&Zf;c.data[s+(w>>Uu)]|=1<<w}(s,c,h)}function Hu(s,c,h){if(h&Bt.Optional||void 0!==s)return s;Fe()}function Yf(s,c,h,y){if(h&Bt.Optional&&void 0===y&&(y=null),!(h&(Bt.Self|Bt.Host))){const w=s[Ro],M=_r(void 0);try{return w?w.get(c,y,h&Bt.Optional):Br(c,y,h&Bt.Optional)}finally{_r(M)}}return Hu(y,0,h)}function Ea(s,c,h,y=Bt.Default,w){if(null!==s){if(1024&c[cn]){const A=function bg(s,c,h,y,w){let M=s,A=c;for(;null!==M&&null!==A&&1024&A[cn]&&!(256&A[cn]);){const L=Tp(M,A,h,y|Bt.Self,ds);if(L!==ds)return L;let j=M.parent;if(!j){const Z=A[xo];if(Z){const se=Z.get(h,ds,y);if(se!==ds)return se}j=Fo(A),A=A[Zr]}M=j}return w}(s,c,h,y,ds);if(A!==ds)return A}const M=Tp(s,c,h,y,ds);if(M!==ds)return M}return Yf(c,h,y,w)}function Tp(s,c,h,y,w){const M=function qd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const c=s.hasOwnProperty(Ls)?s[Ls]:void 0;return"number"==typeof c?c>=0?c&Zf:Xy:c}(h);if("function"==typeof M){if(!_g(c,s,y))return y&Bt.Host?Hu(w,0,y):Yf(c,h,y,w);try{const A=M(y);if(null!=A||y&Bt.Optional)return A;Fe()}finally{Wf()}}else if("number"==typeof M){let A=null,L=Fc(s,c),j=us,Z=y&Bt.Host?c[to][Gi]:null;for((-1===L||y&Bt.SkipSelf)&&(j=-1===L?wa(s,c):c[L+8],j!==us&&Yd(y,!1)?(A=c[qt],L=Wl(j),c=Zl(j,c)):L=-1);-1!==L;){const se=c[qt];if(Zd(M,L,se.data)){const Ie=Xf(L,c,h,A,y,Z);if(Ie!==ds)return Ie}j=c[L+8],j!==us&&Yd(y,c[qt].data[L+8]===Z)&&Zd(M,L,c)?(A=se,L=Wl(j),c=Zl(j,c)):L=-1}}return w}function Xf(s,c,h,y,w,M){const A=c[qt],L=A.data[s+8],se=$u(L,A,h,null==y?Pl(L)&&Oc:y!=A&&0!=(3&L.type),w&Bt.Host&&M===L);return null!==se?ol(c,A,se,L):ds}function $u(s,c,h,y,w){const M=s.providerIndexes,A=c.data,L=1048575&M,j=s.directiveStart,se=M>>20,rt=w?L+se:s.directiveEnd;for(let xt=y?L:L+se;xt<rt;xt++){const Ft=A[xt];if(xt<j&&h===Ft||xt>=j&&Ft.type===h)return xt}if(w){const xt=A[j];if(xt&&zr(xt)&&xt.type===h)return j}return null}function ol(s,c,h,y){let w=s[h];const M=c.data;if(function $l(s){return s instanceof Xo}(w)){const A=w;A.resolving&&function Be(s,c){const h=c?`. Dependency path: ${c.join(" > ")} > ${s}`:"";throw new K(-200,`Circular dependency in DI detected for ${s}${h}`)}(qe(M[h]));const L=Ys(A.canSeeViewProviders);A.resolving=!0;const j=A.injectImpl?_r(A.injectImpl):null;_g(s,y,Bt.Default);try{w=s[h]=A.factory(void 0,M,s,y),c.firstCreatePass&&h>=y.directiveStart&&function zu(s,c,h){const{ngOnChanges:y,ngOnInit:w,ngDoCheck:M}=c.type.prototype;if(y){const A=Bf(c);(h.preOrderHooks??(h.preOrderHooks=[])).push(s,A),(h.preOrderCheckHooks??(h.preOrderCheckHooks=[])).push(s,A)}w&&(h.preOrderHooks??(h.preOrderHooks=[])).push(0-s,w),M&&((h.preOrderHooks??(h.preOrderHooks=[])).push(s,M),(h.preOrderCheckHooks??(h.preOrderCheckHooks=[])).push(s,M))}(h,M[h],c)}finally{null!==j&&_r(j),Ys(L),A.resolving=!1,Wf()}}return w}function Zd(s,c,h){return!!(h[c+(s>>Uu)]&1<<s)}function Yd(s,c){return!(s&Bt.Self||s&Bt.Host&&c)}class Mr{constructor(c,h){this._tNode=c,this._lView=h}get(c,h,y){return Ea(this._tNode,this._lView,c,Xn(y),h)}}function Xy(){return new Mr(jr(),Zt())}function Mp(s){return Ji(()=>{const c=s.prototype.constructor,h=c[xs]||Kf(c),y=Object.prototype;let w=Object.getPrototypeOf(s.prototype).constructor;for(;w&&w!==y;){const M=w[xs]||Kf(w);if(M&&M!==h)return M;w=Object.getPrototypeOf(w)}return M=>new M})}function Kf(s){return J(s)?()=>{const c=Kf(G(s));return c&&c()}:Vs(s)}function Fo(s){const c=s[qt],h=c.type;return 2===h?c.declTNode:1===h?s[Gi]:null}function Gu(s){return function vg(s,c){if("class"===c)return s.classes;if("style"===c)return s.styles;const h=s.attrs;if(h){const y=h.length;let w=0;for(;w<y;){const M=h[w];if(kc(M))break;if(0===M)w+=2;else if("number"==typeof M)for(w++;w<y&&"string"==typeof h[w];)w++;else{if(M===c)return h[w+1];w+=2}}}return null}(jr(),s)}const Ko="__annotations__",po="__parameters__",Mo="__prop__metadata__";function No(s,c,h,y,w){return Ji(()=>{const M=Xl(c);function A(...L){if(this instanceof A)return M.call(this,...L),this;const j=new A(...L);return function(se){return w&&w(se,...L),(se.hasOwnProperty(Ko)?se[Ko]:Object.defineProperty(se,Ko,{value:[]})[Ko]).push(j),y&&y(se),se}}return h&&(A.prototype=Object.create(h.prototype)),A.prototype.ngMetadataName=s,A.annotationCls=A,A})}function Xl(s){return function(...h){if(s){const y=s(...h);for(const w in y)this[w]=y[w]}}}function fn(s,c,h){return Ji(()=>{const y=Xl(c);function w(...M){if(this instanceof w)return y.apply(this,M),this;const A=new w(...M);return L.annotation=A,L;function L(j,Z,se){const Ie=j.hasOwnProperty(po)?j[po]:Object.defineProperty(j,po,{value:[]})[po];for(;Ie.length<=se;)Ie.push(null);return(Ie[se]=Ie[se]||[]).push(A),j}}return h&&(w.prototype=Object.create(h.prototype)),w.prototype.ngMetadataName=s,w.annotationCls=w,w})}function Ca(s,c,h,y){return Ji(()=>{const w=Xl(c);function M(...A){if(this instanceof M)return w.apply(this,A),this;const L=new M(...A);return function j(Z,se){const Ie=Z.constructor,rt=Ie.hasOwnProperty(Mo)?Ie[Mo]:Object.defineProperty(Ie,Mo,{value:{}})[Mo];rt[se]=rt.hasOwnProperty(se)&&rt[se]||[],rt[se].unshift(L),y&&y(Z,se,...A)}}return h&&(M.prototype=Object.create(h.prototype)),M.prototype.ngMetadataName=s,M.annotationCls=M,M})}const Ip=fn("Attribute",s=>({attributeName:s,__NG_ELEMENT_ID__:()=>Gu(s)}));class zi{constructor(c,h){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=hn({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Nc=new zi("AnalyzeForEntryComponents");class Bc{}const Ky=Ca("ContentChildren",(s,c={})=>({selector:s,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...c}),Bc),xg=Ca("ContentChild",(s,c={})=>({selector:s,first:!0,isViewQuery:!1,descendants:!0,...c}),Bc),Dp=Ca("ViewChildren",(s,c={})=>({selector:s,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!0,...c}),Bc),wg=Ca("ViewChild",(s,c)=>({selector:s,first:!0,isViewQuery:!0,descendants:!0,...c}),Bc);var $r=(()=>(($r=$r||{})[$r.Directive=0]="Directive",$r[$r.Component=1]="Component",$r[$r.Injectable=2]="Injectable",$r[$r.Pipe=3]="Pipe",$r[$r.NgModule=4]="NgModule",$r))();function Vr(s){const c=si.ng;if(c&&c.\u0275compilerFacade)return c.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const Wu=Function;function sl(s){return"function"==typeof s}function g(s){return s.flat(Number.POSITIVE_INFINITY)}function o(s,c){s.forEach(h=>Array.isArray(h)?o(h,c):c(h))}function f(s,c,h){c>=s.length?s.push(h):s.splice(c,0,h)}function b(s,c){return c>=s.length-1?s.pop():s.splice(c,1)[0]}function E(s,c){const h=[];for(let y=0;y<s;y++)h.push(c);return h}function V(s,c,h){let y=q(s,c);return y>=0?s[1|y]=h:(y=~y,function O(s,c,h,y){let w=s.length;if(w==c)s.push(h,y);else if(1===w)s.push(y,s[0]),s[0]=h;else{for(w--,s.push(s[w-1],s[w]);w>c;)s[w]=s[w-2],w--;s[c]=h,s[c+1]=y}}(s,y,c,h)),y}function U(s,c){const h=q(s,c);if(h>=0)return s[1|h]}function q(s,c){return function he(s,c,h){let y=0,w=s.length>>h;for(;w!==y;){const M=y+(w-y>>1),A=s[M<<h];if(c===A)return M<<h;A>c?w=M:y=M+1}return~(w<<h)}(s,c,1)}const me=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,fe=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,ve=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,X=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class we{constructor(c){this._reflect=c||si.Reflect}factory(c){return(...h)=>new c(...h)}_zipTypesAndAnnotations(c,h){let y;y=E(typeof c>"u"?h.length:c.length);for(let w=0;w<y.length;w++)y[w]=typeof c>"u"?[]:c[w]&&c[w]!=Object?[c[w]]:[],h&&null!=h[w]&&(y[w]=y[w].concat(h[w]));return y}_ownParameters(c,h){if(function de(s){return me.test(s)||X.test(s)||fe.test(s)&&!ve.test(s)}(c.toString()))return null;if(c.parameters&&c.parameters!==h.parameters)return c.parameters;const w=c.ctorParameters;if(w&&w!==h.ctorParameters){const L="function"==typeof w?w():w,j=L.map(se=>se&&se.type),Z=L.map(se=>se&&Ce(se.decorators));return this._zipTypesAndAnnotations(j,Z)}const M=c.hasOwnProperty(po)&&c[po],A=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",c);return A||M?this._zipTypesAndAnnotations(A,M):E(c.length)}parameters(c){if(!sl(c))return[];const h=He(c);let y=this._ownParameters(c,h);return!y&&h!==Object&&(y=this.parameters(h)),y||[]}_ownAnnotations(c,h){if(c.annotations&&c.annotations!==h.annotations){let y=c.annotations;return"function"==typeof y&&y.annotations&&(y=y.annotations),y}return c.decorators&&c.decorators!==h.decorators?Ce(c.decorators):c.hasOwnProperty(Ko)?c[Ko]:null}annotations(c){if(!sl(c))return[];const h=He(c),y=this._ownAnnotations(c,h)||[];return(h!==Object?this.annotations(h):[]).concat(y)}_ownPropMetadata(c,h){if(c.propMetadata&&c.propMetadata!==h.propMetadata){let y=c.propMetadata;return"function"==typeof y&&y.propMetadata&&(y=y.propMetadata),y}if(c.propDecorators&&c.propDecorators!==h.propDecorators){const y=c.propDecorators,w={};return Object.keys(y).forEach(M=>{w[M]=Ce(y[M])}),w}return c.hasOwnProperty(Mo)?c[Mo]:null}propMetadata(c){if(!sl(c))return{};const h=He(c),y={};if(h!==Object){const M=this.propMetadata(h);Object.keys(M).forEach(A=>{y[A]=M[A]})}const w=this._ownPropMetadata(c,h);return w&&Object.keys(w).forEach(M=>{const A=[];y.hasOwnProperty(M)&&A.push(...y[M]),A.push(...w[M]),y[M]=A}),y}ownPropMetadata(c){return sl(c)&&this._ownPropMetadata(c,He(c))||{}}hasLifecycleHook(c,h){return c instanceof Wu&&h in c.prototype}}function Ce(s){return s?s.map(c=>new(0,c.type.annotationCls)(...c.args?c.args:[])):[]}function He(s){const c=s.prototype?Object.getPrototypeOf(s.prototype):null;return(c?c.constructor:null)||Object}const We=Kn(fn("Inject",s=>({token:s})),-1),$e=Kn(fn("Optional"),8),st=Kn(fn("Self"),2),nt=Kn(fn("SkipSelf"),4),gt=Kn(fn("Host"),1);let Ut=null;function ht(){return Ut=Ut||new we}function Dt(s){return wt(ht().parameters(s))}function wt(s){return s.map(c=>function zt(s){const c={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(s)&&s.length>0)for(let h=0;h<s.length;h++){const y=s[h];if(void 0===y)continue;const w=Object.getPrototypeOf(y);if(y instanceof $e||"Optional"===w.ngMetadataName)c.optional=!0;else if(y instanceof nt||"SkipSelf"===w.ngMetadataName)c.skipSelf=!0;else if(y instanceof st||"Self"===w.ngMetadataName)c.self=!0;else if(y instanceof gt||"Host"===w.ngMetadataName)c.host=!0;else if(y instanceof We)c.token=y.token;else if(y instanceof Ip){if(void 0===y.attributeName)throw new K(204,!1);c.attribute=y.attributeName}else c.token=y}else c.token=void 0===s||Array.isArray(s)&&0===s.length?null:s;return c}(c))}function mt(s){const c=[],h=new Map;function y(w){let M=h.get(w);if(!M){const A=s(w);h.set(w,M=A.then(oi))}return M}return Mt.forEach((w,M)=>{const A=[];w.templateUrl&&A.push(y(w.templateUrl).then(Ie=>{w.template=Ie}));const L=w.styleUrls,j=w.styles||(w.styles=[]),Z=w.styles.length;L&&L.forEach((Ie,rt)=>{j.push(""),A.push(y(Ie).then(xt=>{j[Z+rt]=xt,L.splice(L.indexOf(Ie),1),0==L.length&&(w.styleUrls=void 0)}))});const se=Promise.all(A).then(()=>function ii(s){jt.delete(s)}(M));c.push(se)}),Fn(),Promise.all(c).then(()=>{})}let Mt=new Map;const jt=new Set;function En(s){return!!(s.templateUrl&&!s.hasOwnProperty("template")||s.styleUrls&&s.styleUrls.length)}function Fn(){const s=Mt;return Mt=new Map,s}function oi(s){return"string"==typeof s?s:s.text()}const bn=new Map;let Pi=!0;function Bi(s,c){(function qi(s,c,h){if(c&&c!==h&&Pi)throw new Error(`Duplicate module registered for ${s} - ${te(c)} vs ${te(c.name)}`)})(c,bn.get(c)||null,s),bn.set(c,s)}function io(s){return bn.get(s)}function Xr(s){Pi=!s}const Qo={name:"custom-elements"},Ts={name:"no-errors-schema"};let tr=!1;function Zi(s){tr=s}function Di(){return tr}let br=!1;function Io(s){br=s}function or(){return br}var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();const Eg=/^>|^->|<!--|-->|--!>|<!-$/g,Qf=/(<|>)/,Qy="\u200b$1\u200b";const Vc=new Map;let Tv=0;function Sa(s){return Vc.get(s)||null}class Jy{get lView(){return Sa(this.lViewId)}constructor(c,h,y){this.lViewId=c,this.nodeIndex=h,this.native=y}}function Bo(s){let c=Ta(s);if(c){if(Co(c)){const h=c;let y,w,M;if(Ma(s)){if(y=Aa(h,s),-1==y)throw new Error("The provided component was not found in the application");w=s}else if(function Ia(s){return s&&s.constructor&&s.constructor.\u0275dir}(s)){if(y=function tm(s,c){let h=s[qt].firstChild;for(;h;){const w=h.directiveEnd;for(let M=h.directiveStart;M<w;M++)if(s[M]===c)return h.index;h=ka(h)}return-1}(h,s),-1==y)throw new Error("The provided directive was not found in the application");M=Tg(y,h)}else if(y=Da(h,s),-1==y)return null;const A=Hr(h[y]),L=Ta(A),j=L&&!Array.isArray(L)?L:em(h,y,A);if(w&&void 0===j.component&&(j.component=w,oo(j.component,j)),M&&void 0===j.directives){j.directives=M;for(let Z=0;Z<M.length;Z++)oo(M[Z],j)}oo(j.native,j),c=j}}else{const h=s;let y=h;for(;y=y.parentNode;){const w=Ta(y);if(w){const M=Array.isArray(w)?w:w.lView;if(!M)return null;const A=Da(M,h);if(A>=0){const L=Hr(M[A]),j=em(M,A,L);oo(L,j),c=j;break}}}}return c||null}function em(s,c,h){return new Jy(s[zs],c,h)}function Sg(s){let h,c=Ta(s);if(Co(c)){const y=c,w=Aa(y,s);h=ho(w,y);const M=em(y,w,h[on]);M.component=s,oo(s,M),oo(M.native,M)}else h=ho(c.nodeIndex,c.lView);return h}const e_="__ngContext__";function oo(s,c){Co(c)?(s[e_]=c[zs],function ll(s){Vc.set(s[zs],s)}(c)):s[e_]=c}function Ta(s){const c=s[e_];return"number"==typeof c?Sa(c):c||null}function qu(s){const c=Ta(s);return c?Co(c)?c:c.lView:null}function Ma(s){return s&&s.constructor&&s.constructor.\u0275cmp}function Da(s,c){const h=s[qt];for(let y=ei;y<h.bindingStartIndex;y++)if(Hr(s[y])===c)return y;return-1}function ka(s){if(s.child)return s.child;if(s.next)return s.next;for(;s.parent&&!s.parent.next;)s=s.parent;return s.parent&&s.parent.next}function Aa(s,c){const h=s[qt].components;if(h)for(let y=0;y<h.length;y++){const w=h[y];if(ho(w,s)[nr]===c)return w}else if(ho(ei,s)[nr]===c)return ei;return-1}function Tg(s,c){const h=c[qt].data[s];if(0===h.directiveStart)return Jn;const y=[];for(let w=h.directiveStart;w<h.directiveEnd;w++){const M=c[w];Ma(M)||y.push(M)}return y}let Xd;function Zu(s,c){return Xd(s,c)}function ec(s){const c=s[Ai];return no(c)?c[Ai]:c}function Pr(s){return function t_(s){let c=Co(s)?s:qu(s);for(;c&&!(256&c[cn]);)c=ec(c);return c}(s)[nr]}function Sn(s){return Kd(s[Ja])}function Do(s){return Kd(s[Sr])}function Kd(s){for(;null!==s&&!no(s);)s=s[Sr];return s}function Kr(s,c,h,y,w){if(null!=y){let M,A=!1;no(y)?M=y:Co(y)&&(A=!0,y=y[on]);const L=Hr(y);0===s&&null!==h?null==w?th(c,h,L):Uc(c,h,L,w||null,!0):1===s&&null!==h?Uc(c,h,L,w||null,!0):2===s?rc(c,L,A):3===s&&c.destroyNode(L),null!=M&&function Xu(s,c,h,y,w){const M=h[Eo];M!==Hr(h)&&Kr(c,s,y,M,w);for(let L=wi;L<h.length;L++){const j=h[L];rh(j[qt],j,s,c,y,M)}}(c,s,M,h,w)}}function Is(s,c){return s.createText(c)}function tc(s,c,h){s.setValue(c,h)}function es(s,c){return s.createComment(function Ap(s){return s.replace(Eg,c=>c.replace(Qf,Qy))}(c))}function Pp(s,c,h){return s.createElement(c,h)}function Ig(s,c){const h=s[js],y=h.indexOf(c),w=c[Ai];512&c[cn]&&(c[cn]&=-513,jf(w,-1)),h.splice(y,1)}function Dg(s,c){if(s.length<=wi)return;const h=wi+c,y=s[h];if(y){const w=y[va];null!==w&&w!==s&&Ig(w,y),c>0&&(s[h-1][Sr]=y[Sr]);const M=b(s,wi+c);!function nc(s,c){rh(s,c,c[li],2,null,null),c[on]=null,c[Gi]=null}(y[qt],y);const A=M[Zo];null!==A&&A.detachView(M[qt]),y[Ai]=null,y[Sr]=null,y[cn]&=-65}return y}function rm(s,c){if(!(128&c[cn])){const h=c[li];h.destroyNode&&rh(s,c,h,3,null,null),function Jd(s){let c=s[Ja];if(!c)return zo(s[qt],s);for(;c;){let h=null;if(Co(c))h=c[Ja];else{const y=c[wi];y&&(h=y)}if(!h){for(;c&&!c[Sr]&&c!==s;)Co(c)&&zo(c[qt],c),c=c[Ai];null===c&&(c=s),Co(c)&&zo(c[qt],c),h=c&&c[Sr]}c=h}}(c)}}function zo(s,c){if(!(128&c[cn])){c[cn]&=-65,c[cn]|=128,function ic(s,c){let h;if(null!=s&&null!=(h=s.destroyHooks))for(let y=0;y<h.length;y+=2){const w=c[h[y]];if(!(w instanceof Xo)){const M=h[y+1];if(Array.isArray(M))for(let A=0;A<M.length;A+=2){const L=w[M[A]],j=M[A+1];Yo(4,L,j);try{j.call(L)}finally{Yo(5,L,j)}}else{Yo(4,w,M);try{M.call(w)}finally{Yo(5,w,M)}}}}}(s,c),function eh(s,c){const h=s.cleanup,y=c[Ns];let w=-1;if(null!==h)for(let M=0;M<h.length-1;M+=2)if("string"==typeof h[M]){const A=h[M+3];A>=0?y[w=A]():y[w=-A].unsubscribe(),M+=2}else{const A=y[w=h[M+1]];h[M].call(A)}if(null!==y){for(let M=w+1;M<y.length;M++)(0,y[M])();c[Ns]=null}}(s,c),1===c[qt].type&&c[li].destroy();const h=c[va];if(null!==h&&no(c[Ai])){h!==c[Ai]&&Ig(h,c);const y=c[Zo];null!==y&&y.detachView(s)}!function Jf(s){Vc.delete(s[zs])}(c)}}function Ds(s,c,h){return om(s,c.parent,h)}function om(s,c,h){let y=c;for(;null!==y&&40&y.type;)y=(c=y).parent;if(null===y)return h[on];{const{componentOffset:w}=y;if(w>-1){const{encapsulation:M}=s.data[y.directiveStart+w];if(M===qr.None||M===qr.Emulated)return null}return Lo(y,h)}}function Uc(s,c,h,y,w){s.insertBefore(c,h,y,w)}function th(s,c,h){s.appendChild(c,h)}function Op(s,c,h,y,w){null!==y?Uc(s,c,h,y,w):th(s,c,h)}function so(s,c){return s.parentNode(c)}function sm(s,c,h){return nh(s,c,h)}function sr(s,c,h){return 40&s.type?Lo(s,h):null}let Hc,ah,Fp,Vo,nh=sr;function ks(s,c){nh=s,Hc=c}function am(s,c,h,y){const w=Ds(s,y,c),M=c[li],L=sm(y.parent||c[Gi],y,c);if(null!=w)if(Array.isArray(h))for(let j=0;j<h.length;j++)Op(M,w,h[j],L,!1);else Op(M,w,h,L,!1);void 0!==Hc&&Hc(M,y,c,h,w)}function ih(s,c){if(null!==c){const h=c.type;if(3&h)return Lo(c,s);if(4&h)return cm(-1,s[c.index]);if(8&h){const y=c.child;if(null!==y)return ih(s,y);{const w=s[c.index];return no(w)?cm(-1,w):Hr(w)}}if(32&h)return Zu(c,s)()||Hr(s[c.index]);{const y=lm(s,c);return null!==y?Array.isArray(y)?y[0]:ih(ec(s[to]),y):ih(s,c.next)}}return null}function lm(s,c){return null!==c?s[to][Gi].projection[c.projection]:null}function cm(s,c){const h=wi+s+1;if(h<c.length){const y=c[h],w=y[qt].firstChild;if(null!==w)return ih(y,w)}return c[Eo]}function rc(s,c,h){const y=so(s,c);y&&function Ks(s,c,h,y){s.removeChild(c,h,y)}(s,y,c,h)}function um(s,c,h,y,w,M,A){for(;null!=h;){const L=y[h.index],j=h.type;if(A&&0===c&&(L&&oo(Hr(L),y),h.flags|=2),32!=(32&h.flags))if(8&j)um(s,c,h.child,y,w,M,!1),Kr(c,s,w,L,M);else if(32&j){const Z=Zu(h,y);let se;for(;se=Z();)Kr(c,s,w,se,M);Kr(c,s,w,L,M)}else 16&j?kg(s,c,y,h,w,M):Kr(c,s,w,L,M);h=A?h.projectionNext:h.next}}function rh(s,c,h,y,w,M){um(h,y,s.firstChild,c,w,M,!1)}function kg(s,c,h,y,w,M){const A=h[to],j=A[Gi].projection[y.projection];if(Array.isArray(j))for(let Z=0;Z<j.length;Z++)Kr(c,s,w,j[Z],M);else um(s,c,j,A[Ai],w,M,!0)}function oh(s,c,h){""===h?s.removeAttribute(c,"class"):s.setAttribute(c,"class",h)}function sh(s,c,h){const{mergedAttrs:y,classes:w,styles:M}=h;null!==y&&$d(s,c,y),null!==w&&oh(s,c,w),null!==M&&function dm(s,c,h){s.setAttribute(c,"style",h)}(s,c,M)}function Rp(){if(void 0===ah&&(ah=null,si.trustedTypes))try{ah=si.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ah}function $c(s){return Rp()?.createHTML(s)||s}function hs(s,c,h){const y=Zt(),w=er(),M=Lo(w,y);if(2===w.type&&"iframe"===c.toLowerCase()){const A=M;throw A.src="",A.srcdoc=$c(""),rc(y[li],A),new K(-910,!1)}return s}function cl(s){Fp=s}function lh(){return void 0!==Fp?Fp:typeof document<"u"?document:void 0}function ps(){if(void 0===Vo&&(Vo=null,si.trustedTypes))try{Vo=si.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Vo}function Iv(s){return ps()?.createHTML(s)||s}function Ku(s){return ps()?.createScript(s)||s}function i_(s){return ps()?.createScriptURL(s)||s}class Qu{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Me})`}}class Pg extends Qu{getTypeName(){return"HTML"}}class Ra extends Qu{getTypeName(){return"Style"}}class oc extends Qu{getTypeName(){return"Script"}}class Og extends Qu{getTypeName(){return"URL"}}class Dv extends Qu{getTypeName(){return"ResourceURL"}}function sc(s){return s instanceof Qu?s.changingThisBreaksApplicationSecurity:s}function ac(s,c){const h=hm(s);if(null!=h&&h!==c){if("ResourceURL"===h&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${h} (see ${Me})`)}return h===c}function hm(s){return s instanceof Qu&&s.getTypeName()||null}function ch(s){return new Pg(s)}function uh(s){return new Ra(s)}function Np(s){return new oc(s)}function Bp(s){return new Og(s)}function r_(s){return new Dv(s)}function dh(s){const c=new o_(s);return function Gc(){try{return!!(new window.DOMParser).parseFromString($c(""),"text/html")}catch{return!1}}()?new pm(c):c}class pm{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const h=(new window.DOMParser).parseFromString($c(c),"text/html").body;return null===h?this.inertDocumentHelper.getInertBodyElement(c):(h.removeChild(h.firstChild),h)}catch{return null}}}class o_{constructor(c){this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(c){const h=this.inertDocument.createElement("template");return h.innerHTML=$c(c),h}}const s_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hh(s){return(s=String(s)).match(s_)?s:"unsafe:"+s}function ul(s){const c={};for(const h of s.split(","))c[h]=!0;return c}function zp(...s){const c={};for(const h of s)for(const y in h)h.hasOwnProperty(y)&&(c[y]=!0);return c}const Rg=ul("area,br,col,hr,img,wbr"),ph=ul("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fs=ul("rp,rt"),Js=zp(Rg,zp(ph,ul("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zp(fs,ul("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zp(fs,ph)),ea=ul("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ao=zp(ea,ul("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ul("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jp=ul("script,style,template");class fo{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let h=c.firstChild,y=!0;for(;h;)if(h.nodeType===Node.ELEMENT_NODE?y=this.startElement(h):h.nodeType===Node.TEXT_NODE?this.chars(h.nodeValue):this.sanitizedSomething=!0,y&&h.firstChild)h=h.firstChild;else for(;h;){h.nodeType===Node.ELEMENT_NODE&&this.endElement(h);let w=this.checkClobberedElement(h,h.nextSibling);if(w){h=w;break}h=this.checkClobberedElement(h,h.parentNode)}return this.buf.join("")}startElement(c){const h=c.nodeName.toLowerCase();if(!Js.hasOwnProperty(h))return this.sanitizedSomething=!0,!jp.hasOwnProperty(h);this.buf.push("<"),this.buf.push(h);const y=c.attributes;for(let w=0;w<y.length;w++){const M=y.item(w),A=M.name,L=A.toLowerCase();if(!ao.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let j=M.value;ea[L]&&(j=hh(j)),this.buf.push(" ",A,'="',Vp(j),'"')}return this.buf.push(">"),!0}endElement(c){const h=c.nodeName.toLowerCase();Js.hasOwnProperty(h)&&!Rg.hasOwnProperty(h)&&(this.buf.push("</"),this.buf.push(h),this.buf.push(">"))}chars(c){this.buf.push(Vp(c))}checkClobberedElement(c,h){if(h&&(c.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return h}}const Lg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ju=/([^\#-~ |!])/g;function Vp(s){return s.replace(/&/g,"&amp;").replace(Lg,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(Ju,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Uo;function cc(s,c){let h=null;try{Uo=Uo||dh(s);let y=c?String(c):"";h=Uo.getInertBodyElement(y);let w=5,M=y;do{if(0===w)throw new Error("Failed to sanitize html because the input is unstable");w--,y=M,M=h.innerHTML,h=Uo.getInertBodyElement(y)}while(y!==M);return $c((new fo).sanitizeChildren(Fg(h)||h))}finally{if(h){const y=Fg(h)||h;for(;y.firstChild;)y.removeChild(y.firstChild)}}}function Fg(s){return"content"in s&&function Ng(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Or=(()=>((Or=Or||{})[Or.NONE=0]="NONE",Or[Or.HTML=1]="HTML",Or[Or.STYLE=2]="STYLE",Or[Or.SCRIPT=3]="SCRIPT",Or[Or.URL=4]="URL",Or[Or.RESOURCE_URL=5]="RESOURCE_URL",Or))();function a_(s){const c=Hp();return c?Iv(c.sanitize(Or.HTML,s)||""):ac(s,"HTML")?Iv(sc(s)):cc(lh(),_e(s))}function La(s){const c=Hp();return c?c.sanitize(Or.STYLE,s)||"":ac(s,"Style")?sc(s):_e(s)}function ia(s){const c=Hp();return c?c.sanitize(Or.URL,s)||"":ac(s,"URL")?sc(s):hh(_e(s))}function fh(s){const c=Hp();if(c)return i_(c.sanitize(Or.RESOURCE_URL,s)||"");if(ac(s,"ResourceURL"))return i_(sc(s));throw new K(904,!1)}function Up(s){const c=Hp();if(c)return Ku(c.sanitize(Or.SCRIPT,s)||"");if(ac(s,"Script"))return Ku(sc(s));throw new K(905,!1)}function mh(s){return $c(s[0])}function Bg(s){return function Lp(s){return Rp()?.createScriptURL(s)||s}(s[0])}function zg(s,c,h){return function l_(s,c){return"src"===c&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===c&&("base"===s||"link"===s)?fh:ia}(c,h)(s)}function Hp(){const s=Zt();return s&&s[as]}const gh=new zi("ENVIRONMENT_INITIALIZER"),ed=new zi("INJECTOR",-1),mm=new zi("INJECTOR_DEF_TYPES");class Wc{get(c,h=ee){if(h===ee){const y=new Error(`NullInjectorError: No provider for ${te(c)}!`);throw y.name="NullInjectorError",y}return h}}function jg(s){return{\u0275providers:s}}function u_(...s){return{\u0275providers:td(0,s),\u0275fromNgModule:!0}}function td(s,...c){const h=[],y=new Set;let w;return o(c,M=>{const A=M;gm(A,h,[],y)&&(w||(w=[]),w.push(A))}),void 0!==w&&$p(w,h),h}function $p(s,c){for(let h=0;h<s.length;h++){const{providers:w}=s[h];Vg(w,M=>{c.push(M)})}}function gm(s,c,h,y){if(!(s=G(s)))return!1;let w=null,M=qo(s);const A=!M&&ui(s);if(M||A){if(A&&!A.standalone)return!1;w=s}else{const j=s.ngModule;if(M=qo(j),!M)return!1;w=j}const L=y.has(w);if(A){if(L)return!1;if(y.add(w),A.dependencies){const j="function"==typeof A.dependencies?A.dependencies():A.dependencies;for(const Z of j)gm(Z,c,h,y)}}else{if(!M)return!1;{if(null!=M.imports&&!L){let Z;y.add(w);try{o(M.imports,se=>{gm(se,c,h,y)&&(Z||(Z=[]),Z.push(se))})}finally{}void 0!==Z&&$p(Z,c)}if(!L){const Z=Vs(w)||(()=>new w);c.push({provide:w,useFactory:Z,deps:Jn},{provide:mm,useValue:w,multi:!0},{provide:gh,useValue:()=>Vt(w),multi:!0})}const j=M.providers;null==j||L||Vg(j,se=>{c.push(se)})}}return w!==s&&void 0!==s.providers}function Vg(s,c){for(let h of s)Y(h)&&(h=h.\u0275providers),Array.isArray(h)?Vg(h,c):c(h)}const d_=ye({provide:String,useValue:ye});function yh(s){return null!==s&&"object"==typeof s&&d_ in s}function _h(s){return"function"==typeof s}const $g=new zi("Set Injector scope."),Rr={},nd={};let Rn;function lo(){return void 0===Rn&&(Rn=new Wc),Rn}class Xi{}class h_ extends Xi{get destroyed(){return this._destroyed}constructor(c,h,y,w){super(),this.parent=h,this.source=y,this.scopes=w,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fa(c,A=>this.processProvider(A)),this.records.set(ed,Zc(void 0,this)),w.has("environment")&&this.records.set(Xi,Zc(void 0,this));const M=this.records.get($g);null!=M&&"string"==typeof M.value&&this.scopes.add(M.value),this.injectorDefTypes=new Set(this.get(mm.multi,Jn,Bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const h=yt(this),y=_r(void 0);try{return c()}finally{yt(h),_r(y)}}get(c,h=ee,y=Bt.Default){this.assertNotDestroyed(),y=Xn(y);const w=yt(this),M=_r(void 0);try{if(!(y&Bt.SkipSelf)){let L=this.records.get(c);if(void 0===L){const j=function rd(s){return"function"==typeof s||"object"==typeof s&&s instanceof zi}(c)&&Cn(c);L=j&&this.injectableDefInScope(j)?Zc(qc(c),Rr):null,this.records.set(c,L)}if(null!=L)return this.hydrate(c,L)}return(y&Bt.Self?lo():this.parent).get(c,h=y&Bt.Optional&&h===ee?null:h)}catch(A){if("NullInjectorError"===A.name){if((A[Te]=A[Te]||[]).unshift(te(c)),w)throw A;return function dr(s,c,h,y){const w=s[Te];throw c[dt]&&w.unshift(c[dt]),s.message=function Cr(s,c,h,y=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==pt?s.slice(2):s;let w=te(c);if(Array.isArray(c))w=c.map(te).join(" -> ");else if("object"==typeof c){let M=[];for(let A in c)if(c.hasOwnProperty(A)){let L=c[A];M.push(A+":"+("string"==typeof L?JSON.stringify(L):te(L)))}w=`{${M.join(", ")}}`}return`${h}${y?"("+y+")":""}[${w}]: ${s.replace(Qe,"\n  ")}`}("\n"+s.message,w,h,y),s[Ue]=w,s[Te]=null,s}(A,c,"R3InjectorError",this.source)}throw A}finally{_r(M),yt(w)}}resolveInjectorInitializers(){const c=yt(this),h=_r(void 0);try{const y=this.get(gh.multi,Jn,Bt.Self);for(const w of y)w()}finally{yt(c),_r(h)}}toString(){const c=[],h=this.records;for(const y of h.keys())c.push(te(y));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(c){let h=_h(c=G(c))?c:G(c&&c.provide);const y=function Av(s){return yh(s)?Zc(void 0,s.useValue):Zc(p_(s),Rr)}(c);if(_h(c)||!0!==c.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Zc(void 0,Rr,!0),w.factory=()=>Un(w.multi),this.records.set(h,w)),h=c,w.multi.push(c)}this.records.set(h,y)}hydrate(c,h){return h.value===Rr&&(h.value=nd,h.value=h.factory()),"object"==typeof h.value&&h.value&&function Gg(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(h.value)&&this._ngOnDestroyHooks.add(h.value),h.value}injectableDefInScope(c){if(!c.providedIn)return!1;const h=G(c.providedIn);return"string"==typeof h?"any"===h||this.scopes.has(h):this.injectorDefTypes.has(h)}}function qc(s){const c=Cn(s),h=null!==c?c.factory:Vs(s);if(null!==h)return h;if(s instanceof zi)throw new K(204,!1);if(s instanceof Function)return function id(s){const c=s.length;if(c>0)throw E(c,"?"),new K(204,!1);const h=function $i(s){return s&&(s[Qi]||s[ur])||null}(s);return null!==h?()=>h.factory(s):()=>new s}(s);throw new K(204,!1)}function p_(s,c,h){let y;if(_h(s)){const w=G(s);return Vs(w)||qc(w)}if(yh(s))y=()=>G(s.useValue);else if(function Hg(s){return!(!s||!s.useFactory)}(s))y=()=>s.useFactory(...Un(s.deps||[]));else if(function Ug(s){return!(!s||!s.useExisting)}(s))y=()=>Vt(G(s.useExisting));else{const w=G(s&&(s.useClass||s.provide));if(!function ym(s){return!!s.deps}(s))return Vs(w)||qc(w);y=()=>new w(...Un(s.deps))}return y}function Zc(s,c,h=!1){return{factory:s,value:c,multi:h?[]:void 0}}function Fa(s,c){for(const h of s)Array.isArray(h)?Fa(h,c):h&&Y(h)?Fa(h.\u0275providers,c):c(h)}class gi{}class _m{}class Ho{resolveComponentFactory(c){throw function Pv(s){const c=Error(`No component factory found for ${te(s)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=s,c}(c)}}let Gp=(()=>{class s{}return s.NULL=new Ho,s})();function vm(){return vh(jr(),Zt())}function vh(s,c){return new Na(Lo(s,c))}let Na=(()=>{class s{constructor(h){this.nativeElement=h}}return s.__NG_ELEMENT_ID__=vm,s})();function Wp(s){return s instanceof Na?s.nativeElement:s}class Ir{}let bh=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function xh(){const s=Zt(),h=ho(jr().index,s);return(Co(h)?h:s)[li]}(),s})(),wh=(()=>{class s{}return s.\u0275prov=hn({token:s,providedIn:"root",factory:()=>null}),s})();class qp{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const Yc=new qp("15.2.10"),dl={},Ba="ngOriginalError";function co(s){return s[Ba]}class uc{constructor(){this._console=console}handleError(c){const h=this._findOriginalError(c);this._console.error("ERROR",c),h&&this._console.error("ORIGINAL ERROR",h)}_findOriginalError(c){let h=c&&co(c);for(;h&&co(h);)h=co(h);return h||null}}function za(s){return s.ownerDocument.defaultView}function mo(s){return s.ownerDocument}function Yp(s){return s.ownerDocument.body}function ja(s){return s instanceof Function?s():s}function xm(s,c,h){let y=s.length;for(;;){const w=s.indexOf(c,h);if(-1===w)return w;if(0===w||s.charCodeAt(w-1)<=32){const M=c.length;if(w+M===y||s.charCodeAt(w+M)<=32)return w}h=w+1}}const Ch="ng-template";function Lv(s,c,h){let y=0,w=!0;for(;y<s.length;){let M=s[y++];if("string"==typeof M&&w){const A=s[y++];if(h&&"class"===M&&-1!==xm(A.toLowerCase(),c,0))return!0}else{if(1===M){for(;y<s.length&&"string"==typeof(M=s[y++]);)if(M.toLowerCase()===c)return!0;return!1}"number"==typeof M&&(w=!1)}}return!1}function qg(s){return 4===s.type&&s.value!==Ch}function Kc(s,c,h){return c===(4!==s.type||h?s.value:Ch)}function ci(s,c,h){let y=4;const w=s.attrs||[],M=function Nv(s){for(let c=0;c<s.length;c++)if(kc(s[c]))return c;return s.length}(w);let A=!1;for(let L=0;L<c.length;L++){const j=c[L];if("number"!=typeof j){if(!A)if(4&y){if(y=2|1&y,""!==j&&!Kc(s,j,h)||""===j&&1===c.length){if(ns(y))return!1;A=!0}}else{const Z=8&y?j:c[++L];if(8&y&&null!==s.attrs){if(!Lv(s.attrs,Z,h)){if(ns(y))return!1;A=!0}continue}const Ie=Fv(8&y?"class":j,w,qg(s),h);if(-1===Ie){if(ns(y))return!1;A=!0;continue}if(""!==Z){let rt;rt=Ie>M?"":w[Ie+1].toLowerCase();const xt=8&y?rt:null;if(xt&&-1!==xm(xt,Z,0)||2&y&&Z!==rt){if(ns(y))return!1;A=!0}}}}else{if(!A&&!ns(y)&&!ns(j))return!1;if(A&&ns(j))continue;A=!1,y=j|1&y}}return ns(y)||A}function ns(s){return 0==(1&s)}function Fv(s,c,h,y){if(null===c)return-1;let w=0;if(y||!h){let M=!1;for(;w<c.length;){const A=c[w];if(A===s)return w;if(3===A||6===A)M=!0;else{if(1===A||2===A){let L=c[++w];for(;"string"==typeof L;)L=c[++w];continue}if(4===A)break;if(0===A){w+=4;continue}}w+=M?1:2}return-1}return function pl(s,c){let h=s.indexOf(4);if(h>-1)for(h++;h<s.length;){const y=s[h];if("number"==typeof y)return-1;if(y===c)return h;h++}return-1}(c,s)}function Qc(s,c,h=!1){for(let y=0;y<c.length;y++)if(ci(s,c[y],h))return!0;return!1}function g_(s,c){e:for(let h=0;h<c.length;h++){const y=c[h];if(s.length===y.length){for(let w=0;w<s.length;w++)if(s[w]!==y[w])continue e;return!0}}return!1}function Xp(s,c){return s?":not("+c.trim()+")":c}function Kp(s){let c=s[0],h=1,y=2,w="",M=!1;for(;h<s.length;){let A=s[h];if("string"==typeof A)if(2&y){const L=s[++h];w+="["+A+(L.length>0?'="'+L+'"':"")+"]"}else 8&y?w+="."+A:4&y&&(w+=" "+A);else""!==w&&!ns(A)&&(c+=Xp(M,w),w=""),y=A,M=M||!ns(y);h++}return""!==w&&(c+=Xp(M,w)),c}const Hn={};function hc(s){Sh(Ci(),Zt(),Yr()+s,!1)}function Sh(s,c,h,y){if(!y)if(3==(3&c[cn])){const M=s.preOrderCheckHooks;null!==M&&Ws(c,M,h)}else{const M=s.preOrderHooks;null!==M&&ju(c,M,0,h)}Vl(h)}const wm={\u0275\u0275defineInjectable:hn,\u0275\u0275defineInjector:In,\u0275\u0275inject:Vt,\u0275\u0275invalidFactoryDep:$t,resolveForwardRef:G};const y_=ye({provide:String,useValue:ye});function Yg(s){return void 0!==s.useClass}function Em(s){return void 0!==s.useFactory}const pc=No("Injectable",void 0,void 0,void 0,(s,c)=>function Th(s,c){let h=null,y=null;s.hasOwnProperty(Qi)||Object.defineProperty(s,Qi,{get:()=>(null===h&&(h=Vr().compileInjectable(wm,`ng:///${s.name}/\u0275prov.js`,function Qp(s,c){const h=c||{providedIn:null},y={name:s.name,type:s,typeArgumentCount:0,providedIn:h.providedIn};return(Yg(h)||Em(h))&&void 0!==h.deps&&(y.deps=wt(h.deps)),Yg(h)?y.useClass=h.useClass:function __(s){return y_ in s}(h)?y.useValue=h.useValue:Em(h)?y.useFactory=h.useFactory:function Xg(s){return void 0!==s.useExisting}(h)&&(y.useExisting=h.useExisting),y}(s,c))),h)}),s.hasOwnProperty(xs)||Object.defineProperty(s,xs,{get:()=>{if(null===y){const w=Vr();y=w.compileFactory(wm,`ng:///${s.name}/\u0275fac.js`,{name:s.name,type:s,typeArgumentCount:0,deps:Dt(s),target:w.FactoryTarget.Injectable})}return y},configurable:!0})}(s,c));function hi(s,c=null,h=null,y){const w=Mh(s,c,h,y);return w.resolveInjectorInitializers(),w}function Mh(s,c=null,h=null,y,w=new Set){const M=[h||Jn,u_(s)];return y=y||("object"==typeof s?void 0:te(s)),new h_(M,c||lo(),y||null,w)}let Jc=(()=>{class s{static create(h,y){if(Array.isArray(h))return hi({name:""},y,h,"");{const w=h.name??"";return hi({name:w},h.parent,h.providers,w)}}}return s.THROW_IF_NOT_FOUND=ee,s.NULL=new Wc,s.\u0275prov=hn({token:s,providedIn:"any",factory:()=>Vt(ed)}),s.__NG_ELEMENT_ID__=-1,s})();function Ih(s){return s.length>1?" ("+function eu(s){const c=[];for(let h=0;h<s.length;++h){if(c.indexOf(s[h])>-1)return c.push(s[h]),c;c.push(s[h])}return c}(s.slice().reverse()).map(y=>te(y.token)).join(" -> ")+")":""}function tu(s,c,h,y){const w=[c],M=h(w),A=y?function Eh(s,c){const h=`${s} caused by: ${c instanceof Error?c.message:c}`,y=Error(h);return y[Ba]=c,y}(M,y):Error(M);return A.addKey=go,A.keys=w,A.injectors=[s],A.constructResolvingMessage=h,A[Ba]=y,A}function go(s,c){this.injectors.push(s),this.keys.push(c),this.message=this.constructResolvingMessage(this.keys)}function Dh(s,c){const h=[];for(let y=0,w=c.length;y<w;y++){const M=c[y];h.push(M&&0!=M.length?M.map(te).join(" "):"?")}return Error("Cannot resolve all parameters for '"+te(s)+"'("+h.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+te(s)+"' is decorated with Injectable.")}function Qg(s,c){return Error(`Cannot mix multi providers and regular providers, got: ${s} ${c}`)}class oa{constructor(c,h){if(this.token=c,this.id=h,!c)throw new K(208,!1);this.displayName=te(this.token)}static get(c){return Jg.get(G(c))}static get numberOfKeys(){return Jg.numberOfKeys}}class v_{constructor(){this._allKeys=new Map}get(c){if(c instanceof oa)return c;if(this._allKeys.has(c))return this._allKeys.get(c);const h=new oa(c,oa.numberOfKeys);return this._allKeys.set(c,h),h}get numberOfKeys(){return this._allKeys.size}}const Jg=new v_;class Cm{constructor(c,h,y){this.key=c,this.optional=h,this.visibility=y}static fromKey(c){return new Cm(c,!1,null)}}const Sm=[];class b_{constructor(c,h,y){this.key=c,this.resolvedFactories=h,this.multiProvider=y,this.resolvedFactory=this.resolvedFactories[0]}}class kh{constructor(c,h){this.factory=c,this.dependencies=h}}function x_(s){let c,h;if(s.useClass){const y=G(s.useClass);c=ht().factory(y),h=ef(y)}else s.useExisting?(c=y=>y,h=[Cm.fromKey(oa.get(s.useExisting))]):s.useFactory?(c=s.useFactory,h=function ey(s,c){if(c){const h=c.map(y=>[y]);return c.map(y=>ty(s,y,h))}return ef(s)}(s.useFactory,s.deps)):(c=()=>s.useValue,h=Sm);return new kh(c,h)}function w_(s){return new b_(oa.get(s.provide),[x_(s)],s.multi||!1)}function zv(s){const y=function jv(s,c){for(let h=0;h<s.length;h++){const y=s[h],w=c.get(y.key.id);if(w){if(y.multiProvider!==w.multiProvider)throw Qg(w,y);if(y.multiProvider)for(let M=0;M<y.resolvedFactories.length;M++)w.resolvedFactories.push(y.resolvedFactories[M]);else c.set(y.key.id,y)}else{let M;M=y.multiProvider?new b_(y.key,y.resolvedFactories.slice(),y.multiProvider):y,c.set(y.key.id,M)}}return c}(E_(s,[]).map(w_),new Map);return Array.from(y.values())}function E_(s,c){return s.forEach(h=>{if(h instanceof Wu)c.push({provide:h,useClass:h});else if(h&&"object"==typeof h&&void 0!==h.provide)c.push(h);else{if(!Array.isArray(h))throw function Kg(s){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${s}`)}(h);E_(h,c)}}),c}function ef(s){const c=ht().parameters(s);if(!c)return[];if(c.some(h=>null==h))throw Dh(s,c);return c.map(h=>ty(s,h,c))}function ty(s,c,h){let y=null,w=!1;if(!Array.isArray(c))return gc(c instanceof We?c.token:c,w,null);let M=null;for(let A=0;A<c.length;++A){const L=c[A];L instanceof Wu?y=L:L instanceof We?y=L.token:L instanceof $e?w=!0:L instanceof st||L instanceof nt?M=L:L instanceof zi&&(y=L)}if(y=G(y),null!=y)return gc(y,w,M);throw Dh(s,h)}function gc(s,c,h){return new Cm(oa.get(s),c,h)}const xr={};class is{static resolve(c){return zv(c)}static resolveAndCreate(c,h){const y=is.resolve(c);return is.fromResolvedProviders(y,h)}static fromResolvedProviders(c,h){return new Tm(c,h)}}let Tm=(()=>{class s{constructor(h,y){this._constructionCounter=0,this._providers=h,this.parent=y||null;const w=h.length;this.keyIds=[],this.objs=[];for(let M=0;M<w;M++)this.keyIds[M]=h[M].key.id,this.objs[M]=xr}get(h,y=ee){return this._getByKey(oa.get(h),null,y)}resolveAndCreateChild(h){const y=is.resolve(h);return this.createChildFromResolved(y)}createChildFromResolved(h){const y=new s(h);return y.parent=this,y}resolveAndInstantiate(h){return this.instantiateResolved(is.resolve([h])[0])}instantiateResolved(h){return this._instantiateProvider(h)}getProviderAtIndex(h){if(h<0||h>=this._providers.length)throw function Bv(s){return Error(`Index ${s} is out-of-bounds.`)}(h);return this._providers[h]}_new(h){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function fc(s,c){return tu(s,c,function(h){return`Cannot instantiate cyclic dependency!${Ih(h)}`})}(this,h.key);return this._instantiateProvider(h)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(h){if(h.multiProvider){const y=[];for(let w=0;w<h.resolvedFactories.length;++w)y[w]=this._instantiate(h,h.resolvedFactories[w]);return y}return this._instantiate(h,h.resolvedFactories[0])}_instantiate(h,y){const w=y.factory;let M,A;try{M=y.dependencies.map(L=>this._getByReflectiveDependency(L))}catch(L){throw L.addKey&&L.addKey(this,h.key),L}try{A=w(...M)}catch(L){throw function mc(s,c,h,y){return tu(s,y,function(w){const M=te(w[0].token);return`${c.message}: Error during instantiation of ${M}!${Ih(w)}.`},c)}(this,L,0,h.key)}return A}_getByReflectiveDependency(h){return this._getByKey(h.key,h.visibility,h.optional?null:ee)}_getByKey(h,y,w){return h===s.INJECTOR_KEY?this:y instanceof st?this._getByKeySelf(h,w):this._getByKeyDefault(h,w,y)}_getObjByKeyId(h){for(let y=0;y<this.keyIds.length;y++)if(this.keyIds[y]===h)return this.objs[y]===xr&&(this.objs[y]=this._new(this._providers[y])),this.objs[y];return xr}_throwOrNull(h,y){if(y!==ee)return y;throw function Jp(s,c){return tu(s,c,function(h){return`No provider for ${te(h[0].token)}!${Ih(h)}`})}(this,h)}_getByKeySelf(h,y){const w=this._getObjByKeyId(h.id);return w!==xr?w:this._throwOrNull(h,y)}_getByKeyDefault(h,y,w){let M;for(M=w instanceof nt?this.parent:this;M instanceof s;){const A=M,L=A._getObjByKeyId(h.id);if(L!==xr)return L;M=A.parent}return null!==M?M.get(h.token,y):this._throwOrNull(h,y)}get displayName(){return`ReflectiveInjector(providers: [${function tf(s,c){const h=[];for(let y=0;y<s._providers.length;++y)h[y]=c(s.getProviderAtIndex(y));return h}(this,y=>' "'+y.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return s.INJECTOR_KEY=oa.get(Jc),s})();function Ua(s,c=Bt.Default){const h=Zt();return null===h?Vt(s,c):Ea(jr(),h,G(s),c)}function Ah(){throw new Error("invalid")}function Ha(s,c){const h=s.contentQueries;if(null!==h)for(let y=0;y<h.length;y+=2){const M=h[y+1];if(-1!==M){const A=s.data[M];$f(h[y]),A.contentQueries(2,c[M],M)}}}function Ph(s,c,h,y,w,M,A,L,j,Z,se){const Ie=c.blueprint.slice();return Ie[on]=w,Ie[cn]=76|y,(null!==se||s&&1024&s[cn])&&(Ie[cn]|=1024),zf(Ie),Ie[Ai]=Ie[Zr]=s,Ie[nr]=h,Ie[Wi]=A||s&&s[Wi],Ie[li]=L||s&&s[li],Ie[as]=j||s&&s[as]||null,Ie[Ro]=Z||s&&s[Ro]||null,Ie[Gi]=M,Ie[zs]=function Cg(){return Tv++}(),Ie[xo]=se,Ie[to]=2==c.type?s[to]:Ie,Ie}function sa(s,c,h,y,w){let M=s.data[c];if(null===M)M=Mm(s,c,h,y,w),function Ud(){return ti.lFrame.inI18n}()&&(M.flags|=32);else if(64&M.type){M.type=h,M.value=y,M.attrs=w;const A=$s();M.injectorIndex=null===A?-1:A.injectorIndex}return So(M,!0),M}function Mm(s,c,h,y,w){const M=Bd(),A=zd(),j=s.data[c]=function ny(s,c,h,y,w,M){return{type:h,index:y,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:w,attrs:M,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,A?M:M&&M.parent,h,c,y,w);return null===s.firstChild&&(s.firstChild=j),null!==M&&(A?null==M.child&&null!==j.parent&&(M.child=j):null===M.next&&(M.next=j,j.prev=M)),j}function Ni(s,c,h,y){if(0===h)return-1;const w=c.length;for(let M=0;M<h;M++)c.push(y),s.blueprint.push(y),s.data.push(null);return w}function Oh(s,c,h){Hd(c);try{const y=s.viewQuery;null!==y&&df(1,y,h);const w=s.template;null!==w&&sf(s,c,w,1,h),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ha(s,c),s.staticViewQueries&&df(2,s.viewQuery,h);const M=s.components;null!==M&&function S_(s,c){for(let h=0;h<c.length;h++)O_(s,c[h])}(c,M)}catch(y){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),y}finally{c[cn]&=-5,Gs()}}function rf(s,c,h,y){const w=c[cn];if(128!=(128&w)){Hd(c);try{zf(c),xp(s.bindingStartIndex),null!==h&&sf(s,c,h,2,y);const A=3==(3&w);if(A){const Z=s.preOrderCheckHooks;null!==Z&&Ws(c,Z,null)}else{const Z=s.preOrderHooks;null!==Z&&ju(c,Z,0,null),Mc(c,0)}if(function cy(s){for(let c=Sn(s);null!==c;c=Do(c)){if(!c[wo])continue;const h=c[js];for(let y=0;y<h.length;y++){const w=h[y];512&w[cn]||jf(w[Ai],1),w[cn]|=512}}}(c),function ly(s){for(let c=Sn(s);null!==c;c=Do(c))for(let h=wi;h<c.length;h++){const y=c[h],w=y[qt];Hs(y)&&rf(w,y,w.template,y[nr])}}(c),null!==s.contentQueries&&Ha(s,c),A){const Z=s.contentCheckHooks;null!==Z&&Ws(c,Z)}else{const Z=s.contentHooks;null!==Z&&ju(c,Z,1),Mc(c,1)}!function nf(s,c){const h=s.hostBindingOpCodes;if(null!==h)try{for(let y=0;y<h.length;y++){const w=h[y];if(w<0)Vl(~w);else{const M=w,A=h[++y],L=h[++y];wp(A,M),L(2,c[M])}}}finally{Vl(-1)}}(s,c);const L=s.components;null!==L&&function C_(s,c){for(let h=0;h<c.length;h++)Ao(s,c[h])}(c,L);const j=s.viewQuery;if(null!==j&&df(2,j,y),A){const Z=s.viewCheckHooks;null!==Z&&Ws(c,Z)}else{const Z=s.viewHooks;null!==Z&&ju(c,Z,2),Mc(c,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),c[cn]&=-41,512&c[cn]&&(c[cn]&=-513,jf(c[Ai],-1))}finally{Gs()}}}function sf(s,c,h,y,w){const M=Yr(),A=2&y;try{Vl(-1),A&&c.length>ei&&Sh(s,c,ei,!1),Yo(A?2:0,w),h(y,w)}finally{Vl(M),Yo(A?3:1,w)}}function $o(s,c,h){if(Ur(c)){const w=c.directiveEnd;for(let M=c.directiveStart;M<w;M++){const A=s.data[M];A.contentQueries&&A.contentQueries(1,h[M],M)}}}function nu(s,c,h){fg()&&(function ry(s,c,h,y){const w=h.directiveStart,M=h.directiveEnd;Pl(h)&&function uf(s,c,h){const y=Lo(c,s),w=T_(h),M=s[Wi],A=zh(s,Ph(s,w,null,h.onPush?32:16,y,c,M,M.createRenderer(y,h),null,null,null));s[c.index]=A}(c,h,s.data[w+h.componentOffset]),s.firstCreatePass||Rc(h,c),oo(y,c);const A=h.initialInputs;for(let L=w;L<M;L++){const j=s.data[L],Z=ol(c,s,L,h);oo(Z,c),null!==A&&fl(0,L-w,Z,j,0,A),zr(j)&&(ho(h.index,c)[nr]=ol(c,s,L,h))}}(s,c,h,Lo(h,c)),64==(64&h.flags)&&Go(s,c,h))}function Rh(s,c,h=Lo){const y=c.localNames;if(null!==y){let w=c.index+1;for(let M=0;M<y.length;M+=2){const A=y[M+1],L=-1===A?h(c,s):s[A];s[w++]=L}}}function T_(s){const c=s.tView;return null===c||c.incompleteFirstPass?s.tView=Im(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):c}function Im(s,c,h,y,w,M,A,L,j,Z){const se=ei+y,Ie=se+w,rt=function M_(s,c){const h=[];for(let y=0;y<c;y++)h.push(y<s?null:Hn);return h}(se,Ie),xt="function"==typeof Z?Z():Z;return rt[qt]={type:s,blueprint:rt,template:h,queries:null,viewQuery:L,declTNode:c,data:rt.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:Ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof M?M():M,pipeRegistry:"function"==typeof A?A():A,firstChild:null,schemas:j,consts:xt,incompleteFirstPass:!1}}function $a(s,c,h,y){const w=ad(c);null===h?w.push(y):(w.push(h),s.firstCreatePass&&dy(s).push(y,w.length-1))}function iu(s,c,h,y){for(let w in s)if(s.hasOwnProperty(w)){h=null===h?{}:h;const M=s[w];null===y?lf(h,c,w,M):y.hasOwnProperty(w)&&lf(h,c,y[w],M)}return h}function lf(s,c,h,y){s.hasOwnProperty(h)?s[h].push(c,y):s[h]=[c,y]}function yo(s,c,h,y,w,M,A,L){const j=Lo(c,h);let se,Z=c.inputs;!L&&null!=Z&&(se=Z[y])?(pf(s,h,se,y,w),Pl(c)&&function I_(s,c){const h=ho(c,s);16&h[cn]||(h[cn]|=32)}(h,c.index)):3&c.type&&(y=function Lh(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(y),w=null!=A?A(w,c.value||"",y):w,M.setProperty(j,y,w))}function iy(s,c,h,y){if(fg()){const w=null===y?null:{"":-1},M=function sy(s,c){const h=s.directiveRegistry;let y=null,w=null;if(h)for(let M=0;M<h.length;M++){const A=h[M];if(Qc(c,A.selectors,!1))if(y||(y=[]),zr(A))if(null!==A.findHostDirectiveDefs){const L=[];w=w||new Map,A.findHostDirectiveDefs(A,L,w),y.unshift(...L,A),rs(s,c,L.length)}else y.unshift(A),rs(s,c,0);else w=w||new Map,A.findHostDirectiveDefs?.(A,y,w),y.push(A)}return null===y?null:[y,w]}(s,h);let A,L;null===M?A=L=null:[A,L]=M,null!==A&&k_(s,c,h,A,w,L),w&&function P_(s,c,h){if(c){const y=s.localNames=[];for(let w=0;w<c.length;w+=2){const M=h[c[w+1]];if(null==M)throw new K(-301,!1);y.push(c[w],M)}}}(h,y,w)}h.mergedAttrs=Tr(h.mergedAttrs,h.attrs)}function k_(s,c,h,y,w,M){for(let Z=0;Z<y.length;Z++)Wd(Rc(h,c),s,y[Z].type);!function Fh(s,c,h){s.flags|=1,s.directiveStart=c,s.directiveEnd=c+h,s.providerIndexes=c}(h,s.data.length,y.length);for(let Z=0;Z<y.length;Z++){const se=y[Z];se.providersResolver&&se.providersResolver(se)}let A=!1,L=!1,j=Ni(s,c,y.length,null);for(let Z=0;Z<y.length;Z++){const se=y[Z];h.mergedAttrs=Tr(h.mergedAttrs,se.hostAttrs),ay(s,h,c,j,se),cf(j,se,w),null!==se.contentQueries&&(h.flags|=4),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(h.flags|=64);const Ie=se.type.prototype;!A&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(h.index),A=!0),!L&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(h.index),L=!0),j++}!function Dm(s,c,h){const w=c.directiveEnd,M=s.data,A=c.attrs,L=[];let j=null,Z=null;for(let se=c.directiveStart;se<w;se++){const Ie=M[se],rt=h?h.get(Ie):null,Ft=rt?rt.outputs:null;j=iu(Ie.inputs,se,j,rt?rt.inputs:null),Z=iu(Ie.outputs,se,Z,Ft);const ln=null===j||null===A||qg(c)?null:Bh(j,se,A);L.push(ln)}null!==j&&(j.hasOwnProperty("class")&&(c.flags|=8),j.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=L,c.inputs=j,c.outputs=Z}(s,h,M)}function Go(s,c,h){const y=h.directiveStart,w=h.directiveEnd,M=h.index,A=function mg(){return ti.lFrame.currentDirectiveIndex}();try{Vl(M);for(let L=y;L<w;L++){const j=s.data[L],Z=c[L];jl(L),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&oy(j,Z)}}finally{Vl(-1),jl(A)}}function oy(s,c){null!==s.hostBindings&&s.hostBindings(1,c)}function rs(s,c,h){c.componentOffset=h,(s.components??(s.components=[])).push(c.index)}function cf(s,c,h){if(h){if(c.exportAs)for(let y=0;y<c.exportAs.length;y++)h[c.exportAs[y]]=s;zr(c)&&(h[""]=s)}}function ay(s,c,h,y,w){s.data[y]=w;const M=w.factory||(w.factory=Vs(w.type)),A=new Xo(M,zr(w),Ua);s.blueprint[y]=A,h[y]=A,function Vv(s,c,h,y,w){const M=w.hostBindings;if(M){let A=s.hostBindingOpCodes;null===A&&(A=s.hostBindingOpCodes=[]);const L=~c.index;(function A_(s){let c=s.length;for(;c>0;){const h=s[--c];if("number"==typeof h&&h<0)return h}return 0})(A)!=L&&A.push(L),A.push(h,y,M)}}(s,c,y,Ni(s,h,w.hostVars,Hn),w)}function aa(s,c,h,y,w,M){const A=Lo(s,c);Nh(c[li],A,M,s.value,h,y,w)}function Nh(s,c,h,y,w,M,A){if(null==M)s.removeAttribute(c,w,h);else{const L=null==A?_e(M):A(M,y||"",w);s.setAttribute(c,w,L,h)}}function fl(s,c,h,y,w,M){const A=M[c];if(null!==A){const L=y.setInput;for(let j=0;j<A.length;){const Z=A[j++],se=A[j++],Ie=A[j++];null!==L?y.setInput(h,Ie,Z,se):h[se]=Ie}}}function Bh(s,c,h){let y=null,w=0;for(;w<h.length;){const M=h[w];if(0!==M)if(5!==M){if("number"==typeof M)break;if(s.hasOwnProperty(M)){null===y&&(y=[]);const A=s[M];for(let L=0;L<A.length;L+=2)if(A[L]===c){y.push(M,A[L+1],h[w+1]);break}}w+=2}else w+=2;else w+=4}return y}function Am(s,c,h,y){return[s,!0,!1,c,null,0,y,h,null,null]}function Ao(s,c){const h=ho(c,s);if(Hs(h)){const y=h[qt];48&h[cn]?rf(y,h,y.template,h[nr]):h[zn]>0&&Pm(h)}}function Pm(s){for(let y=Sn(s);null!==y;y=Do(y))for(let w=wi;w<y.length;w++){const M=y[w];if(Hs(M))if(512&M[cn]){const A=M[qt];rf(A,M,A.template,M[nr])}else M[zn]>0&&Pm(M)}const h=s[qt].components;if(null!==h)for(let y=0;y<h.length;y++){const w=ho(h[y],s);Hs(w)&&w[zn]>0&&Pm(w)}}function O_(s,c){const h=ho(c,s),y=h[qt];(function la(s,c){for(let h=c.length;h<s.blueprint.length;h++)c.push(s.blueprint[h])})(y,h),Oh(y,h,h[nr])}function zh(s,c){return s[Ja]?s[Tu][Sr]=c:s[Ja]=c,s[Tu]=c,c}function sd(s){for(;s;){s[cn]|=32;const c=ec(s);if(el(s)&&!c)return s;s=c}return null}function jh(s,c,h,y=!0){const w=c[Wi];w.begin&&w.begin();try{rf(s,c,s.template,h)}catch(A){throw y&&hf(c,A),A}finally{w.end&&w.end()}}function df(s,c,h){$f(0),c(s,h)}function ad(s){return s[Ns]||(s[Ns]=[])}function dy(s){return s.cleanup||(s.cleanup=[])}function Vh(s,c,h){return(null===s||zr(s))&&(h=function Nd(s){for(;Array.isArray(s);){if("object"==typeof s[Mu])return s;s=s[on]}return null}(h[c.index])),h[li]}function hf(s,c){const h=s[Ro],y=h?h.get(uc,null):null;y&&y.handleError(c)}function pf(s,c,h,y,w){for(let M=0;M<h.length;){const A=h[M++],L=h[M++],j=c[A],Z=s.data[A];null!==Z.setInput?Z.setInput(j,w,y,L):j[L]=w}}function Qr(s,c,h){const y=Fl(c,s);tc(s[li],y,h)}function ld(s,c,h){let y=h?s.styles:null,w=h?s.classes:null,M=0;if(null!==c)for(let A=0;A<c.length;A++){const L=c[A];"number"==typeof L?M=L:1==M?w=W(w,L):2==M&&(y=W(y,L+": "+c[++A]+";"))}h?s.styles=y:s.stylesWithoutHost=y,h?s.classes=w:s.classesWithoutHost=w}function ml(s,c,h,y,w=!1){for(;null!==h;){const M=c[h.index];if(null!==M&&y.push(Hr(M)),no(M))for(let L=wi;L<M.length;L++){const j=M[L],Z=j[qt].firstChild;null!==Z&&ml(j[qt],j,Z,y)}const A=h.type;if(8&A)ml(s,c,h.child,y);else if(32&A){const L=Zu(h,c);let j;for(;j=L();)y.push(j)}else if(16&A){const L=lm(c,h);if(Array.isArray(L))y.push(...L);else{const j=ec(c[to]);ml(j[qt],j,L,y,!0)}}h=w?h.projectionNext:h.next}return y}class Ga{get rootNodes(){const c=this._lView,h=c[qt];return ml(h,c,h.firstChild,[])}constructor(c,h){this._lView=c,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(c){this._lView[nr]=c}get destroyed(){return 128==(128&this._lView[cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[Ai];if(no(c)){const h=c[Iu],y=h?h.indexOf(this):-1;y>-1&&(Dg(c,y),b(h,y))}this._attachedToViewContainer=!1}rm(this._lView[qt],this._lView)}onDestroy(c){$a(this._lView[qt],this._lView,null,c)}markForCheck(){sd(this._cdRefInjectingView||this._lView)}detach(){this._lView[cn]&=-65}reattach(){this._lView[cn]|=64}detectChanges(){jh(this._lView[qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Oa(s,c){rh(s,c,c[li],2,null,null)}(this._lView[qt],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=c}}class Uh extends Ga{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;jh(c[qt],c,c[nr],!1)}checkNoChanges(){}get context(){return null}}class ru extends Gp{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const h=ui(c);return new ou(h,this.ngModule)}}function ff(s){const c=[];for(let h in s)s.hasOwnProperty(h)&&c.push({propName:s[h],templateName:h});return c}class Rm{constructor(c,h){this.injector=c,this.parentInjector=h}get(c,h,y){y=Xn(y);const w=this.injector.get(c,dl,y);return w!==dl||h===dl?w:this.parentInjector.get(c,h,y)}}class ou extends _m{get inputs(){return ff(this.componentDef.inputs)}get outputs(){return ff(this.componentDef.outputs)}constructor(c,h){super(),this.componentDef=c,this.ngModule=h,this.componentType=c.type,this.selector=function Zg(s){return s.map(Kp).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!h}create(c,h,y,w){let M=(w=w||this.ngModule)instanceof Xi?w:w?.injector;M&&null!==this.componentDef.getStandaloneInjector&&(M=this.componentDef.getStandaloneInjector(M)||M);const A=M?new Rm(c,M):c,L=A.get(Ir,null);if(null===L)throw new K(407,!1);const j=A.get(wh,null),Z=L.createRenderer(null,this.componentDef),se=this.componentDef.selectors[0][0]||"div",Ie=y?function af(s,c,h){return s.selectRootElement(c,h===qr.ShadowDom)}(Z,y,this.componentDef.encapsulation):Pp(Z,se,function Om(s){const c=s.toLowerCase();return"svg"===c?Ou:"math"===c?Fd:null}(se)),rt=this.componentDef.onPush?288:272,xt=Im(0,null,null,1,0,null,null,null,null,null),Ft=Ph(null,xt,null,rt,null,null,L,Z,j,A,null);let ln,vn;Hd(Ft);try{const Mn=this.componentDef;let Gn,nn=null;Mn.findHostDirectiveDefs?(Gn=[],nn=new Map,Mn.findHostDirectiveDefs(Mn,Gn,nn),Gn.push(Mn)):Gn=[Mn];const mi=function t1(s,c){const h=s[qt],y=ei;return s[y]=c,sa(h,y,2,"#host",null)}(Ft,Ie),eo=function n1(s,c,h,y,w,M,A,L){const j=w[qt];!function mf(s,c,h,y){for(const w of s)c.mergedAttrs=Tr(c.mergedAttrs,w.hostAttrs);null!==c.mergedAttrs&&(ld(c,c.mergedAttrs,!0),null!==h&&sh(y,h,c))}(y,s,c,A);const Z=M.createRenderer(c,h),se=Ph(w,T_(h),null,h.onPush?32:16,w[s.index],s,M,Z,L||null,null,null);return j.firstCreatePass&&rs(j,s,y.length-1),zh(w,se),w[s.index]=se}(mi,Ie,Mn,Gn,Ft,L,Z);vn=Cc(xt,ei),Ie&&function py(s,c,h,y){if(y)$d(s,h,["ng-version",Yc.full]);else{const{attrs:w,classes:M}=function ko(s){const c=[],h=[];let y=1,w=2;for(;y<s.length;){let M=s[y];if("string"==typeof M)2===w?""!==M&&c.push(M,s[++y]):8===w&&h.push(M);else{if(!ns(w))break;w=M}y++}return{attrs:c,classes:h}}(c.selectors[0]);w&&$d(s,h,w),M&&M.length>0&&oh(s,h,M.join(" "))}}(Z,Mn,Ie,y),void 0!==h&&function Uv(s,c,h){const y=s.projection=[];for(let w=0;w<c.length;w++){const M=h[w];y.push(null!=M?Array.from(M):null)}}(vn,this.ngContentSelectors,h),ln=function su(s,c,h,y,w,M){const A=jr(),L=w[qt],j=Lo(A,w);k_(L,w,A,h,null,y);for(let se=0;se<h.length;se++)oo(ol(w,L,A.directiveStart+se,A),w);Go(L,w,A),j&&oo(j,w);const Z=ol(w,L,A.directiveStart+A.componentOffset,A);if(s[nr]=w[nr]=Z,null!==M)for(const se of M)se(Z,c);return $o(L,A,s),Z}(eo,Mn,Gn,nn,Ft,[fy]),Oh(xt,Ft,null)}finally{Gs()}return new hy(this.componentType,ln,vh(vn,Ft),Ft,vn)}}class hy extends gi{constructor(c,h,y,w,M){super(),this.location=y,this._rootLView=w,this._tNode=M,this.instance=h,this.hostView=this.changeDetectorRef=new Uh(w),this.componentType=c}setInput(c,h){const y=this._tNode.inputs;let w;if(null!==y&&(w=y[c])){const M=this._rootLView;pf(M[qt],M,w,c,h),sd(ho(this._tNode.index,M))}}get injector(){return new Mr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function fy(){const s=jr();Hl(Zt()[qt],s)}function Lm(s){return Object.getPrototypeOf(s.prototype).constructor}function Wo(s){let c=Lm(s.type),h=!0;const y=[s];for(;c;){let w;if(zr(s))w=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new K(903,!1);w=c.\u0275dir}if(w){if(h){y.push(w);const A=s;A.inputs=Wa(s.inputs),A.declaredInputs=Wa(s.declaredInputs),A.outputs=Wa(s.outputs);const L=w.hostBindings;L&&my(s,L);const j=w.viewQuery,Z=w.contentQueries;if(j&&au(s,j),Z&&L_(s,Z),pe(s.inputs,w.inputs),pe(s.declaredInputs,w.declaredInputs),pe(s.outputs,w.outputs),zr(w)&&w.data.animation){const se=s.data;se.animation=(se.animation||[]).concat(w.data.animation)}}const M=w.features;if(M)for(let A=0;A<M.length;A++){const L=M[A];L&&L.ngInherit&&L(s),L===Wo&&(h=!1)}}c=Object.getPrototypeOf(c)}!function R_(s){let c=0,h=null;for(let y=s.length-1;y>=0;y--){const w=s[y];w.hostVars=c+=w.hostVars,w.hostAttrs=Tr(w.hostAttrs,h=Tr(h,w.hostAttrs))}}(y)}function Wa(s){return s===rr?{}:s===Jn?[]:s}function au(s,c){const h=s.viewQuery;s.viewQuery=h?(y,w)=>{c(y,w),h(y,w)}:c}function L_(s,c){const h=s.contentQueries;s.contentQueries=h?(y,w,M)=>{c(y,w,M),h(y,w,M)}:c}function my(s,c){const h=s.hostBindings;s.hostBindings=h?(y,w)=>{c(y,w),h(y,w)}:c}const cd=["providersResolver"],gy=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function F_(s){let h,c=Lm(s.type);h=zr(s)?c.\u0275cmp:c.\u0275dir;const y=s;for(const w of cd)y[w]=h[w];if(zr(h))for(const w of gy)y[w]=h[w]}function lu(s){return c=>{c.findHostDirectiveDefs=ca,c.hostDirectives=(Array.isArray(s)?s:s()).map(h=>"function"==typeof h?{directive:G(h),inputs:rr,outputs:rr}:{directive:G(h.directive),inputs:N_(h.inputs),outputs:N_(h.outputs)})}}function ca(s,c,h){if(null!==s.hostDirectives)for(const y of s.hostDirectives){const w=xi(y.directive);cu(w.declaredInputs,y.inputs),ca(w,c,h),h.set(w,y),c.push(w)}}function N_(s){if(void 0===s||0===s.length)return rr;const c={};for(let h=0;h<s.length;h+=2)c[s[h]]=s[h+1];return c}function cu(s,c){for(const h in c)c.hasOwnProperty(h)&&(s[c[h]]=s[h])}function uu(s){return!!yy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function yy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function B_(s,c){const h=uu(s),y=uu(c);return h&&y?function gf(s,c,h){const y=s[Symbol.iterator](),w=c[Symbol.iterator]();for(;;){const M=y.next(),A=w.next();if(M.done&&A.done)return!0;if(M.done||A.done||!h(M.value,A.value))return!1}}(s,c,B_):!(h||!s||"object"!=typeof s&&"function"!=typeof s||y||!c||"object"!=typeof c&&"function"!=typeof c)||Object.is(s,c)}function ms(s,c,h){return s[c]=h}function du(s,c){return s[c]}function _o(s,c,h){return!Object.is(s[c],h)&&(s[c]=h,!0)}function qa(s,c,h,y){const w=_o(s,c,h);return _o(s,c+1,y)||w}function yl(s,c,h,y,w){const M=qa(s,c,h,y);return _o(s,c+2,w)||M}function ua(s,c,h,y,w,M){const A=qa(s,c,h,y);return qa(s,c+2,w,M)||A}function zm(s,c,h,y){const w=Zt();return _o(w,zl(),c)&&(Ci(),aa(er(),w,s,c,h,y)),zm}function Hh(s,c){let h=!1,y=Es();for(let M=1;M<c.length;M+=2)h=_o(s,y++,c[M])||h;if(xp(y),!h)return Hn;let w=c[0];for(let M=1;M<c.length;M+=2)w+=_e(c[M])+c[M+1];return w}function ud(s,c,h,y){return _o(s,zl(),h)?c+_e(h)+y:Hn}function $h(s,c,h,y,w,M){const L=qa(s,Es(),h,w);return xa(2),L?c+_e(h)+y+_e(w)+M:Hn}function dd(s,c,h,y,w,M,A,L){const Z=yl(s,Es(),h,w,A);return xa(3),Z?c+_e(h)+y+_e(w)+M+_e(A)+L:Hn}function Gh(s,c,h,y,w,M,A,L,j,Z){const Ie=ua(s,Es(),h,w,A,j);return xa(4),Ie?c+_e(h)+y+_e(w)+M+_e(A)+L+_e(j)+Z:Hn}function Wh(s,c,h,y,w,M,A,L,j,Z,se,Ie){const rt=Es();let xt=ua(s,rt,h,w,A,j);return xt=_o(s,rt+4,se)||xt,xa(5),xt?c+_e(h)+y+_e(w)+M+_e(A)+L+_e(j)+Z+_e(se)+Ie:Hn}function yc(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt){const Ft=Es();let ln=ua(s,Ft,h,w,A,j);return ln=qa(s,Ft+4,se,rt)||ln,xa(6),ln?c+_e(h)+y+_e(w)+M+_e(A)+L+_e(j)+Z+_e(se)+Ie+_e(rt)+xt:Hn}function _l(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln){const vn=Es();let Mn=ua(s,vn,h,w,A,j);return Mn=yl(s,vn+4,se,rt,Ft)||Mn,xa(7),Mn?c+_e(h)+y+_e(w)+M+_e(A)+L+_e(j)+Z+_e(se)+Ie+_e(rt)+xt+_e(Ft)+ln:Hn}function _c(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn){const Gn=Es();let nn=ua(s,Gn,h,w,A,j);return nn=ua(s,Gn+4,se,rt,Ft,vn)||nn,xa(8),nn?c+_e(h)+y+_e(w)+M+_e(A)+L+_e(j)+Z+_e(se)+Ie+_e(rt)+xt+_e(Ft)+ln+_e(vn)+Mn:Hn}function yf(s,c,h,y,w,M){const A=Zt(),L=ud(A,c,h,y);return L!==Hn&&aa(er(),A,s,L,w,M),yf}function qh(s,c,h,y,w,M,A,L){const j=Zt(),Z=$h(j,c,h,y,w,M);return Z!==Hn&&aa(er(),j,s,Z,A,L),qh}function hd(s,c,h,y,w,M,A,L,j,Z){const se=Zt(),Ie=dd(se,c,h,y,w,M,A,L);return Ie!==Hn&&aa(er(),se,s,Ie,j,Z),hd}function As(s,c,h,y,w,M,A,L,j,Z,se,Ie){const rt=Zt(),xt=Gh(rt,c,h,y,w,M,A,L,j,Z);return xt!==Hn&&aa(er(),rt,s,xt,se,Ie),As}function _y(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt){const Ft=Zt(),ln=Wh(Ft,c,h,y,w,M,A,L,j,Z,se,Ie);return ln!==Hn&&aa(er(),Ft,s,ln,rt,xt),_y}function _f(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln){const vn=Zt(),Mn=yc(vn,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt);return Mn!==Hn&&aa(er(),vn,s,Mn,Ft,ln),_f}function jm(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn){const Gn=Zt(),nn=_l(Gn,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln);return nn!==Hn&&aa(er(),Gn,s,nn,vn,Mn),jm}function Zh(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn,Gn,nn){const mi=Zt(),eo=_c(mi,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn);return eo!==Hn&&aa(er(),mi,s,eo,Gn,nn),Zh}function Yh(s,c,h,y){const w=Zt(),M=Hh(w,c);return M!==Hn&&aa(er(),w,s,M,h,y),Yh}function vy(s){const c=Sg(s);jh(c[qt],c,s)}function vf(s,c,h,y,w,M,A,L){const j=Zt(),Z=Ci(),se=s+ei,Ie=Z.firstCreatePass?function z_(s,c,h,y,w,M,A,L,j){const Z=c.consts,se=sa(c,s,4,A||null,rl(Z,L));iy(c,h,se,rl(Z,j)),Hl(c,se);const Ie=se.tView=Im(2,se,y,w,M,c.directiveRegistry,c.pipeRegistry,null,c.schemas,Z);return null!==c.queries&&(c.queries.template(c,se),Ie.queries=c.queries.embeddedTView(se)),se}(se,Z,j,c,h,y,w,M,A):Z.data[se];So(Ie,!1);const rt=j[li].createComment("");am(Z,j,rt,Ie),oo(rt,j),zh(j,j[se]=Am(rt,j,rt,Ie)),Ol(Ie)&&nu(Z,j,Ie),null!=A&&Rh(j,Ie,L)}function pd(s,c,h,y){h>=s.data.length&&(s.data[h]=null,s.blueprint[h]=null),c[h]=y}function by(s){return Nl(function jd(){return ti.lFrame.contextLView}(),ei+s)}function Za(s,c,h){const y=Zt();return _o(y,zl(),c)&&yo(Ci(),er(),y,s,c,y[li],h,!1),Za}function Vm(s,c,h,y,w){const A=w?"class":"style";pf(s,h,c.inputs[A],A,y)}function bf(s,c,h,y){const w=Zt(),M=Ci(),A=ei+s,L=w[li],j=M.firstCreatePass?function Hv(s,c,h,y,w,M){const A=c.consts,j=sa(c,s,2,y,rl(A,w));return iy(c,h,j,rl(A,M)),null!==j.attrs&&ld(j,j.attrs,!1),null!==j.mergedAttrs&&ld(j,j.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,j),j}(A,M,w,c,h,y):M.data[A],Z=w[A]=Pp(L,c,function Bu(){return ti.lFrame.currentNamespace}()),se=Ol(j);return So(j,!0),sh(L,Z,j),32!=(32&j.flags)&&am(M,w,Z,j),0===function vp(){return ti.lFrame.elementDepthCount}()&&oo(Z,w),function hg(){ti.lFrame.elementDepthCount++}(),se&&(nu(M,w,j),$o(M,j,w)),null!==y&&Rh(w,j),bf}function Um(){let s=jr();zd()?Vf():(s=s.parent,So(s,!1));const c=s;!function pg(){ti.lFrame.elementDepthCount--}();const h=Ci();return h.firstCreatePass&&(Hl(h,s),Ur(s)&&h.queries.elementEnd(s)),null!=c.classesWithoutHost&&function Dc(s){return 0!=(8&s.flags)}(c)&&Vm(h,c,Zt(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function Vu(s){return 0!=(16&s.flags)}(c)&&Vm(h,c,Zt(),c.stylesWithoutHost,!1),Um}function Hm(s,c,h,y){return bf(s,c,h,y),Um(),Hm}function gs(s,c,h){const y=Zt(),w=Ci(),M=s+ei,A=w.firstCreatePass?function da(s,c,h,y,w){const M=c.consts,A=rl(M,y),L=sa(c,s,8,"ng-container",A);return null!==A&&ld(L,A,!0),iy(c,h,L,rl(M,w)),null!==c.queries&&c.queries.elementStart(c,L),L}(M,w,y,c,h):w.data[M];So(A,!0);const L=y[M]=y[li].createComment("");return am(w,y,L,A),oo(L,y),Ol(A)&&(nu(w,y,A),$o(w,A,y)),null!=h&&Rh(y,A),gs}function Ya(){let s=jr();const c=Ci();return zd()?Vf():(s=s.parent,So(s,!1)),c.firstCreatePass&&(Hl(c,s),Ur(s)&&c.queries.elementEnd(s)),Ya}function ha(s,c,h){return gs(s,c,h),Ya(),ha}function vc(){return Zt()}function Xh(s){return!!s&&"function"==typeof s.then}function xy(s){return!!s&&"function"==typeof s.subscribe}const wy=xy;function $m(s,c,h,y){const w=Zt(),M=Ci(),A=jr();return Gm(M,w,w[li],A,s,c,y),$m}function Kh(s,c){const h=jr(),y=Zt(),w=Ci();return Gm(w,y,Vh(Hf(w.data),h,y),h,s,c),Kh}function Gm(s,c,h,y,w,M,A){const L=Ol(y),Z=s.firstCreatePass&&dy(s),se=c[nr],Ie=ad(c);let rt=!0;if(3&y.type||A){const ln=Lo(y,c),vn=A?A(ln):ln,Mn=Ie.length,Gn=A?mi=>A(Hr(mi[y.index])):y.index;let nn=null;if(!A&&L&&(nn=function $v(s,c,h,y){const w=s.cleanup;if(null!=w)for(let M=0;M<w.length-1;M+=2){const A=w[M];if(A===h&&w[M+1]===y){const L=c[Ns],j=w[M+2];return L.length>j?L[j]:null}"string"==typeof A&&(M+=2)}return null}(s,c,w,y.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=M,nn.__ngLastListenerFn__=M,rt=!1;else{M=j_(y,c,se,M,!1);const mi=h.listen(vn,w,M);Ie.push(M,mi),Z&&Z.push(w,Gn,Mn,Mn+1)}}else M=j_(y,c,se,M,!1);const xt=y.outputs;let Ft;if(rt&&null!==xt&&(Ft=xt[w])){const ln=Ft.length;if(ln)for(let vn=0;vn<ln;vn+=2){const eo=c[Ft[vn]][Ft[vn+1]].subscribe(M),Po=Ie.length;Ie.push(M,eo),Z&&Z.push(w,y.index,Po,-(Po+1))}}}function Wm(s,c,h,y){try{return Yo(6,c,h),!1!==h(y)}catch(w){return hf(s,w),!1}finally{Yo(7,c,h)}}function j_(s,c,h,y,w){return function M(A){if(A===Function)return y;sd(s.componentOffset>-1?ho(s.index,c):c);let j=Wm(c,h,y,A),Z=M.__ngNextListenerFn__;for(;Z;)j=Wm(c,h,Z,A)&&j,Z=Z.__ngNextListenerFn__;return w&&!1===j&&(A.preventDefault(),A.returnValue=!1),j}}function qm(s=1){return function Ep(s){return(ti.lFrame.contextLView=function Cs(s,c){for(;s>0;)c=c[Zr],s--;return c}(s,ti.lFrame.contextLView))[nr]}(s)}function Ey(s,c){let h=null;const y=function m_(s){const c=s.attrs;if(null!=c){const h=c.indexOf(5);if(!(1&h))return c[h+1]}return null}(s);for(let w=0;w<c.length;w++){const M=c[w];if("*"!==M){if(null===y?Qc(s,M,!0):g_(y,M))return w}else h=w}return h}function Cy(s){const c=Zt()[to][Gi];if(!c.projection){const y=c.projection=E(s?s.length:1,null),w=y.slice();let M=c.child;for(;null!==M;){const A=s?Ey(M,s):0;null!==A&&(w[A]?w[A].projectionNext=M:y[A]=M,w[A]=M),M=M.next}}}function Sy(s,c=0,h){const y=Zt(),w=Ci(),M=sa(w,ei+s,16,null,h||null);null===M.projection&&(M.projection=c),Vf(),32!=(32&M.flags)&&function n_(s,c,h){kg(c[li],0,c,h,Ds(s,h,c),sm(h.parent||c[Gi],h,c))}(w,y,M)}function vl(s,c,h){return xf(s,"",c,"",h),vl}function xf(s,c,h,y,w){const M=Zt(),A=ud(M,c,h,y);return A!==Hn&&yo(Ci(),er(),M,s,A,M[li],w,!1),xf}function Ty(s,c,h,y,w,M,A){const L=Zt(),j=$h(L,c,h,y,w,M);return j!==Hn&&yo(Ci(),er(),L,s,j,L[li],A,!1),Ty}function My(s,c,h,y,w,M,A,L,j){const Z=Zt(),se=dd(Z,c,h,y,w,M,A,L);return se!==Hn&&yo(Ci(),er(),Z,s,se,Z[li],j,!1),My}function fd(s,c,h,y,w,M,A,L,j,Z,se){const Ie=Zt(),rt=Gh(Ie,c,h,y,w,M,A,L,j,Z);return rt!==Hn&&yo(Ci(),er(),Ie,s,rt,Ie[li],se,!1),fd}function wf(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt){const xt=Zt(),Ft=Wh(xt,c,h,y,w,M,A,L,j,Z,se,Ie);return Ft!==Hn&&yo(Ci(),er(),xt,s,Ft,xt[li],rt,!1),wf}function bc(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft){const ln=Zt(),vn=yc(ln,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt);return vn!==Hn&&yo(Ci(),er(),ln,s,vn,ln[li],Ft,!1),bc}function bl(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn){const Mn=Zt(),Gn=_l(Mn,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln);return Gn!==Hn&&yo(Ci(),er(),Mn,s,Gn,Mn[li],vn,!1),bl}function md(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn,Gn){const nn=Zt(),mi=_c(nn,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn);return mi!==Hn&&yo(Ci(),er(),nn,s,mi,nn[li],Gn,!1),md}function pa(s,c,h){const y=Zt(),w=Hh(y,c);return w!==Hn&&yo(Ci(),er(),y,s,w,y[li],h,!1),pa}function gd(s,c){return s<<17|c<<2}function Ps(s){return s>>17&32767}function Ef(s){return 2|s}function pu(s){return(131068&s)>>2}function yd(s,c){return-131069&s|c<<2}function Ym(s){return 1|s}function Cf(s,c,h,y,w){const M=s[h+1],A=null===c;let L=y?Ps(M):pu(M),j=!1;for(;0!==L&&(!1===j||A);){const se=s[L+1];Wv(s[L],c)&&(j=!0,s[L+1]=y?Ym(se):Ef(se)),L=y?Ps(se):pu(se)}j&&(s[h+1]=y?Ef(M):Ym(M))}function Wv(s,c){return null===s||null==c||(Array.isArray(s)?s[1]:s)===c||!(!Array.isArray(s)||"string"!=typeof c)&&q(s,c)>=0}const Gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Dy(s){return s.substring(Gr.key,Gr.keyEnd)}function H_(s){return s.substring(Gr.value,Gr.valueEnd)}function Xm(s,c){const h=Gr.textEnd;return h===c?-1:(c=Gr.keyEnd=function qv(s,c,h){for(;c<h&&s.charCodeAt(c)>32;)c++;return c}(s,Gr.key=c,h),xc(s,c,h))}function ky(s,c){const h=Gr.textEnd;let y=Gr.key=xc(s,c,h);return h===y?-1:(y=Gr.keyEnd=function i(s,c,h){let y;for(;c<h&&(45===(y=s.charCodeAt(c))||95===y||(-33&y)>=65&&(-33&y)<=90||y>=48&&y<=57);)c++;return c}(s,y,h),y=e(s,y,h),y=Gr.value=xc(s,y,h),y=Gr.valueEnd=function r(s,c,h){let y=-1,w=-1,M=-1,A=c,L=A;for(;A<h;){const j=s.charCodeAt(A++);if(59===j)return L;34===j||39===j?L=A=u(s,j,A,h):c===A-4&&85===M&&82===w&&76===y&&40===j?L=A=u(s,41,A,h):j>32&&(L=A),M=w,w=y,y=-33&j}return L}(s,y,h),e(s,y,h))}function Qh(s){Gr.key=0,Gr.keyEnd=0,Gr.value=0,Gr.valueEnd=0,Gr.textEnd=s.length}function xc(s,c,h){for(;c<h&&s.charCodeAt(c)<=32;)c++;return c}function e(s,c,h,y){return(c=xc(s,c,h))<h&&c++,c}function u(s,c,h,y){let w=-1,M=h;for(;M<y;){const A=s.charCodeAt(M++);if(A==c&&92!==w)return M;w=92==A&&92===w?0:A}throw new Error}function v(s,c,h){return N(s,c,h,!1),v}function x(s,c){return N(s,c,null,!0),x}function C(s){z(je,I,s,!1)}function I(s,c){for(let h=function Sf(s){return Qh(s),ky(s,xc(s,0,Gr.textEnd))}(c);h>=0;h=ky(c,h))je(s,Dy(c),H_(c))}function D(s){z(_t,R,s,!0)}function R(s,c){for(let h=function uo(s){return Qh(s),Xm(s,xc(s,0,Gr.textEnd))}(c);h>=0;h=Xm(c,h))V(s,Dy(c),!0)}function N(s,c,h,y){const w=Zt(),M=Ci(),A=xa(2);M.firstUpdatePass&&$(M,s,A,y),c!==Hn&&_o(w,A,c)&&St(M,M.data[Yr()],w,w[li],s,w[A+1]=function At(s,c){return null==s||""===s||("string"==typeof c?s+=c:"object"==typeof s&&(s=te(sc(s)))),s}(c,h),y,A)}function z(s,c,h,y){const w=Ci(),M=xa(2);w.firstUpdatePass&&$(w,null,M,y);const A=Zt();if(h!==Hn&&_o(A,M,h)){const L=w.data[Yr()];if(kt(L,y)&&!H(w,M)){let j=y?L.classesWithoutHost:L.stylesWithoutHost;null!==j&&(h=W(j,h||"")),Vm(w,L,A,h,y)}else!function ft(s,c,h,y,w,M,A,L){w===Hn&&(w=Jn);let j=0,Z=0,se=0<w.length?w[0]:null,Ie=0<M.length?M[0]:null;for(;null!==se||null!==Ie;){const rt=j<w.length?w[j+1]:void 0,xt=Z<M.length?M[Z+1]:void 0;let ln,Ft=null;se===Ie?(j+=2,Z+=2,rt!==xt&&(Ft=Ie,ln=xt)):null===Ie||null!==se&&se<Ie?(j+=2,Ft=se):(Z+=2,Ft=Ie,ln=xt),null!==Ft&&St(s,c,h,y,Ft,ln,A,L),se=j<w.length?w[j]:null,Ie=Z<M.length?M[Z]:null}}(w,L,A,A[li],A[M+1],A[M+1]=function Ve(s,c,h){if(null==h||""===h)return Jn;const y=[],w=sc(h);if(Array.isArray(w))for(let M=0;M<w.length;M++)s(y,w[M],!0);else if("object"==typeof w)for(const M in w)w.hasOwnProperty(M)&&s(y,M,w[M]);else"string"==typeof w&&c(y,w);return y}(s,c,h),y,M)}}function H(s,c){return c>=s.expandoStartIndex}function $(s,c,h,y){const w=s.data;if(null===w[h+1]){const M=w[Yr()],A=H(s,h);kt(M,y)&&null===c&&!A&&(c=!1),c=function Q(s,c,h,y){const w=Hf(s);let M=y?c.residualClasses:c.residualStyles;if(null===w)0===(y?c.classBindings:c.styleBindings)&&(h=Ae(h=xe(null,s,c,h,y),c.attrs,y),M=null);else{const A=c.directiveStylingLast;if(-1===A||s[A]!==w)if(h=xe(w,s,c,h,y),null===M){let j=function ae(s,c,h){const y=h?c.classBindings:c.styleBindings;if(0!==pu(y))return s[Ps(y)]}(s,c,y);void 0!==j&&Array.isArray(j)&&(j=xe(null,s,c,j[1],y),j=Ae(j,c.attrs,y),function be(s,c,h,y){s[Ps(h?c.classBindings:c.styleBindings)]=y}(s,c,y,j))}else M=function Re(s,c,h){let y;const w=c.directiveEnd;for(let M=1+c.directiveStylingLast;M<w;M++)y=Ae(y,s[M].hostAttrs,h);return Ae(y,c.attrs,h)}(s,c,y)}return void 0!==M&&(y?c.residualClasses=M:c.residualStyles=M),h}(w,M,c,y),function V_(s,c,h,y,w,M){let A=M?c.classBindings:c.styleBindings,L=Ps(A),j=pu(A);s[y]=h;let se,Z=!1;if(Array.isArray(h)?(se=h[1],(null===se||q(h,se)>0)&&(Z=!0)):se=h,w)if(0!==j){const rt=Ps(s[L+1]);s[y+1]=gd(rt,L),0!==rt&&(s[rt+1]=yd(s[rt+1],y)),s[L+1]=function hu(s,c){return 131071&s|c<<17}(s[L+1],y)}else s[y+1]=gd(L,0),0!==L&&(s[L+1]=yd(s[L+1],y)),L=y;else s[y+1]=gd(j,0),0===L?L=y:s[j+1]=yd(s[j+1],y),j=y;Z&&(s[y+1]=Ef(s[y+1])),Cf(s,se,y,!0),Cf(s,se,y,!1),function U_(s,c,h,y,w){const M=w?s.residualClasses:s.residualStyles;null!=M&&"string"==typeof c&&q(M,c)>=0&&(h[y+1]=Ym(h[y+1]))}(c,se,s,y,M),A=gd(L,j),M?c.classBindings=A:c.styleBindings=A}(w,M,c,h,A,y)}}function xe(s,c,h,y,w){let M=null;const A=h.directiveEnd;let L=h.directiveStylingLast;for(-1===L?L=h.directiveStart:L++;L<A&&(M=c[L],y=Ae(y,M.hostAttrs,w),M!==s);)L++;return null!==s&&(h.directiveStylingLast=L),y}function Ae(s,c,h){const y=h?1:2;let w=-1;if(null!==c)for(let M=0;M<c.length;M++){const A=c[M];"number"==typeof A?w=A:w===y&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),V(s,A,!!h||c[++M]))}return void 0===s?null:s}function je(s,c,h){V(s,c,sc(h))}function _t(s,c,h){const y=String(c);""!==y&&!y.includes(" ")&&V(s,y,h)}function St(s,c,h,y,w,M,A,L){if(!(3&c.type))return;const j=s.data,Z=j[L+1],se=function Zm(s){return 1==(1&s)}(Z)?Ht(j,c,h,w,pu(Z),A):void 0;bt(se)||(bt(M)||function ys(s){return 2==(2&s)}(Z)&&(M=Ht(j,null,h,w,L,A)),function Ag(s,c,h,y,w){if(c)w?s.addClass(h,y):s.removeClass(h,y);else{let M=-1===y.indexOf("-")?void 0:gr.DashCase;null==w?s.removeStyle(h,y,M):("string"==typeof w&&w.endsWith("!important")&&(w=w.slice(0,-10),M|=gr.Important),s.setStyle(h,y,w,M))}}(y,A,Fl(Yr(),h),w,M))}function Ht(s,c,h,y,w,M){const A=null===c;let L;for(;w>0;){const j=s[w],Z=Array.isArray(j),se=Z?j[1]:j,Ie=null===se;let rt=h[w+1];rt===Hn&&(rt=Ie?Jn:void 0);let xt=Ie?U(rt,y):se===y?rt:void 0;if(Z&&!bt(xt)&&(xt=U(j,y)),bt(xt)&&(L=xt,A))return L;const Ft=s[w+1];w=A?Ps(Ft):pu(Ft)}if(null!==c){let j=M?c.residualClasses:c.residualStyles;null!=j&&(L=U(j,y))}return L}function bt(s){return void 0!==s}function kt(s,c){return 0!=(s.flags&(c?8:16))}function Nt(s,c=""){const h=Zt(),y=Ci(),w=s+ei,M=y.firstCreatePass?sa(y,w,1,c,null):y.data[w],A=h[w]=Is(h[li],c);am(y,h,A,M),So(M,!1)}function Gt(s){return Ct("",s,""),Gt}function Ct(s,c,h){const y=Zt(),w=ud(y,s,c,h);return w!==Hn&&Qr(y,Yr(),w),Ct}function an(s,c,h,y,w){const M=Zt(),A=$h(M,s,c,h,y,w);return A!==Hn&&Qr(M,Yr(),A),an}function mn(s,c,h,y,w,M,A){const L=Zt(),j=dd(L,s,c,h,y,w,M,A);return j!==Hn&&Qr(L,Yr(),j),mn}function un(s,c,h,y,w,M,A,L,j){const Z=Zt(),se=Gh(Z,s,c,h,y,w,M,A,L,j);return se!==Hn&&Qr(Z,Yr(),se),un}function Bn(s,c,h,y,w,M,A,L,j,Z,se){const Ie=Zt(),rt=Wh(Ie,s,c,h,y,w,M,A,L,j,Z,se);return rt!==Hn&&Qr(Ie,Yr(),rt),Bn}function Xt(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt){const xt=Zt(),Ft=yc(xt,s,c,h,y,w,M,A,L,j,Z,se,Ie,rt);return Ft!==Hn&&Qr(xt,Yr(),Ft),Xt}function Tn(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft){const ln=Zt(),vn=_l(ln,s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft);return vn!==Hn&&Qr(ln,Yr(),vn),Tn}function On(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn){const Mn=Zt(),Gn=_c(Mn,s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn);return Gn!==Hn&&Qr(Mn,Yr(),Gn),On}function yi(s){const c=Zt(),h=Hh(c,s);return h!==Hn&&Qr(c,Yr(),h),yi}function $n(s,c,h){z(V,R,ud(Zt(),s,c,h),!0)}function kn(s,c,h,y,w){z(V,R,$h(Zt(),s,c,h,y,w),!0)}function Qn(s,c,h,y,w,M,A){z(V,R,dd(Zt(),s,c,h,y,w,M,A),!0)}function wn(s,c,h,y,w,M,A,L,j){z(V,R,Gh(Zt(),s,c,h,y,w,M,A,L,j),!0)}function qn(s,c,h,y,w,M,A,L,j,Z,se){z(V,R,Wh(Zt(),s,c,h,y,w,M,A,L,j,Z,se),!0)}function ji(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt){z(V,R,yc(Zt(),s,c,h,y,w,M,A,L,j,Z,se,Ie,rt),!0)}function fi(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft){z(V,R,_l(Zt(),s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft),!0)}function Oi(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn){z(V,R,_c(Zt(),s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn),!0)}function Vi(s){z(V,R,Hh(Zt(),s),!0)}function ar(s,c,h){C(ud(Zt(),s,c,h))}function yr(s,c,h,y,w){C($h(Zt(),s,c,h,y,w))}function Dr(s,c,h,y,w,M,A){C(dd(Zt(),s,c,h,y,w,M,A))}function Ui(s,c,h,y,w,M,A,L,j){C(Gh(Zt(),s,c,h,y,w,M,A,L,j))}function Lr(s,c,h,y,w,M,A,L,j,Z,se){C(Wh(Zt(),s,c,h,y,w,M,A,L,j,Z,se))}function kr(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt){C(yc(Zt(),s,c,h,y,w,M,A,L,j,Z,se,Ie,rt))}function hr(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft){C(_l(Zt(),s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft))}function Mi(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn){C(_c(Zt(),s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn))}function Ar(s){C(Hh(Zt(),s))}function Hi(s,c,h,y,w){return N(s,ud(Zt(),c,h,y),w,!1),Hi}function vo(s,c,h,y,w,M,A){return N(s,$h(Zt(),c,h,y,w,M),A,!1),vo}function pr(s,c,h,y,w,M,A,L,j){return N(s,dd(Zt(),c,h,y,w,M,A,L),j,!1),pr}function Fr(s,c,h,y,w,M,A,L,j,Z,se){return N(s,Gh(Zt(),c,h,y,w,M,A,L,j,Z),se,!1),Fr}function lr(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt){return N(s,Wh(Zt(),c,h,y,w,M,A,L,j,Z,se,Ie),rt,!1),lr}function fr(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft){return N(s,yc(Zt(),c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt),Ft,!1),fr}function Nr(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn){return N(s,_l(Zt(),c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln),vn,!1),Nr}function Os(s,c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn,Gn){return N(s,_c(Zt(),c,h,y,w,M,A,L,j,Z,se,Ie,rt,xt,Ft,ln,vn,Mn),Gn,!1),Os}function fu(s,c,h){return N(s,Hh(Zt(),c),h,!1),fu}function _d(s,c,h){const y=Zt();return _o(y,zl(),c)&&yo(Ci(),er(),y,s,c,y[li],h,!0),_d}function xl(s,c,h){const y=Zt();if(_o(y,zl(),c)){const M=Ci(),A=er();yo(M,A,y,s,c,Vh(Hf(M.data),A,y),h,!0)}return xl}const wl=void 0;var Zv=["en",[["a","p"],["AM","PM"],wl],[["AM","PM"],wl,wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wl,"{1} 'at' {0}",wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function El(s){const h=Math.floor(Math.abs(s)),y=s.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===y?1:5}];let vd={};function Ay(s,c,h){"string"!=typeof c&&(h=c,c=s[jn.LocaleId]),c=c.toLowerCase().replace(/_/g,"-"),vd[c]=s,h&&(vd[c][jn.ExtraData]=h)}function Tf(s){const c=function mu(s){return s.toLowerCase().replace(/_/g,"-")}(s);let h=Xa(c);if(h)return h;const y=c.split("-")[0];if(h=Xa(y),h)return h;if("en"===y)return Zv;throw new K(701,!1)}function Cl(s){return Tf(s)[jn.CurrencyCode]||null}function Km(s){return Tf(s)[jn.PluralCase]}function Xa(s){return s in vd||(vd[s]=si.ng&&si.ng.common&&si.ng.common.locales&&si.ng.common.locales[s]),vd[s]}function Sl(){vd={}}var jn=(()=>((jn=jn||{})[jn.LocaleId=0]="LocaleId",jn[jn.DayPeriodsFormat=1]="DayPeriodsFormat",jn[jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",jn[jn.DaysFormat=3]="DaysFormat",jn[jn.DaysStandalone=4]="DaysStandalone",jn[jn.MonthsFormat=5]="MonthsFormat",jn[jn.MonthsStandalone=6]="MonthsStandalone",jn[jn.Eras=7]="Eras",jn[jn.FirstDayOfWeek=8]="FirstDayOfWeek",jn[jn.WeekendRange=9]="WeekendRange",jn[jn.DateFormat=10]="DateFormat",jn[jn.TimeFormat=11]="TimeFormat",jn[jn.DateTimeFormat=12]="DateTimeFormat",jn[jn.NumberSymbols=13]="NumberSymbols",jn[jn.NumberFormats=14]="NumberFormats",jn[jn.CurrencyCode=15]="CurrencyCode",jn[jn.CurrencySymbol=16]="CurrencySymbol",jn[jn.CurrencyName=17]="CurrencyName",jn[jn.Currencies=18]="Currencies",jn[jn.Directionality=19]="Directionality",jn[jn.PluralCase=20]="PluralCase",jn[jn.ExtraData=21]="ExtraData",jn))();const Py=["zero","one","two","few","many"],Wr="en-US",gu={marker:"element"},Tl={marker:"ICU"};var pi=(()=>((pi=pi||{})[pi.SHIFT=2]="SHIFT",pi[pi.APPEND_EAGERLY=1]="APPEND_EAGERLY",pi[pi.COMMENT=2]="COMMENT",pi))();let G_=Wr;function Qm(s){(function sn(s,c){null==s&&_n(c,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(G_=s.toLowerCase().replace(/_/g,"-"))}function W_(s,c,h){const y=c.insertBeforeIndex,w=Array.isArray(y)?y[0]:y;return null===w?sr(s,0,h):Hr(h[w])}function bd(s,c,h,y,w){const M=c.insertBeforeIndex;if(Array.isArray(M)){let A=y,L=null;if(3&c.type||(L=A,A=w),null!==A&&-1===c.componentOffset)for(let j=1;j<M.length;j++)Uc(s,A,h[M[j]],L,!1)}}function Yv(s,c){if(s.push(c),s.length>1)for(let h=s.length-2;h>=0;h--){const y=s[h];r1(y)||Pb(y,c)&&null===Ob(y)&&Oy(y,c.index)}}function r1(s){return!(64&s.type)}function Pb(s,c){return r1(c)||s.index>c.index}function Ob(s){const c=s.insertBeforeIndex;return Array.isArray(c)?c[0]:c}function Oy(s,c){const h=s.insertBeforeIndex;Array.isArray(h)?h[0]=c:(ks(W_,bd),s.insertBeforeIndex=c)}function Ry(s,c){const h=s.data[c];return null===h||"string"==typeof h?null:h.hasOwnProperty("currentCaseLViewIndex")?h:h.value}function lw(s,c,h){const y=Mm(s,h,64,null,null);return Yv(c,y),y}function Xv(s,c){const h=c[s.currentCaseLViewIndex];return null===h?h:h<0?~h:h}function Rb(s){return s>>>17}function Lb(s){return(131070&s)>>>1}let Ly=0,Jm=0;function s1(s,c,h,y){const w=h[li];let A,M=null;for(let L=0;L<c.length;L++){const j=c[L];if("string"==typeof j){const Z=c[++L];null===h[Z]&&(h[Z]=Is(w,j))}else if("number"==typeof j)switch(1&j){case 0:const Z=Rb(j);let se,Ie;if(null===M&&(M=Z,A=so(w,y)),Z===M?(se=y,Ie=A):(se=null,Ie=Hr(h[Z])),null!==Ie){const ln=Lb(j);Uc(w,Ie,h[ln],se,!1);const Mn=Ry(s,ln);if(null!==Mn&&"object"==typeof Mn){const Gn=Xv(Mn,h);null!==Gn&&s1(s,Mn.create[Gn],h,h[Mn.anchorIdx])}}break;case 1:const xt=c[++L],Ft=c[++L];Nh(w,Fl(j>>>1,h),null,null,xt,Ft,null)}else switch(j){case Tl:const Z=c[++L],se=c[++L];null===h[se]&&oo(h[se]=es(w,Z),h);break;case gu:const Ie=c[++L],rt=c[++L];null===h[rt]&&oo(h[rt]=Pp(w,Ie,null),h)}}}function Kv(s,c,h,y,w){for(let M=0;M<h.length;M++){const A=h[M],L=h[++M];if(A&w){let j="";for(let Z=M+1;Z<=M+L;Z++){const se=h[Z];if("string"==typeof se)j+=se;else if("number"==typeof se)if(se<0)j+=_e(c[y-se]);else{const Ie=se>>>2;switch(3&se){case 1:const rt=h[++Z],xt=h[++Z],Ft=s.data[Ie];"string"==typeof Ft?Nh(c[li],c[Ie],null,Ft,rt,j,xt):yo(s,Ft,c,rt,j,c[li],xt,!1);break;case 0:const ln=c[Ie];null!==ln&&tc(c[li],ln,j);break;case 2:jb(s,Ry(s,Ie),c,j);break;case 3:q_(s,Ry(s,Ie),y,c)}}}}else{const j=h[M+1];if(j>0&&3==(3&j)){const se=Ry(s,j>>>2);c[se.currentCaseLViewIndex]<0&&q_(s,se,y,c)}}M+=L}}function q_(s,c,h,y){let w=y[c.currentCaseLViewIndex];if(null!==w){let M=Ly;w<0&&(w=y[c.currentCaseLViewIndex]=~w,M=-1),Kv(s,y,c.update[w],h,M)}}function jb(s,c,h,y){const w=function Vb(s,c){let h=s.cases.indexOf(c);if(-1===h)switch(s.type){case 1:{const y=function $_(s,c){const h=Km(c)(parseInt(s,10)),y=Py[h];return void 0!==y?y:"other"}(c,function i1(){return G_}());h=s.cases.indexOf(y),-1===h&&"other"!==y&&(h=s.cases.indexOf("other"));break}case 0:h=s.cases.indexOf("other")}return-1===h?null:h}(c,y);if(Xv(c,h)!==w&&(Qv(s,c,h),h[c.currentCaseLViewIndex]=null===w?null:~w,null!==w)){const A=h[c.anchorIdx];A&&s1(s,c.create[w],h,A)}}function Qv(s,c,h){let y=Xv(c,h);if(null!==y){const w=c.remove[y];for(let M=0;M<w.length;M++){const A=w[M];if(A>0){const L=Fl(A,h);null!==L&&rc(h[li],L)}else Qv(s,Ry(s,~A),h)}}}function a1(){const s=[];let h,y,c=-1;function M(L,j){c=0;const Z=Xv(L,j);y=null!==Z?L.remove[Z]:Jn}function A(){if(c<y.length){const L=y[c++];return L>0?h[L]:(s.push(c,y),M(h[qt].data[~L],h),A())}return 0===s.length?null:(y=s.pop(),c=s.pop(),A())}return function w(L,j){for(h=j;s.length;)s.pop();return M(L.value,j),A}}const xd=/\ufffd(\d+):?\d*\ufffd/gi,Hb=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,hw=/\ufffd(\d+)\ufffd/,Jv=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Fy="\ufffd",pw=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,fw=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,mw=/\uE500/g;function $b(s,c,h,y,w,M,A){const L=Ni(s,y,1,null);let j=L<<pi.SHIFT,Z=$s();c===Z&&(Z=null),null===Z&&(j|=pi.APPEND_EAGERLY),A&&(j|=pi.COMMENT,function Pa(s){void 0===Xd&&(Xd=s())}(a1)),w.push(j,null===M?"":M);const se=Mm(s,L,A?32:1,null===M?"":M,null);Yv(h,se);const Ie=se.index;return So(se,!1),null!==Z&&c!==Z&&function aw(s,c){let h=s.insertBeforeIndex;null===h?(ks(W_,bd),h=s.insertBeforeIndex=[null,c]):(function Ne(s,c,h){s!=c&&_n(h,s,c,"==")}(Array.isArray(h),!0,"Expecting array here"),h.push(c))}(Z,Ie),se}function yw(s,c,h,y,w,M,A){const L=A.match(xd),j=$b(s,c,h,M,y,L?null:A,!1);L&&Ny(w,A,j.index,null,0,null)}function Ny(s,c,h,y,w,M){const A=s.length,L=A+1;s.push(null,null);const j=A+2,Z=c.split(xd);let se=0;for(let Ie=0;Ie<Z.length;Ie++){const rt=Z[Ie];if(1&Ie){const xt=w+parseInt(rt,10);s.push(-1-xt),se|=c1(xt)}else""!==rt&&s.push(rt)}return s.push(h<<2|(y?1:0)),y&&s.push(y,M),s[A]=se,s[L]=s.length-j,se}function Jh(s){let c=0;for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y&&y<0&&c++}return c}function c1(s){return 1<<Math.min(s,31)}function Mf(s){let c,M,h="",y=0,w=!1;for(;null!==(c=pw.exec(s));)w?c[0]===`${Fy}/*${M}${Fy}`&&(y=c.index,w=!1):(h+=s.substring(y,c.index+c[0].length),M=c[1],w=!0);return h+=s.slice(y),h}function u1(s,c,h,y,w,M){let A=0;const L={type:w.type,currentCaseLViewIndex:Ni(s,c,1,null),anchorIdx:M,cases:[],create:[],remove:[],update:[]};(function _u(s,c,h){s.push(c1(c.mainBinding),2,-1-c.mainBinding,h<<2|2)})(h,w,M),function o1(s,c,h){const y=s.data[c];null===y?s.data[c]=h:y.value=h}(s,M,L);const j=w.values;for(let Z=0;Z<j.length;Z++){const se=j[Z],Ie=[];for(let rt=0;rt<se.length;rt++){const xt=se[rt];if("string"!=typeof xt){const Ft=Ie.push(xt)-1;se[rt]=`\x3c!--\ufffd${Ft}\ufffd--\x3e`}}A=d1(s,L,c,h,y,w.cases[Z],se.join(""),Ie)|A}A&&function Yb(s,c,h){s.push(c,1,h<<2|3)}(h,A,M)}function Zb(s){const c=[],h=[];let y=1,w=0;const M=e0(s=s.replace(Jv,function(A,L,j){return y="select"===j?0:1,w=parseInt(L.slice(1),10),""}));for(let A=0;A<M.length;){let L=M[A++].trim();1===y&&(L=L.replace(/\s*(?:=)?(\w+)\s*/,"$1")),L.length&&c.push(L);const j=e0(M[A++]);c.length>h.length&&h.push(j)}return{type:y,mainBinding:w,cases:c,values:h}}function e0(s){if(!s)return[];let c=0;const h=[],y=[],w=/[{}]/g;let M;for(w.lastIndex=0;M=w.exec(s);){const L=M.index;if("}"==M[0]){if(h.pop(),0==h.length){const j=s.substring(c,L);Jv.test(j)?y.push(Zb(j)):y.push(j),c=L+1}}else{if(0==h.length){const j=s.substring(c,L);y.push(j),c=L+1}h.push("{")}}const A=s.substring(c);return y.push(A),y}function d1(s,c,h,y,w,M,A,L){const j=[],Z=[],se=[];c.cases.push(M),c.create.push(j),c.remove.push(Z),c.update.push(se);const rt=dh(lh()).getInertBodyElement(A),xt=Fg(rt)||rt;return xt?h1(s,c,h,y,j,Z,se,xt,w,L,0):0}function h1(s,c,h,y,w,M,A,L,j,Z,se){let Ie=0,rt=L.firstChild;for(;rt;){const xt=Ni(s,h,1,null);switch(rt.nodeType){case Node.ELEMENT_NODE:const Ft=rt,ln=Ft.tagName.toLowerCase();if(Js.hasOwnProperty(ln)){wd(w,gu,ln,j,xt),s.data[xt]=ln;const nn=Ft.attributes;for(let mi=0;mi<nn.length;mi++){const eo=nn.item(mi),Po=eo.name.toLowerCase();eo.value.match(xd)?ao.hasOwnProperty(Po)&&Ny(A,eo.value,xt,eo.name,0,ea[Po]?hh:null):Xb(w,xt,eo)}Ie=h1(s,c,h,y,w,M,A,rt,xt,Z,se+1)|Ie,t0(M,xt,se)}break;case Node.TEXT_NODE:const vn=rt.textContent||"",Mn=vn.match(xd);wd(w,null,Mn?"":vn,j,xt),t0(M,xt,se),Mn&&(Ie=Ny(A,vn,xt,null,0,null)|Ie);break;case Node.COMMENT_NODE:const Gn=hw.exec(rt.textContent||"");if(Gn){const mi=Z[parseInt(Gn[1],10)];wd(w,Tl,"",j,xt),u1(s,h,y,j,mi,xt),If(M,xt,se)}}rt=rt.nextSibling}return Ie}function t0(s,c,h){0===h&&s.push(c)}function If(s,c,h){0===h&&(s.push(~c),s.push(c))}function wd(s,c,h,y,w){null!==c&&s.push(c),s.push(h,w,function Nb(s,c,h){return s|c<<17|h<<1}(0,y,w))}function Xb(s,c,h){s.push(c<<1|1,h.name,h.value)}const p1=0,Kb=/\[(\ufffd.+?\ufffd?)\]/,ep=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Qb=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,tp=/{([A-Z0-9_]+)}/g,f1=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,_s=/\/\*/,np=/\d+\:(\d+)/;function m1(s,c,h=-1){const y=Ci(),w=Zt(),M=ei+s,A=rl(y.consts,c),L=$s();y.firstCreatePass&&function l1(s,c,h,y,w,M){const A=$s(),L=[],j=[],Z=[[]];w=function qb(s,c){if(function Wb(s){return-1===s}(c))return Mf(s);{const h=s.indexOf(`:${c}${Fy}`)+2+c.toString().length,y=s.search(new RegExp(`${Fy}\\/\\*\\d+:${c}${Fy}`));return Mf(s.substring(h,y))}}(w,M);const se=function gw(s){return s.replace(mw," ")}(w).split(fw);for(let Ie=0;Ie<se.length;Ie++){let rt=se[Ie];if(1&Ie){const xt=47===rt.charCodeAt(0),ln=(rt.charCodeAt(xt?1:0),ei+Number.parseInt(rt.substring(xt?2:1)));if(xt)Z.shift(),So($s(),!1);else{const vn=lw(s,Z[0],ln);Z.unshift([]),So(vn,!0)}}else{const xt=e0(rt);for(let Ft=0;Ft<xt.length;Ft++){let ln=xt[Ft];if(1&Ft){const vn=ln;if("object"!=typeof vn)throw new Error(`Unable to parse ICU expression in "${w}" message.`);u1(s,h,j,c,vn,$b(s,A,Z[0],h,L,"",!0).index)}else""!==ln&&yw(s,A,Z[0],L,j,h,ln)}}}s.data[y]={create:L,update:j}}(y,null===L?0:L.index,w,M,A,h);const j=y.data[M],se=om(y,L===w[Gi]?null:L,w);(function zb(s,c,h,y){const w=s[li];for(let M=0;M<c.length;M++){const A=c[M++],L=c[M],Z=(A&pi.APPEND_EAGERLY)===pi.APPEND_EAGERLY,se=A>>>pi.SHIFT;let Ie=s[se];null===Ie&&(Ie=s[se]=(A&pi.COMMENT)===pi.COMMENT?w.createComment(L):Is(w,L)),Z&&null!==h&&Uc(w,h,Ie,y,!1)}})(w,j.create,se,L&&8&L.type?w[L.index]:null),Uf(!0)}function Z_(){Uf(!1)}function n0(s,c,h){m1(s,c,h),Z_()}function r0(s,c){const h=Ci(),y=rl(h.consts,c);!function Gb(s,c,h){const w=jr().index,M=[];if(s.firstCreatePass&&null===s.data[c]){for(let A=0;A<h.length;A+=2){const L=h[A],j=h[A+1];if(""!==j){if(Hb.test(j))throw new Error(`ICU expressions are not supported in attributes. Message: "${j}".`);Ny(M,j,w,L,Jh(M),null)}}s.data[c]=M}}(h,s+ei,y)}function Y_(s){return function Bb(s){s&&(Ly|=1<<Math.min(Jm,31)),Jm++}(_o(Zt(),zl(),s)),Y_}function o0(s){!function cw(s,c,h){if(Jm>0){const y=s.data[h];Kv(s,c,Array.isArray(y)?y:y.update,Es()-Jm-1,Ly)}Ly=0,Jm=0}(Ci(),Zt(),s+ei)}function s0(s,c={}){return function Jb(s,c={}){let h=s;if(Kb.test(s)){const y={},w=[p1];h=h.replace(ep,(M,A,L)=>{const j=A||L,Z=y[j]||[];if(Z.length||(j.split("|").forEach(ln=>{const vn=ln.match(np),Mn=vn?parseInt(vn[1],10):p1,Gn=_s.test(ln);Z.push([Mn,Gn,ln])}),y[j]=Z),!Z.length)throw new Error(`i18n postprocess: unmatched placeholder - ${j}`);const se=w[w.length-1];let Ie=0;for(let ln=0;ln<Z.length;ln++)if(Z[ln][0]===se){Ie=ln;break}const[rt,xt,Ft]=Z[Ie];return xt?w.pop():se!==rt&&w.push(rt),Z.splice(Ie,1),Ft})}return Object.keys(c).length&&(h=h.replace(Qb,(y,w,M,A,L,j)=>c.hasOwnProperty(M)?`${w}${c[M]}${j}`:y),h=h.replace(tp,(y,w)=>c.hasOwnProperty(w)?c[w]:y),h=h.replace(f1,(y,w)=>{if(c.hasOwnProperty(w)){const M=c[w];if(!M.length)throw new Error(`i18n postprocess: unmatched ICU - ${y} with key: ${w}`);return M.shift()}return y})),h}(s,c)}function X_(s,c,h,y,w){if(s=G(s),Array.isArray(s))for(let M=0;M<s.length;M++)X_(s[M],c,h,y,w);else{const M=Ci(),A=Zt();let L=_h(s)?s:G(s.provide),j=p_(s);const Z=jr(),se=1048575&Z.providerIndexes,Ie=Z.directiveStart,rt=Z.providerIndexes>>20;if(_h(s)||!s.multi){const xt=new Xo(j,w,Ua),Ft=K_(L,c,w?se:se+rt,Ie);-1===Ft?(Wd(Rc(Z,A),M,L),eg(M,s,c.length),c.push(L),Z.directiveStart++,Z.directiveEnd++,w&&(Z.providerIndexes+=1048576),h.push(xt),A.push(xt)):(h[Ft]=xt,A[Ft]=xt)}else{const xt=K_(L,c,se+rt,Ie),Ft=K_(L,c,se,se+rt),vn=Ft>=0&&h[Ft];if(w&&!vn||!w&&!(xt>=0&&h[xt])){Wd(Rc(Z,A),M,L);const Mn=function v1(s,c,h,y,w){const M=new Xo(s,h,Ua);return M.multi=[],M.index=c,M.componentProviders=0,a0(M,w,y&&!h),M}(w?_1:y1,h.length,w,y,j);!w&&vn&&(h[Ft].providerFactory=Mn),eg(M,s,c.length,0),c.push(L),Z.directiveStart++,Z.directiveEnd++,w&&(Z.providerIndexes+=1048576),h.push(Mn),A.push(Mn)}else eg(M,s,xt>-1?xt:Ft,a0(h[w?Ft:xt],j,!w&&y));!w&&y&&vn&&h[Ft].componentProviders++}}}function eg(s,c,h,y){const w=_h(c),M=function J0(s){return!!s.useClass}(c);if(w||M){const j=(M?G(c.useClass):c).prototype.ngOnDestroy;if(j){const Z=s.destroyHooks||(s.destroyHooks=[]);if(!w&&c.multi){const se=Z.indexOf(h);-1===se?Z.push(h,[y,j]):Z[se+1].push(y,j)}else Z.push(h,j)}}}function a0(s,c,h){return h&&s.componentProviders++,s.multi.push(c)-1}function K_(s,c,h,y){for(let w=h;w<y;w++)if(c[w]===s)return w;return-1}function y1(s,c,h,y){return l0(this.multi,[])}function _1(s,c,h,y){const w=this.multi;let M;if(this.providerFactory){const A=this.providerFactory.componentProviders,L=ol(h,h[qt],this.providerFactory.index,y);M=L.slice(0,A),l0(w,M);for(let j=A;j<L.length;j++)M.push(L[j])}else M=[],l0(w,M);return M}function l0(s,c){for(let h=0;h<s.length;h++)c.push((0,s[h])());return c}function c0(s,c=[]){return h=>{h.providersResolver=(y,w)=>function g1(s,c,h){const y=Ci();if(y.firstCreatePass){const w=zr(s);X_(h,y.data,y.blueprint,w,!0),X_(c,y.data,y.blueprint,w,!1)}}(y,w?w(s):s,c)}}class ip{}class u0{}function Q_(s,c){return new J_(s,c??null)}const b1=Q_;class J_ extends ip{constructor(c,h){super(),this._parent=h,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ru(this);const y=vr(c);this._bootstrapComponents=ja(y.bootstrap),this._r3Injector=Mh(c,h,[{provide:ip,useValue:this},{provide:Gp,useValue:this.componentFactoryResolver}],te(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class By extends u0{constructor(c){super(),this.moduleType=c}create(c){return new J_(this.moduleType,c)}}class d0 extends ip{constructor(c,h,y){super(),this.componentFactoryResolver=new ru(this),this.instance=null;const w=new h_([...c,{provide:ip,useValue:this},{provide:Gp,useValue:this.componentFactoryResolver}],h||lo(),y,new Set(["environment"]));this.injector=w,w.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function tg(s,c,h=null){return new d0(s,c,h).injector}let x1=(()=>{class s{constructor(h){this._injector=h,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(h){if(!h.standalone)return null;if(!this.cachedInjectors.has(h.id)){const y=td(0,h.type),w=y.length>0?tg([y],this._injector,`Standalone[${h.type.name}]`):null;this.cachedInjectors.set(h.id,w)}return this.cachedInjectors.get(h.id)}ngOnDestroy(){try{for(const h of this.cachedInjectors.values())null!==h&&h.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=hn({token:s,providedIn:"environment",factory:()=>new s(Vt(Xi))}),s})();function h0(s){s.getStandaloneInjector=c=>c.get(x1).getOrCreateStandaloneInjector(s)}function ev(s){const c=Bo(s);if(null===c)return null;if(void 0===c.component){const h=c.lView;if(null===h)return null;c.component=function Mg(s,c){const h=c[qt].data[s],{directiveStart:y,componentOffset:w}=h;return w>-1?c[y+w]:null}(c.nodeIndex,h)}return c.component}function vs(s){!function xw(s){if(typeof Element<"u"&&!(s instanceof Element))throw new Error("Expecting instance of DOM Element")}(s);const c=Bo(s),h=c?c.lView:null;return null===h?null:h[nr]}function vu(s){const c=Bo(s);let y,h=c?c.lView:null;if(null===h)return null;for(;2===h[qt].type&&(y=ec(h));)h=y;return 256&h[cn]?null:h[nr]}function p0(s){const c=qu(s);return null!==c?[Pr(c)]:[]}function ex(s){const c=Bo(s),h=c?c.lView:null;return null===h?Jc.NULL:new Mr(h[qt].data[c.nodeIndex],h)}function Df(s){if(s instanceof Text)return[];const c=Bo(s),h=c?c.lView:null;if(null===h)return[];const w=c.nodeIndex;return h[qt]?.data[w]?(void 0===c.directives&&(c.directives=Tg(w,h)),null===c.directives?[]:[...c.directives]):[]}function ng(s){const{constructor:c}=s;if(!c)throw new Error("Unable to find the instance constructor");const h=ui(c);if(h)return{inputs:h.inputs,outputs:h.outputs,encapsulation:h.encapsulation,changeDetection:h.onPush?Ii.OnPush:Ii.Default};const y=xi(c);return y?{inputs:y.inputs,outputs:y.outputs}:null}function ig(s){return Bo(s).native}function tv(s){const c=Bo(s),h=null===c?null:c.lView;if(null===h)return[];const w=h[Ns],M=h[qt].cleanup,A=[];if(M&&w)for(let L=0;L<M.length;){const j=M[L++],Z=M[L++];if("string"==typeof j){const se=j,Ie=Hr(h[Z]),rt=w[M[L++]],xt=M[L++];s==Ie&&A.push({element:s,name:se,callback:rt,useCapture:"boolean"==typeof xt&&xt,type:"boolean"==typeof xt||xt>=0?"dom":"output"})}}return A.sort(tx),A}function tx(s,c){return s.name==c.name?0:s.name<c.name?-1:1}function bw(s){return void 0!==s.type&&void 0!==s.declaredInputs&&void 0!==s.findHostDirectiveDefs}function nx(s,c,h,y){return Ji(()=>{const w=s;null!==c&&(w.hasOwnProperty("decorators")&&void 0!==w.decorators?w.decorators.push(...c):w.decorators=c),null!==h&&(w.ctorParameters=h),null!==y&&(w.propDecorators=w.hasOwnProperty("propDecorators")&&void 0!==w.propDecorators?{...w.propDecorators,...y}:y)})}function ix(s,c,h){const y=To()+s,w=Zt();return w[y]===Hn?ms(w,y,h?c.call(h):c()):du(w,y)}function rx(s,c,h,y){return kf(Zt(),To(),s,c,h,y)}function ox(s,c,h,y,w){return og(Zt(),To(),s,c,h,y,w)}function w1(s,c,h,y,w,M){return iv(Zt(),To(),s,c,h,y,w,M)}function m0(s,c,h,y,w,M,A){return T1(Zt(),To(),s,c,h,y,w,M,A)}function E1(s,c,h,y,w,M,A,L){const j=To()+s,Z=Zt(),se=ua(Z,j,h,y,w,M);return _o(Z,j+4,A)||se?ms(Z,j+5,L?c.call(L,h,y,w,M,A):c(h,y,w,M,A)):du(Z,j+5)}function C1(s,c,h,y,w,M,A,L,j){const Z=To()+s,se=Zt(),Ie=ua(se,Z,h,y,w,M);return qa(se,Z+4,A,L)||Ie?ms(se,Z+6,j?c.call(j,h,y,w,M,A,L):c(h,y,w,M,A,L)):du(se,Z+6)}function S1(s,c,h,y,w,M,A,L,j,Z){const se=To()+s,Ie=Zt();let rt=ua(Ie,se,h,y,w,M);return yl(Ie,se+4,A,L,j)||rt?ms(Ie,se+7,Z?c.call(Z,h,y,w,M,A,L,j):c(h,y,w,M,A,L,j)):du(Ie,se+7)}function nv(s,c,h,y,w,M,A,L,j,Z,se){const Ie=To()+s,rt=Zt(),xt=ua(rt,Ie,h,y,w,M);return ua(rt,Ie+4,A,L,j,Z)||xt?ms(rt,Ie+8,se?c.call(se,h,y,w,M,A,L,j,Z):c(h,y,w,M,A,L,j,Z)):du(rt,Ie+8)}function rg(s,c,h,y){return rv(Zt(),To(),s,c,h,y)}function rp(s,c){const h=s[c];return h===Hn?void 0:h}function kf(s,c,h,y,w,M){const A=c+h;return _o(s,A,w)?ms(s,A+1,M?y.call(M,w):y(w)):rp(s,A+1)}function og(s,c,h,y,w,M,A){const L=c+h;return qa(s,L,w,M)?ms(s,L+2,A?y.call(A,w,M):y(w,M)):rp(s,L+2)}function iv(s,c,h,y,w,M,A,L){const j=c+h;return yl(s,j,w,M,A)?ms(s,j+3,L?y.call(L,w,M,A):y(w,M,A)):rp(s,j+3)}function T1(s,c,h,y,w,M,A,L,j){const Z=c+h;return ua(s,Z,w,M,A,L)?ms(s,Z+4,j?y.call(j,w,M,A,L):y(w,M,A,L)):rp(s,Z+4)}function rv(s,c,h,y,w,M){let A=c+h,L=!1;for(let j=0;j<w.length;j++)_o(s,A++,w[j])&&(L=!0);return L?ms(s,A,y.apply(M,w)):rp(s,A)}function M1(s,c){const h=Ci();let y;const w=s+ei;h.firstCreatePass?(y=function ov(s,c){if(c)for(let h=c.length-1;h>=0;h--){const y=c[h];if(s===y.name)return y}}(c,h.pipeRegistry),h.data[w]=y,y.onDestroy&&(h.destroyHooks??(h.destroyHooks=[])).push(w,y.onDestroy)):y=h.data[w];const M=y.factory||(y.factory=Vs(y.type)),A=_r(Ua);try{const L=Ys(!1),j=M();return Ys(L),pd(h,Zt(),w,j),j}finally{_r(A)}}function g0(s,c,h){const y=s+ei,w=Zt(),M=Nl(w,y);return zy(w,y)?kf(w,To(),c,M.transform,h,M):M.transform(h)}function y0(s,c,h,y){const w=s+ei,M=Zt(),A=Nl(M,w);return zy(M,w)?og(M,To(),c,A.transform,h,y,A):A.transform(h,y)}function sv(s,c,h,y,w){const M=s+ei,A=Zt(),L=Nl(A,M);return zy(A,M)?iv(A,To(),c,L.transform,h,y,w,L):L.transform(h,y,w)}function ax(s,c,h,y,w,M){const A=s+ei,L=Zt(),j=Nl(L,A);return zy(L,A)?T1(L,To(),c,j.transform,h,y,w,M,j):j.transform(h,y,w,M)}function lx(s,c,h){const y=s+ei,w=Zt(),M=Nl(w,y);return zy(w,y)?rv(w,To(),c,M.transform,h,M):M.transform.apply(M,h)}function zy(s,c){return s[qt].data[c].pure}function op(s){return c=>{setTimeout(s,void 0,c)}}const Ka=class ww extends t.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,h,y){let w=c,M=h||(()=>null),A=y;if(c&&"object"==typeof c){const j=c;w=j.next?.bind(j),M=j.error?.bind(j),A=j.complete?.bind(j)}this.__isAsync&&(M=op(M),w&&(w=op(w)),A&&(A=op(A)));const L=super.subscribe({next:w,error:M,complete:A});return c instanceof en.w0&&c.add(L),L}};function av(){return this._results[Symbol.iterator]()}class sp{get changes(){return this._changes||(this._changes=new Ka)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=sp.prototype;h[Symbol.iterator]||(h[Symbol.iterator]=av)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,h){return this._results.reduce(c,h)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,h){const y=this;y.dirty=!1;const w=g(c);(this._changesDetected=!function zc(s,c,h){if(s.length!==c.length)return!1;for(let y=0;y<s.length;y++){let w=s[y],M=c[y];if(h&&(w=h(w),M=h(M)),M!==w)return!1}return!0}(y._results,w,h))&&(y._results=w,y.length=w.length,y.last=w[this.length-1],y.first=w[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ap=(()=>{class s{}return s.__NG_ELEMENT_ID__=_0,s})();const lv=ap,cx=class extends lv{constructor(c,h,y){super(),this._declarationLView=c,this._declarationTContainer=h,this.elementRef=y}createEmbeddedView(c,h){const y=this._declarationTContainer.tView,w=Ph(this._declarationLView,y,c,16,null,y.declTNode,null,null,null,null,h||null);w[va]=this._declarationLView[this._declarationTContainer.index];const A=this._declarationLView[Zo];return null!==A&&(w[Zo]=A.createEmbeddedView(y)),Oh(y,w,c),new Ga(w)}};function _0(){return Af(jr(),Zt())}function Af(s,c){return 4&s.type?new cx(c,s,vh(s,c)):null}let cv=(()=>{class s{}return s.__NG_ELEMENT_ID__=ux,s})();function ux(){return dx(jr(),Zt())}const I1=cv,D1=class extends I1{constructor(c,h,y){super(),this._lContainer=c,this._hostTNode=h,this._hostLView=y}get element(){return vh(this._hostTNode,this._hostLView)}get injector(){return new Mr(this._hostTNode,this._hostLView)}get parentInjector(){const c=wa(this._hostTNode,this._hostLView);if(Pc(c)){const h=Zl(c,this._hostLView),y=Wl(c);return new Mr(h[qt].data[y+8],h)}return new Mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const h=v0(this._lContainer);return null!==h&&h[c]||null}get length(){return this._lContainer.length-wi}createEmbeddedView(c,h,y){let w,M;"number"==typeof y?w=y:null!=y&&(w=y.index,M=y.injector);const A=c.createEmbeddedView(h||{},M);return this.insert(A,w),A}createComponent(c,h,y,w,M){const A=c&&!sl(c);let L;if(A)L=h;else{const Ie=h||{};L=Ie.index,y=Ie.injector,w=Ie.projectableNodes,M=Ie.environmentInjector||Ie.ngModuleRef}const j=A?c:new ou(ui(c)),Z=y||this.parentInjector;if(!M&&null==j.ngModule){const rt=(A?Z:this.parentInjector).get(Xi,null);rt&&(M=rt)}const se=j.create(Z,w,void 0,M);return this.insert(se.hostView,L),se}insert(c,h){const y=c._lView,w=y[qt];if(function _p(s){return no(s[Ai])}(y)){const se=this.indexOf(c);if(-1!==se)this.detach(se);else{const Ie=y[Ai],rt=new D1(Ie,Ie[Gi],Ie[Ai]);rt.detach(rt.indexOf(c))}}const M=this._adjustIndex(h),A=this._lContainer;!function nm(s,c,h,y){const w=wi+y,M=h.length;y>0&&(h[w-1][Sr]=c),y<M-wi?(c[Sr]=h[w],f(h,wi+y,c)):(h.push(c),c[Sr]=null),c[Ai]=h;const A=c[va];null!==A&&h!==A&&function im(s,c){const h=s[js];c[to]!==c[Ai][Ai][to]&&(s[wo]=!0),null===h?s[js]=[c]:h.push(c)}(A,c);const L=c[Zo];null!==L&&L.insertView(s),c[cn]|=64}(w,y,A,M);const L=cm(M,A),j=y[li],Z=so(j,A[Eo]);return null!==Z&&function Qd(s,c,h,y,w,M){y[on]=w,y[Gi]=c,rh(s,y,h,1,w,M)}(w,A[Gi],j,y,Z,L),c.attachToViewContainerRef(),f(b0(A),M,c),c}move(c,h){return this.insert(c,h)}indexOf(c){const h=v0(this._lContainer);return null!==h?h.indexOf(c):-1}remove(c){const h=this._adjustIndex(c,-1),y=Dg(this._lContainer,h);y&&(b(b0(this._lContainer),h),rm(y[qt],y))}detach(c){const h=this._adjustIndex(c,-1),y=Dg(this._lContainer,h);return y&&null!=b(b0(this._lContainer),h)?new Ga(y):null}_adjustIndex(c,h=0){return c??this.length+h}};function v0(s){return s[Iu]}function b0(s){return s[Iu]||(s[Iu]=[])}function dx(s,c){let h;const y=c[s.index];if(no(y))h=y;else{let w;if(8&s.type)w=Hr(y);else{const M=c[li];w=M.createComment("");const A=Lo(s,c);Uc(M,so(M,A),w,function Qs(s,c){return s.nextSibling(c)}(M,A),!1)}c[s.index]=h=Am(y,c,w,s),zh(c,h)}return new D1(h,s,c)}class x0{constructor(c){this.queryList=c,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class jy{constructor(c=[]){this.queries=c}createEmbeddedView(c){const h=c.queries;if(null!==h){const y=null!==c.contentQueries?c.contentQueries[0]:h.length,w=[];for(let M=0;M<y;M++){const A=h.getByIndex(M);w.push(this.queries[A.indexInDeclarationView].clone())}return new jy(w)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let h=0;h<this.queries.length;h++)null!==yx(c,h).matches&&this.queries[h].setDirty()}}class hx{constructor(c,h,y=null){this.predicate=c,this.flags=h,this.read=y}}class k1{constructor(c=[]){this.queries=c}elementStart(c,h){for(let y=0;y<this.queries.length;y++)this.queries[y].elementStart(c,h)}elementEnd(c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(c)}embeddedTView(c){let h=null;for(let y=0;y<this.length;y++){const w=null!==h?h.length:0,M=this.getByIndex(y).embeddedTView(c,w);M&&(M.indexInDeclarationView=y,null!==h?h.push(M):h=[M])}return null!==h?new k1(h):null}template(c,h){for(let y=0;y<this.queries.length;y++)this.queries[y].template(c,h)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class Vy{constructor(c,h=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(c,h){this.isApplyingToNode(h)&&this.matchTNode(c,h)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,h){this.elementStart(c,h)}embeddedTView(c,h){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,h),new Vy(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let y=c.parent;for(;null!==y&&8&y.type&&y.index!==h;)y=y.parent;return h===(null!==y?y.index:-1)}return this._appliesToNextNode}matchTNode(c,h){const y=this.metadata.predicate;if(Array.isArray(y))for(let w=0;w<y.length;w++){const M=y[w];this.matchTNodeWithReadOption(c,h,px(h,M)),this.matchTNodeWithReadOption(c,h,$u(h,c,M,!1,!1))}else y===ap?4&h.type&&this.matchTNodeWithReadOption(c,h,-1):this.matchTNodeWithReadOption(c,h,$u(h,c,y,!1,!1))}matchTNodeWithReadOption(c,h,y){if(null!==y){const w=this.metadata.read;if(null!==w)if(w===Na||w===cv||w===ap&&4&h.type)this.addMatch(h.index,-2);else{const M=$u(h,c,w,!1,!1);null!==M&&this.addMatch(h.index,M)}else this.addMatch(h.index,y)}}addMatch(c,h){null===this.matches?this.matches=[c,h]:this.matches.push(c,h)}}function px(s,c){const h=s.localNames;if(null!==h)for(let y=0;y<h.length;y+=2)if(h[y]===c)return h[y+1];return null}function w0(s,c,h,y){return-1===h?function A1(s,c){return 11&s.type?vh(s,c):4&s.type?Af(s,c):null}(c,s):-2===h?function fx(s,c,h){return h===Na?vh(c,s):h===ap?Af(c,s):h===cv?dx(c,s):void 0}(s,c,y):ol(s,s[qt],h,c)}function mx(s,c,h,y){const w=c[Zo].queries[y];if(null===w.matches){const M=s.data,A=h.matches,L=[];for(let j=0;j<A.length;j+=2){const Z=A[j];L.push(Z<0?null:w0(c,M[Z],A[j+1],h.metadata.read))}w.matches=L}return w.matches}function E0(s,c,h,y){const w=s.queries.getByIndex(h),M=w.matches;if(null!==M){const A=mx(s,c,w,h);for(let L=0;L<M.length;L+=2){const j=M[L];if(j>0)y.push(A[L/2]);else{const Z=M[L+1],se=c[-j];for(let Ie=wi;Ie<se.length;Ie++){const rt=se[Ie];rt[va]===rt[Ai]&&E0(rt[qt],rt,Z,y)}if(null!==se[js]){const Ie=se[js];for(let rt=0;rt<Ie.length;rt++){const xt=Ie[rt];E0(xt[qt],xt,Z,y)}}}}}return y}function sg(s){const c=Zt(),h=Ci(),y=gg();$f(y+1);const w=yx(h,y);if(s.dirty&&function ug(s){return 4==(4&s[cn])}(c)===(2==(2&w.metadata.flags))){if(null===w.matches)s.reset([]);else{const M=w.crossesNgTemplate?E0(h,c,y,[]):mx(h,c,w,y);s.reset(M,Wp),s.notifyOnChanges()}return!0}return!1}function Ed(s,c,h){const y=Ci();y.firstCreatePass&&(O1(y,new hx(s,c,h),-1),2==(2&c)&&(y.staticViewQueries=!0)),gx(y,Zt(),c)}function C0(s,c,h,y){const w=Ci();if(w.firstCreatePass){const M=jr();O1(w,new hx(c,h,y),M.index),function R1(s,c){const h=s.contentQueries||(s.contentQueries=[]);c!==(h.length?h[h.length-1]:-1)&&h.push(s.queries.length-1,c)}(w,s),2==(2&h)&&(w.staticContentQueries=!0)}gx(w,Zt(),h)}function S0(){return function P1(s,c){return s[Zo].queries[c].queryList}(Zt(),gg())}function gx(s,c,h){const y=new sp(4==(4&h));$a(s,c,y,y.destroy),null===c[Zo]&&(c[Zo]=new jy),c[Zo].queries.push(new x0(y))}function O1(s,c,h){null===s.queries&&(s.queries=new k1),s.queries.track(new Vy(c,h))}function yx(s,c){return s.queries.getByIndex(c)}function _x(s,c){return Af(s,c)}const fa=(()=>({\u0275\u0275attribute:zm,\u0275\u0275attributeInterpolate1:yf,\u0275\u0275attributeInterpolate2:qh,\u0275\u0275attributeInterpolate3:hd,\u0275\u0275attributeInterpolate4:As,\u0275\u0275attributeInterpolate5:_y,\u0275\u0275attributeInterpolate6:_f,\u0275\u0275attributeInterpolate7:jm,\u0275\u0275attributeInterpolate8:Zh,\u0275\u0275attributeInterpolateV:Yh,\u0275\u0275defineComponent:wu,\u0275\u0275defineDirective:Cu,\u0275\u0275defineInjectable:hn,\u0275\u0275defineInjector:In,\u0275\u0275defineNgModule:kl,\u0275\u0275definePipe:Tt,\u0275\u0275directiveInject:Ua,\u0275\u0275getInheritedFactory:Mp,\u0275\u0275inject:Vt,\u0275\u0275injectAttribute:Gu,\u0275\u0275invalidFactory:Ah,\u0275\u0275invalidFactoryDep:$t,\u0275\u0275templateRefExtractor:_x,\u0275\u0275resetView:cs,\u0275\u0275HostDirectivesFeature:lu,\u0275\u0275NgOnChangesFeature:Ll,\u0275\u0275ProvidersFeature:c0,\u0275\u0275CopyDefinitionFeature:F_,\u0275\u0275InheritDefinitionFeature:Wo,\u0275\u0275StandaloneFeature:h0,\u0275\u0275nextContext:qm,\u0275\u0275namespaceHTML:Ul,\u0275\u0275namespaceMathML:Nu,\u0275\u0275namespaceSVG:Tc,\u0275\u0275enableBindings:Ru,\u0275\u0275disableBindings:Bl,\u0275\u0275elementStart:bf,\u0275\u0275elementEnd:Um,\u0275\u0275element:Hm,\u0275\u0275elementContainerStart:gs,\u0275\u0275elementContainerEnd:Ya,\u0275\u0275elementContainer:ha,\u0275\u0275pureFunction0:ix,\u0275\u0275pureFunction1:rx,\u0275\u0275pureFunction2:ox,\u0275\u0275pureFunction3:w1,\u0275\u0275pureFunction4:m0,\u0275\u0275pureFunction5:E1,\u0275\u0275pureFunction6:C1,\u0275\u0275pureFunction7:S1,\u0275\u0275pureFunction8:nv,\u0275\u0275pureFunctionV:rg,\u0275\u0275getCurrentView:vc,\u0275\u0275restoreView:bp,\u0275\u0275listener:$m,\u0275\u0275projection:Sy,\u0275\u0275syntheticHostProperty:xl,\u0275\u0275syntheticHostListener:Kh,\u0275\u0275pipeBind1:g0,\u0275\u0275pipeBind2:y0,\u0275\u0275pipeBind3:sv,\u0275\u0275pipeBind4:ax,\u0275\u0275pipeBindV:lx,\u0275\u0275projectionDef:Cy,\u0275\u0275hostProperty:_d,\u0275\u0275property:Za,\u0275\u0275propertyInterpolate:vl,\u0275\u0275propertyInterpolate1:xf,\u0275\u0275propertyInterpolate2:Ty,\u0275\u0275propertyInterpolate3:My,\u0275\u0275propertyInterpolate4:fd,\u0275\u0275propertyInterpolate5:wf,\u0275\u0275propertyInterpolate6:bc,\u0275\u0275propertyInterpolate7:bl,\u0275\u0275propertyInterpolate8:md,\u0275\u0275propertyInterpolateV:pa,\u0275\u0275pipe:M1,\u0275\u0275queryRefresh:sg,\u0275\u0275viewQuery:Ed,\u0275\u0275loadQuery:S0,\u0275\u0275contentQuery:C0,\u0275\u0275reference:by,\u0275\u0275classMap:D,\u0275\u0275classMapInterpolate1:$n,\u0275\u0275classMapInterpolate2:kn,\u0275\u0275classMapInterpolate3:Qn,\u0275\u0275classMapInterpolate4:wn,\u0275\u0275classMapInterpolate5:qn,\u0275\u0275classMapInterpolate6:ji,\u0275\u0275classMapInterpolate7:fi,\u0275\u0275classMapInterpolate8:Oi,\u0275\u0275classMapInterpolateV:Vi,\u0275\u0275styleMap:C,\u0275\u0275styleMapInterpolate1:ar,\u0275\u0275styleMapInterpolate2:yr,\u0275\u0275styleMapInterpolate3:Dr,\u0275\u0275styleMapInterpolate4:Ui,\u0275\u0275styleMapInterpolate5:Lr,\u0275\u0275styleMapInterpolate6:kr,\u0275\u0275styleMapInterpolate7:hr,\u0275\u0275styleMapInterpolate8:Mi,\u0275\u0275styleMapInterpolateV:Ar,\u0275\u0275styleProp:v,\u0275\u0275stylePropInterpolate1:Hi,\u0275\u0275stylePropInterpolate2:vo,\u0275\u0275stylePropInterpolate3:pr,\u0275\u0275stylePropInterpolate4:Fr,\u0275\u0275stylePropInterpolate5:lr,\u0275\u0275stylePropInterpolate6:fr,\u0275\u0275stylePropInterpolate7:Nr,\u0275\u0275stylePropInterpolate8:Os,\u0275\u0275stylePropInterpolateV:fu,\u0275\u0275classProp:x,\u0275\u0275advance:hc,\u0275\u0275template:vf,\u0275\u0275text:Nt,\u0275\u0275textInterpolate:Gt,\u0275\u0275textInterpolate1:Ct,\u0275\u0275textInterpolate2:an,\u0275\u0275textInterpolate3:mn,\u0275\u0275textInterpolate4:un,\u0275\u0275textInterpolate5:Bn,\u0275\u0275textInterpolate6:Xt,\u0275\u0275textInterpolate7:Tn,\u0275\u0275textInterpolate8:On,\u0275\u0275textInterpolateV:yi,\u0275\u0275i18n:n0,\u0275\u0275i18nAttributes:r0,\u0275\u0275i18nExp:Y_,\u0275\u0275i18nStart:m1,\u0275\u0275i18nEnd:Z_,\u0275\u0275i18nApply:o0,\u0275\u0275i18nPostprocess:s0,\u0275\u0275resolveWindow:za,\u0275\u0275resolveDocument:mo,\u0275\u0275resolveBody:Yp,\u0275\u0275setComponentScope:ws,\u0275\u0275setNgModuleScope:_a,\u0275\u0275registerNgModuleType:Bi,\u0275\u0275sanitizeHtml:a_,\u0275\u0275sanitizeStyle:La,\u0275\u0275sanitizeResourceUrl:fh,\u0275\u0275sanitizeScript:Up,\u0275\u0275sanitizeUrl:ia,\u0275\u0275sanitizeUrlOrResourceUrl:zg,\u0275\u0275trustConstantHtml:mh,\u0275\u0275trustConstantResourceUrl:Bg,\u0275\u0275validateIframeAttribute:hs,forwardRef:ne,resolveForwardRef:G}))();let Uy=null;function bx(){Uy=null}function cp(s){return!!vr(s)}const Hy=[];let M0=!1;function wx(){if(!M0){M0=!0;try{for(let s=Hy.length-1;s>=0;s--){const{moduleType:c,ngModule:h}=Hy[s];h.declarations&&h.declarations.every(I0)&&(Hy.splice(s,1),O0(c,h))}}finally{M0=!1}}}function I0(s){return Array.isArray(s)?s.every(I0):!!G(s)}function F1(s,c={}){D0(s,c),void 0!==c.id&&Bi(s,c.id),function T0(s,c){Hy.push({moduleType:s,ngModule:c})}(s,c)}function D0(s,c,h=!1){const y=g(c.declarations||Jn);let w=null;Object.defineProperty(s,Ti,{configurable:!0,get:()=>(null===w&&(w=Vr().compileNgModule(fa,`ng:///${s.name}/\u0275mod.js`,{type:s,bootstrap:g(c.bootstrap||Jn).map(G),declarations:y.map(G),imports:g(c.imports||Jn).map(G).map(j1),exports:g(c.exports||Jn).map(G).map(j1),schemas:c.schemas?g(c.schemas):null,id:c.id||null}),w.schemas||(w.schemas=[])),w)});let M=null;Object.defineProperty(s,xs,{get:()=>{if(null===M){const L=Vr();M=L.compileFactory(fa,`ng:///${s.name}/\u0275fac.js`,{name:s.name,type:s,deps:Dt(s),target:L.FactoryTarget.NgModule,typeArgumentCount:0})}return M},configurable:!1});let A=null;Object.defineProperty(s,Si,{get:()=>{if(null===A){const L={name:s.name,type:s,providers:c.providers||Jn,imports:[(c.imports||Jn).map(G),(c.exports||Jn).map(G)]};A=Vr().compileInjector(fa,`ng:///${s.name}/\u0275inj.js`,L)}return A},configurable:!1})}let $y=new WeakMap,A0=new WeakMap;function P0(){$y=new WeakMap,A0=new WeakMap,Hy.length=0}function O0(s,c){const h=g(c.declarations||Jn),y=Cd(s);h.forEach(w=>{(w=G(w)).hasOwnProperty(bs)?R0(ui(w),y):!w.hasOwnProperty(Dd)&&!w.hasOwnProperty(Dl)&&(w.ngSelectorScope=s)})}function R0(s,c){s.directiveDefs=()=>Array.from(c.compilation.directives).map(h=>h.hasOwnProperty(bs)?ui(h):xi(h)).filter(h=>!!h),s.pipeDefs=()=>Array.from(c.compilation.pipes).map(h=>ki(h)),s.schemas=c.schemas,s.tView=null}function Cd(s){if(cp(s))return function z1(s){const c=vr(s,!0);if(null!==c.transitiveCompileScopes)return c.transitiveCompileScopes;const h={schemas:c.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return ja(c.imports).forEach(y=>{const w=Cd(y);w.exported.directives.forEach(M=>h.compilation.directives.add(M)),w.exported.pipes.forEach(M=>h.compilation.pipes.add(M))}),ja(c.declarations).forEach(y=>{ki(y)?h.compilation.pipes.add(y):h.compilation.directives.add(y)}),ja(c.exports).forEach(y=>{const w=y;if(cp(w)){const M=Cd(w);M.exported.directives.forEach(A=>{h.compilation.directives.add(A),h.exported.directives.add(A)}),M.exported.pipes.forEach(A=>{h.compilation.pipes.add(A),h.exported.pipes.add(A)})}else ki(w)?h.exported.pipes.add(w):h.exported.directives.add(w)}),c.transitiveCompileScopes=h,h}(s);if(Al(s)){if(null!==(ui(s)||xi(s)))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set([s]),pipes:new Set}};if(null!==ki(s))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set([s])}}}throw new Error(`${s.name} does not have a module def (\u0275mod property)`)}function j1(s){return function lp(s){return void 0!==s.ngModule}(s)?s.ngModule:s}let dv=0;function V1(s,c){let h=null;(function Lt(s,c){En(c)&&(Mt.set(s,c),jt.add(s))})(s,c),H1(s,c),Object.defineProperty(s,bs,{get:()=>{if(null===h){const y=Vr();if(En(c)){const Z=[`Component '${s.name}' is not resolved:`];throw c.templateUrl&&Z.push(` - templateUrl: ${c.templateUrl}`),c.styleUrls&&c.styleUrls.length&&Z.push(` - styleUrls: ${JSON.stringify(c.styleUrls)}`),Z.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(Z.join("\n"))}const w=function L1(){return Uy}();let M=c.preserveWhitespaces;void 0===M&&(M=null!==w&&void 0!==w.preserveWhitespaces&&w.preserveWhitespaces);let A=c.encapsulation;void 0===A&&(A=null!==w&&void 0!==w.defaultEncapsulation?w.defaultEncapsulation:qr.Emulated);const L=c.templateUrl||`ng:///${s.name}/template.html`,j={...hv(s,c),typeSourceSpan:y.createParseSourceSpan("Component",s.name,L),template:c.template||"",preserveWhitespaces:M,styles:c.styles||Jn,animations:c.animations,declarations:[],changeDetection:c.changeDetection,encapsulation:A,interpolation:c.interpolation,viewProviders:c.viewProviders||null};dv++;try{if(j.usesInheritance&&pv(s),h=y.compileComponent(fa,L,j),c.standalone){const Z=g(c.imports||Jn),{directiveDefs:se,pipeDefs:Ie}=function L0(s,c){let h=null,y=null;return{directiveDefs:()=>{if(null===h){h=[ui(s)];const A=new Set;for(const L of c){const j=G(L);if(!A.has(j))if(A.add(j),vr(j)){const Z=Cd(j);for(const se of Z.exported.directives){const Ie=ui(se)||xi(se);Ie&&!A.has(se)&&(A.add(se),h.push(Ie))}}else{const Z=ui(j)||xi(j);Z&&h.push(Z)}}}return h},pipeDefs:()=>{if(null===y){y=[];const A=new Set;for(const L of c){const j=G(L);if(!A.has(j))if(A.add(j),vr(j)){const Z=Cd(j);for(const se of Z.exported.pipes){const Ie=ki(se);Ie&&!A.has(se)&&(A.add(se),y.push(Ie))}}else{const Z=ki(j);Z&&y.push(Z)}}}return y}}}(s,Z);h.directiveDefs=se,h.pipeDefs=Ie,h.dependencies=()=>Z.map(G)}}finally{dv--}if(0===dv&&wx(),function F0(s){return void 0!==s.ngSelectorScope}(s)){const Z=Cd(s.ngSelectorScope);R0(h,Z)}if(c.schemas){if(!c.standalone)throw new Error(`The 'schemas' was specified for the ${qe(s)} but is only valid on a component that is standalone.`);h.schemas=c.schemas}else c.standalone&&(h.schemas=[])}return h},configurable:!1})}function N0(s,c){let h=null;H1(s,c||{}),Object.defineProperty(s,Dd,{get:()=>{if(null===h){const y=B0(s,c||{});h=Vr().compileDirective(fa,y.sourceMapUrl,y.metadata)}return h},configurable:!1})}function B0(s,c){const h=s&&s.name,y=`ng:///${h}/\u0275dir.js`,w=Vr(),M=hv(s,c);return M.typeSourceSpan=w.createParseSourceSpan("Directive",h,y),M.usesInheritance&&pv(s),{metadata:M,sourceMapUrl:y}}function H1(s,c){let h=null;Object.defineProperty(s,xs,{get:()=>{if(null===h){const y=B0(s,c),w=Vr();h=w.compileFactory(fa,`ng:///${s.name}/\u0275fac.js`,{name:y.metadata.name,type:y.metadata.type,typeArgumentCount:0,deps:Dt(s),target:w.FactoryTarget.Directive})}return h},configurable:!1})}function Cw(s){return Object.getPrototypeOf(s.prototype)===Object.prototype}function hv(s,c){const h=ht(),y=h.ownPropMetadata(s);return{name:s.name,type:s,selector:void 0!==c.selector?c.selector:null,host:c.host||rr,propMetadata:y,inputs:c.inputs||Jn,outputs:c.outputs||Jn,queries:up(s,y,fv),lifecycle:{usesOnChanges:h.hasLifecycleHook(s,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!Cw(s),exportAs:Cx(c.exportAs),providers:c.providers||null,viewQueries:up(s,y,W1),isStandalone:!!c.standalone,hostDirectives:c.hostDirectives?.map(w=>"function"==typeof w?{directive:w}:w)||null}}function pv(s){const c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;)!xi(h)&&!ui(h)&&dp(h)&&N0(h,null),h=Object.getPrototypeOf(h)}function $1(s){return"string"==typeof s?q1(s):G(s)}function G1(s,c){return{propertyName:s,predicate:$1(c.selector),descendants:c.descendants,first:c.first,read:c.read?c.read:null,static:!!c.static,emitDistinctChangesOnly:!!c.emitDistinctChangesOnly}}function up(s,c,h){const y=[];for(const w in c)if(c.hasOwnProperty(w)){const M=c[w];M.forEach(A=>{if(h(A)){if(!A.selector)throw new Error(`Can't construct a query for the property "${w}" of "${qe(s)}" since the query selector wasn't defined.`);if(M.some(mv))throw new Error("Cannot combine @Input decorators with query decorators");y.push(G1(w,A))}})}return y}function Cx(s){return void 0===s?null:q1(s)}function fv(s){const c=s.ngMetadataName;return"ContentChild"===c||"ContentChildren"===c}function W1(s){const c=s.ngMetadataName;return"ViewChild"===c||"ViewChildren"===c}function mv(s){return"Input"===s.ngMetadataName}function q1(s){return s.split(",").map(c=>c.trim())}const Sx=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function dp(s){const c=ht();if(Sx.some(y=>c.hasLifecycleHook(s,y)))return!0;const h=c.propMetadata(s);for(const y in h){const w=h[y];for(let M=0;M<w.length;M++){const A=w[M],L=A.ngMetadataName;if(mv(A)||fv(A)||W1(A)||"Output"===L||"HostBinding"===L||"HostListener"===L)return!0}}return!1}function ag(s,c){let h=null,y=null;Object.defineProperty(s,xs,{get:()=>{if(null===y){const w=Z1(s,c),M=Vr();y=M.compileFactory(fa,`ng:///${w.name}/\u0275fac.js`,{name:w.name,type:w.type,typeArgumentCount:0,deps:Dt(s),target:M.FactoryTarget.Pipe})}return y},configurable:!1}),Object.defineProperty(s,Dl,{get:()=>{if(null===h){const w=Z1(s,c);h=Vr().compilePipe(fa,`ng:///${w.name}/\u0275pipe.js`,w)}return h},configurable:!1})}function Z1(s,c){return{type:s,name:s.name,pipeName:c.name,pure:void 0===c.pure||c.pure,isStandalone:!!c.standalone}}const z0=No("Directive",(s={})=>s,void 0,void 0,(s,c)=>N0(s,c)),Tx=No("Component",(s={})=>({changeDetection:Ii.Default,...s}),z0,void 0,(s,c)=>V1(s,c)),Y1=No("Pipe",s=>({pure:!0,...s}),void 0,void 0,(s,c)=>ag(s,c)),Mx=Ca("Input",s=>({bindingPropertyName:s})),X1=Ca("Output",s=>({bindingPropertyName:s})),Ix=Ca("HostBinding",s=>({hostPropertyName:s})),K1=Ca("HostListener",(s,c)=>({eventName:s,args:c})),Sw=No("NgModule",s=>s,void 0,void 0,(s,c)=>F1(s,c));function j0(...s){}const Q1=new zi("Application Initializer");let gv=(()=>{class s{constructor(h){this.appInits=h,this.resolve=j0,this.reject=j0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,w)=>{this.resolve=y,this.reject=w})}runInitializers(){if(this.initialized)return;const h=[],y=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let w=0;w<this.appInits.length;w++){const M=this.appInits[w]();if(Xh(M))h.push(M);else if(wy(M)){const A=new Promise((L,j)=>{M.subscribe({complete:L,error:j})});h.push(A)}}Promise.all(h).then(()=>{y()}).catch(w=>{this.reject(w)}),0===h.length&&y(),this.initialized=!0}}return s.\u0275fac=function(h){return new(h||s)(Vt(Q1,8))},s.\u0275prov=hn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Dx=new zi("AppId",{providedIn:"root",factory:kx});function kx(){return`${J1()}${J1()}${J1()}`}const Tw={provide:Dx,useFactory:kx,deps:[]};function J1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ax=new zi("Platform Initializer"),Mw=new zi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Iw=new zi("Application Packages Root URL"),Px=new zi("AnimationModuleType");let Dw=(()=>{class s{log(h){console.log(h)}warn(h){console.warn(h)}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=hn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const lg=new zi("LocaleId",{providedIn:"root",factory:()=>Wn(lg,Bt.Optional|Bt.SkipSelf)||function eb(){return typeof $localize<"u"&&$localize.locale||Wr}()}),Ox=new zi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),Gy=new zi("Translations"),Rx=new zi("TranslationsFormat");var ss=(()=>((ss=ss||{})[ss.Error=0]="Error",ss[ss.Warning=1]="Warning",ss[ss.Ignore=2]="Ignore",ss))();class tb{constructor(c,h){this.ngModuleFactory=c,this.componentFactories=h}}let Lx=(()=>{class s{compileModuleSync(h){return new By(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const y=this.compileModuleSync(h),M=ja(vr(h).declarations).reduce((A,L)=>{const j=ui(L);return j&&A.push(new ou(j)),A},[]);return new tb(y,M)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=hn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const nb=new zi("compilerOptions");class Fx{}function Nx(s){sd(Sg(s)),p0(s).forEach(c=>vy(c))}const ib="ng";let rb=!1;function Bx(){rb||(rb=!0,Ml("\u0275setProfiler",Ld),Ml("getDirectiveMetadata",ng),Ml("getComponent",ev),Ml("getContext",vs),Ml("getListeners",tv),Ml("getOwningComponent",vu),Ml("getHostElement",ig),Ml("getInjector",ex),Ml("getRootComponents",p0),Ml("getDirectives",Df),Ml("applyChanges",Nx))}function Ml(s,c){if((typeof COMPILED>"u"||!COMPILED)&&si){let y=si[ib];y||(y=si[ib]={}),y[s]=c}}const zx=(()=>Promise.resolve(0))();function V0(s){typeof Zone>"u"?zx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Il{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:y=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ka(!1),this.onMicrotaskEmpty=new Ka(!1),this.onStable=new Ka(!1),this.onError=new Ka(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const w=this;w._nesting=0,w._outer=w._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(w._inner=w._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(w._inner=w._inner.fork(Zone.longStackTraceZoneSpec)),w.shouldCoalesceEventChangeDetection=!y&&h,w.shouldCoalesceRunChangeDetection=y,w.lastRequestAnimationFrameId=-1,w.nativeRequestAnimationFrame=function jx(){let s=si.requestAnimationFrame,c=si.cancelAnimationFrame;if(typeof Zone<"u"&&s&&c){const h=s[Zone.__symbol__("OriginalDelegate")];h&&(s=h);const y=c[Zone.__symbol__("OriginalDelegate")];y&&(c=y)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Hx(s){const c=()=>{!function Ux(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(si,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,U0(s),s.isCheckStableRunning=!0,yv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),U0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,y,w,M,A,L)=>{try{return ob(s),h.invokeTask(w,M,A,L)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===M.type||s.shouldCoalesceRunChangeDetection)&&c(),sb(s)}},onInvoke:(h,y,w,M,A,L,j)=>{try{return ob(s),h.invoke(w,M,A,L,j)}finally{s.shouldCoalesceRunChangeDetection&&c(),sb(s)}},onHasTask:(h,y,w,M)=>{h.hasTask(w,M),y===w&&("microTask"==M.change?(s._hasPendingMicrotasks=M.microTask,U0(s),yv(s)):"macroTask"==M.change&&(s.hasPendingMacrotasks=M.macroTask))},onHandleError:(h,y,w,M)=>(h.handleError(w,M),s.runOutsideAngular(()=>s.onError.emit(M)),!1)})}(w)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Il.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(Il.isInAngularZone())throw new K(909,!1)}run(c,h,y){return this._inner.run(c,h,y)}runTask(c,h,y,w){const M=this._inner,A=M.scheduleEventTask("NgZoneEvent: "+w,c,Vx,j0,j0);try{return M.runTask(A,h,y)}finally{M.cancelTask(A)}}runGuarded(c,h,y){return this._inner.runGuarded(c,h,y)}runOutsideAngular(c){return this._outer.run(c)}}const Vx={};function yv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function U0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ob(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function sb(s){s._nesting--,yv(s)}class ab{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ka,this.onMicrotaskEmpty=new Ka,this.onStable=new Ka,this.onError=new Ka}run(c,h,y){return c.apply(h,y)}runGuarded(c,h,y){return c.apply(h,y)}runOutsideAngular(c){return c()}runTask(c,h,y,w){return c.apply(h,y)}}const lb=new zi(""),H0=new zi("");let $0,$x=(()=>{class s{constructor(h,y,w){this._ngZone=h,this.registry=y,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$0||(ub(w),w.addToWindow(y)),this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Il.assertNotInAngularZone(),V0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())V0(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(h)||(clearTimeout(y.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,y,w){let M=-1;y&&y>0&&(M=setTimeout(()=>{this._callbacks=this._callbacks.filter(A=>A.timeoutId!==M),h(this._didWork,this.getPendingTasks())},y)),this._callbacks.push({doneCb:h,timeoutId:M,updateCb:w})}whenStable(h,y,w){if(w&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,y,w),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(h){this.registry.registerApplication(h,this)}unregisterApplication(h){this.registry.unregisterApplication(h)}findProviders(h,y,w){return[]}}return s.\u0275fac=function(h){return new(h||s)(Vt(Il),Vt(cb),Vt(H0))},s.\u0275prov=hn({token:s,factory:s.\u0275fac}),s})(),cb=(()=>{class s{constructor(){this._applications=new Map}registerApplication(h,y){this._applications.set(h,y)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,y=!0){return $0?.findTestabilityInTree(this,h,y)??null}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=hn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ub(s){$0=s}const Sd=!1;let hp=null;const G0=new zi("AllowMultipleToken"),W0=new zi("PlatformDestroyListeners"),db=new zi("appBootstrapListener");function hb(s,c,h){const y=new By(h);return Promise.resolve(y)}function _v(s){return s.isBoundToModule}class Gx{constructor(c,h){this.name=c,this.token=h}}function pb(s){if(hp&&!hp.get(G0,!1))throw new K(400,!1);hp=s;const c=s.get(q0);return Wx(s),c}function Wx(s){const c=s.get(Ax,null);c&&c.forEach(h=>h())}function qx(s){const{rootComponent:c,appProviders:h,platformProviders:y}=s;Sd&&void 0!==c&&function Va(s){if(function Xc(s){if(!ui(s))throw new K(906,`The ${qe(s)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(s),!ui(s).standalone)throw new K(907,`The ${qe(s)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${qe(s)} component has the \`standalone: true\` flag in the decorator.`)}(c);const w=function Pw(s=[]){if(hp)return hp;const c=mb(s);return hp=c,Wx(c),c}(y),M=yb("zone.js",gb());return M.run(()=>{const L=tg([{provide:Il,useValue:M},...h||[]],w,"Environment Injector"),j=L.get(uc,null);if(Sd&&!j)throw new K(402,"No `ErrorHandler` found in the Dependency Injection tree.");let Z;M.runOutsideAngular(()=>{Z=M.onError.subscribe({next:rt=>{j.handleError(rt)}})});const se=()=>L.destroy(),Ie=w.get(W0);return Ie.add(se),L.onDestroy(()=>{Z.unsubscribe(),Ie.delete(se)}),_b(j,M,()=>{const rt=L.get(gv);return rt.runInitializers(),rt.donePromise.then(()=>{Qm(L.get(lg,Wr)||Wr);const Ft=L.get(xv);return void 0!==c&&Ft.bootstrap(c),Ft})})})}function vv(s,c,h=[]){const y=`Platform: ${c}`,w=new zi(y);return(M=[])=>{let A=bv();if(!A||A.injector.get(G0,!1)){const L=[...h,...M,{provide:w,useValue:!0}];s?s(L):pb(mb(L,y))}return fb()}}function fb(s){const c=bv();if(!c)throw new K(401,!1);return c}function mb(s=[],c){return Jc.create({name:c,providers:[{provide:$g,useValue:"platform"},{provide:W0,useValue:new Set([()=>hp=null])},...s]})}function cg(){bv()?.destroy()}function bv(){return hp?.get(q0)??null}let q0=(()=>{class s{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,y){const w=yb(y?.ngZone,gb(y)),M=[{provide:Il,useValue:w}];return w.run(()=>{const A=Jc.create({providers:M,parent:this.injector,name:h.moduleType.name}),L=h.create(A),j=L.injector.get(uc,null);if(!j)throw new K(402,!1);return w.runOutsideAngular(()=>{const Z=w.onError.subscribe({next:se=>{j.handleError(se)}});L.onDestroy(()=>{wv(this._modules,L),Z.unsubscribe()})}),_b(j,w,()=>{const Z=L.injector.get(gv);return Z.runInitializers(),Z.donePromise.then(()=>(Qm(L.injector.get(lg,Wr)||Wr),this._moduleDoBootstrap(L),L))})})}bootstrapModule(h,y=[]){const w=vb({},y);return hb(0,0,h).then(M=>this.bootstrapModuleFactory(M,w))}_moduleDoBootstrap(h){const y=h.injector.get(xv);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(w=>y.bootstrap(w));else{if(!h.instance.ngDoBootstrap)throw new K(-403,!1);h.instance.ngDoBootstrap(y)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y());const h=this._injector.get(W0,null);h&&(h.forEach(y=>y()),h.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(h){return new(h||s)(Vt(Jc))},s.\u0275prov=hn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function gb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}function yb(s,c){let h;return h="noop"===s?new ab:("zone.js"===s?void 0:s)||new Il(c),h}function _b(s,c,h){try{const y=h();return Xh(y)?y.catch(w=>{throw c.runOutsideAngular(()=>s.handleError(w)),w}):y}catch(y){throw c.runOutsideAngular(()=>s.handleError(y)),y}}function vb(s,c){return Array.isArray(c)?c.reduce(vb,s):{...s,...c}}let xv=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(h,y,w){this._zone=h,this._injector=y,this._exceptionHandler=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const M=new Pt.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),A=new Pt.y(L=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{Il.assertNotInAngularZone(),V0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{Il.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{j.unsubscribe(),Z.unsubscribe()}});this.isStable=function Je(...s){const c=(0,Le.yG)(s),h=(0,Le._6)(s,1/0),y=s;return y.length?1===y.length?(0,ge.Xf)(y[0]):(0,p.J)(h)((0,Ge.D)(y,c)):Ee.E}(M,A.pipe(function Oe(s={}){const{connector:c=(()=>new t.x),resetOnError:h=!0,resetOnComplete:y=!0,resetOnRefCountZero:w=!0}=s;return M=>{let A,L,j,Z=0,se=!1,Ie=!1;const rt=()=>{L?.unsubscribe(),L=void 0},xt=()=>{rt(),A=j=void 0,se=Ie=!1},Ft=()=>{const ln=A;xt(),ln?.unsubscribe()};return(0,et.e)((ln,vn)=>{Z++,!Ie&&!se&&rt();const Mn=j=j??c();vn.add(()=>{Z--,0===Z&&!Ie&&!se&&(L=De(Ft,w))}),Mn.subscribe(vn),!A&&Z>0&&(A=new ot.Hp({next:Gn=>Mn.next(Gn),error:Gn=>{Ie=!0,rt(),L=De(xt,h,Gn),Mn.error(Gn)},complete:()=>{se=!0,rt(),L=De(xt,y),Mn.complete()}}),(0,ge.Xf)(ln).subscribe(A))})(M)}}()))}bootstrap(h,y){Sd&&this.warnIfDestroyed();const w=h instanceof _m;if(!this._injector.get(gv).done){const xt="Cannot bootstrap as there are still asynchronous initializers running."+(!w&&Al(h)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new K(405,Sd&&xt)}let A;A=w?h:this._injector.get(Gp).resolveComponentFactory(h),this.componentTypes.push(A.componentType);const L=_v(A)?void 0:this._injector.get(ip),Z=A.create(Jc.NULL,[],y||A.selector,L),se=Z.location.nativeElement,Ie=Z.injector.get(lb,null);return Ie?.registerApplication(se),Z.onDestroy(()=>{this.detachView(Z.hostView),wv(this.components,Z),Ie?.unregisterApplication(se)}),this._loadComponent(Z),Z}tick(){if(Sd&&this.warnIfDestroyed(),this._runningTick)throw new K(101,!1);try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(h))}finally{this._runningTick=!1}}attachView(h){Sd&&this.warnIfDestroyed();const y=h;this._views.push(y),y.attachToAppRef(this)}detachView(h){Sd&&this.warnIfDestroyed();const y=h;wv(this._views,y),y.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h);const y=this._injector.get(db,[]);y.push(...this._bootstrapListeners),y.forEach(w=>w(h))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(h=>h()),this._views.slice().forEach(h=>h.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(h){return Sd&&this.warnIfDestroyed(),this._destroyListeners.push(h),()=>wv(this._destroyListeners,h)}destroy(){if(this._destroyed)throw new K(406,!1);const h=this._injector;h.destroy&&!h.destroyed&&h.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Sd&&this._destroyed&&console.warn(ce(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return s.\u0275fac=function(h){return new(h||s)(Vt(Il),Vt(Xi),Vt(uc))},s.\u0275prov=hn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function wv(s,c){const h=s.indexOf(c);h>-1&&s.splice(h,1)}function Yx(){return!1}function Xx(){}function Kx(s){const c=io(s);if(!c)throw xb(s);return new By(c)}function Qx(s){const c=io(s);if(!c)throw xb(s);return c}function xb(s){return new Error(`No module with ID ${s} loaded`)}let wb=(()=>{class s{}return s.__NG_ELEMENT_ID__=Eb,s})();function Eb(s){return function Jx(s,c,h){if(Pl(s)&&!h){const y=ho(s.index,c);return new Ga(y,y)}return 47&s.type?new Ga(c[to],c):null}(jr(),Zt(),16==(16&s))}class Cb extends wb{}class ew extends Cb{}class tw{constructor(c,h){this.name=c,this.callback=h}}function nw(s){return s.map(c=>c.nativeElement)}class Z0{constructor(c){this.nativeNode=c}get parent(){const c=this.nativeNode.parentNode;return c?new Wy(c):null}get injector(){return ex(this.nativeNode)}get componentInstance(){const c=this.nativeNode;return c&&(ev(c)||vu(c))}get context(){return ev(this.nativeNode)||vs(this.nativeNode)}get listeners(){return tv(this.nativeNode).filter(c=>"dom"===c.type)}get references(){return function f0(s){const c=Bo(s);if(null===c)return{};if(void 0===c.localRefs){const h=c.lView;if(null===h)return{};c.localRefs=function Jl(s,c){const h=s[qt].data[c];if(h&&h.localNames){const y={};let w=h.index+1;for(let M=0;M<h.localNames.length;M+=2)y[h.localNames[M]]=s[w],w++;return y}return null}(h,c.nodeIndex)}return c.localRefs||{}}(this.nativeNode)}get providerTokens(){return function _w(s){const c=Bo(s),h=c?c.lView:null;if(null===h)return[];const y=h[qt],w=y.data[c.nodeIndex],M=[],L=w.directiveEnd;for(let j=1048575&w.providerIndexes;j<L;j++){let Z=y.data[j];bw(Z)&&(Z=Z.type),M.push(Z)}return M}(this.nativeNode)}}class Wy extends Z0{constructor(c){super(c)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const c=Bo(this.nativeNode),h=c?c.lView:null;return null!==h?h[qt].data[c.nodeIndex].value:this.nativeNode.nodeName}get properties(){const c=Bo(this.nativeNode),h=c?c.lView:null;if(null===h)return{};const y=h[qt].data,w=y[c.nodeIndex],M={};return function iw(s,c){if(s){let h=Object.getPrototypeOf(s);const y=Node.prototype;for(;null!==h&&h!==y;){const w=Object.getOwnPropertyDescriptors(h);for(let M in w)if(!M.startsWith("__")&&!M.startsWith("on")){const A=s[M];rw(A)&&(c[M]=A)}h=Object.getPrototypeOf(h)}}}(this.nativeElement,M),function ow(s,c,h,y){let w=c.propertyBindings;if(null!==w)for(let M=0;M<w.length;M++){const A=w[M],j=y[A].split("\ufffd"),Z=j[0];if(j.length>1){let se=j[1];for(let Ie=1;Ie<j.length-1;Ie++)se+=_e(h[A+Ie-1])+j[Ie+1];s[Z]=se}else s[Z]=h[A]}}(M,w,h,y),M}get attributes(){const c={},h=this.nativeElement;if(!h)return c;const y=Bo(h),w=y?y.lView:null;if(null===w)return{};const M=w[qt].data[y.nodeIndex].attrs,A=[];if(M){let L=0;for(;L<M.length;){const j=M[L];if("string"!=typeof j)break;c[j]=M[L+1],A.push(j.toLowerCase()),L+=2}}for(const L of h.attributes)A.includes(L.name)||(c[L.name]=L.value);return c}get styles(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}get classes(){const c={},y=this.nativeElement.className;return("string"!=typeof y?y.baseVal.split(" "):y.split(" ")).forEach(M=>c[M]=!0),c}get childNodes(){const c=this.nativeNode.childNodes,h=[];for(let y=0;y<c.length;y++)h.push(qy(c[y]));return h}get children(){const c=this.nativeElement;if(!c)return[];const h=c.children,y=[];for(let w=0;w<h.length;w++)y.push(qy(h[w]));return y}query(c){return this.queryAll(c)[0]||null}queryAll(c){const h=[];return Sb(this,c,h,!0),h}queryAllNodes(c){const h=[];return Sb(this,c,h,!1),h}triggerEventHandler(c,h){const y=this.nativeNode,w=[];this.listeners.forEach(M=>{if(M.name===c){const A=M.callback;A.call(y,h),w.push(A)}}),"function"==typeof y.eventListeners&&y.eventListeners(c).forEach(M=>{if(-1!==M.toString().indexOf("__ngUnwrap__")){const A=M("__ngUnwrap__");return-1===w.indexOf(A)&&A.call(y,h)}})}}function rw(s){return"string"==typeof s||"boolean"==typeof s||"number"==typeof s||null===s}function Sb(s,c,h,y){const w=Bo(s.nativeNode),M=w?w.lView:null;null!==M?Pf(M[qt].data[w.nodeIndex],M,c,h,y,s.nativeNode):Mb(s.nativeNode,c,h,y)}function Pf(s,c,h,y,w,M){const A=function Ei(s,c){const h=null===s?-1:s.index;return-1!==h?Hr(c[h]):null}(s,c);if(11&s.type){if(Y0(A,h,y,w,M),Pl(s)){const j=ho(s.index,c);j&&j[qt].firstChild&&Pf(j[qt].firstChild,j,h,y,w,M)}else s.child&&Pf(s.child,c,h,y,w,M),A&&Mb(A,h,y,w);const L=c[s.index];no(L)&&Tb(L,h,y,w,M)}else if(4&s.type){const L=c[s.index];Y0(L[Eo],h,y,w,M),Tb(L,h,y,w,M)}else if(16&s.type){const L=c[to],Z=L[Gi].projection[s.projection];if(Array.isArray(Z))for(let se of Z)Y0(se,h,y,w,M);else if(Z){const se=L[Ai];Pf(se[qt].data[Z.index],se,h,y,w,M)}}else s.child&&Pf(s.child,c,h,y,w,M);if(M!==A){const L=2&s.flags?s.projectionNext:s.next;L&&Pf(L,c,h,y,w,M)}}function Tb(s,c,h,y,w){for(let M=wi;M<s.length;M++){const A=s[M],L=A[qt].firstChild;L&&Pf(L,A,c,h,y,w)}}function Y0(s,c,h,y,w){if(w!==s){const M=qy(s);if(!M)return;(y&&M instanceof Wy&&c(M)&&-1===h.indexOf(M)||!y&&c(M)&&-1===h.indexOf(M))&&h.push(M)}}function Mb(s,c,h,y){const w=s.childNodes,M=w.length;for(let A=0;A<M;A++){const L=w[A],j=qy(L);j&&((y&&j instanceof Wy&&c(j)&&-1===h.indexOf(j)||!y&&c(j)&&-1===h.indexOf(j))&&h.push(j),Mb(L,c,h,y))}}const K0="__ng_debug__";function qy(s){return s instanceof Node?(s.hasOwnProperty(K0)||(s[K0]=s.nodeType==Node.ELEMENT_NODE?new Wy(s):new Z0(s)),s[K0]):null}function sw(s){return null}class d{constructor(){}supports(c){return uu(c)}create(c){return new T(c)}}const _=(s,c)=>c;class T{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||_}forEachItem(c){let h;for(h=this._itHead;null!==h;h=h._next)c(h)}forEachOperation(c){let h=this._itHead,y=this._removalsHead,w=0,M=null;for(;h||y;){const A=!y||h&&h.currentIndex<Se(y,w,M)?h:y,L=Se(A,w,M),j=A.currentIndex;if(A===y)w--,y=y._nextRemoved;else if(h=h._next,null==A.previousIndex)w++;else{M||(M=[]);const Z=L-w,se=j-w;if(Z!=se){for(let rt=0;rt<Z;rt++){const xt=rt<M.length?M[rt]:M[rt]=0,Ft=xt+rt;se<=Ft&&Ft<Z&&(M[rt]=xt+1)}M[A.previousIndex]=se-Z}}L!==j&&c(A,L,j)}}forEachPreviousItem(c){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)c(h)}forEachAddedItem(c){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)c(h)}forEachMovedItem(c){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)c(h)}forEachRemovedItem(c){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)c(h)}forEachIdentityChange(c){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)c(h)}diff(c){if(null==c&&(c=[]),!uu(c))throw new K(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let w,M,A,h=this._itHead,y=!1;if(Array.isArray(c)){this.length=c.length;for(let L=0;L<this.length;L++)M=c[L],A=this._trackByFn(L,M),null!==h&&Object.is(h.trackById,A)?(y&&(h=this._verifyReinsertion(h,M,A,L)),Object.is(h.item,M)||this._addIdentityChange(h,M)):(h=this._mismatch(h,M,A,L),y=!0),h=h._next}else w=0,function Bm(s,c){if(Array.isArray(s))for(let h=0;h<s.length;h++)c(s[h]);else{const h=s[Symbol.iterator]();let y;for(;!(y=h.next()).done;)c(y.value)}}(c,L=>{A=this._trackByFn(w,L),null!==h&&Object.is(h.trackById,A)?(y&&(h=this._verifyReinsertion(h,L,A,w)),Object.is(h.item,L)||this._addIdentityChange(h,L)):(h=this._mismatch(h,L,A,w),y=!0),h=h._next,w++}),this.length=w;return this._truncate(h),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,h,y,w){let M;return null===c?M=this._itTail:(M=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null))?(Object.is(c.item,h)||this._addIdentityChange(c,h),this._reinsertAfter(c,M,w)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(y,w))?(Object.is(c.item,h)||this._addIdentityChange(c,h),this._moveAfter(c,M,w)):c=this._addAfter(new P(h,y),M,w),c}_verifyReinsertion(c,h,y,w){let M=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null);return null!==M?c=this._reinsertAfter(M,c._prev,w):c.currentIndex!=w&&(c.currentIndex=w,this._addToMoves(c,w)),c}_truncate(c){for(;null!==c;){const h=c._next;this._addToRemovals(this._unlink(c)),c=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,h,y){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const w=c._prevRemoved,M=c._nextRemoved;return null===w?this._removalsHead=M:w._nextRemoved=M,null===M?this._removalsTail=w:M._prevRemoved=w,this._insertAfter(c,h,y),this._addToMoves(c,y),c}_moveAfter(c,h,y){return this._unlink(c),this._insertAfter(c,h,y),this._addToMoves(c,y),c}_addAfter(c,h,y){return this._insertAfter(c,h,y),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,h,y){const w=null===h?this._itHead:h._next;return c._next=w,c._prev=h,null===w?this._itTail=c:w._prev=c,null===h?this._itHead=c:h._next=c,null===this._linkedRecords&&(this._linkedRecords=new ie),this._linkedRecords.put(c),c.currentIndex=y,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const h=c._prev,y=c._next;return null===h?this._itHead=y:h._next=y,null===y?this._itTail=h:y._prev=h,c}_addToMoves(c,h){return c.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ie),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,h){return c.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class P{constructor(c,h){this.item=c,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class B{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,h){let y;for(y=this._head;null!==y;y=y._nextDup)if((null===h||h<=y.currentIndex)&&Object.is(y.trackById,c))return y;return null}remove(c){const h=c._prevDup,y=c._nextDup;return null===h?this._head=y:h._nextDup=y,null===y?this._tail=h:y._prevDup=h,null===this._head}}class ie{constructor(){this.map=new Map}put(c){const h=c.trackById;let y=this.map.get(h);y||(y=new B,this.map.set(h,y)),y.add(c)}get(c,h){const w=this.map.get(c);return w?w.get(c,h):null}remove(c){const h=c.trackById;return this.map.get(h).remove(c)&&this.map.delete(h),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Se(s,c,h){const y=s.previousIndex;if(null===y)return y;let w=0;return h&&y<h.length&&(w=h[y]),y+c+w}class tt{constructor(){}supports(c){return c instanceof Map||yy(c)}create(){return new vt}}class vt{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let h;for(h=this._mapHead;null!==h;h=h._next)c(h)}forEachPreviousItem(c){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)c(h)}forEachChangedItem(c){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)c(h)}forEachAddedItem(c){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)c(h)}forEachRemovedItem(c){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)c(h)}diff(c){if(c){if(!(c instanceof Map||yy(c)))throw new K(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(c,(y,w)=>{if(h&&h.key===w)this._maybeAddToChanges(h,y),this._appendAfter=h,h=h._next;else{const M=this._getOrCreateRecordForKey(w,y);h=this._insertBeforeOrAppend(h,M)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let y=h;null!==y;y=y._nextRemoved)y===this._mapHead&&(this._mapHead=null),this._records.delete(y.key),y._nextRemoved=y._next,y.previousValue=y.currentValue,y.currentValue=null,y._prev=null,y._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,h){if(c){const y=c._prev;return h._next=c,h._prev=y,c._prev=h,y&&(y._next=h),c===this._mapHead&&(this._mapHead=h),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(c,h){if(this._records.has(c)){const w=this._records.get(c);this._maybeAddToChanges(w,h);const M=w._prev,A=w._next;return M&&(M._next=A),A&&(A._prev=M),w._next=null,w._prev=null,w}const y=new rn(c);return this._records.set(c,y),y.currentValue=h,this._addToAdditions(y),y}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,h){Object.is(h,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=h,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,h){c instanceof Map?c.forEach(h):Object.keys(c).forEach(y=>h(c[y],y))}}class rn{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kt(){return new Jt([new d])}let Jt=(()=>{class s{constructor(h){this.factories=h}static create(h,y){if(null!=y){const w=y.factories.slice();h=h.concat(w)}return new s(h)}static extend(h){return{provide:s,useFactory:y=>s.create(h,y||Kt()),deps:[[s,new nt,new $e]]}}find(h){const y=this.factories.find(w=>w.supports(h));if(null!=y)return y;throw new K(901,!1)}}return s.\u0275prov=hn({token:s,providedIn:"root",factory:Kt}),s})();function Nn(){return new Zn([new tt])}let Zn=(()=>{class s{constructor(h){this.factories=h}static create(h,y){if(y){const w=y.factories.slice();h=h.concat(w)}return new s(h)}static extend(h){return{provide:s,useFactory:y=>s.create(h,y||Nn()),deps:[[s,new nt,new $e]]}}find(h){const y=this.factories.find(w=>w.supports(h));if(y)return y;throw new K(901,!1)}}return s.\u0275prov=hn({token:s,providedIn:"root",factory:Nn}),s})();const Ri=[new tt],Er=new Jt([new d]),Qa=new Zn(Ri),bu=vv(null,"core",[]);let Rs=(()=>{class s{constructor(h){}}return s.\u0275fac=function(h){return new(h||s)(Vt(xv))},s.\u0275mod=kl({type:s}),s.\u0275inj=In({}),s})();function Td(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Md(s){return Vr().compileDirectiveDeclaration(fa,`ng:///${s.type.name}/\u0275fac.js`,s)}function Id(s){nx(s.type,s.decorators,s.ctorParameters??null,s.propDecorators??null)}function Ib(s){return Vr().compileComponentDeclaration(fa,`ng:///${s.type.name}/\u0275cmp.js`,s)}function Zy(s){return Vr(function Of(s){switch(s){case $r.Directive:return"directive";case $r.Component:return"component";case $r.Injectable:return"injectable";case $r.Pipe:return"pipe";case $r.NgModule:return"NgModule"}}(s.target)).compileFactoryDeclaration(fa,`ng:///${s.type.name}/\u0275fac.js`,s)}function Db(s){return Vr().compileInjectableDeclaration(fa,`ng:///${s.type.name}/\u0275prov.js`,s)}function kb(s){return Vr().compileInjectorDeclaration(fa,`ng:///${s.type.name}/\u0275inj.js`,s)}function Pn(s){return Vr().compileNgModuleDeclaration(fa,`ng:///${s.type.name}/\u0275mod.js`,s)}function Yn(s){return Vr().compilePipeDeclaration(fa,`ng:///${s.type.name}/\u0275pipe.js`,s)}function ni(s,c){const h=ui(s),y=c.elementInjector||lo();return new ou(h).create(y,c.projectableNodes,c.hostElement,c.environmentInjector)}function Ki(s){const c=ui(s);if(!c)return null;const h=new ou(c);return{get selector(){return h.selector},get type(){return h.componentType},get inputs(){return h.inputs},get outputs(){return h.outputs},get ngContentSelectors(){return h.ngContentSelectors},get isStandalone(){return c.standalone}}}},582:(_i,gn,ut)=>{"use strict";function Oe(ke,Ne,Ye,Ke){return new(Ye||(Ye=Promise))(function(lt,It){function Wt(sn){try{Rt(Ke.next(sn))}catch(_n){It(_n)}}function ct(sn){try{Rt(Ke.throw(sn))}catch(_n){It(_n)}}function Rt(sn){sn.done?lt(sn.value):function it(lt){return lt instanceof Ye?lt:new Ye(function(It){It(lt)})}(sn.value).then(Wt,ct)}Rt((Ke=Ke.apply(ke,Ne||[])).next())})}function J(ke){return this instanceof J?(this.v=ke,this):new J(ke)}function Y(ke,Ne,Ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,Ke=Ye.apply(ke,Ne||[]),lt=[];return it={},It("next"),It("throw"),It("return"),it[Symbol.asyncIterator]=function(){return this},it;function It(tn){Ke[tn]&&(it[tn]=function(Ln){return new Promise(function(vi,hn){lt.push([tn,Ln,vi,hn])>1||Wt(tn,Ln)})})}function Wt(tn,Ln){try{!function ct(tn){tn.value instanceof J?Promise.resolve(tn.value.v).then(Rt,sn):_n(lt[0][2],tn)}(Ke[tn](Ln))}catch(vi){_n(lt[0][3],vi)}}function Rt(tn){Wt("next",tn)}function sn(tn){Wt("throw",tn)}function _n(tn,Ln){tn(Ln),lt.shift(),lt.length&&Wt(lt[0][0],lt[0][1])}}function Me(ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ye,Ne=ke[Symbol.asyncIterator];return Ne?Ne.call(ke):(ke=function te(ke){var Ne="function"==typeof Symbol&&Symbol.iterator,Ye=Ne&&ke[Ne],Ke=0;if(Ye)return Ye.call(ke);if(ke&&"number"==typeof ke.length)return{next:function(){return ke&&Ke>=ke.length&&(ke=void 0),{value:ke&&ke[Ke++],done:!ke}}};throw new TypeError(Ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(ke),Ye={},Ke("next"),Ke("throw"),Ke("return"),Ye[Symbol.asyncIterator]=function(){return this},Ye);function Ke(lt){Ye[lt]=ke[lt]&&function(It){return new Promise(function(Wt,ct){!function it(lt,It,Wt,ct){Promise.resolve(ct).then(function(Rt){lt({value:Rt,done:Wt})},It)}(Wt,ct,(It=ke[lt](It)).done,It.value)})}}}ut.d(gn,{FC:()=>Y,KL:()=>Me,mG:()=>Oe,qq:()=>J}),"function"==typeof SuppressedError&&SuppressedError}},_i=>{_i(_i.s=306)}]);